webpackJsonp([17],{EmQv:function(t,e){},Oeqv:function(t,e){},Y8M2:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("ngqk"),s=(i.a,{name:"fourthStep",components:{VueCoreImageUpload:i.a},data:function(){return{uploadUrl:"http://zayzsh.zbtdvip.com/api/merchant/good/add/goods/baseInfo",options:{getThumbBoundsFn:function(t){var e=document.querySelectorAll(".previewer-demo-img")[t],a=window.pageYOffset||document.documentElement.scrollTop,i=e.getBoundingClientRect();return{x:i.left,y:i.top+a,w:i.width}}},baseInfo:{imagesInfo:[{imageItems:[]},{imageItems:[]},{imageItems:[]},{imageItems:[]},{imageItems:[]},{imageItems:[]}]}}},created:function(){this.getBaseData()},methods:{sendData:function(t){var e=this;this.$vux.loading.show({text:"加载中..."});var a="";a=0==t?"房源信息保存成功":"房源发布成功",this.baseInfo.operate=t,this.$http.fetchPost("/merchant/room/add/imageInfo",this.baseInfo).then(function(t){e.$vux.loading.hide(),200==t.data.code?(e.$vux.toast.show({text:a,position:"middle"}),e.$router.go(-1)):e.$vux.toast.show({text:t.data.message,position:"middle",type:"warn"})})},deletePic:function(t,e){this.baseInfo.imagesInfo[t].imageItems.splice(e,1)},getBaseData:function(){var t=this;this.$http.fetchGet("/merchant/room/get/imageInfo",{roomId:this.$route.query.params.id}).then(function(e){t.baseInfo=e.data.data})},getBack:function(){this.$router.replace({name:"thirdStep",query:{params:this.$route.query.params}})},imagechanged0:function(t){var e=this,a=new FormData;a.append("files",t),this.$http.fetchPost("/merchant/common/image/upload",a,{headers:{"Content-Type":"multipart/form-data; boundary=----WebKitFormBoundaryJBcoeGdBCguPERbU"}}).then(function(t){e.baseInfo.imagesInfo[0].imageItems.push({type:0,url:t.data.data.path})})},imagechanged1:function(t){var e=this,a=new FormData;a.append("files",t),this.$http.fetchPost("/merchant/common/image/upload",a,{headers:{"Content-Type":"multipart/form-data; boundary=----WebKitFormBoundaryJBcoeGdBCguPERbU"}}).then(function(t){e.baseInfo.imagesInfo[1].imageItems.push({type:0,url:t.data.data.path})})},imagechanged2:function(t){var e=this,a=new FormData;a.append("files",t),this.$http.fetchPost("/merchant/common/image/upload",a,{headers:{"Content-Type":"multipart/form-data; boundary=----WebKitFormBoundaryJBcoeGdBCguPERbU"}}).then(function(t){e.baseInfo.imagesInfo[2].imageItems.push({type:0,url:t.data.data.path})})},imagechanged3:function(t){var e=this,a=new FormData;a.append("files",t),this.$http.fetchPost("/merchant/common/image/upload",a,{headers:{"Content-Type":"multipart/form-data; boundary=----WebKitFormBoundaryJBcoeGdBCguPERbU"}}).then(function(t){e.baseInfo.imagesInfo[3].imageItems.push({type:0,url:t.data.data.path})})},imagechanged4:function(t){var e=this,a=new FormData;a.append("files",t),this.$http.fetchPost("/merchant/common/image/upload",a,{headers:{"Content-Type":"multipart/form-data; boundary=----WebKitFormBoundaryJBcoeGdBCguPERbU"}}).then(function(t){e.baseInfo.imagesInfo[4].imageItems.push({type:0,url:t.data.data.path})})},imagechanged5:function(t){var e=this,a=new FormData;a.append("files",t),this.$http.fetchPost("/merchant/common/image/upload",a,{headers:{"Content-Type":"multipart/form-data; boundary=----WebKitFormBoundaryJBcoeGdBCguPERbU"}}).then(function(t){e.baseInfo.imagesInfo[5].imageItems.push({type:0,url:t.data.data.path})})}}}),n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"fourthStep"},[a("div",{staticClass:"iosHeader vux-1px-b"},[a("svg",{staticClass:"vux-x-icon vux-x-icon-ios-arrow-left left",attrs:{type:"ios-arrow-left",size:"60",xmlns:"http://www.w3.org/2000/svg",width:"60",height:"60",viewBox:"0 0 512 512"},on:{click:t.getBack}},[a("path",{attrs:{d:"M352 115.4L331.3 96 160 256l171.3 160 20.7-19.3L201.5 256z"}})]),t._v(" "),a("span",[t._v("第四步：上传照片")]),t._v(" "),a("span",{staticClass:"right headericon icon iconfont",on:{click:t.getBack}},[t._v("")])]),t._v(" "),t._m(0),t._v(" "),a("div",{staticClass:"con"},[t._m(1),t._v(" "),a("div",{staticClass:"titlePic"},[a("div",{staticClass:"titlePic_con vux-1px-b"},[a("div",{staticClass:"lineTitle avater"},[a("span",[t._v("封面")]),t._v(" "),a("span",[t._v("+")]),t._v(" "),a("vue-core-image-upload",{class:["btn","btn-primary"],attrs:{crop:!1,isXhr:!1,inputAccept:"image/*","max-file-size":5242880,url:t.uploadUrl},on:{imagechanged:t.imagechanged0}})],1),t._v(" "),a("div",{staticClass:"tips"},[t._v("封面有且只能上传1张照片，建议使用或卧室横图")]),t._v(" "),t.baseInfo.imagesInfo[0].imageItems.length>0?a("div",{staticClass:"imgs"},t._l(t.baseInfo.imagesInfo[0].imageItems,function(e,i){return a("div",{staticClass:"pics"},[0==e.type?a("img",{staticClass:"previewer-demo-img",attrs:{src:e.url,alt:""}}):t._e(),t._v(" "),a("span",{staticClass:"deleteBtn icon iconfont",on:{click:function(e){return t.deletePic(0,i)}}},[t._v("")])])}),0):t._e()])]),t._v(" "),a("div",{staticClass:"titlePic"},[a("div",{staticClass:"titlePic_con vux-1px-b"},[a("div",{staticClass:"lineTitle avater"},[a("span",[t._v("卧室")]),t._v(" "),a("span",[t._v("+")]),t._v(" "),a("vue-core-image-upload",{class:["btn","btn-primary"],attrs:{crop:!1,isXhr:!1,inputAccept:"image/*","max-file-size":5242880,url:t.uploadUrl},on:{imagechanged:t.imagechanged1}})],1),t._v(" "),t.baseInfo.imagesInfo[1].imageItems.length>0?a("div",{staticClass:"imgs"},t._l(t.baseInfo.imagesInfo[1].imageItems,function(e,i){return a("div",{staticClass:"pics"},[0==e.type?a("img",{staticClass:"previewer-demo-img",attrs:{src:e.url,alt:""}}):t._e(),t._v(" "),a("span",{staticClass:"deleteBtn icon iconfont",on:{click:function(e){return t.deletePic(1,i)}}},[t._v("")])])}),0):t._e()])]),t._v(" "),a("div",{staticClass:"titlePic"},[a("div",{staticClass:"titlePic_con vux-1px-b"},[a("div",{staticClass:"lineTitle avater"},[a("span",[t._v("客厅")]),t._v(" "),a("span",[t._v("+")]),t._v(" "),a("vue-core-image-upload",{class:["btn","btn-primary"],attrs:{crop:!1,isXhr:!1,inputAccept:"image/*","max-file-size":5242880,url:t.uploadUrl},on:{imagechanged:t.imagechanged2}})],1),t._v(" "),t.baseInfo.imagesInfo[2].imageItems.length>0?a("div",{staticClass:"imgs"},t._l(t.baseInfo.imagesInfo[2].imageItems,function(e,i){return a("div",{staticClass:"pics"},[0==e.type?a("img",{staticClass:"previewer-demo-img",attrs:{src:e.url,alt:""}}):t._e(),t._v(" "),a("span",{staticClass:"deleteBtn icon iconfont",on:{click:function(e){return t.deletePic(2,i)}}},[t._v("")])])}),0):t._e()])]),t._v(" "),a("div",{staticClass:"titlePic"},[a("div",{staticClass:"titlePic_con vux-1px-b"},[a("div",{staticClass:"lineTitle avater"},[a("span",[t._v("厨房")]),t._v(" "),a("span",[t._v("+")]),t._v(" "),a("vue-core-image-upload",{class:["btn","btn-primary"],attrs:{crop:!1,isXhr:!1,inputAccept:"image/*","max-file-size":5242880,url:t.uploadUrl},on:{imagechanged:t.imagechanged3}})],1),t._v(" "),t.baseInfo.imagesInfo[3].imageItems.length>0?a("div",{staticClass:"imgs"},t._l(t.baseInfo.imagesInfo[3].imageItems,function(e,i){return a("div",{staticClass:"pics"},[0==e.type?a("img",{staticClass:"previewer-demo-img",attrs:{src:e.url,alt:""}}):t._e(),t._v(" "),a("span",{staticClass:"deleteBtn icon iconfont",on:{click:function(e){return t.deletePic(3,i)}}},[t._v("")])])}),0):t._e()])]),t._v(" "),a("div",{staticClass:"titlePic"},[a("div",{staticClass:"titlePic_con vux-1px-b"},[a("div",{staticClass:"lineTitle avater"},[a("span",[t._v("卫浴")]),t._v(" "),a("span",[t._v("+")]),t._v(" "),a("vue-core-image-upload",{class:["btn","btn-primary"],attrs:{crop:!1,isXhr:!1,inputAccept:"image/*","max-file-size":5242880,url:t.uploadUrl},on:{imagechanged:t.imagechanged4}})],1),t._v(" "),t.baseInfo.imagesInfo[4].imageItems.length>0?a("div",{staticClass:"imgs"},t._l(t.baseInfo.imagesInfo[4].imageItems,function(e,i){return a("div",{staticClass:"pics"},[0==e.type?a("img",{staticClass:"previewer-demo-img",attrs:{src:e.url,alt:""}}):t._e(),t._v(" "),a("span",{staticClass:"deleteBtn icon iconfont",on:{click:function(e){return t.deletePic(4,i)}}},[t._v("")])])}),0):t._e()])]),t._v(" "),a("div",{staticClass:"titlePic"},[a("div",{staticClass:"titlePic_con vux-1px-b"},[a("div",{staticClass:"lineTitle avater"},[a("span",[t._v("其他")]),t._v(" "),a("span",[t._v("+")]),t._v(" "),a("vue-core-image-upload",{class:["btn","btn-primary"],attrs:{crop:!1,isXhr:!1,inputAccept:"image/*","max-file-size":5242880,url:t.uploadUrl},on:{imagechanged:t.imagechanged5}})],1),t._v(" "),t.baseInfo.imagesInfo[5].imageItems.length>0?a("div",{staticClass:"imgs"},t._l(t.baseInfo.imagesInfo[5].imageItems,function(e,i){return a("div",{staticClass:"pics"},[0==e.type?a("img",{staticClass:"previewer-demo-img",attrs:{src:e.url,alt:""}}):t._e(),t._v(" "),a("span",{staticClass:"deleteBtn icon iconfont",on:{click:function(e){return t.deletePic(5,i)}}},[t._v("")])])}),0):t._e()])])]),t._v(" "),a("div",{staticClass:"bottom"},[a("span",{on:{click:function(e){return t.sendData(0)}}},[t._v("保存但不发布")]),t._v(" "),a("span",{on:{click:function(e){return t.sendData(1)}}},[t._v("立即发布")])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"steps"},[e("span")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title"},[e("span",[this._v("终于！还差最后一步")]),this._v(" "),e("span",[this._v("请上传至少5张房源美照，它们将成为您房源最动人的宣传。建议您使用原图，效果更好哦")])])}]};var o=a("VU/8")(s,n,!1,function(t){a("Oeqv"),a("EmQv")},"data-v-ba32497c",null);e.default=o.exports}});
//# sourceMappingURL=17.06305066a4e803b6d928.js.map