webpackJsonp([20],{tt84:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=e("//Fk"),o=e.n(a),n=e("GQaK"),i=e("e66H"),r=e("2FOq"),c=e("63CM"),l=e("/kga"),p=e("ALGc"),m=e("rHil"),d=(c.a,i.a,r.a,p.a,m.a,l.a,1),h={name:"hotelManage",directives:{TransferDom:c.a},components:{Rater:i.a,Previewer:r.a,XTextarea:p.a,Group:m.a,XDialog:l.a},data:function(){return{currentCommentId:"",commentsValue:"",showToast:!1,isMoreData:!0,pulldownMsg:"下拉刷新",pullupMsg:"加载更多",alertHook:"none",baseInfo:{postDetail:{postName:"",postDescription:""},commentInfo:{commentNumber:0,point:0,comments:0}},params:{merchantId:"",page:1,pageSize:10},data3:4.5,data:[],list:[{msrc:"http://ww1.sinaimg.cn/thumbnail/663d3650gy1fplwu9ze86j20m80b40t2.jpg",src:"http://ww1.sinaimg.cn/large/663d3650gy1fplwu9ze86j20m80b40t2.jpg",w:800,h:400},{msrc:"http://ww1.sinaimg.cn/thumbnail/663d3650gy1fplwvqwuoaj20xc0p0t9s.jpg",src:"http://ww1.sinaimg.cn/large/663d3650gy1fplwvqwuoaj20xc0p0t9s.jpg",w:1200,h:900},{msrc:"http://ww1.sinaimg.cn/thumbnail/663d3650gy1fplwwcynw2j20p00b4js9.jpg",src:"http://ww1.sinaimg.cn/large/663d3650gy1fplwwcynw2j20p00b4js9.jpg"},{msrc:"http://ww1.sinaimg.cn/thumbnail/663d3650gy1fplwu9ze86j20m80b40t2.jpg",src:"http://ww1.sinaimg.cn/large/663d3650gy1fplwu9ze86j20m80b40t2.jpg",w:800,h:400},{msrc:"http://ww1.sinaimg.cn/thumbnail/663d3650gy1fplwvqwuoaj20xc0p0t9s.jpg",src:"http://ww1.sinaimg.cn/large/663d3650gy1fplwvqwuoaj20xc0p0t9s.jpg",w:1200,h:900}],previewList:[],options:{getThumbBoundsFn:function(t){var s=document.querySelectorAll(".previewer-demo-img")[t],e=window.pageYOffset||document.documentElement.scrollTop,a=s.getBoundingClientRect();return{x:a.left,y:a.top+e,w:a.width}}}}},methods:{showDialog:function(t){this.currentCommentId=t,this.showToast=!0},replyComment:function(){var t=this;this.commentsValue?this.$http.fetchPost("/merchant/post/add/commentreply",{commentId:this.currentCommentId,merchantId:this.$store.state.merchantId,replyText:this.commentsValue}).then(function(s){200==s.data.code?(t.$vux.toast.show({text:"评论成功",position:"middle",type:"warn"}),t.data.map(function(s){s.id===t.currentCommentId&&(s.replyText=t.commentsValue)}),t.currentCommentId="",t.commentsValue="",t.showToast=!1):t.$vux.toast.show({text:s.data.message,position:"middle",type:"warn"})}):this.$vux.toast.show({text:"请输入内容",position:"middle",type:"warn"})},editHotel:function(){this.$router.push({name:"editHotel"})},coupons:function(){this.$router.push({name:"coupons"})},show:function(t,s){var e=this;this.previewList=this.data[t].commentImageInfo,this.previewList.map(function(t){t.msrc=t.src=t.url,t.w=t.h=0}),this.$nextTick(function(){e.$refs.previewer.show(s)})},getBack:function(){this.$router.go(-1)},getData:function(){var t=this;return new o.a(function(s){setTimeout(function(){t.isMoreData=!1,console.log(t.isMoreData);for(var e=[],a=0;a<26;a++)e.push(d++);s(e)},1e3)})},getInfo:function(){var t=this;this.$http.fetchGet("/merchant/post/get/main",this.params).then(function(s){setTimeout(function(){t.$vux.loading.hide()},500),t.baseInfo=s.data.data,t.data=s.data.data.commentInfo.comments,t.data.length===t.params.pageSize?t.isMoreData=!0:(t.isMoreData=!1,t.$nextTick(function(){t.$refs.list_con.offsetHeight>t.$refs.content.offsetHeight&&(t.$refs.content.style.height=t.$refs.list_con.offsetHeight+2+"px")})),t.initScroll()})},refreshData:function(){var t=this;this.$refs.content.style.height="auto",this.pullupMsg="加载中。。。",this.params.page=1,this.$http.fetchGet("/merchant/post/get/main",this.params).then(function(s){t.baseInfo=s.data.data,t.data=s.data.data.commentInfo.comments,t.data.length===t.params.pageSize?t.isMoreData=!0:(t.isMoreData=!1,t.$nextTick(function(){t.$refs.list_con.offsetHeight>t.$refs.content.offsetHeight&&(t.$refs.content.style.height=t.$refs.list_con.offsetHeight+2+"px")})),t.pullupMsg="加载更多",t.scroll.refresh()})},loadMoreData:function(){var t=this;this.data.length<this.params.pageSize||this.data.length<this.params.pageSize*this.params.page?this.isMoreData=!1:(this.$vux.loading.show({text:"加载中..."}),this.params.page++,this.$http.fetchGet("/merchant/post/get/main",this.params).then(function(s){setTimeout(function(){t.$vux.loading.hide()},500),t.baseInfo=s.data.data,t.data.length===t.params.pageSize?t.isMoreData=!0:t.isMoreData=!1,s.data.data.commentInfo.comments.length>0?s.data.data.commentInfo.comments.map(function(s){t.data.push(s)}):t.isMoreData=!1,t.pulldownMsg="下拉刷新",t.scroll.refresh()}))},initScroll:function(){var t=this;this.$nextTick(function(){t.scroll=new n.a(t.$refs.wrapper,{probeType:1,click:!0}),t.scroll.on("scroll",function(s){s.y>30&&(t.pulldownMsg="释放立即刷新")}),t.scroll.on("touchEnd",function(s){s.y>30?t.refreshData():s.y<t.scroll.maxScrollY-30&&t.loadMoreData()})})}},created:function(){this.$vux.loading.show({text:"加载中..."}),this.params.merchantId=this.$store.state.merchantId,this.getInfo()}},u={render:function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"hotelManage"},[a("div",{staticClass:"iosHeader"},[a("svg",{staticClass:"vux-x-icon vux-x-icon-ios-arrow-left left",attrs:{type:"ios-arrow-left",size:"60",xmlns:"http://www.w3.org/2000/svg",width:"60",height:"60",viewBox:"0 0 512 512"},on:{click:t.getBack}},[a("path",{attrs:{d:"M352 115.4L331.3 96 160 256l171.3 160 20.7-19.3L201.5 256z"}})]),t._v(" "),a("span",[t._v("驿站管理")])]),t._v(" "),a("div",{staticClass:"infoTitle"},[t._v("驿站信息")]),t._v(" "),a("div",{staticClass:"hotelInfo",on:{click:t.editHotel}},[a("img",{attrs:{src:e("zsFA"),alt:""}}),t._v(" "),a("div",{staticClass:"description"},[a("span",{domProps:{textContent:t._s(t.baseInfo.postDetail.postName)}}),t._v(" "),a("span",{domProps:{textContent:t._s(t.baseInfo.postDetail.postDescription)}})]),t._v(" "),a("svg",{staticClass:"vux-x-icon vux-x-icon-ios-arrow-right infoIcon",attrs:{type:"ios-arrow-right",size:"50",xmlns:"http://www.w3.org/2000/svg",width:"50",height:"50",viewBox:"0 0 512 512"}},[a("path",{attrs:{d:"M160 115.4L180.7 96 352 256 180.7 416 160 396.7 310.5 256z"}})])]),t._v(" "),a("div",{staticClass:"infoTitle secondTitle"},[t._v("优惠券信息")]),t._v(" "),a("div",{staticClass:"coupon",on:{click:t.coupons}},[a("span",[t._v("优惠券")]),t._v(" "),a("div",[a("span",{domProps:{textContent:t._s(t.baseInfo.couponNum+"张")}}),t._v(" "),a("svg",{staticClass:"vux-x-icon vux-x-icon-ios-arrow-right infoIcon",attrs:{type:"ios-arrow-right",size:"50",xmlns:"http://www.w3.org/2000/svg",width:"50",height:"50",viewBox:"0 0 512 512"}},[a("path",{attrs:{d:"M160 115.4L180.7 96 352 256 180.7 416 160 396.7 310.5 256z"}})])])]),t._v(" "),a("div",{staticClass:"infoTitle thirdTitle"},[a("span",{domProps:{textContent:t._s("驿站评价("+t.baseInfo.commentInfo.commentNumber+"条)")}}),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:t.baseInfo.commentInfo.point,expression:"baseInfo.commentInfo.point"}],domProps:{textContent:t._s(t.baseInfo.commentInfo.point+"分")}})]),t._v(" "),a("div",{ref:"list_con",staticClass:"assess"},[a("div",{ref:"wrapper",staticClass:"wrapper"},[a("div",{staticClass:"bscroll-container"},[a("div",{staticClass:"top-tip"},[a("span",{staticClass:"refresh-hook"},[t._v(t._s(t.pulldownMsg))])]),t._v(" "),a("ul",{ref:"content",staticClass:"content"},[t._l(t.data,function(s,e){return a("li",{staticClass:"item vux-1px-b"},[a("div",{staticClass:"userInfo"},[a("div",{staticClass:"user"},[a("img",{attrs:{src:s.head_image,alt:""}}),t._v(" "),a("div",{staticClass:"nickName"},[a("span",{domProps:{textContent:t._s(s.nick_name)}}),t._v(" "),a("span",{domProps:{textContent:t._s(s.comment_date)}})])]),t._v(" "),a("div",{staticClass:"rater"},[a("rater",{attrs:{disabled:""},model:{value:s.comment_point,callback:function(e){t.$set(s,"comment_point",e)},expression:"item.comment_point"}})],1)]),t._v(" "),a("div",{staticClass:"description",domProps:{textContent:t._s(s.comment_text)}}),t._v(" "),s.replyText?a("div",{staticClass:"description",staticStyle:{color:"#5d5d5d"},domProps:{textContent:t._s("我："+s.replyText)}}):t._e(),t._v(" "),a("div",{staticClass:"imgs"},t._l(s.commentImageInfo,function(s,o){return a("img",{staticClass:"previewer-demo-img",attrs:{src:s.src,width:"100"},on:{click:function(s){return t.show(e,o)}}})}),0),t._v(" "),s.replyText?t._e():a("div",{staticClass:"reply"},[a("span",{on:{click:function(e){return t.showDialog(s.id)}}},[t._v("回复")])])])}),t._v(" "),t.isMoreData?t._e():a("div",{staticClass:"no_data"},[a("span"),t._v(" "),a("span",[t._v("暂无更多数据")]),t._v(" "),a("span")])],2),t._v(" "),t.isMoreData?a("div",{staticClass:"bottom-tip"},[a("span",{staticClass:"loading-hook"},[t._v(t._s(t.pullupMsg))])]):t._e()])])]),t._v(" "),a("div",{directives:[{name:"transfer-dom",rawName:"v-transfer-dom"}]},[a("previewer",{ref:"previewer",attrs:{list:t.previewList,options:t.options}})],1),t._v(" "),a("div",{directives:[{name:"transfer-dom",rawName:"v-transfer-dom"}]},[a("x-dialog",{staticClass:"dialog-demo",model:{value:t.showToast,callback:function(s){t.showToast=s},expression:"showToast"}},[a("div",{staticClass:"replyComments"},[a("div",{staticClass:"tit"},[a("span",[t._v("回复评论")]),t._v(" "),a("span",{staticClass:"icon iconfont",on:{click:function(s){t.showToast=!1}}},[t._v("")])]),t._v(" "),a("group",[a("x-textarea",{attrs:{placeholder:"请输入内容"},model:{value:t.commentsValue,callback:function(s){t.commentsValue=s},expression:"commentsValue"}})],1),t._v(" "),a("div",{staticClass:"bottom"},[a("span",{on:{click:function(s){t.showToast=!1}}},[t._v("取消")]),t._v(" "),a("span",{on:{click:t.replyComment}},[t._v("确定")])])],1)])],1)])},staticRenderFns:[]};var f=e("VU/8")(h,u,!1,function(t){e("yVLJ")},"data-v-66d5e6bd",null);s.default=f.exports},yVLJ:function(t,s){},zsFA:function(t,s,e){t.exports=e.p+"static/img/test.7f2f298.png"}});
//# sourceMappingURL=20.02173c94dfc89727bf93.js.map