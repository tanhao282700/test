webpackJsonp([23],{GvUR:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("3EDr"),o=a("/kga"),s=a("pDNl"),n=a("63CM"),c=(n.a,i.a,o.a,s.a,{name:"setPrice",directives:{TransferDom:n.a},components:{InlineCalendar:i.a,XDialog:o.a,XInput:s.a},data:function(){return{value1:"",value:"",timePrice:[],show:!1,chooseData:{day:"",price:""},chooseDataList:[]}},created:function(){this.getData()},methods:{saveData:function(){var t=this;console.log(this.chooseDataList),this.$http.fetchGet("/merchant/room/get/reserveInfo",{roomId:this.$route.query.params.id}).then(function(e){e.data.data.specialDaysPrice=t.chooseDataList,t.$http.fetchPost("/merchant/room/add/reserveInfo",e.data.data).then(function(a){200==e.data.code?(t.$vux.toast.show({text:"价格保存成功",position:"middle"}),t.getBack()):t.$vux.toast.show({text:e.data.message,position:"middle",type:"warn"})})})},changePrice:function(){var t=this,e=!0;this.chooseDataList.map(function(a){a.day===t.chooseData.day&&(e=!1,a.price=chooseData.price)}),e&&this.chooseDataList.push({day:this.chooseData.day,price:this.chooseData.price}),this.timePrice.map(function(e){e.day===t.chooseData.day&&(e.price=t.chooseData.price)}),this.show=!1},selectDate:function(t){var e=this;this.show=!0,this.timePrice.map(function(a){if(a.day===t)return e.chooseData.day=a.day,void(e.chooseData.price="")})},getData:function(){var t=this,e=new Date,a=e.getFullYear(),i=e.getMonth()+1;i<10&&(i="0"+i),this.$http.fetchGet("/merchant/room/get/dayprice",{roomId:this.$route.query.params.id,month:a+"-"+i}).then(function(e){t.timePrice=e.data.data})},changeMonth:function(t,e){var a=this;t.month<10&&(t.month="0"+t.month),this.$http.fetchGet("/merchant/room/get/dayprice",{roomId:this.$route.query.params.id,month:t.year+"-"+t.month}).then(function(t){a.timePrice=t.data.data,a.timePrice.map(function(t){a.chooseDataList.map(function(e){t.day===e.day&&(t.price=e.price)})})})},buildSlotFn:function(t,e,a){for(var i=0;i<this.timePrice.length;i++)if(this.timePrice[i].day===a.formatedDate)return"¥"+this.timePrice[i].price},getBack:function(){this.$router.replace({name:"thirdStep",query:{params:this.$route.query.params}})}}}),r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"setPrice"},[a("div",{staticClass:"iosHeader vux-1px-b"},[a("svg",{staticClass:"vux-x-icon vux-x-icon-ios-arrow-left left",attrs:{type:"ios-arrow-left",size:"60",xmlns:"http://www.w3.org/2000/svg",width:"60",height:"60",viewBox:"0 0 512 512"},on:{click:t.getBack}},[a("path",{attrs:{d:"M352 115.4L331.3 96 160 256l171.3 160 20.7-19.3L201.5 256z"}})]),t._v(" "),a("span",[t._v("设置某日价格")])]),t._v(" "),a("div",{staticClass:"con"},[a("inline-calendar",{ref:"calendar",staticClass:"inline-calendar-demo",attrs:{"show.sync":"false","show-last-month":!1,"show-next-month":!1,"render-function":t.buildSlotFn},on:{"on-view-change":t.changeMonth,"on-select-single-date":t.selectDate},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}})],1),t._v(" "),a("div",{staticClass:"bottom",on:{click:t.saveData}},[t._v("保存")]),t._v(" "),a("div",{directives:[{name:"transfer-dom",rawName:"v-transfer-dom"}]},[a("x-dialog",{staticClass:"dialog-demo",model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[a("div",{staticClass:"priceTit"},[a("span",[t._v("修改价格")]),t._v(" "),a("span",{staticClass:"icon iconfont",on:{click:function(e){t.show=!1}}},[t._v("")])]),t._v(" "),a("div",{staticClass:"priceArea"},[a("span",{domProps:{textContent:t._s(t.chooseData.day)}}),t._v(" "),a("x-input",{attrs:{placeholder:"输入价格"},model:{value:t.chooseData.price,callback:function(e){t.$set(t.chooseData,"price",e)},expression:"chooseData.price"}})],1),t._v(" "),a("div",{staticClass:"priceBottom"},[a("span",{on:{click:function(e){t.show=!1}}},[t._v("取消")]),t._v(" "),a("span",{on:{click:t.changePrice}},[t._v("确定")])])])],1)])},staticRenderFns:[]};var h=a("VU/8")(c,r,!1,function(t){a("liAO"),a("n4xs")},"data-v-4fefe9ae",null);e.default=h.exports},liAO:function(t,e){},n4xs:function(t,e){}});
//# sourceMappingURL=23.fcb5423cfa23f5df1e54.js.map