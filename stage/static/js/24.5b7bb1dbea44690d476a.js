webpackJsonp([24],{UnZs:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("ngqk"),i=e("aTeQ"),o=e("rHil"),n=e("2sLL"),r=e("pDNl"),c=e("ALGc"),p=e("2FOq"),d=e("63CM"),l=(d.a,s.a,p.a,c.a,i.a,r.a,o.a,n.a,{name:"Mine",directives:{TransferDom:d.a},components:{VueCoreImageUpload:s.a,Previewer:p.a,XTextarea:c.a,XSwitch:i.a,XInput:r.a,Group:o.a,XButton:n.a},data:function(){return{newMessage:!0,params:{postName:"",postLocation:"",postLatitude:null,postLongitude:null,postDescription:"",postHeadImage:"",imagesInfo:[]},images:[],previewList:[],uploadUrl:"http://zayzsh.zbtdvip.com/api/merchant/good/add/goods/baseInfo",options:{getThumbBoundsFn:function(t){var a=document.querySelectorAll(".previewer-demo-img")[t],e=window.pageYOffset||document.documentElement.scrollTop,s=a.getBoundingClientRect();return{x:s.left,y:s.top+e,w:s.width}}}}},created:function(){this.$vux.loading.show({text:"加载中..."})},mounted:function(){var t=this.$route.query;console.log(t),t.params?(this.$vux.loading.hide(),this.params=t.params):this.getDate()},methods:{getBack:function(){this.$router.go(-1)},getDate:function(){var t=this,a={merchantId:this.$store.state.merchantId,page:1,pageSize:10};this.$http.fetchGet("/merchant/post/get/main",a).then(function(a){setTimeout(function(){t.$vux.loading.hide()},500),t.params=a.data.data.postDetail})},postData:function(){var t=this;this.$vux.loading.show({text:"加载中..."});var a=this.params;console.log(a),this.$http.fetchPost("/merchant/post/update/merchantInfo",a).then(function(a){t.$vux.loading.hide(),200===a.data.code?t.$vux.toast.show({text:"操作成功",position:"middle"}):t.$vux.toast.show({text:a.data.message,position:"middle",type:"warn"})})},imagechanged_avater:function(t){var a=this,e=new FormData;e.append("files",t),this.$http.fetchPost("/merchant/common/image/upload",e,{headers:{"Content-Type":"multipart/form-data; boundary=----WebKitFormBoundaryJBcoeGdBCguPERbU"}}).then(function(t){a.params.postHeadImage=t.data.data.path})},imageuploaded:function(t){console.log(t)},imagechanged:function(t){var a=this,e=new FormData;e.append("files",t),this.$http.fetchPost("/merchant/common/image/upload",e,{headers:{"Content-Type":"multipart/form-data; boundary=----WebKitFormBoundaryJBcoeGdBCguPERbU"}}).then(function(t){a.params.imagesInfo.push({url:t.data.data.path,type:0,videoCoverImage:""}),a.previewList.push({src:t.data.data.path,msrc:t.data.data.path})})},deletePic:function(t){this.params.imagesInfo.splice(t,1),this.previewList.splice(t,1)},show:function(t){this.$refs.previewer.show(t)},goMap:function(){this.$router.replace({name:"amap",query:{params:this.params}})}}}),m={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"editHotel"},[e("div",{staticClass:"iosHeader vux-1px-b"},[e("svg",{staticClass:"vux-x-icon vux-x-icon-ios-arrow-left left",attrs:{type:"ios-arrow-left",size:"60",xmlns:"http://www.w3.org/2000/svg",width:"60",height:"60",viewBox:"0 0 512 512"},on:{click:t.getBack}},[e("path",{attrs:{d:"M352 115.4L331.3 96 160 256l171.3 160 20.7-19.3L201.5 256z"}})]),t._v(" "),e("span",[t._v("编辑驿站信息")])]),t._v(" "),e("div",{staticClass:"clearfix modal_main"},[e("div",{staticClass:"setting_item avater"},[e("span",[t._v("驿站头像")]),t._v(" "),e("div",{staticClass:"info"},[e("span",[e("img",{attrs:{src:t.params.postHeadImage,alt:""}})]),t._v(" "),e("svg",{staticClass:"vux-x-icon vux-x-icon-ios-arrow-right",attrs:{type:"ios-arrow-right",size:"40",xmlns:"http://www.w3.org/2000/svg",width:"40",height:"40",viewBox:"0 0 512 512"}},[e("path",{attrs:{d:"M160 115.4L180.7 96 352 256 180.7 416 160 396.7 310.5 256z"}})])]),t._v(" "),e("vue-core-image-upload",{class:["btn","btn-primary"],attrs:{crop:!1,isXhr:!1,inputAccept:"image/*","max-file-size":5242880,url:t.uploadUrl},on:{imageuploaded:t.imageuploaded,imagechanged:t.imagechanged_avater}})],1),t._v(" "),e("div",{staticClass:"setting_item"},[e("group",{staticClass:"w_100"},[e("x-input",{attrs:{title:"驿站名称",placeholder:"请输入驿站名称"},model:{value:t.params.postName,callback:function(a){t.$set(t.params,"postName",a)},expression:"params.postName"}})],1)],1),t._v(" "),e("div",{staticClass:"setting_item setting_item_big"},[t._m(0),t._v(" "),e("div",{staticClass:"address"},[e("group",{staticClass:"w_100 address_group"},[e("x-input",{attrs:{title:"",placeholder:"请输入驿站地址"},model:{value:t.params.postLocation,callback:function(a){t.$set(t.params,"postLocation",a)},expression:"params.postLocation"}})],1),t._v(" "),e("i",{staticClass:"iconfont icon-dingweiweizhi",on:{click:t.goMap}})],1)]),t._v(" "),e("div",{staticClass:"setting_item setting_item_big",staticStyle:{height:"3.6rem"}},[t._m(1),t._v(" "),e("div",{staticClass:"address"},[e("group",{staticClass:"w_100"},[e("x-textarea",{attrs:{max:200,name:"description",placeholder:"请输入驿站简介"},model:{value:t.params.postDescription,callback:function(a){t.$set(t.params,"postDescription",a)},expression:"params.postDescription"}})],1)],1)]),t._v(" "),e("div",{staticClass:"setting_item setting_item_big",staticStyle:{height:"2.6rem"}},[t._m(2),t._v(" "),e("div",{staticClass:"address"},[e("div",{staticClass:"upload"},[e("div",{staticClass:"imgs"},[t._l(t.params.imagesInfo,function(a,s){return e("div",{staticClass:"pics"},[e("img",{staticClass:"previewer-demo-img uploadPics",attrs:{src:a.url,alt:""},on:{click:function(a){return t.show(s)}}}),t._v(" "),e("span",{staticClass:"deleteBtn icon iconfont",on:{click:function(a){return t.deletePic(s)}}},[t._v("")])])}),t._v(" "),e("div",{staticClass:"pics upload_button"},[e("vue-core-image-upload",{class:["btn","btn-primary"],attrs:{crop:!1,isXhr:!1,inputAccept:"image/*","max-file-size":5242880,url:t.uploadUrl},on:{imageuploaded:t.imageuploaded,imagechanged:t.imagechanged}},[e("div",{staticClass:"pic_btn"},[e("span"),t._v(" "),e("span",[t._v("上传照片")])])])],1)],2)])])])]),t._v(" "),e("div",{staticClass:"bottom",on:{click:t.postData}},[t._v("保存")]),t._v(" "),e("div",{directives:[{name:"transfer-dom",rawName:"v-transfer-dom"}]},[e("previewer",{ref:"previewer",attrs:{list:t.previewList,options:t.options}})],1)])},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"w_100"},[a("span",[this._v("驿站地址")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"w_100"},[a("span",[this._v("驿站简介")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"w_100"},[a("span",[this._v("视频/图片")])])}]};var u=e("VU/8")(l,m,!1,function(t){e("i7u9"),e("zYqY")},"data-v-39ed74e8",null);a.default=u.exports},i7u9:function(t,a){},zYqY:function(t,a){}});
//# sourceMappingURL=24.5b7bb1dbea44690d476a.js.map