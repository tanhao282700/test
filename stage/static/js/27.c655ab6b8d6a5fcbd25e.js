webpackJsonp([27],{HkWU:function(t,s){},ZODC:function(t,s){},e21K:function(t,s,a){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var e=a("GQaK"),n=a("4FCr"),o=a("pDNl"),i=a("D8a4"),r=(n.a,o.a,i.a,{name:"orderManage",components:{LoadMore:n.a,XInput:o.a,Badge:i.a},data:function(){return{isStateOpen:!1,value:"",isMoreData:!0,data:[],pulldownMsg:"下拉刷新",pullupMsg:"加载更多",alertHook:"none",params:{matchParam:"",merchantId:"",status:99,page:1,pageSize:10},hotelOrderNum:0,goodsOrderNum:0,tabIndex:1}},methods:{changePrice:function(t){this.$router.push({name:"changePrice",query:{id:t}}),event.stopPropagation()},goDetails:function(t){console.log(t),this.$router.push({name:t.path,query:{id:t.id}})},openState:function(){this.isStateOpen=!this.isStateOpen},getBack:function(){this.$router.go(-1)},chooseStatus:function(t){this.$vux.loading.show({text:"加载中..."}),this.params.status=t,this.isStateOpen=!1,this.refreshData()},refreshalert:function(){var t=this;this.alertHook="block",setTimeout(function(){t.alertHook="none"},1e3)},changeTab:function(t){this.params.matchParam="",this.$vux.loading.show({text:"加载中..."}),this.params.status=99,this.tabIndex=t,this.refreshData()},getInitHotelData:function(){var t=this;this.$http.fetchGet("/merchant/order/get/room/list",this.params).then(function(s){setTimeout(function(){t.$vux.loading.hide()},500),t.hotelOrderNum=s.data.data.orderNum,t.data=s.data.data.orderList,t.data.length===t.params.pageSize?t.isMoreData=!0:(t.isMoreData=!1,t.$nextTick(function(){t.$refs.list_con.offsetHeight>t.$refs.content.offsetHeight&&(t.$refs.content.style.height=t.$refs.list_con.offsetHeight+2+"px")})),t.initScroll()})},getInitGoodsData:function(){var t=this;this.$http.fetchGet("/merchant/order/get/goods/list",this.params).then(function(s){t.goodsOrderNum=s.data.data.orderNum})},initScroll:function(){var t=this;this.$nextTick(function(){t.scroll=new e.a(t.$refs.wrapper,{probeType:1,click:!0}),t.scroll.on("scroll",function(s){s.y>30&&(t.pulldownMsg="释放立即刷新")}),t.scroll.on("touchEnd",function(s){s.y>30?t.refreshData():s.y<t.scroll.maxScrollY-30&&t.loadMoreData()})})},refreshData:function(){var t=this;this.$refs.content.style.height="auto",this.pullupMsg="加载中。。。",this.params.page=1;var s="";s=1==this.tabIndex?"/merchant/order/get/room/list":"/merchant/order/get/goods/list",this.$http.fetchGet(s,this.params).then(function(s){setTimeout(function(){t.$vux.loading.hide()},500),1==t.tabIndex?t.hotelOrderNum=s.data.data.orderNum:t.goodsOrderNum=s.data.data.orderNum,t.data=s.data.data.orderList,t.data.length===t.params.pageSize?t.isMoreData=!0:(t.isMoreData=!1,t.$nextTick(function(){t.$refs.list_con.offsetHeight>t.$refs.content.offsetHeight&&(t.$refs.content.style.height=t.$refs.list_con.offsetHeight+2+"px")})),t.pullupMsg="加载更多",t.scroll.refresh()})},loadMoreData:function(){var t=this;if(this.data.length<this.params.pageSize||this.data.length<this.params.pageSize*this.params.page)this.isMoreData=!1;else{this.params.page++;var s="";s=1==this.tabIndex?"/merchant/order/get/room/list":"/merchant/order/get/goods/list",this.$http.fetchGet(s,this.params).then(function(s){1==t.tabIndex?t.hotelOrderNum=s.data.data.orderNum:t.goodsOrderNum=s.data.data.orderNum,t.data.length===t.params.pageSize?t.isMoreData=!0:t.isMoreData=!1,s.data.data.goodsList.length>0?s.data.data.goodsList.map(function(s){t.data.push(s)}):t.isMoreData=!1,t.pulldownMsg="下拉刷新",t.scroll.refresh()})}}},created:function(){this.$vux.loading.show({text:"加载中..."}),this.params.merchantId=this.$store.state.merchantId,1==this.$route.query.status&&(this.params.status=1,this.$router.replace({})),this.getInitHotelData(),this.getInitGoodsData()}}),c={render:function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"orderManage"},[a("div",{staticClass:"iosHeader vux-1px-b"},[a("svg",{staticClass:"vux-x-icon vux-x-icon-ios-arrow-left left",attrs:{type:"ios-arrow-left",size:"60",xmlns:"http://www.w3.org/2000/svg",width:"60",height:"60",viewBox:"0 0 512 512"},on:{click:t.getBack}},[a("path",{attrs:{d:"M352 115.4L331.3 96 160 256l171.3 160 20.7-19.3L201.5 256z"}})]),t._v(" "),a("x-input",{attrs:{placeholder:"输入订单号、客户姓名、客户手机号搜索"},model:{value:t.params.matchParam,callback:function(s){t.$set(t.params,"matchParam",s)},expression:"params.matchParam"}}),t._v(" "),a("span",{staticClass:"right headericon icon iconfont",staticStyle:{"font-size":"0.36rem"},on:{click:t.refreshData}},[t._v("")])],1),t._v(" "),a("div",{staticClass:"tabBar vux-1px-b"},[a("div",{staticClass:"bar",class:{active:1==t.tabIndex},on:{click:function(s){return t.changeTab(1)}}},[a("div",{staticClass:"barInfo"},[a("span",[t._v("驿站")]),t._v(" "),a("badge",{attrs:{text:t.hotelOrderNum}})],1)]),t._v(" "),a("div",{staticClass:"bar",class:{active:2==t.tabIndex},on:{click:function(s){return t.changeTab(2)}}},[a("div",{staticClass:"barInfo"},[a("span",[t._v("商品")]),t._v(" "),a("badge",{attrs:{text:t.goodsOrderNum}})],1)])]),t._v(" "),a("div",{staticClass:"state vux-1px-b"},[a("div",{on:{click:t.openState}},[99==t.params.status?a("span",[t._v("所有状态")]):t._e(),t._v(" "),0==t.params.status?a("span",[t._v("待支付")]):t._e(),t._v(" "),1==t.params.status&&2==t.tabIndex?a("span",[t._v("待发货")]):t._e(),t._v(" "),1==t.params.status&&1==t.tabIndex?a("span",[t._v("待确认")]):t._e(),t._v(" "),2==t.params.status?a("span",[t._v("申请退款")]):t._e(),t._v(" "),3==t.params.status?a("span",[t._v("退款失败")]):t._e(),t._v(" "),4==t.params.status?a("span",[t._v("退款成功")]):t._e(),t._v(" "),5==t.params.status?a("span",[t._v("取消订单")]):t._e(),t._v(" "),6==t.params.status?a("span",[t._v("待点评")]):t._e(),t._v(" "),7==t.params.status?a("span",[t._v("待入住")]):t._e(),t._v(" "),8==t.params.status&&1==t.tabIndex?a("span",[t._v("入住中")]):t._e(),t._v(" "),8==t.params.status&&2==t.tabIndex?a("span",[t._v("待收货")]):t._e(),t._v(" "),9==t.params.status?a("span",[t._v("已完成")]):t._e(),t._v(" "),a("span",{staticClass:"arrow",class:t.isStateOpen?"arrow-down":""})]),t._v(" "),t.isStateOpen?a("ul",{staticClass:"states"},[a("li",{staticClass:"vux-1px-b",on:{click:function(s){return t.chooseStatus(99)}}},[t._v("所有状态")]),t._v(" "),a("li",{staticClass:"vux-1px-b",on:{click:function(s){return t.chooseStatus(0)}}},[t._v("待支付")]),t._v(" "),2==t.tabIndex?a("li",{staticClass:"vux-1px-b",on:{click:function(s){return t.chooseStatus(1)}}},[t._v("待发货")]):t._e(),t._v(" "),1==t.tabIndex?a("li",{staticClass:"vux-1px-b",on:{click:function(s){return t.chooseStatus(1)}}},[t._v("待确认")]):t._e(),t._v(" "),a("li",{staticClass:"vux-1px-b",on:{click:function(s){return t.chooseStatus(2)}}},[t._v("申请退款")]),t._v(" "),a("li",{staticClass:"vux-1px-b",on:{click:function(s){return t.chooseStatus(3)}}},[t._v("退款失败")]),t._v(" "),a("li",{staticClass:"vux-1px-b",on:{click:function(s){return t.chooseStatus(4)}}},[t._v("退款成功")]),t._v(" "),a("li",{staticClass:"vux-1px-b",on:{click:function(s){return t.chooseStatus(5)}}},[t._v("取消订单")]),t._v(" "),a("li",{staticClass:"vux-1px-b",on:{click:function(s){return t.chooseStatus(6)}}},[t._v("待点评")]),t._v(" "),1==t.tabIndex?a("li",{staticClass:"vux-1px-b",on:{click:function(s){return t.chooseStatus(7)}}},[t._v("待入住")]):t._e(),t._v(" "),1==t.tabIndex?a("li",{staticClass:"vux-1px-b",on:{click:function(s){return t.chooseStatus(8)}}},[t._v("入住中")]):t._e(),t._v(" "),2==t.tabIndex?a("li",{staticClass:"vux-1px-b",on:{click:function(s){return t.chooseStatus(8)}}},[t._v("待收货")]):t._e(),t._v(" "),a("li",{staticClass:"vux-1px-b",on:{click:function(s){return t.chooseStatus(9)}}},[t._v("已完成")])]):t._e()]),t._v(" "),a("div",{ref:"list_con",staticClass:"list_con"},[t.isStateOpen?a("div",{staticClass:"shadow"}):t._e(),t._v(" "),a("div",{ref:"wrapper",staticClass:"wrapper"},[a("div",{staticClass:"bscroll-container"},[a("div",{staticClass:"top-tip"},[a("span",{staticClass:"refresh-hook"},[t._v(t._s(t.pulldownMsg))])]),t._v(" "),a("ul",{ref:"content",staticClass:"content"},[t._l(t.data,function(s){return a("li",{staticClass:"item vux-1px-b"},[1==t.tabIndex?a("div",{staticClass:"hotel",on:{click:function(a){return t.goDetails({path:"orderHotel",id:s.orderId})}}},[a("div",{staticClass:"head vux-1px-b"},[a("span",{domProps:{textContent:t._s("订单编号："+s.orderId)}}),t._v(" "),0==s.status?a("span",[t._v("待支付")]):t._e(),t._v(" "),1==s.status?a("span",[t._v("待确认")]):t._e(),t._v(" "),2==s.status?a("span",[t._v("申请退款")]):t._e(),t._v(" "),3==s.status?a("span",[t._v("退款失败")]):t._e(),t._v(" "),4==s.status?a("span",[t._v("退款成功")]):t._e(),t._v(" "),5==s.status?a("span",[t._v("取消订单")]):t._e(),t._v(" "),6==s.status?a("span",[t._v("待点评")]):t._e(),t._v(" "),7==s.status?a("span",[t._v("待入住")]):t._e(),t._v(" "),8==s.status?a("span",[t._v("入住中")]):t._e(),t._v(" "),9==s.status?a("span",[t._v("已完成")]):t._e()]),t._v(" "),a("div",{staticClass:"info vux-1px-b"},[a("div",{staticClass:"name"},[a("span",{domProps:{textContent:t._s(s.customName)}}),t._v(" "),a("span",{domProps:{textContent:t._s(s.contactPhone)}})]),t._v(" "),a("div",{staticClass:"time"},[a("span",[t._v("入离时间：")]),t._v(" "),a("span",{domProps:{textContent:t._s(s.liveStartDate)}}),t._v(" "),a("span",[t._v(" 至 ")]),t._v(" "),a("span",{domProps:{textContent:t._s(s.liveEndDate)}})]),t._v(" "),a("div",{staticClass:"address"},[a("span",[t._v("预定房源：")]),t._v(" "),a("span",{domProps:{textContent:t._s(s.roomTitle)}})])]),t._v(" "),a("div",{staticClass:"botton"},[0==s.status?a("span",[t._v("取消订单")]):t._e()])]):t._e(),t._v(" "),2==t.tabIndex?a("div",{staticClass:"goods",on:{click:function(a){return t.goDetails({path:"orderedGoods",id:s.orderId})}}},[a("div",{staticClass:"head vux-1px-b"},[a("span",{domProps:{textContent:t._s("订单编号："+s.orderId)}}),t._v(" "),0==s.status?a("span",[t._v("待付款")]):t._e(),t._v(" "),1==s.status?a("span",[t._v("待发货")]):t._e(),t._v(" "),2==s.status?a("span",[t._v("申请退款")]):t._e(),t._v(" "),3==s.status?a("span",[t._v("退款失败")]):t._e(),t._v(" "),4==s.status?a("span",[t._v("退款成功")]):t._e(),t._v(" "),5==s.status?a("span",[t._v("取消订单")]):t._e(),t._v(" "),6==s.status?a("span",[t._v("待点评")]):t._e(),t._v(" "),8==s.status?a("span",[t._v("待收货")]):t._e(),t._v(" "),9==s.status?a("span",[t._v("已完成")]):t._e()]),t._v(" "),a("div",{staticClass:"goodsInfo vux-1px-b"},[a("div",{staticClass:"pics"},[a("img",{attrs:{src:s.imageUrl,alt:""}})]),t._v(" "),a("div",{staticClass:"infos"},[a("span",{domProps:{textContent:t._s(s.title)}}),t._v(" "),a("span",{domProps:{textContent:t._s("￥"+s.price)}})])]),t._v(" "),a("div",{staticClass:"botton"},[0==s.status?a("span",[t._v("取消订单")]):t._e()])]):t._e()])}),t._v(" "),t.isMoreData?t._e():a("div",{staticClass:"no_data"},[a("span"),t._v(" "),a("span",[t._v("暂无更多数据")]),t._v(" "),a("span")])],2),t._v(" "),t.isMoreData?a("div",{staticClass:"bottom-tip"},[a("span",{staticClass:"loading-hook"},[t._v(t._s(t.pullupMsg))])]):t._e()])]),t._v(" "),a("div",{staticClass:"alert-hook",style:{display:t.alertHook}},[t._v("刷新成功")])])])},staticRenderFns:[]};var v=a("VU/8")(r,c,!1,function(t){a("ZODC"),a("HkWU")},"data-v-1206008d",null);s.default=v.exports}});
//# sourceMappingURL=27.c655ab6b8d6a5fcbd25e.js.map