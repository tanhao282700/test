webpackJsonp([28],{"/ms/":function(a,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=e("ngqk"),i=e("ALGc"),o=e("rHil"),n=(s.a,i.a,o.a,{name:"addSpecial",components:{VueCoreImageUpload:s.a,XTextarea:i.a,Group:o.a},data:function(){return{uploadUrl:"http://zayzsh.zbtdvip.com/api/merchant/good/add/goods/baseInfo",params:{image_path:"",price:"",title:""},baseInfo:{}}},created:function(){this.getBaseInfo()},methods:{saveData:function(){var a=this;this.params.title?this.params.price?(this.$vux.loading.show({text:"加载中..."}),this.baseInfo.customProjectInfo.push(this.params),this.$http.fetchPost("/merchant/room/add/baseInfo",this.baseInfo).then(function(t){a.$vux.loading.hide(),a.$router.replace({name:"houseAdd",query:{params:a.$route.query.params}})})):this.$vux.toast.show({text:"请填写价格",position:"middle",type:"warn"}):this.$vux.toast.show({text:"请填写标题",position:"middle",type:"warn"})},imagechanged:function(a){var t=this,e=new FormData;e.append("files",a),this.$http.fetchPost("/merchant/common/image/upload",e,{headers:{"Content-Type":"multipart/form-data; boundary=----WebKitFormBoundaryJBcoeGdBCguPERbU"}}).then(function(a){t.params.image_path=a.data.data.path})},getBaseInfo:function(){var a=this;this.$http.fetchGet("/merchant/room/get/baseInfo",{roomId:this.$route.query.params.id}).then(function(t){a.baseInfo=t.data.data,a.baseInfo.roomTypeInfo.map(function(t){if(t.isSelected)return a.baseInfo.roomTypeId=t.id,void(a.baseInfo.roomTypeInfo=[t])}),a.baseInfo.bedModelInfo.map(function(t){if(t.isSelected)return a.baseInfo.bedModelId=t.id,void(a.baseInfo.bedModelInfo=[t])})})},getBack:function(){this.$router.replace({name:"houseAdd",query:{params:this.$route.query.params}})}}}),r={render:function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",{staticClass:"addSpecial"},[e("div",{staticClass:"iosHeader vux-1px-b"},[e("span",[a._v("添加定制项目")]),a._v(" "),e("span",{staticClass:"right headericon icon iconfont",on:{click:a.getBack}},[a._v("")])]),a._v(" "),e("div",{staticClass:"con"},[e("div",{staticClass:"picbox"},[e("div",{staticClass:"upload"},[e("div",{staticClass:"imgs"},[e("div",{staticClass:"pics upload_button"},[e("vue-core-image-upload",{class:["btn","btn-primary"],attrs:{crop:!1,isXhr:!1,"input-of-file":"file","max-file-size":5242880,url:a.uploadUrl},on:{imagechanged:a.imagechanged}},[a.params.image_path?e("img",{staticClass:"aa",attrs:{src:a.params.image_path}}):a._e(),a._v(" "),a.params.image_path?a._e():e("div",{staticClass:"pic_btn"},[e("span"),a._v(" "),e("span",[a._v("上传照片")])])])],1)])])]),a._v(" "),e("div",{staticClass:"textarea1"},[e("div",{staticClass:"addrIcon houseAddAttrArea vux-1px-b"},[e("group",[e("x-textarea",{attrs:{placeholder:"请填写标题","show-counter":!0,max:10},model:{value:a.params.title,callback:function(t){a.$set(a.params,"title",t)},expression:"params.title"}})],1)],1)]),a._v(" "),e("div",{staticClass:"textarea1"},[e("div",{staticClass:"addrIcon houseAddAttrArea"},[e("group",[e("x-textarea",{attrs:{placeholder:"请填写价格"},model:{value:a.params.price,callback:function(t){a.$set(a.params,"price",t)},expression:"params.price"}})],1)],1)])]),a._v(" "),e("div",{staticClass:"bottom",on:{click:a.saveData}},[a._v("保存")])])},staticRenderFns:[]};var c=e("VU/8")(n,r,!1,function(a){e("bJXI"),e("iKRG")},"data-v-02838eb6",null);t.default=c.exports},bJXI:function(a,t){},iKRG:function(a,t){}});
//# sourceMappingURL=28.65d29d11af9cc7026b6f.js.map