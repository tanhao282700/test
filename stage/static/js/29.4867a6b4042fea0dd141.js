webpackJsonp([29],{ZtFi:function(t,e){},rvey:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("rHil"),i=n("2sLL"),a=n("pDNl"),s=n("/kga"),c=(s.a,Boolean,Boolean,String,String,Boolean,String,String,String,String,Number,String,String,String,Boolean,Object,Boolean,String,Boolean,Boolean,{name:"confirm",components:{XDialog:s.a},props:{value:{type:Boolean,default:!1},showInput:{type:Boolean,default:!1},placeholder:{type:String,default:""},theme:{type:String,default:"ios"},hideOnBlur:{type:Boolean,default:!1},title:String,confirmText:String,cancelText:String,maskTransition:{type:String,default:"vux-fade"},maskZIndex:[Number,String],dialogTransition:{type:String,default:"vux-dialog"},content:String,closeOnConfirm:{type:Boolean,default:!0},inputAttrs:Object,showContent:{type:Boolean,default:!0},confirmType:{type:String,default:"primary"},showCancelButton:{type:Boolean,default:!0},showConfirmButton:{type:Boolean,default:!0}},created:function(){this.showValue=this.show,this.value&&(this.showValue=this.value)},watch:{value:function(t){this.showValue=t},showValue:function(t){var e=this;this.$emit("input",t),t&&(this.showInput&&(this.msg="",setTimeout(function(){e.$refs.input&&e.setInputFocus()},300)),this.$emit("on-show"))}},data:function(){return{msg:"",showValue:!1}},methods:{getInputAttrs:function(){return this.inputAttrs||{type:"text"}},setInputValue:function(t){this.msg=t},setInputFocus:function(t){t&&t.preventDefault(),this.$refs.input.focus()},_onConfirm:function(){this.showValue&&(this.closeOnConfirm&&(this.showValue=!1),this.$emit("on-confirm",this.msg))},_onCancel:function(){this.showValue&&(this.showValue=!1,this.$emit("on-cancel"))}}}),r={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"vux-confirm"},[n("x-dialog",{attrs:{"dialog-class":"android"===t.theme?"weui-dialog weui-skin_android":"weui-dialog","mask-transition":t.maskTransition,"dialog-transition":"android"===t.theme?"vux-fade":t.dialogTransition,"hide-on-blur":t.hideOnBlur,"mask-z-index":t.maskZIndex},on:{"on-hide":function(e){return t.$emit("on-hide")}},model:{value:t.showValue,callback:function(e){t.showValue=e},expression:"showValue"}},[t.title?n("div",{staticClass:"weui-dialog__hd",class:{"with-no-content":!t.showContent}},[n("strong",{staticClass:"weui-dialog__title"},[t._v(t._s(t.title))])]):t._e(),t._v(" "),t.showContent?[t.showInput?n("div",{staticClass:"vux-prompt"},["checkbox"===t.getInputAttrs().type?n("input",t._b({directives:[{name:"model",rawName:"v-model",value:t.msg,expression:"msg"}],ref:"input",staticClass:"vux-prompt-msgbox",attrs:{placeholder:t.placeholder,type:"checkbox"},domProps:{checked:Array.isArray(t.msg)?t._i(t.msg,null)>-1:t.msg},on:{touchend:t.setInputFocus,change:function(e){var n=t.msg,o=e.target,i=!!o.checked;if(Array.isArray(n)){var a=t._i(n,null);o.checked?a<0&&(t.msg=n.concat([null])):a>-1&&(t.msg=n.slice(0,a).concat(n.slice(a+1)))}else t.msg=i}}},"input",t.getInputAttrs(),!1)):"radio"===t.getInputAttrs().type?n("input",t._b({directives:[{name:"model",rawName:"v-model",value:t.msg,expression:"msg"}],ref:"input",staticClass:"vux-prompt-msgbox",attrs:{placeholder:t.placeholder,type:"radio"},domProps:{checked:t._q(t.msg,null)},on:{touchend:t.setInputFocus,change:function(e){t.msg=null}}},"input",t.getInputAttrs(),!1)):n("input",t._b({directives:[{name:"model",rawName:"v-model",value:t.msg,expression:"msg"}],ref:"input",staticClass:"vux-prompt-msgbox",attrs:{placeholder:t.placeholder,type:t.getInputAttrs().type},domProps:{value:t.msg},on:{touchend:t.setInputFocus,input:function(e){e.target.composing||(t.msg=e.target.value)}}},"input",t.getInputAttrs(),!1))]):n("div",{staticClass:"weui-dialog__bd"},[t._t("default",[n("div",{domProps:{innerHTML:t._s(t.content)}})])],2)]:t._e(),t._v(" "),n("div",{staticClass:"weui-dialog__ft"},[t.showCancelButton?n("a",{staticClass:"weui-dialog__btn weui-dialog__btn_default",attrs:{href:"javascript:;"},on:{click:t._onCancel}},[t._v(t._s(t.cancelText||"取消"))]):t._e(),t._v(" "),t.showConfirmButton?n("a",{staticClass:"weui-dialog__btn",class:"weui-dialog__btn_"+t.confirmType,attrs:{href:"javascript:;"},on:{click:t._onConfirm}},[t._v(t._s(t.confirmText||"确定"))]):t._e()])],2)],1)},staticRenderFns:[]};var u=n("VU/8")(c,r,!1,function(t){n("vHKd")},null,null).exports,l=n("63CM"),d=(l.a,a.a,o.a,i.a,{name:"accoundBind",directives:{TransferDom:l.a},components:{XInput:a.a,Group:o.a,XButton:i.a,Confirm:u},data:function(){return{bindAccountList:[],isShow:!1,operItem:{name:""}}},created:function(){this.getAccount()},methods:{getWechat:function(){var t=this;window.wechat=function(e,n){t.$vux.loading.show({text:"加载中..."});var o={account:n,openid:e,accountType:t.operItem.accountType,merchantId:t.$store.state.merchantId,operate:0};t.$http.fetchPost("/merchant/center/update/acct",o).then(function(e){setTimeout(function(){t.$vux.loading.hide()},500),200===e.data.code?(t.$vux.toast.show({text:"操作成功",position:"middle"}),t.isShow=!1,t.getAccount()):t.$vux.toast.show({text:e.data.message,position:"middle",type:"warn"})})},window.AndroidListener.onOpenWxListener()},getBack:function(){this.$router.go(-1)},getAccount:function(){var t=this;this.$http.fetchGet("/merchant/center/get/acctlist",{merchantId:this.$store.state.merchantId}).then(function(e){t.bindAccountList=e.data.data.bindAccountList,t.bindAccountList.forEach(function(e){e.name=t.dealAccountType(e.accountType)})})},dealAccountType:function(t){var e="";switch(t){case 0:e="微信";break;case 1:e="支付宝";break;case 2:e="银行卡";break;default:e=""}return e},bind:function(t){this.operItem=t,t.account?this.offBind(t):0==t.accountType?this.getWechat():this.isShow=!0},onConfirm:function(t){t?this.bindPost(t):this.$vux.toast.show({text:"请输入账号",position:"middle",type:"warn"})},offBind:function(t){var e=this;this.$vux.loading.show({text:"加载中..."});var n={account:"",accountType:this.operItem.accountType,openid:t.openid||"",merchantId:this.$store.state.merchantId,operate:1};this.$http.fetchPost("/merchant/center/update/acct",n).then(function(t){e.$vux.loading.hide(),200===t.data.code?(e.$vux.toast.show({text:"操作成功",position:"middle"}),e.isShow=!1,e.getAccount()):e.$vux.toast.show({text:t.data.message,position:"middle",type:"warn"})})},bindPost:function(t){var e=this,n={account:t,accountType:this.operItem.accountType,merchantId:this.$store.state.merchantId,operate:0};this.$http.fetchPost("/merchant/center/update/acct",n).then(function(t){200===t.data.code?(e.$vux.toast.show({text:"操作成功",position:"middle"}),e.isShow=!1,e.getAccount()):e.$vux.toast.show({text:t.data.message,position:"middle",type:"warn"})})},onCancel:function(){this.isShow=!1}}}),h={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"background_gray"},[n("div",{staticClass:"iosHeader vux-1px-b"},[n("svg",{staticClass:"vux-x-icon vux-x-icon-ios-arrow-left left",attrs:{type:"ios-arrow-left",size:"60",xmlns:"http://www.w3.org/2000/svg",width:"60",height:"60",viewBox:"0 0 512 512"},on:{click:t.getBack}},[n("path",{attrs:{d:"M352 115.4L331.3 96 160 256l171.3 160 20.7-19.3L201.5 256z"}})]),t._v(" "),n("span",[t._v("账号绑定")])]),t._v(" "),n("div",{staticClass:"clearfix"},t._l(t.bindAccountList,function(e,o){return n("div",{key:o,staticClass:"setting_item"},[n("span",[t._v(t._s(e.name))]),t._v(" "),n("div",{staticClass:"info"},[n("span",[t._v(t._s(e.account))]),t._v(" "),n("a",{staticClass:"removeBind",on:{click:function(n){return t.bind(e)}}},[t._v(t._s(e.account?"解绑":"绑定"))])])])}),0),t._v(" "),n("div",{directives:[{name:"transfer-dom",rawName:"v-transfer-dom"}]},[n("confirm",{attrs:{"show-input":"",title:t.operItem.name+"账号","input-attrs":{type:"text"}},on:{"on-cancel":t.onCancel,"on-confirm":t.onConfirm},model:{value:t.isShow,callback:function(e){t.isShow=e},expression:"isShow"}})],1)])},staticRenderFns:[]};var p=n("VU/8")(d,h,!1,function(t){n("ZtFi")},"data-v-0049d2e0",null);e.default=p.exports},vHKd:function(t,e){}});
//# sourceMappingURL=29.4867a6b4042fea0dd141.js.map