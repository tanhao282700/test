webpackJsonp([31],{lKUe:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=e("ngqk"),s=(i.a,{name:"goodsAddNextStep",components:{VueCoreImageUpload:i.a},data:function(){return{uploadUrl:"http://zayzsh.zbtdvip.com/api/merchant/good/add/goods/baseInfo",images:"",dataList:[{text:"",type:0},{url:"",type:1}]}},methods:{getBack:function(){this.$router.go(-1)},imagechanged:function(t){var a=this,e=event.target.files[0],i=new FormData;i.append("files",e),this.$http.fetchPost("/merchant/common/image/upload",i,{headers:{"Content-Type":"multipart/form-data; boundary=----WebKitFormBoundaryJBcoeGdBCguPERbU"}}).then(function(e){a.images=e.data.data.path,a.dataList[t].url=e.data.data.path})},addLines:function(){this.dataList.push({text:"",type:0}),this.dataList.push({url:"",type:1})},deleteInfo:function(t){this.dataList.splice(t,1)},sendData:function(t){var a=this;this.$vux.loading.show({text:"加载中..."}),this.$http.fetchPost("/merchant/good/add/goods/detailInfo",{id:this.$route.query.id,operate:t,detailsList:this.dataList}).then(function(e){if(a.$vux.loading.hide(),200===e.data.code){var i="";i=0===t?"商品保存成功":"商品发布成功",a.$vux.toast.show({text:i,position:"middle"}),a.$router.go(-2)}else a.$vux.toast.show({text:e.data.message,position:"middle",type:"warn"})})},getData:function(){var t=this;this.$http.fetchGet("/merchant/good/get/detail",{goodId:this.$route.query.id}).then(function(a){t.dataList=a.data.data.detailsList})}},created:function(){this.$route.query.id&&this.getData()}}),n={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"nextStep"},[e("div",{staticClass:"iosHeader vux-1px-b"},[e("svg",{staticClass:"vux-x-icon vux-x-icon-ios-arrow-left left",attrs:{type:"ios-arrow-left",size:"60",xmlns:"http://www.w3.org/2000/svg",width:"60",height:"60",viewBox:"0 0 512 512"},on:{click:t.getBack}},[e("path",{attrs:{d:"M352 115.4L331.3 96 160 256l171.3 160 20.7-19.3L201.5 256z"}})]),t._v(" "),e("span",[t._v("添加商品")])]),t._v(" "),e("div",{staticClass:"con"},[e("div",{staticClass:"title"},[t._v("商品详情")]),t._v(" "),t._l(t.dataList,function(a,i){return e("div",{staticClass:"items"},[0===a.type?e("div",{staticClass:"txtArea child"},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:a.text,expression:"item.text"}],attrs:{placeholder:"请输入文字"},domProps:{value:a.text},on:{input:function(e){e.target.composing||t.$set(a,"text",e.target.value)}}}),t._v(" "),e("span",{staticClass:"myIcon icon iconfont",on:{click:function(a){return t.deleteInfo(i)}}},[t._v("")])]):t._e(),t._v(" "),1===a.type?e("div",{staticClass:"picArea child"},[e("span",{staticClass:"myIcon icon iconfont",on:{click:function(a){return t.deleteInfo(i)}}},[t._v("")]),t._v(" "),e("div",{staticClass:"pic_con"},[e("vue-core-image-upload",{class:["btn","btn-primary"],attrs:{crop:!1,isXhr:!1,"input-of-file":"file","max-file-size":5242880,url:t.uploadUrl},on:{imagechanged:function(a){return t.imagechanged(i)}}},[e("div",{staticClass:"pic_btn"},[a.url?t._e():e("span"),t._v(" "),a.url?t._e():e("span",[t._v("上传照片")]),t._v(" "),a.url?e("img",{staticClass:"realPic",attrs:{src:a.url,alt:""}}):t._e()])])],1)]):t._e()])}),t._v(" "),e("div",{staticClass:"addBtn",on:{click:t.addLines}},[e("span",{staticClass:"icon iconfont"},[t._v("")]),t._v(" "),e("span",[t._v("继续添加")])])],2),t._v(" "),e("div",{staticClass:"bottom"},[e("span",{on:{click:function(a){return t.sendData(0)}}},[t._v("保存但不发布")]),t._v(" "),e("span",{on:{click:function(a){return t.sendData(1)}}},[t._v("立即发布")])])])},staticRenderFns:[]};var o=e("VU/8")(s,n,!1,function(t){e("nMJM")},"data-v-77903b20",null);a.default=o.exports},nMJM:function(t,a){}});
//# sourceMappingURL=31.b259da0fcb9e355333c2.js.map