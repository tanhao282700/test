webpackJsonp([34],{BF3j:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("ALGc"),i=(s.a,{name:"orderedGoods",components:{XTextarea:s.a},data:function(){return{detail:{checkInDate:"2019-01-02",couponInfo:[],customProjectInfo:[],leaveDate:"2019-01-03",leaveMessage:"我是留言",orderAmt:50,orderId:"",orderStatus:1,refundFailReason:"",refundReason:"",roomInfo:[],scheduleInfo:[],travellerInfo:[],userName:"小白",userPhone:"15700353375"},couponInfo:[{amount:99,couponType:0,title:"满200减20"},{amount:99,couponType:0,title:"满200减20"},{amount:99,couponType:0,title:"满200减20"}],scheduleInfo:[{completeTime:"2019-01-15 15:30",tradeDes:"下单时间"},{completeTime:"2019-01-15 15:30",tradeDes:"付款时间"},{completeTime:"2019-01-15 15:30",tradeDes:"发货时间"}],travellerInfo:[{idCard:"64165416541651461",name:"张三"},{idCard:"64165416541651461",name:"张三"}],customProjectInfo:[{amount:99,number:2,title:"我是标题",url:"/static/img/test.7f2f298.png"},{amount:99,number:2,title:"我是标题",url:"/static/img/test.7f2f298.png"}],roomInfo:[{amount:99,liveDay:2,title:"我是标题",url:"/static/img/test.7f2f298.png"}]}},created:function(){this.$vux.loading.show({text:"加载中..."}),this.detail.travellerInfo=this.travellerInfo,this.detail.couponInfo=this.couponInfo,this.detail.scheduleInfo=this.scheduleInfo,this.detail.customProjectInfo=this.customProjectInfo,this.detail.roomInfo=this.roomInfo,this.getDetail()},methods:{getBack:function(){this.$router.go(-1)},oderSend:function(){this.$router.replace({name:"orderSend",query:{orderId:this.detail.orderId,receiverPhone:this.detail.receiverPhone,senderPhone:this.detail.senderPhone}})},refused:function(){this.detail.refundReason?this.postData(4):this.$vux.toast.show({text:"拒绝理由为必填",position:"middle",type:"warn"})},postData:function(t){var e=this,a={amount:0,operate:t,orderId:this.$route.query.id,refuseReason:this.detail.refundReason};this.$http.fetchPost("/merchant/order/update/room",a).then(function(t){200===t.data.code?(e.$vux.toast.show({text:"操作成功",position:"middle"}),e.getBack()):e.$vux.toast.show({text:t.data.message,position:"middle",type:"warn"})})},getDetail:function(){var t=this;this.$http.fetchGet("/merchant/order/get/room/detail",{orderId:this.$route.query.id}).then(function(e){setTimeout(function(){t.$vux.loading.hide()},500),t.detail=e.data.data})},dealStatus:function(t){var e="";switch(t){case 0:e="待支付";break;case 1:e="待确认";break;case 2:e="申请退款";break;case 3:e="退款失败";break;case 4:e="退款成功";break;case 5:e="取消订单";break;case 6:e="待点评";break;case 7:e="待入住";break;case 8:e="入住中";break;case 9:e="已完成";break;case 99:default:e="所有状态"}return e}}}),n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"orderedGoods"},[a("div",{staticClass:"iosHeader vux-1px-b"},[a("svg",{staticClass:"vux-x-icon vux-x-icon-ios-arrow-left left",attrs:{type:"ios-arrow-left",size:"60",xmlns:"http://www.w3.org/2000/svg",width:"60",height:"60",viewBox:"0 0 512 512"},on:{click:t.getBack}},[a("path",{attrs:{d:"M352 115.4L331.3 96 160 256l171.3 160 20.7-19.3L201.5 256z"}})]),t._v(" "),a("span",[t._v("订单详情")])]),t._v(" "),a("div",{staticClass:"con"},[a("div",{staticClass:"con_content"},[a("div",{staticClass:"price defaultLine vux-1px-b p-lr"},[a("span",{staticClass:"defaultText"},[t._v("订单金额")]),t._v(" "),a("span",{staticClass:"redText"},[t._v("¥"+t._s(t.detail.orderAmt||0))])]),t._v(" "),a("div",{staticClass:"price defaultLine p-lr"},[a("span",{staticClass:"defaultText"},[t._v("订单状态")]),t._v(" "),a("span",{staticClass:"redText"},[t._v(t._s(t.dealStatus(t.detail.orderStatus)))])]),t._v(" "),t.detail.roomInfo?a("div",[t._m(0),t._v(" "),a("div",{staticClass:"orderedHouse"},[a("div",{staticClass:"img"},[a("img",{attrs:{src:t.detail.roomInfo.url,alt:""}})]),t._v(" "),a("div",{staticClass:"info"},[a("p",[t._v(t._s(t.detail.roomInfo.title))]),t._v(" "),a("span",[t._v(t._s(t.detail.roomInfo.liveDay))])]),t._v(" "),a("span",{staticClass:"price redText"},[t._v("¥"+t._s(t.detail.roomInfo.amount))])])]):t._e(),t._v(" "),t.detail.customProjectInfo?a("div",{staticClass:"clearfix"},[t._m(1),t._v(" "),t._l(t.detail.customProjectInfo,function(e,s){return a("div",{key:s,staticClass:"custom orderedHouse"},[a("div",{staticClass:"img"},[a("img",{attrs:{src:e.url,alt:""}})]),t._v(" "),a("div",{staticClass:"info"},[a("p",[t._v(t._s(e.title))]),t._v(" "),a("span",[t._v("x"+t._s(e.number))])]),t._v(" "),a("span",{staticClass:"price redText"},[t._v("¥"+t._s(e.amount))])])})],2):t._e(),t._v(" "),t._m(2),t._v(" "),t._l(t.detail.couponInfo,function(e,s){return a("div",{key:s,staticClass:"price defaultLine p-lr"},[a("span",{staticClass:"defaultText"},[t._v("\n          【"+t._s(0==e.couponType?"商家券":"平台券")+"】\n          "+t._s(e.title)+"\n        ")]),t._v(" "),a("span",{staticClass:"redText"},[t._v("-¥"+t._s(e.amount))])])}),t._v(" "),t._m(3),t._v(" "),a("div",{staticClass:"price defaultLine vux-1px-b p-lr"},[a("span",{staticClass:"defaultText"},[t._v("预定人姓名")]),t._v(" "),a("span",{staticClass:"defaultText"},[t._v(t._s(t.detail.userName))])]),t._v(" "),a("div",{staticClass:"price defaultLine vux-1px-b p-lr"},[a("span",{staticClass:"defaultText"},[t._v("电话号码")]),t._v(" "),a("span",{staticClass:"defaultText"},[t._v(t._s(t.detail.userPhone))])]),t._v(" "),a("div",{staticClass:"price defaultLine vux-1px-b p-lr"},[a("span",{staticClass:"defaultText"},[t._v("入住时间")]),t._v(" "),a("span",{staticClass:"defaultText"},[t._v(t._s(t.detail.checkInDate))])]),t._v(" "),a("div",{staticClass:"price defaultLine vux-1px-b p-lr"},[a("span",{staticClass:"defaultText"},[t._v("离店时间")]),t._v(" "),a("span",{staticClass:"defaultText"},[t._v(t._s(t.detail.leaveDate))])]),t._v(" "),t.detail.travellerInfo?a("div",[t._m(4),t._v(" "),t._l(t.detail.travellerInfo,function(e,s){return a("div",{key:s,staticClass:"price infoLine vux-1px-b p-lr"},[a("span",{staticClass:"defaultText"},[t._v(t._s(e.name))]),t._v(" "),a("span",{staticClass:"defaultText"},[t._v(t._s(e.idCard))])])})],2):t._e(),t._v(" "),a("div",[t._m(5),t._v(" "),a("div",{staticClass:"words"},[t._v("\n          "+t._s(t.detail.leaveMessage)+"\n        ")])]),t._v(" "),2==t.detail.orderStatus?a("div",[t._m(6),t._v(" "),a("div",{staticClass:"words"},[a("group",{staticClass:"w_100"},[a("x-textarea",{attrs:{max:200,name:"description",placeholder:"请输入退款理由"},model:{value:t.detail.refundReason,callback:function(e){t.$set(t.detail,"refundReason",e)},expression:"detail.refundReason"}})],1)],1)]):t._e(),t._v(" "),4==t.detail.orderStatus?a("div",[t._m(7),t._v(" "),a("div",{staticClass:"words"},[t._v("\n          "+t._s(t.detail.refundReason)+"\n        ")])]):t._e(),t._v(" "),3==t.detail.orderStatus?a("div",[t._m(8),t._v(" "),a("div",{staticClass:"words"},[t._v("\n          "+t._s(t.detail.refundFailReason)+"\n        ")])]):t._e(),t._v(" "),a("div",{staticClass:"bottomLine",staticStyle:{"padding-top":"0.2rem"}},[t._v("\n        订单编号："+t._s(t.detail.orderId)+"\n      ")]),t._v(" "),a("div",{staticStyle:{"padding-bottom":"0.2rem"}},t._l(t.detail.scheduleInfo,function(e,s){return a("div",{key:s,staticClass:"bottomLine"},[t._v("\n          "+t._s(e.tradeDes)+"："+t._s(e.completeTime)+"\n        ")])}),0)],2)]),t._v(" "),0==t.detail.orderStatus?a("div",{staticClass:"bottom"},[a("span",{on:{click:function(e){return t.postData(0)}}},[t._v("取消订单")]),t._v(" "),a("span",{on:{click:function(e){return t.postData(5)}}},[t._v("修改价格")])]):t._e(),t._v(" "),1==t.detail.orderStatus?a("div",{staticClass:"bottom"},[a("span",{on:{click:function(e){return t.postData(0)}}},[t._v("取消订单")]),t._v(" "),a("span",{on:{click:function(e){return t.postData(1)}}},[t._v("确认订单")])]):t._e(),t._v(" "),7==t.detail.orderStatus?a("div",{staticClass:"bottom"},[a("span",{on:{click:function(e){return t.postData(0)}}},[t._v("取消订单")]),t._v(" "),a("span",{on:{click:function(e){return t.postData(2)}}},[t._v("确认入住")])]):t._e(),t._v(" "),2==t.detail.orderStatus?a("div",{staticClass:"bottom"},[a("span",{on:{click:function(e){return t.refused(0)}}},[t._v("拒绝退款")]),t._v(" "),a("span",{on:{click:function(e){return t.postData(3)}}},[t._v("同意退款")])]):t._e()])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"defaultTitle defaultText"},[e("span",[this._v("预定房源")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"defaultTitle defaultText"},[e("span",[this._v("定制项目")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"defaultTitle defaultText"},[e("span",[this._v("优惠信息")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"defaultTitle defaultText"},[e("span",[this._v("预定信息")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"defaultTitle defaultText"},[e("span",[this._v("入住人信息")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"defaultTitle defaultText"},[e("span",[this._v("留言")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"defaultTitle defaultText"},[e("span",[this._v("退款理由")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"defaultTitle defaultText"},[e("span",[this._v("退款理由")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"defaultTitle defaultText"},[e("span",[this._v("退款失败理由")])])}]};var o=a("VU/8")(i,n,!1,function(t){a("Y6Tn")},"data-v-5e76f6fa",null);e.default=o.exports},Y6Tn:function(t,e){}});
//# sourceMappingURL=34.0544b04d66cd240ba7e8.js.map