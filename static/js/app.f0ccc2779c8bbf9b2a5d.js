webpackJsonp([1],{"+1Ej":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAgCAYAAAABtRhCAAAAAXNSR0IArs4c6QAAAYdJREFUSA3tlTFKA0EUhrOijXgDQbARCyEHsPME9iIIFoIKFraCnTmElacQuxxBLyBoEbRQLIQYIVm/F3bDMDtvZ3dmYqMPfmbmvXn/tzNks508zy/RF0oRr5icduqCDalg5gOfq0xzV+S8S/+j4XHmhBoboqZijsEaMqEnFWgUxWgujS3ohPVRWZuORk/U1DR1QA9n9SiK0TwzLCYO6IGUMukp9kQNGWEbCJRcH62jCdqbKxDA9IfE0EcCfU8GxGyZQw4ZK8FJuyTvpZASWAG5Eguu5Dxz/8Dktxt6pWOeZBTyNCHAJ0AbSF7qh9ZQ+adpEW/s3SwhzFfRc4v+XP4JmsaQjdslrBzJbaGPpiZNgWMMd0uIPVLbQd9NoE2BxzbEXgPbTwW8ss21NcALH9R3whvNXMsDvK6D1gHvaFzSjLU8PYvoVoNqwBcaVjRTX156kXhUQnvxB3zbPn3GWr3oHbjqrb+HmGWmkRzBXPvm2gl9fcH1vwEM+swE3ulIrrSHfgMqjN4PeikA/+/XBIwAAAAASUVORK5CYII="},"+1Ri":function(t,e){},"+ESX":function(t,e){},"+EqK":function(t,e,a){t.exports=a.p+"static/img/isok.d41b9a7.png"},"+VBa":function(t,e){},"+xX6":function(t,e){},"/RSW":function(t,e){},"/UVY":function(t,e){},"/nQG":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAABflJREFUWAm9l82OG0UUhW9194w9M7YsESwkNkizyAIWWbCCBYryDnkDnoNoeAaWeYMs2bGIWIUtWQShLEZiiZwgWfbEf11VfKeq2207E+FEQEkzbndV3XPuT9U9dnbEiDG6t5ddHbx7FA/XOOfeene4pjp80X7fBwXsyYsMOJ44G84OwLXrR7PZMNpknEEffoGJDv9dZG4xZNaBN8CX14VdL50NVs7my8LOgrNTv793XUZbFNEG/WDzXrTLfrTry2AQMcvRuY3EWxHI4A2wvLUJ4NPSRpvC/LC0k6qwRV3YzIo2WumzKgJzgedgo1ferk94Xnr7eRJs8iKKiCJySGLPiz1weT17Xdp6Udr0orJqVdlyU5nrlWaev1Ba2dSGV64Lb1Z6iytv/ZPa6l5to5vaTs+8De9AqIvGLoktgT1w+w0AvO4BPF8Aujw1V51a8CfmylOwiFwsyVWOgnN46zycaot+bUW5sVivLfbXNjirbQURG0Hwc9+mpCWxnwIVWsp3A+7ngBU9K13PQuxbEfrmrGc+QKioLLqGAGGPoTbixeeKuSV7luYh6ecr6w3MVlPDdrQnrH1o2+pMBLbeK+cKuzwXeO36Vi7P+DwH/NxicU74zwDo4+kJYSdSjBg87/DaLwnMwlx4Y3U8sWpZkgqiPLdEYvY62piTYleurYcuAumYUXAjcj4PVfYc8OAuQBgSgQG8h4T6LoAPCP89gEaZQMS98Jy5p8y9xMdT3lfsdVas8J4TERbB+qtgU4ryiYoyR6Haet+GXgXn8F5hl+cCd3FkofgIkG8B/jqHnvBvA+nu8Hyf+W8g8YxIPSZiJUR4RYFWa4ozepsOeDMNKRV2BTRTyYPkPedcR+0mEn4VXMr5efI8g3+Hkc8A6KKWNm//QUg1Eb8iMp9C+HuIeytczfOG81dzkmq7qOt0p1xTb0QhF5FsjG/yOddRU7XHuo8H5F1hT54LnLz/02BNIqo97E02ZAubsq27RFjNyA8qvkntbMUFo3Ouo+aofqeCs7t49fVx4K1ZEWWP9iYbsiWb2BaGsNIlRxmnLbrbdb1umCw54zrnOmpR1R4puOa4tfaP+dSetBcbsiWbsi0MYTX9BAJcuxq62+tAGvjTJZPOeVA47zGbiaaFR/8TgXucCi4v7gzZlG1hbPvI1UFBVTDDXS6QpqA45zpq22o/GjwvdI5jio2IA7o109UtjG58iGfd7n/haZ9ATTtVY9Hd7nSKueGiLpkPHGmvbklsyaZsC2NnQCD3alM/V0st+VNj0d2u69U5bjiRee8h0OfJhmzJpmwLQ1hpPGruASkZiQn1c09HU1crizX5X2LkKRfK+xPQnrQXG7Ilm7ItDGEJk5FTIBk1rqL1mFQ/V0tVV1NjifYS9s8ozk1mfcR/p7W6ktmbbMiWbGJbGMJqpFtXA5MLwj/LYkL93FVL6L0hfzN4PsabP44jkcBZqz1JN2FDtrApoSIMYTUjE5Buk4abIqOkZCQmCkIX4hvWzXn+C4Pc7e4X0kE+b60JQs6c1mht2sNe2ZAt2ZRtYQgraUVappSJupJdv4AVGm70qrZXKBmJCfVztVTxVWOJ7gcAfiISD9Ilk845c6r2XHC0Y8Lu4oy1EHcoRwj4Hilw6yTRph9nefbloyjsrrOJkQSk3XgbwFRKRmJC/VwtNXU1FI/zv+Lh77zsBIlrBImK1qgbpS55rgj2FtajBsoB+hDdOB4Huy+lnEcisI2C1OulcvQnwgsZJSUjMaF+nlpqjdwqMS5JViLJmiJ2JcXLUSvKNcRgTM4ryMjzDL5OunD4Cd5T8Bz92zWhoiDNplRIw4mElIzEhPp5IBzqaiSHuB+IUrxLopQoFW6DJKPqCbs8b0XpVhm3/pPZ7lGplMxufhP837K8JbJHIukEdKIkevvDRP1cLVVdbXe0P0x0znXUVO2S4sq5znyq+i707da9CLQvMwl924nGf/TT7FYCgu5I7BDRo6Jy649T5g5+nG77DFNt0cnE7ngngd1F+2TamUbItF/bprb9/m7QnSX2N59zplWtd+2RAAAAAElFTkSuQmCC"},"/oIv":function(t,e,a){t.exports=a.p+"static/img/no.81bbe50.png"},0:function(t,e){},"0LWd":function(t,e){},"17rw":function(t,e){},"1MBa":function(t,e){},"1tkK":function(t,e){},"1zPE":function(t,e){},"2+5w":function(t,e,a){"use strict";(function(t){var s=a("mvHQ"),i=a.n(s),n=a("+1Ri"),o=(a.n(n),a("KvKp")),r=a("kArt"),l=a("N6wk"),c=a("Og6n"),d=a("pRIo"),u=a("IoII"),h=a("TIa2"),m=a("d7F3"),p=a("n+yb"),f=a("bC64"),v=a("KUQL"),_=a("KyDa"),g=a("ClXn"),b=a("xfIW"),y=a("yivU");e.a={components:{Table:y.a,WorkInfo:d.a,SelectBox:r.a,TimePickerT:l.a,RoutingTakModdel:v.a,RoutingTask:_.a,RoutingInfo:g.a,AddModel:b.a},data:function(){var t=this;return{tempTitle:"新增",activeName:"first",rowData:{},workH:[],departments:[],query:{department:"",name:""},dialogBoxs:{item:{name:""},state0:0,txt:"是否允许退单"},query2:{time:"10-29",types:[],type:""},names:[],value7:o.a.time(new Date/1e3,5),cant:!1,queryModel:{id:0,systems:[],systemss:[],areas:[],areass:[],examine:[],newNames:[],vName:"",examines:[],taskStatus:[{value:1,label:"启用"},{value:2,label:"停用"}],system:"",area:"",exam:"",taskStatu:"",periods:[{value:0,label:"每天"},{value:1,label:"每周"},{value:2,label:"每月"},{value:3,label:"每年"}],period:"",departments:[],department:"",starttimes:[],starttime:"",limits:[],time_limit:"",devices:[],device:"",datas:[],data:""},table2:{hei:"4.28rem",len:0,data:[],th:[{prop:"serial",label:"序号"},{prop:"sys_name",label:"系统"},{prop:"floor",label:"区域"},{prop:"start_date",label:"开始时间"},{prop:"period",label:"巡检周期",operate:!0,render:function(t,e){var a={item:e.row};return t(p.a,{props:{btnss:a}})}},{prop:"user_name",label:"巡检人"},{prop:"title",label:"专业"},{prop:"time_limit",label:"完成时限"},{prop:"now_state",label:"任务状态",operate:!0,render:function(t,e){var a={fills:e.row.now_state};return t(u.a,{props:{states:a}})}},{prop:"fill",label:"操作",wid:220,operate:!0,render:function(e,a){var s={item:a.row};return e(f.a,{props:{btnss:s},on:{update:t.updateDetail,deletes:t.deleted,changeStatus:t.changeStatus}})}}]},detalrowdata:{},table3:{title:"巡检单详情",tabs:[],hei:488,len:0,dialogBoxs:{item:{name:""},state0:0,txt:"是否允许退单"},data:[],th:[{prop:"serial",label:"序号",wid:60},{prop:"user_name",label:"名称"},{prop:"title",label:"类别"},{prop:"floorname",label:"地点"},{prop:"devicename",label:"设备名称"},{prop:"addtime",label:"派发时间",wid:160},{prop:"descript",label:"内容描述",wid:160},{prop:"now_state",label:"状态",wid:100,operate:!0,render:function(t,e){var a={fills:e.row.now_state};return t(h.a,{props:{state:a}})}},{prop:"fill",label:"操作",wid:210,operate:!0,render:function(e,a){var s={item:a.row};return e(m.a,{props:{btnss:s},on:{agree:t.agree,refult:t.refult}})}}]},table:{hei:328,data:[],th:[{prop:"serial",label:"序号"},{prop:"name",label:"名称"},{prop:"phone",label:"电话",wid:180},{prop:"department",label:"专业岗位"},{prop:"count",label:"派单量"},{prop:"dai",label:"待处理"},{prop:"wei",label:"未接单"},{prop:"wan",label:"已处理"},{prop:"tui",label:"退单申请",wid:146},{prop:"percent",label:"完成率",wid:170,operate:!0,render:function(t,e){var a={fills:e.row.percent};return t(c.a,{props:{btnss:a},on:{}})}}]},infoItem:{info:{},desc:[],localDesc:{},localDesc2:{},infoSend:[],tableData:{hei:260,data:[],th:[]}}}},methods:{change1:function(t){this.query.department=t},change2:function(t){this.query.name=t},changes:function(t){this.value7=t,this.getTableList()},dealWork:function(t){4==t.type?(this.detalrowdata=t.infos,this.detalrowdata.type=t.type,this.$refs.isRefult.show()):this.getDealResult(t)},changeNew:function(t){this.queryModel.vName=t,this.detalrowdata.new_user_id=t},getDealResult:function(t){var e=this;this.$http.post("/pc_ims/admin/write_inspectionlist",{id:t.infos.id,type:t.type,user_id:t.infos.user_id,new_user_id:"",info:t.infos.localDesc.value,form:{list:[]}}).then(function(t){0==t.data.code?(e.$message({type:"success",message:t.data.msg,duration:2e3}),e.$refs.tableInfos2.hide(),e.$refs.dialog.hide()):e.$message({type:"error",message:t.data.msg,duration:2e3})})},dealWorks:function(t,e){var a=this;t.newuser_id||(t.newuser_id=""),e||(e=t.type);var s=void 0;s=t.form?JSON.parse(t.form).list:[],this.$http.post("/pc_ims/admin/write_inspectionlist",{id:t.id,type:e,info:t.descript,user_id:t.user_id,new_user_id:t.newuser_id,form:i()({list:s})}).then(function(t){0==t.data.code?(a.$message({type:"success",message:t.data.msg,duration:2e3}),a.rowClick(a.rowData),a.$refs.tableInfos2.hide(),a.$refs.dialog.hide()):a.$message({type:"error",message:"退单失败。"})})},getDeviceVal:function(t){this.queryModel.device=t.device,this.getDatasList(t.device)},getFloorVal:function(t){console.log(t),this.queryModel.area=t.floor_name,this.queryModel.system=t.sys_id,this.getDeviceList(t.floor_name,t.sys_id)},getSys:function(t){this.getNameList(t),this.getAreaList(t)},getSystemval:function(t){this.queryModel.system=t.sys_id,this.getAreaList(t.sys_id)},update:function(){this.$refs.add.show()},deletes:function(){var t=this.value7.split("-");1==Number(t[1])?Number(t[0])>1&&(Number(t[0]-1)>9?t[0]=t[0]-1:t[0]="0"+Number(t[0]-1),1==t[0]||3==t[0]||5==t[0]||7==t[0]||8==t[0]||10==t[0]||12==t[0]?t[1]=31:4==t[0]||6==t[0]||9==t[0]||11==t[0]?t[1]=30:o.a.time(new Date/1e3,10)%4==0?t[1]=29:t[1]=28):Number(t[1])-1<10?t[1]="0"+(Number(t[1])-1):t[1]=Number(t[1])-1,this.value7=t.join("-"),this.getTableList()},adds:function(){if(!this.cant){var t=this.value7.split("-");(1==t[0]||3==t[0]||5==t[0]||7==t[0]||8==t[0]||10==t[0]||12==t[0])&&31==t[1]||(4==t[0]||6==t[0]||9==t[0]||11==t[0])&&30==t[1]||2==t[0]&&Number(t[0])%4==0&&29==t[1]||2==t[0]&&Number(t[0])%4!=0&&28==t[1]?(t[1]=1,12==t[0]?(t[0]="01",t[1]="01"):Number(t[0])+1>10?(t[0]=Number(t[0])+1,t[1]="01"):(t[0]="0"+(Number(t[0])+1),t[1]="01")):Number(t[1])+1>9?t[1]=Number(t[1])+1:t[1]="0"+(Number(t[1])+1),this.value7=t.join("-"),this.getTableList()}},checkDetail:function(t){this.rowData=t,this.tempTitle="查看",this.$refs.add.show()},updateDetail:function(e){var a=this;this.rowData=e,this.tempTitle="修改",this.$refs.add.show(),this.$http.post("/pc_ims/admin/get_one_temp",{ins_id:e.id}).then(function(e){if(0==e.data.code){var s=JSON.parse(e.data.data.point_info).list,i=[];t.each(s,function(t,e){i.push(e.point_id)}),a.rowData={exam:e.data.data.user_id,data:i,department:e.data.data.department_id,time_limit:e.data.data.time_limit,system:e.data.data.sys_id,area:e.data.data.floor_id,device:e.data.data.device_id,starttime:e.data.data.addtime,endtime:e.data.data.end_date,period:e.data.data.cycle,addr:e.data.data.ins_place,desc:e.data.data.remarks,floor_name:e.data.data.floor_name}}else a.$message({type:"error",message:e.data.msg})})},addDetail:function(t){this.queryModel.id=0,this.rowData={},this.tempTitle="新增",this.$refs.add.show()},cancelAdd:function(){this.$refs.add.hide()},saveAdd:function(t){var e=this;this.$http.post("/pc_ims/set_template",{data:i()(t)}).then(function(t){0==t.data.code?(e.$message({type:"success",message:"操作成功！"}),e.getModelList({sys_id:"",floor_id:"",user_id:"",now_state:""}),e.$refs.add.hide()):e.$message({type:"error",message:t.data.msg})})},changeStatus:function(t,e){t="启动"==t?1:2,this.dealroutState(e.id,t)},deleted:function(t){this.dealroutState(t.id,0)},dealroutState:function(t,e){var a=this;this.$http.post("/pc_ims/admin/change_state",{id:t,state:e}).then(function(t){0==t.data.code?(a.$message({type:"success",message:t.data.msg,duration:2e3}),a.getModelList(a.queryModel)):a.$message({type:"error",message:t.data.msg,duration:2e3})})},rowClick:function(e){var a=this;this.rowData=e,e.type||(e.type=""),e.user_id&&(this.infoItem.user_id=e.user_id),(!e.time||e.time.split("-")[0].length>2)&&(e.time=this.value7),this.$refs.dialog.show(),this.$http.post("/pc_ims/admin/inspectiondata_all",{sys_name:e.type,user_id:this.infoItem.user_id,date:e.time}).then(function(e){if(0==e.data.code){a.table3.len=e.data.count;var s=e.data.data.info;t.each(s,function(t,e){s[t].serial=t+1}),a.table3.data=e.data.data.info,a.table3.tabs=[{name:"今日巡检总数",num:e.data.data.zong},{name:"已完成",num:e.data.data.wan},{name:"未完成",num:e.data.data.wei}]}else a.$message({type:"error",message:e.data.msg})})},agree:function(t,e){this.$refs.isRefult.show(),this.detalrowdata=t,this.detalrowdata.type=e},refult:function(t,e){this.dealWorks(t,e)},submitOk:function(){this.$refs.isRefult.hide(),this.$refs.sendWork2.show(),this.queryModel.vName=""},submitNo:function(){this.$refs.isRefult.hide()},sendWork2:function(){""!=this.queryModel.vName&&this.queryModel.vName?(this.$refs.sendWork2.hide(),this.detalrowdata.newuser_id=this.queryModel.vName,this.dealWorks(this.detalrowdata)):this.$message({type:"error",message:"请选择新工单处理人员",duration:2e3})},tableInfos2Show:function(e){var a=this;this.$http.post("/pc_ims/admin/inspectionlist_info",{ins_id:e.id}).then(function(s){if(0==s.data.code){var i=a.infoItem.user_id;a.infoItem=s.data.data.info,a.infoItem.user_id=i,a.infoItem.vuename="routing",a.infoItem.desc=[{label:"巡检人员",value:a.infoItem.user_name},{label:"电话",value:a.infoItem.user_phone},{label:"巡检类型",value:a.infoItem.title},{label:"设备地点",value:a.infoItem.floorname},{label:"巡检设备",value:a.infoItem.devicename}],4==e.now_state?(a.infoItem.localDesc={label:"现场处理情况",value:a.infoItem.complete_info},a.infoItem.localDesc2={label:"退回原因",value:a.infoItem.backExcuse}):a.infoItem.localDesc={label:"现场处理情况",value:a.infoItem.complete_info},a.infoItem.tableData={},a.infoItem.job_list=s.data.data.inspection_list;var n=[{prop:"serial",label:"序号",wid:60},{prop:"time",label:"日期"}];t.each(s.data.data.zhanshi[0],function(e,a){t.each(a,function(t,e){n.push({prop:"value"+t,label:e.name,type:e.type,select:e.select,point_id:e.point_id})})}),a.infoItem.tableData.th=n;var o=s.data.data.values;t.each(o,function(e,a){t.each(a.value,function(t,s){a["value"+t]=String(s),a.serial=e+1})}),a.infoItem.tableData.data=o}else a.$message({type:"error",message:s.data.msg,duration:2e3})}),this.$refs.tableInfos2.show()},handleClick:function(){var t=this.activeName;this.$router.replace({path:"/AgentManage/routing/"+t})},infoTit:function(t){var e="";switch(t){case-1:e="申请退单";break;case 2:e="处理中"}return e},getTopData:function(){var t=this;this.$http.post("/pc_ims/admin/inspectiondata").then(function(e){0==e.data.code?t.workH=[{id:1,tit:"今日在岗人数",val:e.data.data.zaiban,color:"#b5d7ff"},{id:2,tit:"今日巡检数",val:e.data.data.count,color:"#f38a00"},{id:3,tit:"已完成数量",val:e.data.data.complete,color:"#4ae283"},{id:4,tit:"今日巡检完成率",val:e.data.data.percent+"%",color:"#4ae283"}]:t.$message({type:"error",message:e.data.msg})})},getTableList:function(){var e=this;this.$http.post("/pc_ims/admin/inspectiondata_user",{department_id:this.query.department,user_id:this.query.name,date:this.value7}).then(function(a){0==a.data.code?(t.each(a.data.data,function(t,e){a.data.data[t].serial=t+1}),e.table.data=a.data.data):e.$message({type:"error",message:a.data.msg})})},getModelList:function(e){var a=this;this.$http.post("/pc_ims/get_template",{sys_id:e.system,floor_id:e.area,user_id:e.exam,now_state:e.taskStatu}).then(function(e){0==e.data.code?(t.each(e.data.data,function(t,a){e.data.data[t].serial=t+1}),a.table2.data=e.data.data):a.$message({type:"error",message:e.data.msg})})},getNameList:function(e){var a=this;this.$http.post("/pc_ims/get_user",{department_id:e.department_id}).then(function(s){if(0==s.data.code){var i=s.data.data;t.each(i,function(t,e){i[t].value=i[t].user_id,i[t].label=i[t].truename}),a.names=i,e&&""!=e?(a.queryModel.examine=i,a.queryModel.examines=i):a.queryModel.newNames=i}else a.$message({type:"error",message:s.data.msg})})},getDatasList:function(e){var a=this;this.$http.post("/pc_ims/get_points",{device_id:e}).then(function(e){if(0==e.data.code){var s=e.data.data;t.each(s,function(t,e){s[t].value=s[t].cate_id,s[t].label=s[t].title}),a.queryModel.datas=s}else a.$message({type:"error",message:e.data.msg})})},getDepartList:function(){var e=this;this.$http.post("/pc_ims/get_description").then(function(a){if(0==a.data.code){var s=a.data.data;t.each(s,function(t,e){s[t].value=s[t].id,s[t].label=s[t].title}),e.departments=s,e.queryModel.departments=s}else e.$message({type:"error",message:a.data.msg})})},getSystemList:function(){var e=this;this.$http.post("/pc_ims/get_sysmenu").then(function(a){if(0==a.data.code){var s=a.data.data;t.each(s,function(t,e){s[t].value=s[t].title,s[t].id=s[t].title}),e.query2.types=s}else e.$message({type:"error",message:a.data.msg})})},getSystemIdList:function(){var e=this;this.$http.post("/pc_ims/get_sysmenu").then(function(a){if(0==a.data.code){var s=a.data.data;t.each(s,function(t,e){s[t].value=s[t].id,s[t].label=s[t].title}),e.queryModel.systems=s,e.queryModel.systemss=s}else e.$message({type:"error",message:a.data.msg})})},getAreaList:function(e){var a=this;this.$http.post("/pc_ims/get_floor",{sys_id:e}).then(function(e){if(0==e.data.code){var s=e.data.data;t.each(s,function(t,e){s[t].value=s[t].floor_id,s[t].label=s[t].floor_name}),a.queryModel.areas=s,a.queryModel.areass=s}else a.$message({type:"error",message:e.data.msg})})},getDeviceList:function(e,a){var s=this;this.$http.post("/pc_ims/get_device",{floor_name:e,sys_id:a}).then(function(e){if(0==e.data.code){var a=e.data.data;t.each(a,function(t,e){a[t].value=a[t].id,a[t].label=a[t].title}),s.queryModel.devices=a}else s.$message({type:"error",message:e.data.msg})})}},created:function(){var t=this.$router.history.current.fullPath.split("/AgentManage/routing")[1];this.activeName=""==t?"first":t.split("/")[1]},computed:{crumbs:function(){return["代维系统","巡检"]}},mounted:function(){this.getTopData(),this.getTableList(),this.getModelList(this.queryModel),this.getNameList(""),this.getSystemList(),this.getSystemIdList(),this.getDepartList()}}}).call(e,a("7t+N"))},"2U6G":function(t,e,a){"use strict";var s=a("nmQ6"),i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"baner",class:t.isShowBannerParam?"showBaner":"closeBaner"},[a("div",{staticClass:"head",on:{click:t.showBanerClick}},[a("span",{staticClass:"logo"}),t._v(" "),a("span",{staticClass:"txt"},[t._v("泰立智汇")])]),t._v(" "),a("div",{staticClass:"banerCon",on:{click:t.stopPropa}},[a("el-row",{staticClass:"tac b-box"},[a("el-col",{staticClass:"b-box"},[a("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":"2","background-color":"#061733","text-color":"#fff",router:t.isUserRouter,"active-text-color":"#ffd04b"}},[t.userRouterInfo[14]||t.userRouterInfo[5]||t.userRouterInfo[16]||t.userRouterInfo[1]?a("el-submenu",{attrs:{index:"1"}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-location noLog wisdomManagement"}),t._v(" "),a("span",{staticClass:"textPL"},[t._v("智慧管理")])]),t._v(" "),a("el-menu-item-group",[t.userRouterInfo[14]?a("el-menu-item",{attrs:{index:"/DoorControl"}},[a("span",{staticClass:"textPL"},[t._v("门禁系统")])]):t._e(),t._v(" "),t.userRouterInfo[5]?a("el-menu-item",{attrs:{index:"/VideoSurveillance"}},[a("span",{staticClass:"textPL"},[t._v("视频监控系统")])]):t._e(),t._v(" "),t.userRouterInfo[16]?a("el-menu-item",{attrs:{index:"/fireAlarm"}},[a("span",{staticClass:"textPL"},[t._v("消防系统")])]):t._e(),t._v(" "),t.userRouterInfo[1]?a("el-menu-item",{attrs:{index:"/airConditioner"}},[a("span",{staticClass:"textPL"},[t._v("中央空调系统")])]):t._e()],1)],2):t._e(),t._v(" "),t.userRouterInfo[2]||t.userRouterInfo[17]?a("el-submenu",{attrs:{index:"2"}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-location noLog OperationManagement"}),t._v(" "),a("span",{staticClass:"textPL"},[t._v("运营管理")])]),t._v(" "),a("el-menu-item-group",[t.userRouterInfo[2]?a("el-menu-item",{attrs:{index:"/energy"}},[a("span",{staticClass:"textPL"},[t._v("能源管理系统")])]):t._e(),t._v(" "),t.userRouterInfo[17]?a("el-menu-item",{attrs:{index:"/HotelStatus"}},[a("span",{staticClass:"textPL"},[t._v("营收数据分析")])]):t._e()],1)],2):t._e(),t._v(" "),this.userRouterInfo[12]?a("el-menu-item",{staticClass:"noChildModule",attrs:{index:t.agentPath}},[a("i",{staticClass:"el-icon-location noLog maintainmanagement"}),t._v(" "),a("span",{staticClass:"textPL"},[t._v("运维管理")])]):t._e(),t._v(" "),a("el-menu-item",{staticClass:"noChildModule",attrs:{index:"/alarm"}},[a("i",{staticClass:"el-icon-location noLog alarmmanage"}),t._v(" "),a("span",{staticClass:"textPL"},[t._v("告警管理")])]),t._v(" "),t.isPermissionPath?a("el-menu-item",{staticClass:"noChildModule",attrs:{index:"/permission"}},[a("i",{staticClass:"el-icon-location noLog Authoritymanagement"}),t._v(" "),a("span",{staticClass:"textPL"},[t._v("权限管理")])]):t._e(),t._v(" "),a("el-menu-item",{staticClass:"noChildModule",attrs:{index:"/operationLog"}},[a("i",{staticClass:"el-icon-location noLog operationLogNav"}),t._v(" "),a("span",{staticClass:"textPL"},[t._v("操作日志")])])],1)],1)],1)],1)])},staticRenderFns:[]};var n=function(t){a("KNY7"),a("W95t")},o=a("VU/8")(s.a,i,!1,n,null,null);e.a=o.exports},"2xWZ":function(t,e){},"31FA":function(t,e){},"37oY":function(t,e,a){"use strict";(function(t){e.a={props:{options:{type:Object}},data:function(){return{personInfo:{userinfo:{department:{},department_position:{}},role_info:{}},newPassword1:"",newPassword2:"",oldPassword:""}},components:{},mounted:function(){var e=this;this.personInfo=this.$store.state.userInfoTotal,console.log(this.personInfo),t(".personInfoComponent").on("click",function(t){return t.stopPropagation()}),t(document).on("click",function(){e.options.isPersonInfo=!1,e.options.isEditInfo=!1,e.options.isChangePassword=!1})},methods:{showBanerClick:function(){this.$emit("changeBannerParam",!this.isShowBannerParam)},edit:function(){this.options.isPersonInfo=!1,this.options.isEditInfo=!0},save:function(){var t=this;this.personInfo.userinfo.name?this.$http.post("users_manage/users_updateInfo",{user_id:this.$store.state.userInfoTotal.userinfo.id,name:this.personInfo.userinfo.name}).then(function(e){console.log(e),"0"==e.data.code?(t.$emit("showTips","修改成功！"),t.options.isPersonInfo=!0,t.options.isEditInfo=!1):t.$emit("showTips",e.data.message)}).catch(function(t){console.log(t)}):this.$emit("showTips","请输入姓名！")},changePassword:function(){var t=this;this.oldPassword?this.newPassword1.length<6?this.$emit("showTips","请重新输入长度6位以上密码"):this.newPassword1==this.newPassword2?this.$http.post("users_manage/users_updateLoginPwd",{user_id:this.$store.state.userInfoTotal.userinfo.id,org_pass:this.oldPassword,password:this.newPassword2}).then(function(e){console.log(e),"0"==e.data.code?(t.$emit("showTips","修改成功！"),t.$store.state.userInfoTotal.userinfo.password=t.newPassword2,t.options.isChangePassword=!1,window.location.reload()):t.$emit("showTips",e.data.message)}).catch(function(t){console.log(t)}):this.$emit("showTips","密码不一致，请重新输入"):this.$emit("showTips","请输入原密码")}}}}).call(e,a("7t+N"))},"3RYg":function(t,e){},"3TXG":function(t,e,a){"use strict";(function(t){e.a={data:function(){return{loading:!0,label:{text:"总用电量",type:"电（KW/h）"},columnw:0,energyType:"气",todaySpan:"",releasetime1:"",tableData1:[{dateLab:"区域合计",data:2,index:13,elecMount:"",totalcaost:""}],tableData2:[{dateLab:"部门合计",data:2,index:14}],tableData4:[{dateLab:"月均",data:2,index:15,elecMount:"",totalcaost:""}],tableData3:[],areaList:[],formData:{project_id:1,choice_page:1,query_date:"",sys_menu_id:"",energy_type:"0"}}},mounted:function(){console.log(this.$store.state);var t=new Date;this.formData.query_date=String(t.getFullYear())+(t.getMonth()+1),this.formData.project_id=this.$store.state.projectId,this.formData.sys_menu_id=this.$store.state.sysList[2].sys_menu_id,this.setWidth(),this.getData(),this.getDateSet()},methods:{export1:function(){var t="";if(this.formData.query_date)t=this.formData.query_date;else{var e=new Date;t=String(e.getFullYear())+(e.getMonth()+1)}var a={project_id:this.formData.project_id,choice_page:1,query_date:t,sys_menu_id:this.formData.sys_menu_id,export:!0,energy_type:this.formData.energy_type};this.$http.post("/hotel_energy/statement",a).then(function(t){window.location.href="http://"+t.data})},query:function(){this.loading=!0,0==this.formData.energy_type&&(this.label.type="电（KW/h）",this.label.text="总用电量"),1==this.formData.energy_type&&(this.label.type="水（m³）",this.label.text="总用水量"),2==this.formData.energy_type&&(this.label.type="气（m³）",this.label.text="总用气量"),this.getData()},setWidth:function(){},getData:function(){var e=this;this.$http.post("/hotel_energy/statement",this.formData).then(function(a){if(0==a.data.code){e.tableData3=[];var s=a.data.data.result_data;e.areaList=a.data.data.result_data[0].data;for(var i=0;i<s[1].data.length;i++){var n={};n.index=i+1,n.day=s[1].data[i].area_id,0==s[1].data[i].value[0]?n.elecMount="":n.elecMount=s[1].data[i].value[0],0==s[1].data[i].value[1]?n.totalcaost="":n.totalcaost=s[1].data[i].value[1];for(var o=0;o<s[2].area_monthly_data.length;o++)for(var r=0;r<s[2].area_monthly_data[o].child_data.length;r++)n[s[2].area_monthly_data[o].child_data[r].id+"useage"]=s[2].area_monthly_data[o].child_data[r].detail_use_num[i],n[s[2].area_monthly_data[o].child_data[r].id+"cost"]=s[2].area_monthly_data[o].child_data[r].detail_cost[i];e.tableData3.push(n)}setTimeout(function(){t(".el-table__body").width()>t(".con").width()?t(".con").width(t(".el-table__body").width()):(t(".el-table__header").width(t(".con").width()),t(".el-table__body").width(t(".con").width()),t(".el-table__body").css("padding-right","7px")),t(".firstTab").height("100%"),e.loading=!1},500)}})},getDateSet:function(){var t=new Date,e=t.getFullYear(),a=t.getMonth()+1,s=t.getDate();a=a<10?"0"+a:a,s=s<10?"0"+s:s,this.todaySpan=e+"-"+a+"-"+s},cell:function(t){t.row,t.column,t.rowIndex;var e=t.columnIndex;return 1==e?"cellMonth":2==e||4==e||6==e||8==e||10==e||12==e||14==e||16==e||18==e||20==e||22==e?"darkBl":3==e||5==e||7==e||9==e||11==e||13==e||15==e||17==e||19==e||21==e||23==e?"darkOr":void 0},objectSpanMethod:function(t){t.row,t.column,t.rowIndex,t.columnIndex}}}}).call(e,a("7t+N"))},"3gde":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAAAAXNSR0IArs4c6QAAA1pJREFUWAntlz2MTFEUx2ew63MEG1vQiMZKNBtRKCS2VBE0Co1QkGg0EsHGR8RuRbPJalBoRiMSxCoobBBBqIjCR0h8hWSzn8bu8/s/977cefNm5r07O0g4yX/Pveece85/7z3vvje53L8gQRC0gUGwMev/m48vIEkrNmFW3Jcwb83n859cO+tbmMs2H4yD9+AkKBJbQqcXku0E78B4ShAWXItXwPZNDkeGGH8Fh8GSeHzinMBeYEWEhlOgZBaU7TS2S2DK+Fw1wmQMXAAdSUTCRDjX4rwN5gBt+T7wA9ST1QSc4ii+uIHk28r8PFjo2p2xjk75H4ETrB9wfLkcCXYD7YikvczpMSFHAUwoWQrRrkm0EbkZpt5ydNiE8SY1/tSKxJ0Eq4n1YKSReQSp+bcoOP4kWYLypRZI6Gj2gv1gEUhLhtBQdHyvNYoTki2TmB25xaLZYEGmxb+CR1B9nMxDTRsiBJlN5LiuRJ4SsE531hG73uuItBgyesIu20SeWr2znd35btd7EYKMjkc7M9cm8tA6qrOQeUy+6B7zIkSiLtAGaq2fwj8MpOOio/oIjkLmNFqX6LIoiEk3kExExhoD4u6F0ZV/7E0sfw/YAZ5VhgWj2DpBi/FNom+qZOamZqEea901SdKP8RDHoN4IhfjFDHqB7jmJjuoMMU80wa/+0TVxX/NaWy5/kqzHOBZz6B7posgBl4yJUa/ZOjqqD+CY8VUoG1jhqGHYgK/g+EcZi8wdx+YO3zJR86uX1LzbiK36GeJDaA1JZwKJEg9Q4G44S/iDT0RWgItgHfOn6KqSuYfI5H7PTDLfUzW7cUDiDcNd9eLk99khNbWVQYqVfXpYh6/2IWQvwyGKnvMtXG2dDyGbS4/qVTuZLp2JEHeGnpKVpvhLdPQO+iOE6BfdI92m+EHmSa+Fhrhl2iFVgsRxVAF9o6HKVRZnJqQ8kNFLsyniRagpTEzS/4Tq7a7dIb2twxcej7a11VvbsN/U0n2m2mF9W/wFBn1SyFj8HaRMjSL1JHpInmugi04fSXrJiozumdCGnvZLj5xxUU39UHwFOnh6S7a4SC3F+ADo5anfV+FPW3SzRGR0KvqR2Q6ZzyoUEdIEUiKxGawCPp8mLEst6lu1yhXIaPx3yk+6qheJifyevAAAAABJRU5ErkJggg=="},"3w0Z":function(t,e){},"4kQI":function(t,e){},"4mPM":function(t,e){},"4t0l":function(t,e){},"5LIk":function(t,e){},"5Ss9":function(t,e){},"5aSO":function(t,e,a){"use strict";var s={props:["data"],components:{Search:a("haZd").a},data:function(){return{}},methods:{showInfo:function(t,e){this.$emit("showInfo",e,t)},search:function(t){this.$emit("search",t)},isNo:function(t,e){this.$emit("isNo",e,t)},isOk:function(t,e){this.$emit("isOk",e,t)}},created:function(){},mounted:function(){}},i={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"examine boxs"},[s("div",{staticClass:"searchBox0"},[s("Search",{on:{search:t.search}})],1),t._v(" "),s("div",{staticClass:"listBoxs"},[s("el-scrollbar",{staticStyle:{height:"100%"}},t._l(t.data,function(e,i){return s("ul",{staticClass:"examBoxs boxs",class:{"examed pointer":-1!=e.state,"examing pointer":-1==e.state},on:{click:function(a){t.showInfo(i,e)}}},[s("li",[s("label",{attrs:{for:""}},[t._v("申请人")]),t._v(" "),s("span",{domProps:{textContent:t._s(e.old_truename)}})]),t._v(" "),s("li",[s("label",{attrs:{for:""}},[t._v("班次")]),t._v(" "),s("span",{domProps:{textContent:t._s(e.olde_workdate+" "+e.oldstarttime+"~"+e.oldendtime)}})]),t._v(" "),s("li",{staticClass:"margin5"},[s("label",{attrs:{for:""}},[t._v("换班人")]),t._v(" "),s("span",{domProps:{textContent:t._s(e.new_truename)}})]),t._v(" "),s("li",[s("label",{attrs:{for:""}},[t._v("班次")]),t._v(" "),s("span",{domProps:{textContent:t._s(e.new_workdate+" "+e.newstarttime+"~"+e.newendtime)}})]),t._v(" "),s("img",{directives:[{name:"show",rawName:"v-show",value:0==e.state,expression:"v.state==0"}],staticClass:"examFlag",attrs:{src:a("otYp"),alt:""}}),t._v(" "),s("img",{directives:[{name:"show",rawName:"v-show",value:1==e.state,expression:"v.state==1"}],staticClass:"examFlag",attrs:{src:a("+EqK"),alt:""}}),t._v(" "),s("li",{directives:[{name:"show",rawName:"v-show",value:-1==e.state,expression:"v.state==-1"}],staticClass:"btns"},[s("div",{staticClass:"btn btn1",on:{click:function(a){a.stopPropagation(),t.isNo(i,e)}}},[t._v("驳回")]),t._v(" "),s("Lines",{attrs:{hei:30,top:2}}),t._v(" "),s("div",{staticClass:"btn btn2",on:{click:function(a){a.stopPropagation(),t.isOk(i,e)}}},[t._v("同意")])],1)])}))],1)])},staticRenderFns:[]};var n=a("VU/8")(s,i,!1,function(t){a("cDKO")},"data-v-b8374f0a",null);e.a=n.exports},"61bW":function(t,e){},"66m+":function(t,e){},"6MXE":function(t,e){},"6Zcj":function(t,e,a){"use strict";(function(t){var s=a("Skej"),i=a("gdAg");e.a={data:function(){return{floorBgImg:"../../../assets/img/doorControl/bg_lc.png",levelNum:[],levels:[],areaLevel:[],infoSta:"",infoStaTit:"",infoControlTit:"",coefficientX:1,coefficientY:1,controlDoorFun:"",onDoorName:"",totleDoors:"",doorClose:"",doorWarning:"",doorOpenN:"",doorInfoId:"",doorDeviceId:"",doorInfomation:[],doorInfoShow:!1,onMouseDoor:"",xLeft:"",yTop:"",buildingNumber:"1",floorNumber:"",floorNum:"",iList:[],floorIds:0,doorControlMsg:[]}},components:{pops:s.a,doorInfo:i.a},mounted:function(){this.getDoorData(),console.log(this.floorIds)},watch:{infoSta:function(t,e){this.infoSta=t},floorIds:function(t,e){console.log(t),console.log(e),sessionStorage.setItem("sentFloorIds",t)}},methods:{chooseLevels:function(e){this.floorIds=e,console.log(this.areaLevel),console.log(e),this.getDoorData();var a=[];t.each(this.areaLevel,function(t,s){s.id==e&&(a=s.child)}),this.floorNumber="",this.floorNum="",this.levels=a},chooseLevelNum:function(e){this.floorIds=e,console.log(e);var a=[];t.each(this.levels,function(t,s){s.id==e&&(console.log(s),a=s.child)}),this.floorNum="",this.levelNum=a,this.getDoorData(e),console.log(this.levelNum)},getFloorIdData:function(t){this.floorIds=t,this.getDoorData(t),console.log(this.floorIds)},popToggle:function(e,a,s,i,n,o){console.log(o),this.onMouseDoor=i,this.xLeft=a,this.yTop=s;var r="",l="",c="",d=[],u="";t.each(o,function(e,a){1==a.is_command?(r=a.params.showvalue[0],l=a.title,d.push({pointNow:a.params.value[0],pointId:a.point_id})):14403!=a.self_id&&(c=a.title,t.each(a.params.value,function(t,e){e==a.params.type&&(u=a.params.showvalue[t])}))}),this.controlDoorFun=r,this.infoControlTit=l,this.infoStaTit=c,this.doorControlMsg=d,console.log(d),this.infoSta=u},popHide:function(){},changeDoorStatus:function(t){console.log(t),this.iList[t.itemIndex].device_state=""},doorInfoPanel:function(t,e,a){console.log(this.$store.state.sysList),this.doorInfoId=e,this.doorDeviceId=t,this.doorInfoShow=!0;var s=this;this.$http.post("/entrance/record",{sys_menu_id:this.$store.state.sysList[14].sys_menu_id,project_id:this.$store.state.projectId,floor_id:s.floorIds,device_id:t}).then(function(t){console.log(t.data.data),s.doorInfomation=t.data.data.entrance_guard_record},function(t){})},doorInfoHide:function(t){this.doorInfoShow=t},getDoorData:function(e){console.log(this.$store.state.sysList[14].sys_menu_id),console.log(this.$store.state),this.coefficientX=(document.body.clientWidth-40)/1326,this.coefficientY=(document.body.clientHeight-190)/579;var a=this;this.$http.post("/entrance/all_info",{sys_menu_id:this.$store.state.sysList[14].sys_menu_id,project_id:this.$store.state.projectId,floor_id:a.floorIds}).then(function(e){console.log(e.data.data),a.iList=e.data.data.entrance_guard_info.device_2d_pic_state_list,a.totleDoors=e.data.data.entrance_guard_info.entrance_guard_total_num,a.doorClose=e.data.data.entrance_guard_info.entrance_guard_close_num,a.doorWarning=e.data.data.entrance_guard_info.entrance_guard_anomaly_num,a.doorOpenN=e.data.data.entrance_guard_info.entrance_guard_open_num,a.floorBgImg=e.data.data.entrance_guard_info.floor_background,a.areaLevel=e.data.data.area_level,console.log(a.areaLevel),a.floorIds=e.data.data.show_area_id,t.each(e.data.data.area_level,function(t,s){s.id==e.data.data.show_area_id&&(a.buildingNumber=s.title)})})}}}}).call(e,a("7t+N"))},"7+l2":function(t,e){},"7TcJ":function(t,e){},"7xIN":function(t,e){},"866P":function(t,e,a){"use strict";var s=a("haZd"),i=a("2U6G"),n=a("kArt"),o=(a("+1Ri"),a("k0gE")),r={props:["datas"],components:{searchBox:s.a,SelectBox:n.a,Banner:i.a,PersonInfo:o.a},data:function(){return{placeholder:"请输入搜索内容",inputs:"",showBannerParam:!1,activeName:"item0",menus:[{label:"个人信息",value:1},{label:"密码修改",value:2}],currMenu:-1,personalCenter:{isShowBounced:!1,isShowDialog:!1},personInfoOptions:{isPersonInfo:!1,isEditInfo:!1,isChangePassword:!1}}},methods:{loginOut:function(){window.location.reload()},toLink:function(t,e){this.$router.replace({path:t.$attrs.route})},search:function(){this.$emit("searchCont",this.inputs)},showBanerClick:function(){this.personInfoOptions.isPersonInfo=!1,this.personInfoOptions.isEditInfo=!1,this.personInfoOptions.isChangePassword=!1,this.showBannerParam=!this.showBannerParam,event.stopPropagation()},updateBannerParam:function(t){this.showBannerParam=t},showPersonInfo:function(){this.personalCenter.isShowBounced=!this.personalCenter.isShowBounced},personInfoShowTips:function(t){this.bubbleTipShow(t)},bubbleTipShow:function(t){this.bubbleTip=t,this.$store.state.bubbleShow=!0;var e=this;setTimeout(function(){e.$store.state.bubbleShow=!1},3e3)},handleCommand:function(t){this.showBannerParam=!1,"loginOut"==t?this.personalCenter.isShowDialog=!0:"personInfo"===t?this.personInfoOptions.isPersonInfo=!0:"changePassword"==t&&(this.personInfoOptions.isChangePassword=!0)}},watch:{activeName:function(t){this.activeName=t,sessionStorage.setItem("activeItem",t)}},beforeDestroy:function(){sessionStorage.setItem("activeItem",null)},mounted:function(){this.datas.active?this.activeName=this.datas.active:sessionStorage.getItem("activeItem")&&"null"!=sessionStorage.getItem("activeItem")?this.activeName=sessionStorage.getItem("activeItem"):this.activeName="item0"}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"headBox0"},[a("div",{staticClass:"logo",on:{click:t.showBanerClick}},[a("i"),t._v(" "),a("span",[t._v("泰立智汇")])]),t._v(" "),a("div",{staticClass:"searchBox"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.inputs,expression:"inputs"}],attrs:{type:"text",placeholder:t.placeholder,id:"sysHeadSearchInput"},domProps:{value:t.inputs},on:{input:function(e){e.target.composing||(t.inputs=e.target.value)}}}),t._v(" "),a("div",{staticClass:"searchBtn",on:{click:t.search}},[a("i")]),t._v(" "),a("span")]),t._v(" "),a("el-tabs",{staticClass:"navTabs",on:{"tab-click":t.toLink},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},t._l(t.datas.lists,function(t,e){return a("el-tab-pane",{key:t.id,attrs:{label:t.name,name:"item"+e,route:t.route,stretch:!0}})})),t._v(" "),a("el-row",{staticClass:"block-col-2 userCenter",staticStyle:{position:"absolute",right:".2rem",top:"10px"}},[a("el-col",{attrs:{span:12}},[a("el-dropdown",{attrs:{trigger:"hover"},on:{command:t.handleCommand}},[a("span",{staticClass:"el-dropdown-link"},[a("span",{staticClass:"userIcon",on:{click:t.showPersonInfo}})]),t._v(" "),a("el-dropdown-menu",{staticClass:"homeDropDown",staticStyle:{background:"#061733",border:"1px solid #4a90e2"},attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{staticClass:"homeDropdownItem",staticStyle:{"text-align":"center",color:"#f6f6f6"},attrs:{command:"personInfo"}},[t._v("个人信息")]),t._v(" "),a("el-dropdown-item",{staticClass:"homeDropdownItem",staticStyle:{"text-align":"center",color:"#f6f6f6"},attrs:{command:"changePassword"}},[t._v("修改密码")]),t._v(" "),a("el-dropdown-item",{staticClass:"homeDropdownItem",staticStyle:{"text-align":"center",color:"#f6f6f6"},attrs:{command:"loginOut"}},[t._v("退出登录")])],1)],1)],1)],1),t._v(" "),a("Banner",{tag:"component",attrs:{isShowBannerParam:t.showBannerParam},on:{changeBannerParam:t.updateBannerParam}})],1),t._v(" "),a("PersonInfo",{tag:"component",attrs:{options:t.personInfoOptions},on:{showTips:t.personInfoShowTips}}),t._v(" "),a("el-dialog",{attrs:{visible:t.personalCenter.isShowDialog,width:"364px",top:"30vh","custom-class":"homeLoginDialog"},on:{"update:visible":function(e){t.$set(t.personalCenter,"isShowDialog",e)}}},[a("span",[t._v("是否确定退出此账号登录")]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:t.loginOut}},[t._v("确 定")]),t._v(" "),a("el-button",{on:{click:function(e){t.personalCenter.isShowDialog=!1}}},[t._v("取 消")])],1)])],1)},staticRenderFns:[]};var c=a("VU/8")(r,l,!1,function(t){a("H2cb")},"data-v-33c534e0",null);e.a=c.exports},"88z/":function(t,e,a){"use strict";var s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition",{attrs:{name:"fade"}},[a("div",{staticClass:"tkBox",style:{left:t.pos.left,top:t.pos.top}},[a("div",{staticClass:"sanjiao"}),t._v(" "),a("ul",t._l(t.lists,function(e,s){return a("li",{domProps:{textContent:t._s(e.label)},on:{click:function(a){t.choose(e.value)}}})}))])])},staticRenderFns:[]};var i=a("VU/8")({props:["lists","left","pos"],data:function(){return{}},computed:{},methods:{choose:function(t){this.$emit("change",t)},show:function(){}},created:function(){},mounted:function(){}},s,!1,function(t){a("wt55")},"data-v-5019757a",null);e.a=i.exports},"8AwT":function(t,e,a){"use strict";a("+1Ri");var s={props:["inputType","placeholder","label","cssStyle","modelValue","readonly"],data:function(){return{input1:""}},computed:{},methods:{beFirst:function(){this.value0=""},searchVal:function(t,e){for(var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"请选择",s=t.length,i=a,n=0;n<s;n++)t[n].value==e&&(i=t[n].label);return i},change:function(){this.$emit("change",this.value0)}},created:function(){},mounted:function(){}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"inputBox"},[a("span",{style:t.cssStyle,domProps:{textContent:t._s(t.label.text)}}),t._v(" "),a("el-input",{staticClass:"inputbox",attrs:{type:t.inputType,placeholder:t.placeholder,readonly:t.readonly,clearable:""},model:{value:t.modelValue,callback:function(e){t.modelValue=e},expression:"modelValue"}})],1)},staticRenderFns:[]};var n=a("VU/8")(s,i,!1,function(t){a("Hlk9")},"data-v-189181f5",null);e.a=n.exports},"8BMp":function(t,e,a){"use strict";(function(t){var s=a("mvHQ"),i=a.n(s),n=a("+1Ri"),o=(a.n(n),a("866P")),r=a("KvKp"),l=a("5aSO"),c=a("u5kM"),d=a("jNQZ");e.a={components:{Examine:l.a,ScheduleTable:c.a,Header:o.a,SelectBox:d.a},computed:{crumbs:function(){return["代维系统","排班表"]}},data:function(){return{imgurl:"../../../assets/img/AgentManage/head.png",applyhbSelect:{hbTimes:[],hbTime:"",peos:[],peo:"",bTimes:[],bTime:""},tabPosition:"待审核",tabtype:0,noApplyLists:[],topDate:"",excuse:"语雀是一款优雅高效的在线文档编辑与协同工具，让每个企业轻松拥有文档中心阿里巴巴集团内部使用多年，众多中小企业首选。",scheTable:[],radio3:"待审核",applyJob:{id:0,name:"王1",time:"2018-05-26 00:59~06:19",time2:"2018-05-27 07:59~14:19",name2:"白1",state:-1,img1:"http://img4.imgtn.bdimg.com/it/u=1652942597,4175456571&fm=26&gp=0.jpg",img2:"http://img0.imgtn.bdimg.com/it/u=2242889095,3429329643&fm=26&gp=0.jpg",tel1:"18349171744",tel2:"18349171722",reason:"Ant Design是一个服务于企业级产品的设计体系，基于『确定』和『自然』的设计价值观和模块化的解决方案，让设计者专注于更好的用户体验。"},navsData:{active:"item1",lists:[{id:0,name:"首页",route:"/AgentManage/normalUser"},{id:1,name:"排班表",route:"/AgentManage/normalUser/schedule"},{id:2,name:"工单",route:"/AgentManage/normalUser/workList"},{id:3,name:"巡检",route:"/AgentManage/normalUser/routing"},{id:4,name:"完成情况",route:"/AgentManage/normalUser/report"}]},activeName:"first",indexNow:-1,dia:{reason:"请输入换班原因",tel2:"",tel1:"",truename:"",user_id:"",bTime:"",hbTime:"",vpeo:""}}},methods:{clearVal:function(){this.dia.reason=""},handleClick:function(t,e){var a=this.activeName;this.$router.replace({path:"/AgentManage/normalUser/schedule/"+a})},search:function(t,e){console.log(t,e)},change1:function(t){this.applyhbSelect.bTime=t},change2:function(e){var a=this;t.each(this.applyhbSelect.peos,function(t,s){s.value==e&&a.$set(a.dia,"tel2",s.phone)}),this.applyhbSelect.vpeo=e,this.getNoApply2(e)},change3:function(t){this.applyhbSelect.hbTime=t},submitApply:function(){var t=this;this.$http.post("/pc_ims/staff/send_work",{content:i()({id:"",now_workusers_id:this.applyhbSelect.bTime,new_workusers_id:this.applyhbSelect.hbTime,description:this.dia.reason})}).then(function(e){0==e.data.code?(t.$message({type:"success",message:e.data.msg}),t.applyhbSelect.bTime="",t.applyhbSelect.hbTime="",t.applyhbSelect.vpeo="",t.getNoApply(),t.getPeosOptions(),t.getNoApply2(),t.dia.tel2="",t.dia.reason=""):t.$message({type:"error",message:"换班失败！"})})},changeStatus:function(t){this.tabtype="待审核"==t?0:"已审核"==t?1:2,this.getApplyStatus(this.tabtype)},getTableList:function(t){var e=this;t||(t=r.a.time(new Date/1e3,9)),this.topDate=t,this.$http.post("/pc_ims/staff/work_list",{year:t.split("-")[0],month:t.split("-")[1]}).then(function(t){0==t.data.code?e.scheTable=t.data.data:e.$message({type:"error",message:t.data.msg})})},agreeReplace:function(t){this.dealSchedule(t,1)},noAgree:function(t){this.dealSchedule(t,10)},dealSchedule:function(t,e){var a=this;this.$http.post("/pc_ims/staff/dispose",{id:t,type:e}).then(function(t){0==t.data.code?(a.$message({type:"success",message:t.data.msg,duration:2e3}),a.getTableList()):a.$message({type:"error",message:t.data.msg,duration:2e3})})},getNoApply:function(e){var a=this;this.$http.post("/pc_ims/staff/get_worklist",{user_id:this.$store.state.userInfoTotal.userinfo.id}).then(function(e){if(0==e.data.code){var s=e.data.data,i=[];t.each(s,function(t,e){console.log(e),i.push({label:e.workdate+" "+e.start_time+"~"+e.endt_ime,value:e.id})}),a.applyhbSelect.bTimes=i}else a.$message({type:"error",message:e.data.msg,duration:2e3})})},getNoApply2:function(e){var a=this;this.$http.post("/pc_ims/staff/get_worklist",{user_id:e}).then(function(e){if(0==e.data.code){var s=e.data.data,i=[];t.each(s,function(t,e){i.push({label:e.workdate+" "+e.start_time+"~"+e.endt_ime,value:e.id})}),a.applyhbSelect.hbTimes=i}else a.$message({type:"error",message:e.data.msg,duration:2e3})})},getPeosOptions:function(){var e=this;this.$http.post("/pc_ims/get_user").then(function(a){if(0==a.data.code){var s=a.data.data,i=[];t.each(s,function(t,e){i.push({label:e.truename,value:e.user_id,phone:e.phone})}),e.applyhbSelect.peos=i}else e.$message({type:"error",message:a.data.msg,duration:2e3})})},getApplyStatus:function(e){var a=this;e||(e=this.tabtype),this.$http.post("/pc_ims/staff/work_change",{type:e}).then(function(e){if(0==e.data.code){var s=e.data.data;t.each(s,function(t,e){1==e.now_process?s[t].text="已同意换班":10==e.now_process&&(s[t].text="已拒绝换班")}),a.noApplyLists=e.data.data}else a.$message({type:"error",message:e.data.msg,duration:2e3})})},exportTable:function(){window.open("https://tesing.china-tillage.com/pc_ims/down/staff_work_list?year="+this.topDate.split("-")[0]+"&month="+this.topDate.split("-")[1]+"&Authorization="+this.$store.state.userInfoTotal.userinfo.password+"_"+this.$store.state.projectId+"_"+this.$store.state.userId)}},created:function(){var t=this.$router.history.current.fullPath.split("/AgentManage/normalUser/schedule")[1];this.activeName=""==t?"first":t.split("/")[1]},mounted:function(){console.log(this.$store.state.userInfoTotal.userinfo),this.dia.truename=this.$store.state.userInfoTotal.userinfo.name,this.dia.tel1=this.$store.state.userInfoTotal.userinfo.phone,this.getTableList(),this.getApplyStatus(),this.getNoApply(),this.getPeosOptions()}}}).call(e,a("7t+N"))},"8aqH":function(t,e,a){"use strict";(function(t){e.a={components:{},data:function(){return{toPageNum:1,totalPageNum:1,total:1,datetimerange:"",roomListAllSta:"",roomListAllNumber:"",roomListAllNumbers:[{num:"水浒厅"},{num:"流星厅"},{num:"三国厅"},{num:"西游记厅"}],tableData:[],pagesize:20,currentPage:1,currPage:""}},mounted:function(){this.getData()},methods:{getData:function(){var e,a=this;e=""==a.datetimerange?"":a.format(this.datetimerange,"yyyy-MM-dd"),this.$http.post("/hotel/singe_room",{page:a.currentPage,num:a.pagesize,descript:a.roomListAllNumber,biz_date:e}).then(function(e){console.log(e),a.total=e.data.zongshu,a.totalPageNum=Number(e.data.pages),a.tableData=e.data.data;var s=[];t.each(e.data.data,function(t,e){s.push({num:e.descript}),a.tableData[t].indexs=(a.currentPage-1)*a.pagesize+1+t}),a.unique(s),a.roomListAllNumbers=s},function(t){})},unique:function(t){var e,a,s=t.length;for(e=0;e<s;e++)for(a=e+1;a<s;a++)t[e].num==t[a].num&&(t.splice(a,1),s--,a--);return t},toInputPage:function(){this.currentPage=Number(this.currPage),this.getData()},doSearch:function(){},addPolicy:function(){},handleEdit:function(t,e){},handleSizeChange:function(t){this.pagesize=t},handleCurrentChange:function(t){this.currentPage=Number(t),this.currPage=this.currentPage,this.getData()},changeDescript:function(t){console.log(t),console.log(this.roomListAllNumber)},format:function(t,e){var a=new Date(t),s=function(t){return(t<10?"0":"")+t};return e.replace(/yyyy|MM|dd|HH|mm|ss/g,function(t){switch(t){case"yyyy":return s(a.getFullYear());case"MM":return s(a.getMonth()+1);case"mm":return s(a.getMinutes());case"dd":return s(a.getDate());case"HH":return s(a.getHours());case"ss":return s(a.getSeconds())}})}}}}).call(e,a("7t+N"))},"8je6":function(t,e,a){t.exports=a.p+"static/img/refuse.380bd58.png"},"8sLZ":function(t,e){},"92NL":function(module,__webpack_exports__,__webpack_require__){"use strict";(function($){var __WEBPACK_IMPORTED_MODULE_0__common_selfProgress2__=__webpack_require__("vhzq"),__WEBPACK_IMPORTED_MODULE_1__common_selfSwitch__=__webpack_require__("rjoR"),__WEBPACK_IMPORTED_MODULE_2__selfPopover2__=__webpack_require__("MovR"),__WEBPACK_IMPORTED_MODULE_3__common_lineEcharts4__=__webpack_require__("9u0Y"),__WEBPACK_IMPORTED_MODULE_4__assets_js_utils__=__webpack_require__("KvKp");__webpack_exports__.a={components:{LineEcharts4:__WEBPACK_IMPORTED_MODULE_3__common_lineEcharts4__.a,SelfPopover2:__WEBPACK_IMPORTED_MODULE_2__selfPopover2__.a,SelfSwitch:__WEBPACK_IMPORTED_MODULE_1__common_selfSwitch__.a,SelfProgress2:__WEBPACK_IMPORTED_MODULE_0__common_selfProgress2__.a},name:"coldSourceStation",props:["sysId"],data:function(){return{device_pic:[],loading:!1,imgArr:['<img src="/static/img/zhuji.png" alt="主机">','<img src="/static/img/shuibeng.png" alt="水泵">','<img src="/static/img/lengque.png" alt="冷却塔">'],tuliBtnList:[],tuliTempBtnList:[],tuliDeviceId:"",codes:"",lists1:[],options:[],selectedOptions2:[],btnActive:!1,parentToggle:!1,tabData:[],tabActive:0,iframeWin:{},deviceStates:[],showSingleDevice:!1,modelUrl:"",object_device:[],yijianNowVal:void 0,yijianPointId:void 0,tempObjName:"",tempObjName2:""}},methods:{updateModelState:function(){var t=this;console.log("我在这",this.object_device),this.object_device.map(function(e,a){t.changeDeviceState(e.object_id,e.state)})},addMessageEvent:function(){window.addEventListener("message",this.handleMessage)},removeMessageEvent:function(){window.removeEventListener("message",this.handleMessage)},tuliBtnClick:function(t,e,a,s){this.requestOneKeyControl(t,e),this.tuliBtnList[a].now_value=e},hide:function(){this.showSingleDevice&&(Velocity($("#threeDBox"),{height:"63.05vh"},{duration:300}),Velocity($("#deviceDetailBox"),{height:0,marginTop:0},{duration:300})),this.showSingleDevice=!1},postInitJson:function(){this.iframeWin.postMessage({cmd:"initJsonObj",params:{jsonObj:{"product-16f7b54a-1d6d-4450-a883-c034787d3203-body":{errname:null,objs:"deviceWaterhost1",runname:null},"product-16f7b54a-1d6d-4450-a883-c034787d32ea-body":{errname:null,objs:"deviceWaterhost2",runname:null},"product-5af82546-e39b-4e8a-95cb-31997ebf1bc7-body":{errname:null},"product-16f7b54a-1d6d-4450-a883-c034787d46aa-body":{errname:null}},messageobj:null}},"*")},postDeviceData:function(t){this.iframeWin.postMessage({cmd:"sendDeviceInfoJson",params:{deviceInfoJson:t}},"*")},changeDeviceState:function(t,e){this.iframeWin.postMessage({cmd:"changeDeviceState",params:{name:t,state:e}},"*")},handleMessage:function(t){var e=this,a=t.data;switch(a.cmd){case"reFoundObjName":var s=a.params.objName;this.tempObjName!=s&&(this.tempObjName=s,this.requestOneDeviceInfo(this.tempObjName)),this.postDeviceData(this.deviceStates);break;case"reDeviceClick":setTimeout(function(){e.getEchartsData(a.params.clickObjName),e.object_device.some(function(t,s){t.object_id===a.params.clickObjName&&(e.tuliDeviceId=t.device_id)}),e.showSingleDevice||(Velocity($("#deviceDetailBox"),{height:"24.72vh",marginTop:"2.74vh"},{duration:300}),Velocity($("#threeDBox"),{height:"36.95vh"},{duration:300})),e.showSingleDevice=!0},200);break;case"cancelDevice":console.log(a.params.cancelObject_id);break;case"initModel":console.log("收收收",a.params.finish),a.params.finish?this.updateModelState():alert("模型加载错误")}},getThreeDevice:function(t,e){var a=this,s={sys_menu_id:t,floor_id:e};this.$http.get("/hvac_pc/pc/index",s,{}).then(function(t){var e=t.data;if(console.log("首页三个设备数据",s,t),0==e.code){var i=[],n=e.data.data,o=e.data.yijian;a.yijianNowVal=o.nowvalue,a.yijianPointId=o.point_id,n.map(function(t,e){var a={};a.id=t.self_id,a.all=t.count,a.on=t.kai,a.break=t.gu,a.off=t.guan,a.self_id=t.self_id,i.push(a)}),a.lists1=i}else a.$message(e.message)}).catch(function(t){a.$message(t)})},getEchartsData:function getEchartsData(object_id){var _this4=this;this.loading=!0;var that=this,config={object_id:object_id},headers={};this.$http.get("/hvac_pc/pc/index/device",config,headers).then(function(res){var data=res.data;if(console.log("获取echarts数据",config,res),0==data.code){var commtable=data.data.commtable,tempArr1=[];commtable.map(function(t,e){var a={};a.id=t.point_id,a.title=t.title,a.unit=[],a.unit.push(t.unit),a.datas={},a.datas.id="selfEchart"+t.point_id,a.datas.style={width:"6.43rem",height:14600/728+"vh"},a.datas.showMarkL=!0,a.datas.markLineVal=t.standard,a.datas.list=[];var s={};s.name=t.title,s.data=t.data,a.datas.list.push(s),tempArr1.push(a)});var energytable=data.data.energytable;energytable.map(function(t,e){var a={};a.id=t.point_id,a.title=t.title,a.unit=[],a.unit.push(t.unit),a.datas={},a.datas.id="selfEchart"+t.point_id,a.datas.style={width:"6.43rem",height:14600/728+"vh"},a.datas.showMarkL=!0,a.datas.markLineVal=t.standard,a.datas.list=[];var s={};s.name=t.title,s.data=t.data,a.datas.list.push(s),tempArr1.push(a)}),_this4.tabData=tempArr1;var control=data.data.control,tempArr2=[],tempArr20=[];control.map(function(item2,i2){var params=item2.params;if(""!==params){var obj22={};obj22.now_value=item2.now_value,obj22.title=item2.title,obj22.unit=item2.unit,obj22.point_id=item2.point_id;var paramsObj=eval("("+params+")");obj22.btnList=[],paramsObj.showvalue.map(function(t,e){var a={};a.id=paramsObj.value[e],a.tit=t,obj22.btnList.push(a)}),tempArr2.push(obj22)}else{var obj23={};obj23.now_value=item2.now_value,obj23.title=item2.title,obj23.unit=item2.unit,obj23.point_id=item2.point_id,obj23.params=item2.params,tempArr20.push(obj23)}}),_this4.tuliBtnList=tempArr2,_this4.tuliTempBtnList=tempArr20;var device_info=data.data.device_info,device_pic=data.data.device_pic,tempArr3=[];device_pic.map(function(t,e){var a={};a.category_func_id=t.category_func_id,a.codes=t.codes,a.device_pic_2d_id=t.device_pic_2d_id,a.id=t.id,a.title=t.title,a.type=t.type,a.update_date=t.update_date,t.type==device_info.now_state?a.show=!0:a.show=!1,tempArr3.push(a)}),_this4.device_pic=tempArr3,_this4.loading=!1}else _this4.loading=!1,_this4.$message(data.message)}).catch(function(t){_this4.loading=!1,_this4.$message(t)})},get3DFloor:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.$store.state.sysList[1].son_list[0].sys_menu_id,a={sys_menu_id:e};this.$http.get("/hvac_pc/pc/floor",a,{}).then(function(s){var i=s.data;if(console.log("获取机房3d模型",a,s),0==i.code)if(0===t.options.length){var n=i.data[0].floor_id;t.$store.state.airFloorId=n,t.getThreeDevice(e,n);var o=[],r=[];i.data.map(function(t,e){var a={},s={};a.value=t.floor_id,a.label=t.title,s.id=t.floor_id,s.tit=t.title,r.push(s),o.push(a)}),t.options=o,t.$store.state.airFloorLists=r,t.selectedOptions2=[n],t.modelUrl=i.data[0].object_3d;var l=i.data[0].object_device;t.object_device=l}else t.options.some(function(a,s){if(t.$store.state.airFloorId===a.value){t.getThreeDevice(e,t.$store.state.airFloorId),t.modelUrl=i.data[s].object_3d;var n=i.data[s].object_device;t.object_device=n}});else t.$message(i.message)}).catch(function(e){t.$message(e)})},requestOneKeyControl:function(t,e){var a=this,s={point_id:t,now_value:e};this.$http.get("/realtime_pc/pc/control",s,{}).then(function(t){var e=t.data;console.log("点位设备控制",s,t),e.code,a.$message(e.message)}).catch(function(t){a.$message(t)})},requestOneDeviceInfo:function requestOneDeviceInfo(object_id){var _this7=this,that=this,config={object_id:object_id},headers={};"product-50a37d21-4ee5-4d74-a2cb-3c99354bb804-body_1_0"!=object_id&&this.$http.get("/hvac_pc/pc/index/device/point",config,headers).then(function(res){var data=res.data;if(console.log("模型中单设备状态信息",config,res),0==data.code){var dataArr=data.data,tempArr=[];dataArr.map(function(item,i){var obj={};if(obj.tit=item.title,""!==item.params){var paramsObj=eval("("+item.params+")"),showvalueIndex=void 0;paramsObj.value.some(function(t,e){if(item.nowvalue==t)return showvalueIndex=e,!0}),obj.val=paramsObj.showvalue[showvalueIndex]}else obj.val=item.nowvalue+item.unit;tempArr.push(obj)}),_this7.deviceStates=tempArr}else _this7.$message(data.message),_this7.deviceStates=[]})},handleChange:function(t){var e=this;console.log(t),this.hide(),this.getThreeDevice(this.$store.state.sysList[1].son_list[0].sys_menu_id,t[0]),this.$store.state.airFloorId=t[0],setTimeout(function(){e.get3DFloor()},200)},tempHandleChange:function(){this.$refs.dialog.show()},changeEditState:function(t,e,a){this.btnActive=!this.btnActive,this.btnActive?this.$refs.tempInput[a].focus():(this.$refs.tempInput[a].blur(),this.requestOneKeyControl(t,e))},sureControl:function(){console.log(this.parentToggle),this.parentToggle=!this.parentToggle,this.$refs.dialog.hide()},sureControl2:function(){this.requestOneKeyControl(this.yijianPointId,0==this.yijianNowVal?1:0),this.yijianNowVal=0==this.yijianNowVal?1:0,this.$refs.dialog2.hide()},oneKeySwitch:function(){this.$refs.dialog2.show()},tabToggle:function(t){this.tabActive=t}},created:function(){this.get3DFloor()},mounted:function(){window.removeEventListener("message",this.handleMessage,!1),window.addEventListener("message",this.handleMessage,!1),this.iframeWin=this.$refs.iframe.contentWindow},destroyed:function(){window.removeEventListener("message",this.handleMessage,!1)}}}).call(__webpack_exports__,__webpack_require__("7t+N"))},"94qP":function(t,e){},"991W":function(t,e){},"99tx":function(t,e){},"9Jcj":function(t,e){},"9Nlf":function(t,e){},"9gv4":function(t,e,a){"use strict";var s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"dealBox"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.canDealing,expression:"canDealing"}],staticClass:"dealBtn"},[a("span",{on:{click:function(e){return e.stopPropagation(),t.agree(e)}}},[t._v("同意")]),t._v(" "),a("span",{on:{click:function(e){return e.stopPropagation(),t.refult(e)}}},[t._v("拒绝")])]),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:!t.canDealing,expression:"!canDealing"}]},[t._v("-")])])},staticRenderFns:[]};var i=a("VU/8")({props:["btnss"],computed:{canDealing:function(){var t=!1;return 2!=this.btnss.item.now_state&&5!=this.btnss.item.now_state||(t=!0),t}},data:function(){return{}},methods:{agree:function(){this.$emit("agree",this.btnss.item)},refult:function(){this.$emit("refult",this.btnss.item)}},created:function(){},mounted:function(){}},s,!1,function(t){a("Q3f4")},"data-v-5cbe86db",null);e.a=i.exports},"9u0Y":function(t,e,a){"use strict";var s={props:["datas"],name:"lineEcharts4",data:function(){return{color:[{color1:"rgba(253,153,27,1)",color2:"rgba(253,153,27,0)",color3:"rgba(253,153,27,0.35)"},{color1:"rgba(45,240,224,1)",color2:"rgba(45,240,224,0)",color3:"rgba(45,240,224,0.35)"}]}},methods:{drawLine:function(){for(var t=this.$echarts.init(document.getElementById(this.datas.id)),e=[],a=[],s=this.datas,i=s.list.length,n=0;n<i;n++){var o={name:s.list[n].name,data:s.list[n].data,type:"line",smooth:!0,symbol:"circle",symbolSize:9,showSymbol:!1,itemStyle:{color:this.color[n].color1,shadowColor:this.color[n].color1,shadowBlur:1},lineStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:this.color[n].color2},{offset:.2,color:this.color[n].color1},{offset:.8,color:this.color[n].color1},{offset:1,color:this.color[n].color2}],globalCoord:!1},shadowColor:this.color[n].color3,shadowBlur:5,shadowOffsetX:2,shadowOffsetY:6}};1==s.showMarkL&&(o.markLine={silent:!0,symbol:"none",label:{position:"start",formatter:function(t){return t.value}},lineStyle:{width:1,type:"solid",color:"#2df0e0"},data:[{symbol:"none",name:"Y 轴值为 x 的水平线",yAxis:5,x:"4.5%"}]}),1==s.showLegends&&a.push(s.list[n].name),e.push(o)}var r={legend:{data:a,textStyle:{color:"#f8fbff",fontSize:10}},tooltip:{trigger:"axis",axisPointer:{snap:!0,lineStyle:{opacity:1,color:"#fff"}},backgroundColor:"#fff",formatter:function(t){for(var e="",a=t.length,s=0;s<a;s++){e+='<span style = "padding:0 4px;color:'+t[s].color+'">'+t[s].value[1]+"</span>"}return"<span>"+e+"</span>"},confine:!0,padding:[6,12],textStyle:{fontFamily:"PingFangSC-Regular",fontSize:"0.14rem",color:"#000"},extraCssText:"box-shadow: 0px 1px 10px 0px rgba(0, 0, 0, 0.5);border-radius:4px"},grid:{top:1==s.showLegends?"16%":"2%",left:"3%",right:"4%",bottom:"2%",containLabel:!0},dataZoom:[{type:"inside",start:0,end:100}],xAxis:{type:"time",splitLine:{show:!1},axisLine:{show:!1},axisTick:{show:!1},axisLabel:{color:function(t,e){return"#f8fbff"},fontSize:10,formatter:function(t,e){var a=new Date(t);return(a.getHours()<10?"0"+a.getHours():""+a.getHours())+":"+(a.getMinutes()<10?"0"+a.getMinutes():""+a.getMinutes())}}},yAxis:{show:!0,type:"value",axisLine:{show:!1},axisTick:{show:!1},axisLabel:{show:!1},splitLine:{lineStyle:{color:["rgba(45,240,224,0.1)"]}}},series:e};t.setOption(r)}},mounted:function(){this.drawLine()},updated:function(){this.drawLine()}},i={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"echartBox"},[e("div",{staticClass:"myChart",style:this.datas.style,attrs:{id:this.datas.id}})])},staticRenderFns:[]};var n=a("VU/8")(s,i,!1,function(t){a("h5yF")},"data-v-7ecc1e8c",null);e.a=n.exports},"9ubA":function(t,e){},AHEx:function(t,e){},Asp7:function(t,e){},AuFl:function(t,e){},B0LX:function(t,e){},B3F4:function(t,e){},BCs0:function(t,e){},BFSc:function(t,e){},"BPT/":function(t,e){},"BPv+":function(t,e,a){"use strict";(function(t){e.a={name:"manualOperation",data:function(){return{toPageNum:1,totalPageNum:1,total:0,tableData:[],pagesize:20,currentPage:1,currPage:1}},mounted:function(){this.getData()},methods:{getData:function(){var e=this;this.$http.get("hvac_pc/pc/auto/control/record",{pagenumber:this.currentPage,pagesize:this.pagesize}).then(function(a){console.log(a),e.tableData=a.data.data,t.each(e.tableData,function(t,a){a.indexs=(e.currentPage-1)*e.pagesize+1+t}),e.totalPageNum=Math.ceil(a.data.data.length/e.pagesize)},function(t){})},toInputPage:function(){this.currentPage=Number(this.currPage),this.getData()},handleSizeChange:function(t){this.pagesize=t},handleCurrentChange:function(t){this.currentPage=Number(t),this.currPage=this.currentPage,this.getData()}}}}).call(e,a("7t+N"))},CK92:function(t,e){},CKvl:function(t,e){},Cgfr:function(t,e){},ClXn:function(t,e,a){"use strict";a("KvKp");var s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"routingTask"},[t.newData.desc&&t.newData.desc.length>0?a("ul",t._l(t.newData.desc,function(e,s){return a("li",{key:s,staticClass:"job_det",attrs:{span:Math.floor(24/t.newData.desc.length)}},[a("div",{staticClass:"taskDtl"},[e?a("div",{staticClass:"taskLabel"},[t._v(t._s(e.label))]):t._e(),t._v(" "),a("div",{staticClass:"taskCont"},[t._v(t._s(e.value))])])])})):t._e(),t._v(" "),a("div",{staticStyle:{clear:"both"}}),t._v(" "),t.backExcu2?a("div",[t.backExcu2&&t.newData.localDesc?a("div",{staticClass:"contLabel"},[t._v(t._s(t.newData.localDesc.label))]):t._e(),t._v(" "),a("el-input",{staticClass:"controlCont controlCont1",attrs:{type:"textarea",rows:2,placeholder:"请输入内容"},model:{value:t.newData.localDesc.value,callback:function(e){t.$set(t.newData.localDesc,"value",e)},expression:"newData.localDesc.value"}})],1):t._e(),t._v(" "),t.sendInfo?a("el-row",t._l(t.newData.sendInfos,function(e,s){return a("el-col",{key:s,attrs:{span:12}},[a("div",{staticClass:"taskDtl"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[e?a("div",{staticClass:"taskLabel"},[t._v(t._s(e.label))]):t._e()]),t._v(" "),a("el-col",{attrs:{span:18}},[a("div",{staticClass:"taskCont"},[t._v(t._s(e.value))])])],1)],1)])})):t._e(),t._v(" "),t.backExcu&&t.newData.localDesc2?a("div",[a("div",{staticClass:"contLabel",domProps:{textContent:t._s(t.backExcu?t.newData.localDesc2.label:"")}}),t._v(" "),a("el-input",{staticClass:"controlCont controlCont2",attrs:{type:"textarea",rows:2,placeholder:"请输入内容"},model:{value:t.newData.localDesc2.value,callback:function(e){t.$set(t.newData.localDesc2,"value",e)},expression:"newData.localDesc2.value"}})],1):t._e(),t._v(" "),t.newData.pic1&&""!==t.newData.pic1&&t.newData.pic2&&""!==t.newData.pic2?a("div",{staticClass:"dealimg"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("div",[t._v("处理前")])]),t._v(" "),a("el-col",{attrs:{span:12}},[a("div",[t._v("处理后")])])],1),t._v(" "),a("div",[a("div",{staticClass:"imgs1"},t._l(t.newData.pic1,function(t){return a("img",{attrs:{src:t.pic_url}})})),t._v(" "),a("Lines",{staticClass:"lines",attrs:{top:0,hei:100}}),t._v(" "),a("div",{staticClass:"imgs2"},t._l(t.newData.pic2,function(t){return a("img",{attrs:{src:t.pic_url}})}))],1)],1):t._e(),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.tableShow,expression:"tableShow"}],staticClass:"contLabel",domProps:{textContent:t._s("巡检表格")}}),t._v(" "),t.newData.tableData?a("div",{directives:[{name:"show",rawName:"v-show",value:t.tableShow,expression:"tableShow"}],staticClass:"boxs",staticStyle:{width:"95.6%",margin:"0 2.2% 0"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{height:220,data:t.newData.tableData.data}},t._l(t.newData.tableData.th,function(t,e){return a("el-table-column",{key:e,attrs:{prop:t.prop,"show-overflow-tooltip":!0,label:t.label,width:t.wid,"min-width":t.minWid}})}))],1):t._e(),t._v(" "),"routing"==t.newData.vuename&&"3"==t.newData.now_state?a("div",{staticClass:"rightHead"},[a("span",{staticClass:"infoBusy",domProps:{textContent:t._s("拒绝退单")},on:{click:function(e){t.dealWork(5)}}}),t._v(" "),a("span",{staticClass:"infoSend",domProps:{textContent:t._s("允许退单")},on:{click:function(e){t.dealWork(4)}}})]):"worklist"==t.newData.vuename&&"5"==t.newData.now_state?a("div",{staticClass:"rightHead"},[a("span",{staticClass:"infoBusy",domProps:{textContent:t._s("拒绝退单")},on:{click:function(e){t.dealWork(8)}}}),t._v(" "),a("span",{staticClass:"infoSend",domProps:{textContent:t._s("允许退单")},on:{click:function(e){t.dealWork(6)}}})]):"worklist"==t.newData.vuename&&"2"==t.newData.now_state?a("div",{staticClass:"rightHead"},[a("span",{staticClass:"infoBusy",domProps:{textContent:t._s("拒绝延期")},on:{click:function(e){t.dealWork(7)}}}),t._v(" "),a("span",{staticClass:"infoSend",domProps:{textContent:t._s("允许延期")},on:{click:function(e){t.dealWork(3)}}})]):t._e()],1)},staticRenderFns:[]};var i=a("VU/8")({props:["data"],data:function(){return{newData:{},sendInfo:!1,backExcu:!1,backExcu2:!1,tableShow:!1}},methods:{dealWork:function(t){this.$emit("dealWork",{type:t,infos:this.newData})}},watch:{data:{handler:function(t){t&&(this.newData=t,this.newData.localDesc2&&(this.newData.localDesc2.label?this.backExcu=!0:this.backExcu=!1),this.newData.localDesc&&(this.newData.localDesc.label?this.backExcu2=!0:this.backExcu2=!1),this.newData.sendInfos&&(this.newData.sendInfos.length>0?this.sendInfo=!0:this.sendInfo=!1),this.newData.tableData&&this.newData.tableData.th.length>0?this.tableShow=!0:this.tableShow=!1)},deep:!0}},create:function(){},mounted:function(){this.newData=this.data,this.newData.localDesc&&(this.newData.localDesc.label?this.backExcu=!0:this.backExcu=!1),this.newData.localDesc2&&(this.newData.localDesc2.label?this.backExcu2=!0:this.backExcu2=!1),this.newData.sendInfos&&(this.newData.sendInfos.length>0?this.sendInfo=!0:this.sendInfo=!1),this.newData.tableData&&this.newData.tableData.th.length>0?this.tableShow=!0:this.tableShow=!1}},s,!1,function(t){a("BFSc")},"data-v-e46d33f8",null);e.a=i.exports},D3NR:function(t,e){},DAod:function(t,e){},E5nt:function(t,e,a){"use strict";(function(t){var s=a("mvHQ"),i=a.n(s),n=a("sZhX");a("VQq/");e.a={components:{bubbleTip:n.a},name:"History",data:function(){return{updateFileName:"",filePath:"",fileUploadDialogVisible:!1,isEdit:!0,editInfoDialogVisible:!1,bubbleTip:"",areaData1Array:[],areaData2Array:[],areaData3Array:[],areaData4Array:[],areaData:{data1:"",data2:"",data3:"",data4:""},powerValue:[],defaultProps:{children:"child",label:"title"},queryAreaId:[],areaArray:[],loading:!0,fileList:[],value1:"",dialogTit:"",bb:"",cc:"",dd:"",curPageData:[],formData:{date:"",project_id:"",floor_id:0,sys_menu_id:0,page_index:1,one_page_num:20,total:0,pageCount:0},areaCheckedTitle:"",nodeIsChange:!1,preKeysArray:[],deleteInfoDialog:!1,delRecordDate:"",roleKey:"",dialogInfoObj:{used_water:"",used_water_price:"",used_electric:"",used_electric_price:"",used_gas:"",used_gas_price:"",income:"",rent_house_num:"",date:"",area_name:"",show_id:"",row_key:""},inputExp:/^\d+(\.\d+)?$/}},watch:{},created:function(){this.formData.sys_menu_id=this.$store.state.sysList[2].sys_menu_id,this.formData.project_id=this.$store.state.projectId,this.initData()},mounted:function(){},methods:{cancleUpdateFile:function(){t("#upSysFile").val(""),this.updateFileName="",this.fileUploadDialogVisible=!1},confirmUpdateFile:function(){var e=this;return t("#uploadFileForm").ajaxSubmit(function(t){console.log(t);var a=t.data.handle_result;a?(e.cancleUpdateFile(),e.initData(),e.$message({message:a,type:"success"})):e.$message.error(t.message)}),!1},fileChange:function(t){var e=t.target.files[0];this.updateFileName=e.name,console.log(e)},openUploadWin:function(){this.fileUploadDialogVisible=!0},saveRecordInfo:function(){var t=this,e=void 0,a=void 0,s=t.isEdit,n=t.dialogInfoObj;for(var o in s?a="修改成功":(n.show_id=n.row_key=1,a="录入成功"),n){var r=n[o];if(!r)return void t.bubbleTipShow("请完善信息");if("area_name"!=o&&"date"!=o&&"row_key"!=o&&!t.inputExp.test(Number(r)))return console.log(r),void t.bubbleTipShow("请输入纯数字")}if(s)e={project_id:t.$store.state.projectId,floor_id:t.formData.floor_id,sys_menu_id:t.formData.sys_menu_id,row_key:t.dialogInfoObj.row_key,update_data:i()(t.dialogInfoObj),page_index:1};else{var l="floor_id:"+t.formData.floor_id+".date:"+n.date.substring(0,10).replace(/-/g,"");n.row_key=l,e={project_id:t.$store.state.projectId,floor_id:t.formData.floor_id,sys_menu_id:t.formData.sys_menu_id,insert_one_data:i()(n),page_index:1}}console.log(e),t.$http.post("hotel_energy/history_record",e).then(function(e){console.log(e),"0"==e.data.code?(t.initData(),t.bubbleTipShow(a),setTimeout(function(){t.editInfoDialogVisible=!1,t.dialogInfoObj={}},2e3)):(t.bubbleTipShow(e.data.message),t.editInfoDialogVisible=!1,t.dialogInfoObj={})}).catch(function(t){console.log(t)})},downloadModule:function(){var t={project_id:this.$store.state.projectId,floor_id:this.formData.floor_id,sys_menu_id:this.formData.sys_menu_id,download_file:!0};this.$http.post("hotel_energy/history_record",t).then(function(t){console.log(t);var e="http://"+t.data;window.location.href=e}).catch(function(t){console.log(t)})},bubbleTipShow:function(t){this.bubbleTip=t,this.$store.state.bubbleShow=!0;var e=this;setTimeout(function(){e.$store.state.bubbleShow=!1},3e3)},confirmDelete:function(){var t=this,e={project_id:t.$store.state.projectId,floor_id:t.formData.floor_id,sys_menu_id:t.formData.sys_menu_id,del_record_date:t.delRecordDate,row_key:t.roleKey};console.log(e),t.$http.post("hotel_energy/history_record",e).then(function(e){console.log(e),"0"==e.data.code?(t.isReset=!1,t.initData(),t.bubbleTipShow("删除成功"),setTimeout(function(){t.deleteInfoDialog=!1},2e3)):(t.bubbleTipShow(e.data.message),t.deleteInfoDialog=!1)}).catch(function(t){console.log(t)})},openDeleteDialog:function(t){this.deleteInfoDialog=!0;var e=t.date;this.delRecordDate=e.substring(0,10).replace(/-/g,""),this.roleKey=t.row_key},areaData1Chang:function(t){this.formData.floor_id=t,this.areaData.data2="",this.areaData2Array=this.areaData3Array=[];for(var e=this.areaData1Array,a=0;a<e.length;a++){var s=e[a];s.id==t&&(s.child?this.areaData2Array=s.child:this.areaData2Array=[],this.areaCheckedTitle=s.title)}},areaData2Chang:function(t){this.formData.floor_id=t,this.areaData3Array=[],this.areaData.data3="";for(var e=this.areaData2Array,a=0;a<e.length;a++){var s=e[a];s.id==t&&(this.areaData3Array=s.child,this.areaCheckedTitle=s.title)}},areaData3Chang:function(t){this.formData.floor_id=t,this.areaData4Array=[],this.areaData.data4="";for(var e=this.areaData3Array,a=0;a<e.length;a++){var s=e[a];s.id==t&&(this.areaData4Array=s.child,this.areaCheckedTitle=s.title)}},areaData4Chang:function(t){this.formData.floor_id=t;for(var e=this.areaData4Array,a=0;a<e.length;a++){var s=e[a];s.id==t&&(this.areaCheckedTitle=s.title)}},queryClick:function(){this.loading=!0,this.initData()},initData:function(){var t=this,e=t.formData;console.log(e),this.$http.post("/hotel_energy/history_record",e).then(function(e){console.log(e),0==e.data.code?(t.curPageData=e.data.data.history_record.data,t.formData.total=e.data.data.history_record.total_record_num,t.formData.pageCount=e.data.data.history_record.total_page_num,t.areaData1Array=e.data.data.history_record.area_level,t.loading=!1):t.$message.error(e.data.message)})},toInputPage:function(){this.loading=!0,this.formData.page_index>this.formData.pageCount&&(this.formData.page_index=this.formData.pageCount),this.initData()},currentPageChange:function(t){this.loading=!0,this.formData.page_index=t,this.initData()},takeIn:function(){this.isEdit=!1,this.dialogInfoObj.area_name=this.areaCheckedTitle,this.dialogTit="单个录入",this.editInfoDialogVisible=!0},editRecord:function(t){console.log(t);this.isEdit=!0,this.dialogTit="修改记录",this.editInfoDialogVisible=!0,this.dialogInfoObj=t},cancleImport:function(){this.editInfoDialogVisible=!1,this.dialogTit="",this.dialogInfoObj={}}}}}).call(e,a("7t+N"))},ESRJ:function(t,e){},"Ewc/":function(t,e){},Fxxr:function(t,e){},GDlk:function(t,e,a){"use strict";var s=a("jgfL"),i={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"echartsAnalysis"},[e("div",{staticClass:"lineEcharts",attrs:{id:"lines"}}),this._v(" "),e("div",{staticClass:"pieEcharts",attrs:{id:"pies"}}),this._v(" "),e("div",{staticClass:"barEcharts",attrs:{id:"bars"}})])}]};var n=function(t){a("+xX6")},o=a("VU/8")(s.a,i,!1,n,"data-v-988eeef6",null);e.a=o.exports},GVYO:function(t,e){},GZ2c:function(t,e){},GraD:function(t,e,a){"use strict";(function(t,e){var s,i=a("Zx67"),n=a.n(i),o=a("K6ED"),r=a.n(o),l=a("OvRC"),c=a.n(l),d=a("Zzip"),u=a.n(d),h=a("5QVw"),m=a.n(h),p=a("kiBT"),f=a.n(p),v=a("//Fk"),_=a.n(v),g=a("C4MV"),b=a.n(g),y=a("woOf"),w=a.n(y),C=a("fZjL"),x=a.n(C),k=a("mvHQ"),D=a.n(k),S=a("pFYg"),A=a.n(S);!function(s){if("object"==("undefined"==typeof exports?"undefined":A()(exports))&&void 0!==e)e.exports=s();else if("function"==typeof define&&a("nErl"))define([],s);else{("undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:this).flvjs=s()}}(function(){return function t(e,a,i){function n(r,l){if(!a[r]){if(!e[r]){if(!l&&("function"==typeof s&&s))return s(r,!0);if(o)return o(r,!0);var c=new Error("Cannot find module '"+r+"'");throw c.code="MODULE_NOT_FOUND",c}var d=a[r]={exports:{}};e[r][0].call(d.exports,function(t){return n(e[r][1][t]||t)},d,d.exports,t,e,a,i)}return a[r].exports}for(var o="function"==typeof s&&s,r=0;r<i.length;r++)n(i[r]);return n}({1:[function(e,a,s){(function(t,i){!function(t,e){"object"==(void 0===s?"undefined":A()(s))&&void 0!==a?a.exports=e():t.ES6Promise=e()}(this,function(){function a(t){return"function"==typeof t}function s(){var t=setTimeout;return function(){return t(n,1)}}function n(){for(var t=0;t<x;t+=2)(0,P[t])(P[t+1]),P[t]=void 0,P[t+1]=void 0;x=0}function o(t,e){var a=arguments,s=this,i=new this.constructor(l);void 0===i[M]&&b(i);var n=s._state;return n?function(){var t=a[n-1];S(function(){return g(n,i,t,s._result)})}():f(s,i,t,e),i}function r(t){if(t&&"object"==(void 0===t?"undefined":A()(t))&&t.constructor===this)return t;var e=new this(l);return u(e,t),e}function l(){}function c(t){try{return t.then}catch(t){return j.error=t,j}}function d(t,e,s){e.constructor===t.constructor&&s===o&&e.constructor.resolve===r?function(t,e){e._state===F?m(t,e._result):e._state===O?p(t,e._result):f(e,void 0,function(e){return u(t,e)},function(e){return p(t,e)})}(t,e):s===j?(p(t,j.error),j.error=null):void 0===s?m(t,e):a(s)?function(t,e,a){S(function(t){var s=!1,i=function(t,e,a,s){try{t.call(e,a,s)}catch(t){return t}}(a,e,function(a){s||(s=!0,e!==a?u(t,a):m(t,a))},function(e){s||(s=!0,p(t,e))},t._label);!s&&i&&(s=!0,p(t,i))},t)}(t,e,s):m(t,e)}function u(t,e){t===e?p(t,new TypeError("You cannot resolve a promise with itself")):function(t){return"function"==typeof t||"object"==(void 0===t?"undefined":A()(t))&&null!==t}(e)?d(t,e,c(e)):m(t,e)}function h(t){t._onerror&&t._onerror(t._result),v(t)}function m(t,e){t._state===N&&(t._result=e,t._state=F,0!==t._subscribers.length&&S(v,t))}function p(t,e){t._state===N&&(t._state=O,t._result=e,S(h,t))}function f(t,e,a,s){var i=t._subscribers,n=i.length;t._onerror=null,i[n]=e,i[n+F]=a,i[n+O]=s,0===n&&t._state&&S(v,t)}function v(t){var e=t._subscribers,a=t._state;if(0!==e.length){for(var s=void 0,i=void 0,n=t._result,o=0;o<e.length;o+=3)s=e[o],i=e[o+a],s?g(a,s,i,n):i(n);t._subscribers.length=0}}function _(){this.error=null}function g(t,e,s,i){var n=a(s),o=void 0,r=void 0,l=void 0,c=void 0;if(n){if((o=function(t,e){try{return t(e)}catch(t){return U.error=t,U}}(s,i))===U?(c=!0,r=o.error,o.error=null):l=!0,e===o)return void p(e,new TypeError("A promises callback cannot return that same promise."))}else o=i,l=!0;e._state!==N||(n&&l?u(e,o):c?p(e,r):t===F?m(e,o):t===O&&p(e,o))}function b(t){t[M]=V++,t._state=void 0,t._result=void 0,t._subscribers=[]}function y(t,e){this._instanceConstructor=t,this.promise=new t(l),this.promise[M]||b(this.promise),C(e)?(this._input=e,this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?m(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&m(this.promise,this._result))):p(this.promise,new Error("Array Methods must be provided an Array"))}function w(t){this[M]=V++,this._result=this._state=void 0,this._subscribers=[],l!==t&&("function"!=typeof t&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof w?function(t,e){try{e(function(e){u(t,e)},function(e){p(t,e)})}catch(e){p(t,e)}}(this,t):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}var C=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},x=0,k=void 0,D=void 0,S=function(t,e){P[x]=t,P[x+1]=e,2===(x+=2)&&(D?D(n):R())},E="undefined"!=typeof window?window:void 0,I=E||{},L=I.MutationObserver||I.WebKitMutationObserver,T="undefined"==typeof self&&void 0!==t&&"[object process]"==={}.toString.call(t),B="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,P=new Array(1e3),R=void 0;R=T?function(){return t.nextTick(n)}:L?function(){var t=0,e=new L(n),a=document.createTextNode("");return e.observe(a,{characterData:!0}),function(){a.data=t=++t%2}}():B?function(){var t=new MessageChannel;return t.port1.onmessage=n,function(){return t.port2.postMessage(0)}}():void 0===E&&"function"==typeof e?function(){try{var t=e("vertx");return void 0!==(k=t.runOnLoop||t.runOnContext)?function(){k(n)}:s()}catch(t){return s()}}():s();var M=Math.random().toString(36).substring(16),N=void 0,F=1,O=2,j=new _,U=new _,V=0;return y.prototype._enumerate=function(){for(var t=this.length,e=this._input,a=0;this._state===N&&a<t;a++)this._eachEntry(e[a],a)},y.prototype._eachEntry=function(t,e){var a=this._instanceConstructor,s=a.resolve;if(s===r){var i=c(t);if(i===o&&t._state!==N)this._settledAt(t._state,e,t._result);else if("function"!=typeof i)this._remaining--,this._result[e]=t;else if(a===w){var n=new a(l);d(n,t,i),this._willSettleAt(n,e)}else this._willSettleAt(new a(function(e){return e(t)}),e)}else this._willSettleAt(s(t),e)},y.prototype._settledAt=function(t,e,a){var s=this.promise;s._state===N&&(this._remaining--,t===O?p(s,a):this._result[e]=a),0===this._remaining&&m(s,this._result)},y.prototype._willSettleAt=function(t,e){var a=this;f(t,void 0,function(t){return a._settledAt(F,e,t)},function(t){return a._settledAt(O,e,t)})},w.all=function(t){return new y(this,t).promise},w.race=function(t){var e=this;return new e(C(t)?function(a,s){for(var i=t.length,n=0;n<i;n++)e.resolve(t[n]).then(a,s)}:function(t,e){return e(new TypeError("You must pass an array to race."))})},w.resolve=r,w.reject=function(t){var e=new this(l);return p(e,t),e},w._setScheduler=function(t){D=t},w._setAsap=function(t){S=t},w._asap=S,w.prototype={constructor:w,then:o,catch:function(t){return this.then(null,t)}},w.polyfill=function(){var t=void 0;if(void 0!==i)t=i;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;if(e){var a=null;try{a=Object.prototype.toString.call(e.resolve())}catch(t){}if("[object Promise]"===a&&!e.cast)return}t.Promise=w},w.Promise=w,w})}).call(this,e("_process"),void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:3}],2:[function(t,e,a){function s(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(t){return"function"==typeof t}function n(t){return"object"==(void 0===t?"undefined":A()(t))&&null!==t}function o(t){return void 0===t}e.exports=s,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._maxListeners=void 0,s.defaultMaxListeners=10,s.prototype.setMaxListeners=function(t){if(!function(t){return"number"==typeof t}(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},s.prototype.emit=function(t){var e,a,s,r,l,c;if(this._events||(this._events={}),"error"===t&&(!this._events.error||n(this._events.error)&&!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;var d=new Error('Uncaught, unspecified "error" event. ('+e+")");throw d.context=e,d}if(o(a=this._events[t]))return!1;if(i(a))switch(arguments.length){case 1:a.call(this);break;case 2:a.call(this,arguments[1]);break;case 3:a.call(this,arguments[1],arguments[2]);break;default:r=Array.prototype.slice.call(arguments,1),a.apply(this,r)}else if(n(a))for(r=Array.prototype.slice.call(arguments,1),s=(c=a.slice()).length,l=0;l<s;l++)c[l].apply(this,r);return!0},s.prototype.addListener=function(t,e){var a;if(!i(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,i(e.listener)?e.listener:e),this._events[t]?n(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,n(this._events[t])&&!this._events[t].warned&&(a=o(this._maxListeners)?s.defaultMaxListeners:this._maxListeners)&&a>0&&this._events[t].length>a&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace()),this},s.prototype.on=s.prototype.addListener,s.prototype.once=function(t,e){function a(){this.removeListener(t,a),s||(s=!0,e.apply(this,arguments))}if(!i(e))throw TypeError("listener must be a function");var s=!1;return a.listener=e,this.on(t,a),this},s.prototype.removeListener=function(t,e){var a,s,o,r;if(!i(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(o=(a=this._events[t]).length,s=-1,a===e||i(a.listener)&&a.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(n(a)){for(r=o;r-- >0;)if(a[r]===e||a[r].listener&&a[r].listener===e){s=r;break}if(s<0)return this;1===a.length?(a.length=0,delete this._events[t]):a.splice(s,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},s.prototype.removeAllListeners=function(t){var e,a;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(i(a=this._events[t]))this.removeListener(t,a);else if(a)for(;a.length;)this.removeListener(t,a[a.length-1]);return delete this._events[t],this},s.prototype.listeners=function(t){return this._events&&this._events[t]?i(this._events[t])?[this._events[t]]:this._events[t].slice():[]},s.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(i(e))return 1;if(e)return e.length}return 0},s.listenerCount=function(t,e){return t.listenerCount(e)}},{}],3:[function(t,e,a){function s(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function n(t){if(d===setTimeout)return setTimeout(t,0);if((d===s||!d)&&setTimeout)return d=setTimeout,setTimeout(t,0);try{return d(t,0)}catch(e){try{return d.call(null,t,0)}catch(e){return d.call(this,t,0)}}}function o(){f&&m&&(f=!1,m.length?p=m.concat(p):v=-1,p.length&&r())}function r(){if(!f){var t=n(o);f=!0;for(var e=p.length;e;){for(m=p,p=[];++v<e;)m&&m[v].run();v=-1,e=p.length}m=null,f=!1,function(t){if(u===clearTimeout)return clearTimeout(t);if((u===i||!u)&&clearTimeout)return u=clearTimeout,clearTimeout(t);try{u(t)}catch(e){try{return u.call(null,t)}catch(e){return u.call(this,t)}}}(t)}}function l(t,e){this.fun=t,this.array=e}function c(){}var d,u,h=e.exports={};!function(){try{d="function"==typeof setTimeout?setTimeout:s}catch(t){d=s}try{u="function"==typeof clearTimeout?clearTimeout:i}catch(t){u=i}}();var m,p=[],f=!1,v=-1;h.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var a=1;a<arguments.length;a++)e[a-1]=arguments[a];p.push(new l(t,e)),1!==p.length||f||n(r)},l.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=c,h.addListener=c,h.once=c,h.off=c,h.removeListener=c,h.removeAllListeners=c,h.emit=c,h.prependListener=c,h.prependOnceListener=c,h.listeners=function(t){return[]},h.binding=function(t){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(t){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},{}],4:[function(t,e,a){var s=arguments[3],i=arguments[4],n=arguments[5],o=D.a;e.exports=function(t,e){for(var a,r=x()(n),l=0,c=r.length;l<c;l++){var d=r[l],u=n[d].exports;if(u===t||u&&u.default===t){a=d;break}}if(!a){a=Math.floor(Math.pow(16,8)*Math.random()).toString(16);var h={};for(l=0,c=r.length;l<c;l++){h[d=r[l]]=d}i[a]=[Function(["require","module","exports"],"("+t+")(self)"),h]}var m=Math.floor(Math.pow(16,8)*Math.random()).toString(16),p={};p[a]=a,i[m]=[Function(["require"],"var f = require("+o(a)+");(f.default ? f.default : f)(self);"),p];var f={};!function t(e){for(var a in f[e]=!0,i[e][1]){var s=i[e][1][a];f[s]||t(s)}}(m);var v="("+s+")({"+x()(f).map(function(t){return o(t)+":["+i[t][0]+","+o(i[t][1])+"]"}).join(",")+"},{},["+o(m)+"])",_=window.URL||window.webkitURL||window.mozURL||window.msURL,g=new Blob([v],{type:"text/javascript"});if(e&&e.bare)return g;var b=_.createObjectURL(g),y=new Worker(b);return y.objectURL=b,y}},{}],5:[function(t,e,a){Object.defineProperty(a,"__esModule",{value:!0}),a.createDefaultConfig=function(){return w()({},s)};var s=a.defaultConfig={enableWorker:!1,enableStashBuffer:!0,stashInitialSize:void 0,isLive:!1,lazyLoad:!0,lazyLoadMaxDuration:180,lazyLoadRecoverDuration:30,deferLoadAfterSourceOpen:!0,autoCleanupMaxBackwardDuration:180,autoCleanupMinBackwardDuration:120,statisticsInfoReportInterval:600,fixAudioTimestampGap:!0,accurateSeek:!1,seekType:"range",seekParamStart:"bstart",seekParamEnd:"bend",rangeLoadZeroStart:!1,customSeekHandler:void 0,reuseRedirectedURL:!1}},{}],6:[function(t,e,a){Object.defineProperty(a,"__esModule",{value:!0});var s=function(){function t(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),b()(t,s.key,s)}}return function(e,a,s){return a&&t(e.prototype,a),s&&t(e,s),e}}(),i=function(t){return t&&t.__esModule?t:{default:t}}(t("../io/io-controller.js")),n=t("../config.js"),o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return s(t,null,[{key:"supportMSEH264Playback",value:function(){return window.MediaSource&&window.MediaSource.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"')}},{key:"supportNetworkStreamIO",value:function(){var t=new i.default({},(0,n.createDefaultConfig)()),e=t.loaderType;return t.destroy(),"fetch-stream-loader"==e||"xhr-moz-chunked-loader"==e}},{key:"getNetworkLoaderTypeName",value:function(){var t=new i.default({},(0,n.createDefaultConfig)()),e=t.loaderType;return t.destroy(),e}},{key:"supportNativeMediaPlayback",value:function(e){void 0==t.videoElement&&(t.videoElement=window.document.createElement("video"));var a=t.videoElement.canPlayType(e);return"probably"===a||"maybe"==a}},{key:"getFeatureList",value:function(){var e={mseFlvPlayback:!1,mseLiveFlvPlayback:!1,networkStreamIO:!1,networkLoaderName:"",nativeMP4H264Playback:!1,nativeWebmVP8Playback:!1,nativeWebmVP9Playback:!1};return e.mseFlvPlayback=t.supportMSEH264Playback(),e.networkStreamIO=t.supportNetworkStreamIO(),e.networkLoaderName=t.getNetworkLoaderTypeName(),e.mseLiveFlvPlayback=e.mseFlvPlayback&&e.networkStreamIO,e.nativeMP4H264Playback=t.supportNativeMediaPlayback('video/mp4; codecs="avc1.42001E, mp4a.40.2"'),e.nativeWebmVP8Playback=t.supportNativeMediaPlayback('video/webm; codecs="vp8.0, vorbis"'),e.nativeWebmVP9Playback=t.supportNativeMediaPlayback('video/webm; codecs="vp9"'),e}}]),t}();a.default=o},{"../config.js":5,"../io/io-controller.js":23}],7:[function(t,e,a){Object.defineProperty(a,"__esModule",{value:!0});var s=function(){function t(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),b()(t,s.key,s)}}return function(e,a,s){return a&&t(e.prototype,a),s&&t(e,s),e}}(),i=function(){function t(){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.mimeType=null,this.duration=null,this.hasAudio=null,this.hasVideo=null,this.audioCodec=null,this.videoCodec=null,this.audioDataRate=null,this.videoDataRate=null,this.audioSampleRate=null,this.audioChannelCount=null,this.width=null,this.height=null,this.fps=null,this.profile=null,this.level=null,this.chromaFormat=null,this.sarNum=null,this.sarDen=null,this.metadata=null,this.segments=null,this.segmentCount=null,this.hasKeyframesIndex=null,this.keyframesIndex=null}return s(t,[{key:"isComplete",value:function(){var t=!1===this.hasAudio||!0===this.hasAudio&&null!=this.audioCodec&&null!=this.audioSampleRate&&null!=this.audioChannelCount,e=!1===this.hasVideo||!0===this.hasVideo&&null!=this.videoCodec&&null!=this.width&&null!=this.height&&null!=this.fps&&null!=this.profile&&null!=this.level&&null!=this.chromaFormat&&null!=this.sarNum&&null!=this.sarDen;return null!=this.mimeType&&null!=this.duration&&null!=this.metadata&&null!=this.hasKeyframesIndex&&t&&e}},{key:"isSeekable",value:function(){return!0===this.hasKeyframesIndex}},{key:"getNearestKeyframe",value:function(t){if(null==this.keyframesIndex)return null;var e=this.keyframesIndex,a=this._search(e.times,t);return{index:a,milliseconds:e.times[a],fileposition:e.filepositions[a]}}},{key:"_search",value:function(t,e){var a=0,s=t.length-1,i=0,n=0,o=s;for(e<t[0]&&(a=0,n=o+1);n<=o;){if((i=n+Math.floor((o-n)/2))===s||e>=t[i]&&e<t[i+1]){a=i;break}t[i]<e?n=i+1:o=i-1}return a}}]),t}();a.default=i},{}],8:[function(t,e,a){function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(a,"__esModule",{value:!0});var i=function(){function t(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),b()(t,s.key,s)}}return function(e,a,s){return a&&t(e.prototype,a),s&&t(e,s),e}}();a.SampleInfo=function t(e,a,i,n,o){s(this,t),this.dts=e,this.pts=a,this.duration=i,this.originalDts=n,this.isSyncPoint=o,this.fileposition=null},a.MediaSegmentInfo=function(){function t(){s(this,t),this.beginDts=0,this.endDts=0,this.beginPts=0,this.endPts=0,this.originalBeginDts=0,this.originalEndDts=0,this.syncPoints=[],this.firstSample=null,this.lastSample=null}return i(t,[{key:"appendSyncPoint",value:function(t){t.isSyncPoint=!0,this.syncPoints.push(t)}}]),t}(),a.IDRSampleList=function(){function t(){s(this,t),this._list=[]}return i(t,[{key:"clear",value:function(){this._list=[]}},{key:"appendArray",value:function(t){var e=this._list;0!==t.length&&(e.length>0&&t[0].originalDts<e[e.length-1].originalDts&&this.clear(),Array.prototype.push.apply(e,t))}},{key:"getLastSyncPointBeforeDts",value:function(t){if(0==this._list.length)return null;var e=this._list,a=0,s=e.length-1,i=0,n=0,o=s;for(t<e[0].dts&&(a=0,n=o+1);n<=o;){if((i=n+Math.floor((o-n)/2))===s||t>=e[i].dts&&t<e[i+1].dts){a=i;break}e[i].dts<t?n=i+1:o=i-1}return this._list[a]}}]),t}(),a.MediaSegmentInfoList=function(){function t(e){s(this,t),this._type=e,this._list=[],this._lastAppendLocation=-1}return i(t,[{key:"isEmpty",value:function(){return 0===this._list.length}},{key:"clear",value:function(){this._list=[],this._lastAppendLocation=-1}},{key:"_searchNearestSegmentBefore",value:function(t){var e=this._list;if(0===e.length)return-2;var a=e.length-1,s=0,i=0,n=a,o=0;if(t<e[0].originalBeginDts)return-1;for(;i<=n;){if((s=i+Math.floor((n-i)/2))===a||t>e[s].lastSample.originalDts&&t<e[s+1].originalBeginDts){o=s;break}e[s].originalBeginDts<t?i=s+1:n=s-1}return o}},{key:"_searchNearestSegmentAfter",value:function(t){return this._searchNearestSegmentBefore(t)+1}},{key:"append",value:function(t){var e=this._list,a=t,s=this._lastAppendLocation,i=0;-1!==s&&s<e.length&&a.originalBeginDts>=e[s].lastSample.originalDts&&(s===e.length-1||s<e.length-1&&a.originalBeginDts<e[s+1].originalBeginDts)?i=s+1:e.length>0&&(i=this._searchNearestSegmentBefore(a.originalBeginDts)+1),this._lastAppendLocation=i,this._list.splice(i,0,a)}},{key:"getLastSegmentBefore",value:function(t){var e=this._searchNearestSegmentBefore(t);return e>=0?this._list[e]:null}},{key:"getLastSampleBefore",value:function(t){var e=this.getLastSegmentBefore(t);return null!=e?e.lastSample:null}},{key:"getLastSyncPointBefore",value:function(t){for(var e=this._searchNearestSegmentBefore(t),a=this._list[e].syncPoints;0===a.length&&e>0;)e--,a=this._list[e].syncPoints;return a.length>0?a[a.length-1]:null}},{key:"type",get:function(){return this._type}},{key:"length",get:function(){return this._list.length}}]),t}()},{}],9:[function(t,e,a){function s(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(a,"__esModule",{value:!0});var i=function(){function t(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),b()(t,s.key,s)}}return function(e,a,s){return a&&t(e.prototype,a),s&&t(e,s),e}}(),n=s(t("events")),o=s(t("../utils/logger.js")),r=s(t("../utils/browser.js")),l=s(t("./mse-events.js")),c=t("./media-segment-info.js"),d=t("../utils/exception.js"),u=function(){function t(e){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.TAG="MSEController",this._config=e,this._emitter=new n.default,this._config.isLive&&void 0==this._config.autoCleanupSourceBuffer&&(this._config.autoCleanupSourceBuffer=!0),this.e={onSourceOpen:this._onSourceOpen.bind(this),onSourceEnded:this._onSourceEnded.bind(this),onSourceClose:this._onSourceClose.bind(this),onSourceBufferError:this._onSourceBufferError.bind(this),onSourceBufferUpdateEnd:this._onSourceBufferUpdateEnd.bind(this)},this._mediaSource=null,this._mediaSourceObjectURL=null,this._mediaElement=null,this._isBufferFull=!1,this._hasPendingEos=!1,this._requireSetMediaDuration=!1,this._pendingMediaDuration=0,this._pendingSourceBufferInit=[],this._mimeTypes={video:null,audio:null},this._sourceBuffers={video:null,audio:null},this._lastInitSegments={video:null,audio:null},this._pendingSegments={video:[],audio:[]},this._pendingRemoveRanges={video:[],audio:[]},this._idrList=new c.IDRSampleList}return i(t,[{key:"destroy",value:function(){(this._mediaElement||this._mediaSource)&&this.detachMediaElement(),this.e=null,this._emitter.removeAllListeners(),this._emitter=null}},{key:"on",value:function(t,e){this._emitter.addListener(t,e)}},{key:"off",value:function(t,e){this._emitter.removeListener(t,e)}},{key:"attachMediaElement",value:function(t){if(this._mediaSource)throw new d.IllegalStateException("MediaSource has been attached to an HTMLMediaElement!");var e=this._mediaSource=new window.MediaSource;e.addEventListener("sourceopen",this.e.onSourceOpen),e.addEventListener("sourceended",this.e.onSourceEnded),e.addEventListener("sourceclose",this.e.onSourceClose),this._mediaElement=t,this._mediaSourceObjectURL=window.URL.createObjectURL(this._mediaSource),t.src=this._mediaSourceObjectURL}},{key:"detachMediaElement",value:function(){if(this._mediaSource){var t=this._mediaSource;for(var e in this._sourceBuffers){var a=this._pendingSegments[e];a.splice(0,a.length),this._pendingSegments[e]=null,this._pendingRemoveRanges[e]=null,this._lastInitSegments[e]=null;var s=this._sourceBuffers[e];s&&("closed"!==t.readyState&&(t.removeSourceBuffer(s),s.removeEventListener("error",this.e.onSourceBufferError),s.removeEventListener("updateend",this.e.onSourceBufferUpdateEnd)),this._mimeTypes[e]=null,this._sourceBuffers[e]=null)}if("open"===t.readyState)try{t.endOfStream()}catch(t){o.default.e(this.TAG,t.message)}t.removeEventListener("sourceopen",this.e.onSourceOpen),t.removeEventListener("sourceended",this.e.onSourceEnded),t.removeEventListener("sourceclose",this.e.onSourceClose),this._pendingSourceBufferInit=[],this._isBufferFull=!1,this._idrList.clear(),this._mediaSource=null}this._mediaElement&&(this._mediaElement.src="",this._mediaElement.removeAttribute("src"),this._mediaElement=null),this._mediaSourceObjectURL&&(window.URL.revokeObjectURL(this._mediaSourceObjectURL),this._mediaSourceObjectURL=null)}},{key:"appendInitSegment",value:function(t,e){if(!this._mediaSource||"open"!==this._mediaSource.readyState)return this._pendingSourceBufferInit.push(t),void this._pendingSegments[t.type].push(t);var a=t,s=""+a.container;a.codec&&a.codec.length>0&&(s+=";codecs="+a.codec);var i=!1;if(o.default.v(this.TAG,"Received Initialization Segment, mimeType: "+s),this._lastInitSegments[a.type]=a,s!==this._mimeTypes[a.type]){if(this._mimeTypes[a.type])o.default.v(this.TAG,"Notice: "+a.type+" mimeType changed, origin: "+this._mimeTypes[a.type]+", target: "+s);else{i=!0;try{var n=this._sourceBuffers[a.type]=this._mediaSource.addSourceBuffer(s);n.addEventListener("error",this.e.onSourceBufferError),n.addEventListener("updateend",this.e.onSourceBufferUpdateEnd)}catch(t){return o.default.e(this.TAG,t.message),void this._emitter.emit(l.default.ERROR,{code:t.code,msg:t.message})}}this._mimeTypes[a.type]=s}e||this._pendingSegments[a.type].push(a),i||this._sourceBuffers[a.type]&&!this._sourceBuffers[a.type].updating&&this._doAppendSegments(),r.default.safari&&"audio/mpeg"===a.container&&a.mediaDuration>0&&(this._requireSetMediaDuration=!0,this._pendingMediaDuration=a.mediaDuration/1e3,this._updateMediaSourceDuration())}},{key:"appendMediaSegment",value:function(t){var e=t;this._pendingSegments[e.type].push(e),this._config.autoCleanupSourceBuffer&&this._needCleanupSourceBuffer()&&this._doCleanupSourceBuffer();var a=this._sourceBuffers[e.type];!a||a.updating||this._hasPendingRemoveRanges()||this._doAppendSegments()}},{key:"seek",value:function(t){for(var e in this._sourceBuffers)if(this._sourceBuffers[e]){var a=this._sourceBuffers[e];if("open"===this._mediaSource.readyState)try{a.abort()}catch(t){o.default.e(this.TAG,t.message)}this._idrList.clear();var s=this._pendingSegments[e];if(s.splice(0,s.length),"closed"!==this._mediaSource.readyState){for(var i=0;i<a.buffered.length;i++){var n=a.buffered.start(i),l=a.buffered.end(i);this._pendingRemoveRanges[e].push({start:n,end:l})}if(a.updating||this._doRemoveRanges(),r.default.safari){var c=this._lastInitSegments[e];c&&(this._pendingSegments[e].push(c),a.updating||this._doAppendSegments())}}}}},{key:"endOfStream",value:function(){var t=this._mediaSource,e=this._sourceBuffers;t&&"open"===t.readyState?e.video&&e.video.updating||e.audio&&e.audio.updating?this._hasPendingEos=!0:(this._hasPendingEos=!1,t.endOfStream()):t&&"closed"===t.readyState&&this._hasPendingSegments()&&(this._hasPendingEos=!0)}},{key:"getNearestKeyframe",value:function(t){return this._idrList.getLastSyncPointBeforeDts(t)}},{key:"_needCleanupSourceBuffer",value:function(){if(!this._config.autoCleanupSourceBuffer)return!1;var t=this._mediaElement.currentTime;for(var e in this._sourceBuffers){var a=this._sourceBuffers[e];if(a){var s=a.buffered;if(s.length>=1&&t-s.start(0)>=this._config.autoCleanupMaxBackwardDuration)return!0}}return!1}},{key:"_doCleanupSourceBuffer",value:function(){var t=this._mediaElement.currentTime;for(var e in this._sourceBuffers){var a=this._sourceBuffers[e];if(a){for(var s=a.buffered,i=!1,n=0;n<s.length;n++){var o=s.start(n),r=s.end(n);if(o<=t&&t<r+3){if(t-o>=this._config.autoCleanupMaxBackwardDuration){i=!0;var l=t-this._config.autoCleanupMinBackwardDuration;this._pendingRemoveRanges[e].push({start:o,end:l})}}else r<t&&(i=!0,this._pendingRemoveRanges[e].push({start:o,end:r}))}i&&!a.updating&&this._doRemoveRanges()}}}},{key:"_updateMediaSourceDuration",value:function(){var t=this._sourceBuffers;if(0!==this._mediaElement.readyState&&"open"===this._mediaSource.readyState&&!(t.video&&t.video.updating||t.audio&&t.audio.updating)){var e=this._mediaSource.duration,a=this._pendingMediaDuration;a>0&&(isNaN(e)||a>e)&&(o.default.v(this.TAG,"Update MediaSource duration from "+e+" to "+a),this._mediaSource.duration=a),this._requireSetMediaDuration=!1,this._pendingMediaDuration=0}}},{key:"_doRemoveRanges",value:function(){for(var t in this._pendingRemoveRanges)if(this._sourceBuffers[t]&&!this._sourceBuffers[t].updating)for(var e=this._sourceBuffers[t],a=this._pendingRemoveRanges[t];a.length&&!e.updating;){var s=a.shift();e.remove(s.start,s.end)}}},{key:"_doAppendSegments",value:function(){var t=this._pendingSegments;for(var e in t)if(this._sourceBuffers[e]&&!this._sourceBuffers[e].updating&&t[e].length>0){var a=t[e].shift();if(a.timestampOffset){var s=this._sourceBuffers[e].timestampOffset,i=a.timestampOffset/1e3;Math.abs(s-i)>.1&&(o.default.v(this.TAG,"Update MPEG audio timestampOffset from "+s+" to "+i),this._sourceBuffers[e].timestampOffset=i),delete a.timestampOffset}if(!a.data||0===a.data.byteLength)continue;try{this._sourceBuffers[e].appendBuffer(a.data),this._isBufferFull=!1,"video"===e&&a.hasOwnProperty("info")&&this._idrList.appendArray(a.info.syncPoints)}catch(t){this._pendingSegments[e].unshift(a),22===t.code?(this._isBufferFull||this._emitter.emit(l.default.BUFFER_FULL),this._isBufferFull=!0):(o.default.e(this.TAG,t.message),this._emitter.emit(l.default.ERROR,{code:t.code,msg:t.message}))}}}},{key:"_onSourceOpen",value:function(){if(o.default.v(this.TAG,"MediaSource onSourceOpen"),this._mediaSource.removeEventListener("sourceopen",this.e.onSourceOpen),this._pendingSourceBufferInit.length>0)for(var t=this._pendingSourceBufferInit;t.length;){var e=t.shift();this.appendInitSegment(e,!0)}this._hasPendingSegments()&&this._doAppendSegments(),this._emitter.emit(l.default.SOURCE_OPEN)}},{key:"_onSourceEnded",value:function(){o.default.v(this.TAG,"MediaSource onSourceEnded")}},{key:"_onSourceClose",value:function(){o.default.v(this.TAG,"MediaSource onSourceClose"),this._mediaSource&&null!=this.e&&(this._mediaSource.removeEventListener("sourceopen",this.e.onSourceOpen),this._mediaSource.removeEventListener("sourceended",this.e.onSourceEnded),this._mediaSource.removeEventListener("sourceclose",this.e.onSourceClose))}},{key:"_hasPendingSegments",value:function(){var t=this._pendingSegments;return t.video.length>0||t.audio.length>0}},{key:"_hasPendingRemoveRanges",value:function(){var t=this._pendingRemoveRanges;return t.video.length>0||t.audio.length>0}},{key:"_onSourceBufferUpdateEnd",value:function(){this._requireSetMediaDuration?this._updateMediaSourceDuration():this._hasPendingRemoveRanges()?this._doRemoveRanges():this._hasPendingSegments()?this._doAppendSegments():this._hasPendingEos&&this.endOfStream(),this._emitter.emit(l.default.UPDATE_END)}},{key:"_onSourceBufferError",value:function(t){o.default.e(this.TAG,"SourceBuffer Error: "+t)}}]),t}();a.default=u},{"../utils/browser.js":39,"../utils/exception.js":40,"../utils/logger.js":41,"./media-segment-info.js":8,"./mse-events.js":10,events:2}],10:[function(t,e,a){Object.defineProperty(a,"__esModule",{value:!0});a.default={ERROR:"error",SOURCE_OPEN:"source_open",UPDATE_END:"update_end",BUFFER_FULL:"buffer_full"}},{}],11:[function(t,e,a){function s(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(a,"__esModule",{value:!0});var i=function(){function t(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),b()(t,s.key,s)}}return function(e,a,s){return a&&t(e.prototype,a),s&&t(e,s),e}}(),n=s(t("events")),o=s(t("../utils/logger.js")),r=s(t("../utils/logging-control.js")),l=s(t("./transmuxing-controller.js")),c=s(t("./transmuxing-events.js")),d=s(t("./transmuxing-worker.js")),u=s(t("./media-info.js")),h=function(){function e(a,s){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.TAG="Transmuxer",this._emitter=new n.default,s.enableWorker&&"undefined"!=typeof Worker)try{var i=t("webworkify");this._worker=i(d.default),this._workerDestroying=!1,this._worker.addEventListener("message",this._onWorkerMessage.bind(this)),this._worker.postMessage({cmd:"init",param:[a,s]}),this.e={onLoggingConfigChanged:this._onLoggingConfigChanged.bind(this)},r.default.registerListener(this.e.onLoggingConfigChanged),this._worker.postMessage({cmd:"logging_config",param:r.default.getConfig()})}catch(t){o.default.e(this.TAG,"Error while initialize transmuxing worker, fallback to inline transmuxing"),this._worker=null,this._controller=new l.default(a,s)}else this._controller=new l.default(a,s);if(this._controller){var u=this._controller;u.on(c.default.IO_ERROR,this._onIOError.bind(this)),u.on(c.default.DEMUX_ERROR,this._onDemuxError.bind(this)),u.on(c.default.INIT_SEGMENT,this._onInitSegment.bind(this)),u.on(c.default.MEDIA_SEGMENT,this._onMediaSegment.bind(this)),u.on(c.default.LOADING_COMPLETE,this._onLoadingComplete.bind(this)),u.on(c.default.RECOVERED_EARLY_EOF,this._onRecoveredEarlyEof.bind(this)),u.on(c.default.MEDIA_INFO,this._onMediaInfo.bind(this)),u.on(c.default.STATISTICS_INFO,this._onStatisticsInfo.bind(this)),u.on(c.default.RECOMMEND_SEEKPOINT,this._onRecommendSeekpoint.bind(this))}}return i(e,[{key:"destroy",value:function(){this._worker?this._workerDestroying||(this._workerDestroying=!0,this._worker.postMessage({cmd:"destroy"}),r.default.removeListener(this.e.onLoggingConfigChanged),this.e=null):(this._controller.destroy(),this._controller=null),this._emitter.removeAllListeners(),this._emitter=null}},{key:"on",value:function(t,e){this._emitter.addListener(t,e)}},{key:"off",value:function(t,e){this._emitter.removeListener(t,e)}},{key:"hasWorker",value:function(){return null!=this._worker}},{key:"open",value:function(){this._worker?this._worker.postMessage({cmd:"start"}):this._controller.start()}},{key:"close",value:function(){this._worker?this._worker.postMessage({cmd:"stop"}):this._controller.stop()}},{key:"seek",value:function(t){this._worker?this._worker.postMessage({cmd:"seek",param:t}):this._controller.seek(t)}},{key:"pause",value:function(){this._worker?this._worker.postMessage({cmd:"pause"}):this._controller.pause()}},{key:"resume",value:function(){this._worker?this._worker.postMessage({cmd:"resume"}):this._controller.resume()}},{key:"_onInitSegment",value:function(t,e){var a=this;_.a.resolve().then(function(){a._emitter.emit(c.default.INIT_SEGMENT,t,e)})}},{key:"_onMediaSegment",value:function(t,e){var a=this;_.a.resolve().then(function(){a._emitter.emit(c.default.MEDIA_SEGMENT,t,e)})}},{key:"_onLoadingComplete",value:function(){var t=this;_.a.resolve().then(function(){t._emitter.emit(c.default.LOADING_COMPLETE)})}},{key:"_onRecoveredEarlyEof",value:function(){var t=this;_.a.resolve().then(function(){t._emitter.emit(c.default.RECOVERED_EARLY_EOF)})}},{key:"_onMediaInfo",value:function(t){var e=this;_.a.resolve().then(function(){e._emitter.emit(c.default.MEDIA_INFO,t)})}},{key:"_onStatisticsInfo",value:function(t){var e=this;_.a.resolve().then(function(){e._emitter.emit(c.default.STATISTICS_INFO,t)})}},{key:"_onIOError",value:function(t,e){var a=this;_.a.resolve().then(function(){a._emitter.emit(c.default.IO_ERROR,t,e)})}},{key:"_onDemuxError",value:function(t,e){var a=this;_.a.resolve().then(function(){a._emitter.emit(c.default.DEMUX_ERROR,t,e)})}},{key:"_onRecommendSeekpoint",value:function(t){var e=this;_.a.resolve().then(function(){e._emitter.emit(c.default.RECOMMEND_SEEKPOINT,t)})}},{key:"_onLoggingConfigChanged",value:function(t){this._worker&&this._worker.postMessage({cmd:"logging_config",param:t})}},{key:"_onWorkerMessage",value:function(t){var e=t.data,a=e.data;if("destroyed"===e.msg||this._workerDestroying)return this._workerDestroying=!1,this._worker.terminate(),void(this._worker=null);switch(e.msg){case c.default.INIT_SEGMENT:case c.default.MEDIA_SEGMENT:this._emitter.emit(e.msg,a.type,a.data);break;case c.default.LOADING_COMPLETE:case c.default.RECOVERED_EARLY_EOF:this._emitter.emit(e.msg);break;case c.default.MEDIA_INFO:f()(a,u.default.prototype),this._emitter.emit(e.msg,a);break;case c.default.STATISTICS_INFO:this._emitter.emit(e.msg,a);break;case c.default.IO_ERROR:case c.default.DEMUX_ERROR:this._emitter.emit(e.msg,a.type,a.info);break;case c.default.RECOMMEND_SEEKPOINT:this._emitter.emit(e.msg,a);break;case"logcat_callback":o.default.emitter.emit("log",a.type,a.logcat)}}}]),e}();a.default=h},{"../utils/logger.js":41,"../utils/logging-control.js":42,"./media-info.js":7,"./transmuxing-controller.js":12,"./transmuxing-events.js":13,"./transmuxing-worker.js":14,events:2,webworkify:4}],12:[function(t,e,a){function s(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(a,"__esModule",{value:!0});var i=function(){function t(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),b()(t,s.key,s)}}return function(e,a,s){return a&&t(e.prototype,a),s&&t(e,s),e}}(),n=s(t("events")),o=s(t("../utils/logger.js")),r=s(t("../utils/browser.js")),l=s(t("./media-info.js")),c=s(t("../demux/flv-demuxer.js")),d=s(t("../remux/mp4-remuxer.js")),u=s(t("../demux/demux-errors.js")),h=s(t("../io/io-controller.js")),m=s(t("./transmuxing-events.js")),p=(t("../io/loader.js"),function(){function t(e,a){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.TAG="TransmuxingController",this._emitter=new n.default,this._config=a,e.segments||(e.segments=[{duration:e.duration,filesize:e.filesize,url:e.url}]),"boolean"!=typeof e.cors&&(e.cors=!0),"boolean"!=typeof e.withCredentials&&(e.withCredentials=!1),this._mediaDataSource=e,this._currentSegmentIndex=0;var s=0;this._mediaDataSource.segments.forEach(function(t){t.timestampBase=s,s+=t.duration,t.cors=e.cors,t.withCredentials=e.withCredentials,a.referrerPolicy&&(t.referrerPolicy=a.referrerPolicy)}),isNaN(s)||this._mediaDataSource.duration===s||(this._mediaDataSource.duration=s),this._mediaInfo=null,this._demuxer=null,this._remuxer=null,this._ioctl=null,this._pendingSeekTime=null,this._pendingResolveSeekPoint=null,this._statisticsReporter=null}return i(t,[{key:"destroy",value:function(){this._mediaInfo=null,this._mediaDataSource=null,this._statisticsReporter&&this._disableStatisticsReporter(),this._ioctl&&(this._ioctl.destroy(),this._ioctl=null),this._demuxer&&(this._demuxer.destroy(),this._demuxer=null),this._remuxer&&(this._remuxer.destroy(),this._remuxer=null),this._emitter.removeAllListeners(),this._emitter=null}},{key:"on",value:function(t,e){this._emitter.addListener(t,e)}},{key:"off",value:function(t,e){this._emitter.removeListener(t,e)}},{key:"start",value:function(){this._loadSegment(0),this._enableStatisticsReporter()}},{key:"_loadSegment",value:function(t,e){this._currentSegmentIndex=t;var a=this._mediaDataSource.segments[t],s=this._ioctl=new h.default(a,this._config,t);s.onError=this._onIOException.bind(this),s.onSeeked=this._onIOSeeked.bind(this),s.onComplete=this._onIOComplete.bind(this),s.onRedirect=this._onIORedirect.bind(this),s.onRecoveredEarlyEof=this._onIORecoveredEarlyEof.bind(this),e?this._demuxer.bindDataSource(this._ioctl):s.onDataArrival=this._onInitChunkArrival.bind(this),s.open(e)}},{key:"stop",value:function(){this._internalAbort(),this._disableStatisticsReporter()}},{key:"_internalAbort",value:function(){this._ioctl&&(this._ioctl.destroy(),this._ioctl=null)}},{key:"pause",value:function(){this._ioctl&&this._ioctl.isWorking()&&(this._ioctl.pause(),this._disableStatisticsReporter())}},{key:"resume",value:function(){this._ioctl&&this._ioctl.isPaused()&&(this._ioctl.resume(),this._enableStatisticsReporter())}},{key:"seek",value:function(t){if(null!=this._mediaInfo&&this._mediaInfo.isSeekable()){var e=this._searchSegmentIndexContains(t);if(e===this._currentSegmentIndex){var a=this._mediaInfo.segments[e];if(void 0==a)this._pendingSeekTime=t;else{var s=a.getNearestKeyframe(t);this._remuxer.seek(s.milliseconds),this._ioctl.seek(s.fileposition),this._pendingResolveSeekPoint=s.milliseconds}}else{var i=this._mediaInfo.segments[e];if(void 0==i)this._pendingSeekTime=t,this._internalAbort(),this._remuxer.seek(),this._remuxer.insertDiscontinuity(),this._loadSegment(e);else{var n=i.getNearestKeyframe(t);this._internalAbort(),this._remuxer.seek(t),this._remuxer.insertDiscontinuity(),this._demuxer.resetMediaInfo(),this._demuxer.timestampBase=this._mediaDataSource.segments[e].timestampBase,this._loadSegment(e,n.fileposition),this._pendingResolveSeekPoint=n.milliseconds,this._reportSegmentMediaInfo(e)}}this._enableStatisticsReporter()}}},{key:"_searchSegmentIndexContains",value:function(t){for(var e=this._mediaDataSource.segments,a=e.length-1,s=0;s<e.length;s++)if(t<e[s].timestampBase){a=s-1;break}return a}},{key:"_onInitChunkArrival",value:function(t,e){var a=this,s=null,i=0;if(e>0)this._demuxer.bindDataSource(this._ioctl),this._demuxer.timestampBase=this._mediaDataSource.segments[this._currentSegmentIndex].timestampBase,i=this._demuxer.parseChunks(t,e);else if((s=c.default.probe(t)).match){this._demuxer=new c.default(s,this._config),this._remuxer||(this._remuxer=new d.default(this._config));var n=this._mediaDataSource;void 0==n.duration||isNaN(n.duration)||(this._demuxer.overridedDuration=n.duration),"boolean"==typeof n.hasAudio&&(this._demuxer.overridedHasAudio=n.hasAudio),"boolean"==typeof n.hasVideo&&(this._demuxer.overridedHasVideo=n.hasVideo),this._demuxer.timestampBase=n.segments[this._currentSegmentIndex].timestampBase,this._demuxer.onError=this._onDemuxException.bind(this),this._demuxer.onMediaInfo=this._onMediaInfo.bind(this),this._remuxer.bindDataSource(this._demuxer.bindDataSource(this._ioctl)),this._remuxer.onInitSegment=this._onRemuxerInitSegmentArrival.bind(this),this._remuxer.onMediaSegment=this._onRemuxerMediaSegmentArrival.bind(this),i=this._demuxer.parseChunks(t,e)}else s=null,o.default.e(this.TAG,"Non-FLV, Unsupported media type!"),_.a.resolve().then(function(){a._internalAbort()}),this._emitter.emit(m.default.DEMUX_ERROR,u.default.FORMAT_UNSUPPORTED,"Non-FLV, Unsupported media type"),i=0;return i}},{key:"_onMediaInfo",value:function(t){var e=this;null==this._mediaInfo&&(this._mediaInfo=w()({},t),this._mediaInfo.keyframesIndex=null,this._mediaInfo.segments=[],this._mediaInfo.segmentCount=this._mediaDataSource.segments.length,f()(this._mediaInfo,l.default.prototype));var a=w()({},t);f()(a,l.default.prototype),this._mediaInfo.segments[this._currentSegmentIndex]=a,this._reportSegmentMediaInfo(this._currentSegmentIndex),null!=this._pendingSeekTime&&_.a.resolve().then(function(){var t=e._pendingSeekTime;e._pendingSeekTime=null,e.seek(t)})}},{key:"_onIOSeeked",value:function(){this._remuxer.insertDiscontinuity()}},{key:"_onIOComplete",value:function(t){var e=t+1;e<this._mediaDataSource.segments.length?(this._internalAbort(),this._loadSegment(e)):(this._emitter.emit(m.default.LOADING_COMPLETE),this._disableStatisticsReporter())}},{key:"_onIORedirect",value:function(t){var e=this._ioctl.extraData;this._mediaDataSource.segments[e].redirectedURL=t}},{key:"_onIORecoveredEarlyEof",value:function(){this._emitter.emit(m.default.RECOVERED_EARLY_EOF)}},{key:"_onIOException",value:function(t,e){o.default.e(this.TAG,"IOException: type = "+t+", code = "+e.code+", msg = "+e.msg),this._emitter.emit(m.default.IO_ERROR,t,e),this._disableStatisticsReporter()}},{key:"_onDemuxException",value:function(t,e){o.default.e(this.TAG,"DemuxException: type = "+t+", info = "+e),this._emitter.emit(m.default.DEMUX_ERROR,t,e)}},{key:"_onRemuxerInitSegmentArrival",value:function(t,e){this._emitter.emit(m.default.INIT_SEGMENT,t,e)}},{key:"_onRemuxerMediaSegmentArrival",value:function(t,e){if(null==this._pendingSeekTime&&(this._emitter.emit(m.default.MEDIA_SEGMENT,t,e),null!=this._pendingResolveSeekPoint&&"video"===t)){var a=e.info.syncPoints,s=this._pendingResolveSeekPoint;this._pendingResolveSeekPoint=null,r.default.safari&&a.length>0&&a[0].originalDts===s&&(s=a[0].pts),this._emitter.emit(m.default.RECOMMEND_SEEKPOINT,s)}}},{key:"_enableStatisticsReporter",value:function(){null==this._statisticsReporter&&(this._statisticsReporter=self.setInterval(this._reportStatisticsInfo.bind(this),this._config.statisticsInfoReportInterval))}},{key:"_disableStatisticsReporter",value:function(){this._statisticsReporter&&(self.clearInterval(this._statisticsReporter),this._statisticsReporter=null)}},{key:"_reportSegmentMediaInfo",value:function(t){var e=this._mediaInfo.segments[t],a=w()({},e);a.duration=this._mediaInfo.duration,a.segmentCount=this._mediaInfo.segmentCount,delete a.segments,delete a.keyframesIndex,this._emitter.emit(m.default.MEDIA_INFO,a)}},{key:"_reportStatisticsInfo",value:function(){var t={};t.url=this._ioctl.currentURL,t.hasRedirect=this._ioctl.hasRedirect,t.hasRedirect&&(t.redirectedURL=this._ioctl.currentRedirectedURL),t.speed=this._ioctl.currentSpeed,t.loaderType=this._ioctl.loaderType,t.currentSegmentIndex=this._currentSegmentIndex,t.totalSegmentCount=this._mediaDataSource.segments.length,this._emitter.emit(m.default.STATISTICS_INFO,t)}}]),t}());a.default=p},{"../demux/demux-errors.js":16,"../demux/flv-demuxer.js":18,"../io/io-controller.js":23,"../io/loader.js":24,"../remux/mp4-remuxer.js":38,"../utils/browser.js":39,"../utils/logger.js":41,"./media-info.js":7,"./transmuxing-events.js":13,events:2}],13:[function(t,e,a){Object.defineProperty(a,"__esModule",{value:!0});a.default={IO_ERROR:"io_error",DEMUX_ERROR:"demux_error",INIT_SEGMENT:"init_segment",MEDIA_SEGMENT:"media_segment",LOADING_COMPLETE:"loading_complete",RECOVERED_EARLY_EOF:"recovered_early_eof",MEDIA_INFO:"media_info",STATISTICS_INFO:"statistics_info",RECOMMEND_SEEKPOINT:"recommend_seekpoint"}},{}],14:[function(t,e,a){function s(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(a,"__esModule",{value:!0});var i=s((s(t("../utils/logger.js")),t("../utils/logging-control.js"))),n=s(t("../utils/polyfill.js")),o=s(t("./transmuxing-controller.js")),r=s(t("./transmuxing-events.js"));a.default=function(t){function e(e){t.postMessage({msg:r.default.RECOMMEND_SEEKPOINT,data:e})}var a=null,s=function(e,a){t.postMessage({msg:"logcat_callback",data:{type:e,logcat:a}})}.bind(this);n.default.install(),t.addEventListener("message",function(n){switch(n.data.cmd){case"init":(a=new o.default(n.data.param[0],n.data.param[1])).on(r.default.IO_ERROR,function(e,a){t.postMessage({msg:r.default.IO_ERROR,data:{type:e,info:a}})}.bind(this)),a.on(r.default.DEMUX_ERROR,function(e,a){t.postMessage({msg:r.default.DEMUX_ERROR,data:{type:e,info:a}})}.bind(this)),a.on(r.default.INIT_SEGMENT,function(e,a){var s={msg:r.default.INIT_SEGMENT,data:{type:e,data:a}};t.postMessage(s,[a.data])}.bind(this)),a.on(r.default.MEDIA_SEGMENT,function(e,a){var s={msg:r.default.MEDIA_SEGMENT,data:{type:e,data:a}};t.postMessage(s,[a.data])}.bind(this)),a.on(r.default.LOADING_COMPLETE,function(){var e={msg:r.default.LOADING_COMPLETE};t.postMessage(e)}.bind(this)),a.on(r.default.RECOVERED_EARLY_EOF,function(){var e={msg:r.default.RECOVERED_EARLY_EOF};t.postMessage(e)}.bind(this)),a.on(r.default.MEDIA_INFO,function(e){var a={msg:r.default.MEDIA_INFO,data:e};t.postMessage(a)}.bind(this)),a.on(r.default.STATISTICS_INFO,function(e){var a={msg:r.default.STATISTICS_INFO,data:e};t.postMessage(a)}.bind(this)),a.on(r.default.RECOMMEND_SEEKPOINT,e.bind(this));break;case"destroy":a&&(a.destroy(),a=null),t.postMessage({msg:"destroyed"});break;case"start":a.start();break;case"stop":a.stop();break;case"seek":a.seek(n.data.param);break;case"pause":a.pause();break;case"resume":a.resume();break;case"logging_config":var l=n.data.param;i.default.applyConfig(l),!0===l.enableCallback?i.default.addLogListener(s):i.default.removeLogListener(s)}})}},{"../utils/logger.js":41,"../utils/logging-control.js":42,"../utils/polyfill.js":43,"./transmuxing-controller.js":12,"./transmuxing-events.js":13}],15:[function(t,e,a){function s(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(a,"__esModule",{value:!0});var i=function(){function t(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),b()(t,s.key,s)}}return function(e,a,s){return a&&t(e.prototype,a),s&&t(e,s),e}}(),n=s(t("../utils/logger.js")),o=s(t("../utils/utf8-conv.js")),r=t("../utils/exception.js"),l=function(){var t=new ArrayBuffer(2);return new DataView(t).setInt16(0,256,!0),256===new Int16Array(t)[0]}(),c=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return i(t,null,[{key:"parseScriptData",value:function(e,a,s){var i={};try{var o=t.parseValue(e,a,s),r=t.parseValue(e,a+o.size,s-o.size);i[o.data]=r.data}catch(t){n.default.e("AMF",t.toString())}return i}},{key:"parseObject",value:function(e,a,s){if(s<3)throw new r.IllegalStateException("Data not enough when parse ScriptDataObject");var i=t.parseString(e,a,s),n=t.parseValue(e,a+i.size,s-i.size),o=n.objectEnd;return{data:{name:i.data,value:n.data},size:i.size+n.size,objectEnd:o}}},{key:"parseVariable",value:function(e,a,s){return t.parseObject(e,a,s)}},{key:"parseString",value:function(t,e,a){if(a<2)throw new r.IllegalStateException("Data not enough when parse String");var s=new DataView(t,e,a).getUint16(0,!l);return{data:s>0?(0,o.default)(new Uint8Array(t,e+2,s)):"",size:2+s}}},{key:"parseLongString",value:function(t,e,a){if(a<4)throw new r.IllegalStateException("Data not enough when parse LongString");var s=new DataView(t,e,a).getUint32(0,!l);return{data:s>0?(0,o.default)(new Uint8Array(t,e+4,s)):"",size:4+s}}},{key:"parseDate",value:function(t,e,a){if(a<10)throw new r.IllegalStateException("Data size invalid when parse Date");var s=new DataView(t,e,a),i=s.getFloat64(0,!l);return i+=60*s.getInt16(8,!l)*1e3,{data:new Date(i),size:10}}},{key:"parseValue",value:function(e,a,s){if(s<1)throw new r.IllegalStateException("Data not enough when parse Value");var i=new DataView(e,a,s),o=1,c=i.getUint8(0),d=void 0,u=!1;try{switch(c){case 0:d=i.getFloat64(1,!l),o+=8;break;case 1:d=!!i.getUint8(1),o+=1;break;case 2:var h=t.parseString(e,a+1,s-1);d=h.data,o+=h.size;break;case 3:d={};var m=0;for(9==(16777215&i.getUint32(s-4,!l))&&(m=3);o<s-4;){var p=t.parseObject(e,a+o,s-o-m);if(p.objectEnd)break;d[p.data.name]=p.data.value,o+=p.size}o<=s-3&&9==(16777215&i.getUint32(o-1,!l))&&(o+=3);break;case 8:d={},o+=4;var f=0;for(9==(16777215&i.getUint32(s-4,!l))&&(f=3);o<s-8;){var v=t.parseVariable(e,a+o,s-o-f);if(v.objectEnd)break;d[v.data.name]=v.data.value,o+=v.size}o<=s-3&&9==(16777215&i.getUint32(o-1,!l))&&(o+=3);break;case 9:d=void 0,o=1,u=!0;break;case 10:d=[];var _=i.getUint32(1,!l);o+=4;for(var g=0;g<_;g++){var b=t.parseValue(e,a+o,s-o);d.push(b.data),o+=b.size}break;case 11:var y=t.parseDate(e,a+1,s-1);d=y.data,o+=y.size;break;case 12:var w=t.parseString(e,a+1,s-1);d=w.data,o+=w.size;break;default:o=s,n.default.w("AMF","Unsupported AMF value type "+c)}}catch(t){n.default.e("AMF",t.toString())}return{data:d,size:o,objectEnd:u}}}]),t}();a.default=c},{"../utils/exception.js":40,"../utils/logger.js":41,"../utils/utf8-conv.js":44}],16:[function(t,e,a){Object.defineProperty(a,"__esModule",{value:!0});a.default={OK:"OK",FORMAT_ERROR:"FormatError",FORMAT_UNSUPPORTED:"FormatUnsupported",CODEC_UNSUPPORTED:"CodecUnsupported"}},{}],17:[function(t,e,a){Object.defineProperty(a,"__esModule",{value:!0});var s=function(){function t(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),b()(t,s.key,s)}}return function(e,a,s){return a&&t(e.prototype,a),s&&t(e,s),e}}(),i=t("../utils/exception.js"),n=function(){function t(e){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.TAG="ExpGolomb",this._buffer=e,this._buffer_index=0,this._total_bytes=e.byteLength,this._total_bits=8*e.byteLength,this._current_word=0,this._current_word_bits_left=0}return s(t,[{key:"destroy",value:function(){this._buffer=null}},{key:"_fillCurrentWord",value:function(){var t=this._total_bytes-this._buffer_index;if(t<=0)throw new i.IllegalStateException("ExpGolomb: _fillCurrentWord() but no bytes available");var e=Math.min(4,t),a=new Uint8Array(4);a.set(this._buffer.subarray(this._buffer_index,this._buffer_index+e)),this._current_word=new DataView(a.buffer).getUint32(0,!1),this._buffer_index+=e,this._current_word_bits_left=8*e}},{key:"readBits",value:function(t){if(t>32)throw new i.InvalidArgumentException("ExpGolomb: readBits() bits exceeded max 32bits!");if(t<=this._current_word_bits_left){var e=this._current_word>>>32-t;return this._current_word<<=t,this._current_word_bits_left-=t,e}var a=this._current_word_bits_left?this._current_word:0;a>>>=32-this._current_word_bits_left;var s=t-this._current_word_bits_left;this._fillCurrentWord();var n=Math.min(s,this._current_word_bits_left),o=this._current_word>>>32-n;return this._current_word<<=n,this._current_word_bits_left-=n,a<<n|o}},{key:"readBool",value:function(){return 1===this.readBits(1)}},{key:"readByte",value:function(){return this.readBits(8)}},{key:"_skipLeadingZero",value:function(){var t=void 0;for(t=0;t<this._current_word_bits_left;t++)if(0!=(this._current_word&2147483648>>>t))return this._current_word<<=t,this._current_word_bits_left-=t,t;return this._fillCurrentWord(),t+this._skipLeadingZero()}},{key:"readUEG",value:function(){var t=this._skipLeadingZero();return this.readBits(t+1)-1}},{key:"readSEG",value:function(){var t=this.readUEG();return 1&t?t+1>>>1:-1*(t>>>1)}}]),t}();a.default=n},{"../utils/exception.js":40}],18:[function(t,e,a){function s(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(a,"__esModule",{value:!0});var i="function"==typeof m.a&&"symbol"==A()(u.a)?function(t){return void 0===t?"undefined":A()(t)}:function(t){return t&&"function"==typeof m.a&&t.constructor===m.a&&t!==m.a.prototype?"symbol":void 0===t?"undefined":A()(t)},n=function(){function t(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),b()(t,s.key,s)}}return function(e,a,s){return a&&t(e.prototype,a),s&&t(e,s),e}}(),o=s(t("../utils/logger.js")),r=s(t("./amf-parser.js")),l=s(t("./sps-parser.js")),c=s(t("./demux-errors.js")),d=s(t("../core/media-info.js")),h=t("../utils/exception.js"),p=function(){function t(e,a){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.TAG="FLVDemuxer",this._config=a,this._onError=null,this._onMediaInfo=null,this._onTrackMetadata=null,this._onDataAvailable=null,this._dataOffset=e.dataOffset,this._firstParse=!0,this._dispatch=!1,this._hasAudio=e.hasAudioTrack,this._hasVideo=e.hasVideoTrack,this._hasAudioFlagOverrided=!1,this._hasVideoFlagOverrided=!1,this._audioInitialMetadataDispatched=!1,this._videoInitialMetadataDispatched=!1,this._mediaInfo=new d.default,this._mediaInfo.hasAudio=this._hasAudio,this._mediaInfo.hasVideo=this._hasVideo,this._metadata=null,this._audioMetadata=null,this._videoMetadata=null,this._naluLengthSize=4,this._timestampBase=0,this._timescale=1e3,this._duration=0,this._durationOverrided=!1,this._referenceFrameRate={fixed:!0,fps:23.976,fps_num:23976,fps_den:1e3},this._flvSoundRateTable=[5500,11025,22050,44100,48e3],this._mpegSamplingRates=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],this._mpegAudioV10SampleRateTable=[44100,48e3,32e3,0],this._mpegAudioV20SampleRateTable=[22050,24e3,16e3,0],this._mpegAudioV25SampleRateTable=[11025,12e3,8e3,0],this._mpegAudioL1BitRateTable=[0,32,64,96,128,160,192,224,256,288,320,352,384,416,448,-1],this._mpegAudioL2BitRateTable=[0,32,48,56,64,80,96,112,128,160,192,224,256,320,384,-1],this._mpegAudioL3BitRateTable=[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,-1],this._videoTrack={type:"video",id:1,sequenceNumber:0,samples:[],length:0},this._audioTrack={type:"audio",id:2,sequenceNumber:0,samples:[],length:0},this._littleEndian=function(){var t=new ArrayBuffer(2);return new DataView(t).setInt16(0,256,!0),256===new Int16Array(t)[0]}()}return n(t,[{key:"destroy",value:function(){this._mediaInfo=null,this._metadata=null,this._audioMetadata=null,this._videoMetadata=null,this._videoTrack=null,this._audioTrack=null,this._onError=null,this._onMediaInfo=null,this._onTrackMetadata=null,this._onDataAvailable=null}},{key:"bindDataSource",value:function(t){return t.onDataArrival=this.parseChunks.bind(this),this}},{key:"resetMediaInfo",value:function(){this._mediaInfo=new d.default}},{key:"_isInitialMetadataDispatched",value:function(){return this._hasAudio&&this._hasVideo?this._audioInitialMetadataDispatched&&this._videoInitialMetadataDispatched:this._hasAudio&&!this._hasVideo?this._audioInitialMetadataDispatched:!(this._hasAudio||!this._hasVideo)&&this._videoInitialMetadataDispatched}},{key:"parseChunks",value:function(e,a){if(!(this._onError&&this._onMediaInfo&&this._onTrackMetadata&&this._onDataAvailable))throw new h.IllegalStateException("Flv: onError & onMediaInfo & onTrackMetadata & onDataAvailable callback must be specified");var s=0,i=this._littleEndian;if(0===a){if(!(e.byteLength>13))return 0;s=t.probe(e).dataOffset}for(this._firstParse&&(this._firstParse=!1,a+s!==this._dataOffset&&o.default.w(this.TAG,"First time parsing but chunk byteStart invalid!"),0!==new DataView(e,s).getUint32(0,!i)&&o.default.w(this.TAG,"PrevTagSize0 !== 0 !!!"),s+=4);s<e.byteLength;){this._dispatch=!0;var n=new DataView(e,s);if(s+11+4>e.byteLength)break;var r=n.getUint8(0),l=16777215&n.getUint32(0,!i);if(s+11+l+4>e.byteLength)break;if(8===r||9===r||18===r){var c=n.getUint8(4),d=n.getUint8(5),u=n.getUint8(6)|d<<8|c<<16|n.getUint8(7)<<24;0!=(16777215&n.getUint32(7,!i))&&o.default.w(this.TAG,"Meet tag which has StreamID != 0!");var m=s+11;switch(r){case 8:this._parseAudioData(e,m,l,u);break;case 9:this._parseVideoData(e,m,l,u,a+s);break;case 18:this._parseScriptData(e,m,l)}var p=n.getUint32(11+l,!i);p!==11+l&&o.default.w(this.TAG,"Invalid PrevTagSize "+p),s+=11+l+4}else o.default.w(this.TAG,"Unsupported tag type "+r+", skipped"),s+=11+l+4}return this._isInitialMetadataDispatched()&&this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack),s}},{key:"_parseScriptData",value:function(t,e,a){var s=r.default.parseScriptData(t,e,a);if(s.hasOwnProperty("onMetaData")){if(null==s.onMetaData||"object"!==i(s.onMetaData))return void o.default.w(this.TAG,"Invalid onMetaData structure!");this._metadata&&o.default.w(this.TAG,"Found another onMetaData tag!"),this._metadata=s;var n=this._metadata.onMetaData;if("boolean"==typeof n.hasAudio&&!1===this._hasAudioFlagOverrided&&(this._hasAudio=n.hasAudio,this._mediaInfo.hasAudio=this._hasAudio),"boolean"==typeof n.hasVideo&&!1===this._hasVideoFlagOverrided&&(this._hasVideo=n.hasVideo,this._mediaInfo.hasVideo=this._hasVideo),"number"==typeof n.audiodatarate&&(this._mediaInfo.audioDataRate=n.audiodatarate),"number"==typeof n.videodatarate&&(this._mediaInfo.videoDataRate=n.videodatarate),"number"==typeof n.width&&(this._mediaInfo.width=n.width),"number"==typeof n.height&&(this._mediaInfo.height=n.height),"number"==typeof n.duration){if(!this._durationOverrided){var l=Math.floor(n.duration*this._timescale);this._duration=l,this._mediaInfo.duration=l}}else this._mediaInfo.duration=0;if("number"==typeof n.framerate){var c=Math.floor(1e3*n.framerate);if(c>0){var d=c/1e3;this._referenceFrameRate.fixed=!0,this._referenceFrameRate.fps=d,this._referenceFrameRate.fps_num=c,this._referenceFrameRate.fps_den=1e3,this._mediaInfo.fps=d}}if("object"===i(n.keyframes)){this._mediaInfo.hasKeyframesIndex=!0;var u=n.keyframes;this._mediaInfo.keyframesIndex=this._parseKeyframesIndex(u),n.keyframes=null}else this._mediaInfo.hasKeyframesIndex=!1;this._dispatch=!1,this._mediaInfo.metadata=n,o.default.v(this.TAG,"Parsed onMetaData"),this._mediaInfo.isComplete()&&this._onMediaInfo(this._mediaInfo)}}},{key:"_parseKeyframesIndex",value:function(t){for(var e=[],a=[],s=1;s<t.times.length;s++){var i=this._timestampBase+Math.floor(1e3*t.times[s]);e.push(i),a.push(t.filepositions[s])}return{times:e,filepositions:a}}},{key:"_parseAudioData",value:function(t,e,a,s){if(a<=1)o.default.w(this.TAG,"Flv: Invalid audio packet, missing SoundData payload!");else if(!0!==this._hasAudioFlagOverrided||!1!==this._hasAudio){var i=(this._littleEndian,new DataView(t,e,a)).getUint8(0),n=i>>>4;if(2!==n&&10!==n)return void this._onError(c.default.CODEC_UNSUPPORTED,"Flv: Unsupported audio codec idx: "+n);var r,l=(12&i)>>>2;if(!(l>=0&&l<=4))return void this._onError(c.default.FORMAT_ERROR,"Flv: Invalid audio sample rate idx: "+l);r=this._flvSoundRateTable[l];var d=1&i,u=this._audioMetadata,h=this._audioTrack;if(u||(!1===this._hasAudio&&!1===this._hasAudioFlagOverrided&&(this._hasAudio=!0,this._mediaInfo.hasAudio=!0),(u=this._audioMetadata={}).type="audio",u.id=h.id,u.timescale=this._timescale,u.duration=this._duration,u.audioSampleRate=r,u.channelCount=0===d?1:2),10===n){var m=this._parseAACAudioData(t,e+1,a-1);if(void 0==m)return;if(0===m.packetType){u.config&&o.default.w(this.TAG,"Found another AudioSpecificConfig!");var p=m.data;u.audioSampleRate=p.samplingRate,u.channelCount=p.channelCount,u.codec=p.codec,u.originalCodec=p.originalCodec,u.config=p.config,u.refSampleDuration=1024/u.audioSampleRate*u.timescale,o.default.v(this.TAG,"Parsed AudioSpecificConfig"),this._isInitialMetadataDispatched()?this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack):this._audioInitialMetadataDispatched=!0,this._dispatch=!1,this._onTrackMetadata("audio",u);var f=this._mediaInfo;f.audioCodec=u.originalCodec,f.audioSampleRate=u.audioSampleRate,f.audioChannelCount=u.channelCount,f.hasVideo?null!=f.videoCodec&&(f.mimeType='video/x-flv; codecs="'+f.videoCodec+","+f.audioCodec+'"'):f.mimeType='video/x-flv; codecs="'+f.audioCodec+'"',f.isComplete()&&this._onMediaInfo(f)}else if(1===m.packetType){var v=this._timestampBase+s,_={unit:m.data,dts:v,pts:v};h.samples.push(_),h.length+=m.data.length}else o.default.e(this.TAG,"Flv: Unsupported AAC data type "+m.packetType)}else if(2===n){if(!u.codec){var g=this._parseMP3AudioData(t,e+1,a-1,!0);if(void 0==g)return;u.audioSampleRate=g.samplingRate,u.channelCount=g.channelCount,u.codec=g.codec,u.originalCodec=g.originalCodec,u.refSampleDuration=1152/u.audioSampleRate*u.timescale,o.default.v(this.TAG,"Parsed MPEG Audio Frame Header"),this._audioInitialMetadataDispatched=!0,this._onTrackMetadata("audio",u);var b=this._mediaInfo;b.audioCodec=u.codec,b.audioSampleRate=u.audioSampleRate,b.audioChannelCount=u.channelCount,b.audioDataRate=g.bitRate,b.hasVideo?null!=b.videoCodec&&(b.mimeType='video/x-flv; codecs="'+b.videoCodec+","+b.audioCodec+'"'):b.mimeType='video/x-flv; codecs="'+b.audioCodec+'"',b.isComplete()&&this._onMediaInfo(b)}var y=this._parseMP3AudioData(t,e+1,a-1,!1);if(void 0==y)return;var w=this._timestampBase+s,C={unit:y,dts:w,pts:w};h.samples.push(C),h.length+=y.length}}}},{key:"_parseAACAudioData",value:function(t,e,a){if(!(a<=1)){var s={},i=new Uint8Array(t,e,a);return s.packetType=i[0],0===i[0]?s.data=this._parseAACAudioSpecificConfig(t,e+1,a-1):s.data=i.subarray(1),s}o.default.w(this.TAG,"Flv: Invalid AAC packet, missing AACPacketType or/and Data!")}},{key:"_parseAACAudioSpecificConfig",value:function(t,e,a){var s,i,n=new Uint8Array(t,e,a),o=null,r=0,l=null;if(r=s=n[0]>>>3,(i=(7&n[0])<<1|n[1]>>>7)<0||i>=this._mpegSamplingRates.length)this._onError(c.default.FORMAT_ERROR,"Flv: AAC invalid sampling frequency index!");else{var d=this._mpegSamplingRates[i],u=(120&n[1])>>>3;if(!(u<0||u>=8)){5===r&&(l=(7&n[1])<<1|n[2]>>>7,n[2]);var h=self.navigator.userAgent.toLowerCase();return-1!==h.indexOf("firefox")?i>=6?(r=5,o=new Array(4),l=i-3):(r=2,o=new Array(2),l=i):-1!==h.indexOf("android")?(r=2,o=new Array(2),l=i):(r=5,l=i,o=new Array(4),i>=6?l=i-3:1===u&&(r=2,o=new Array(2),l=i)),o[0]=r<<3,o[0]|=(15&i)>>>1,o[1]=(15&i)<<7,o[1]|=(15&u)<<3,5===r&&(o[1]|=(15&l)>>>1,o[2]=(1&l)<<7,o[2]|=8,o[3]=0),{config:o,samplingRate:d,channelCount:u,codec:"mp4a.40."+r,originalCodec:"mp4a.40."+s}}this._onError(c.default.FORMAT_ERROR,"Flv: AAC invalid channel configuration")}}},{key:"_parseMP3AudioData",value:function(t,e,a,s){if(!(a<4)){var i=(this._littleEndian,new Uint8Array(t,e,a)),n=null;if(s){if(255!==i[0])return;var r=i[1]>>>3&3,l=(6&i[1])>>1,c=(240&i[2])>>>4,d=(12&i[2])>>>2,u=3!==(i[3]>>>6&3)?2:1,h=0,m=0;switch(r){case 0:h=this._mpegAudioV25SampleRateTable[d];break;case 2:h=this._mpegAudioV20SampleRateTable[d];break;case 3:h=this._mpegAudioV10SampleRateTable[d]}switch(l){case 1:c<this._mpegAudioL3BitRateTable.length&&(m=this._mpegAudioL3BitRateTable[c]);break;case 2:c<this._mpegAudioL2BitRateTable.length&&(m=this._mpegAudioL2BitRateTable[c]);break;case 3:c<this._mpegAudioL1BitRateTable.length&&(m=this._mpegAudioL1BitRateTable[c])}n={bitRate:m,samplingRate:h,channelCount:u,codec:"mp3",originalCodec:"mp3"}}else n=i;return n}o.default.w(this.TAG,"Flv: Invalid MP3 packet, header missing!")}},{key:"_parseVideoData",value:function(t,e,a,s,i){if(a<=1)o.default.w(this.TAG,"Flv: Invalid video packet, missing VideoData payload!");else if(!0!==this._hasVideoFlagOverrided||!1!==this._hasVideo){var n=new Uint8Array(t,e,a)[0],r=(240&n)>>>4,l=15&n;if(7!==l)return void this._onError(c.default.CODEC_UNSUPPORTED,"Flv: Unsupported codec in video frame: "+l);this._parseAVCVideoPacket(t,e+1,a-1,s,i,r)}}},{key:"_parseAVCVideoPacket",value:function(t,e,a,s,i,n){if(a<4)o.default.w(this.TAG,"Flv: Invalid AVC packet, missing AVCPacketType or/and CompositionTime");else{var r=this._littleEndian,l=new DataView(t,e,a),d=l.getUint8(0),u=16777215&l.getUint32(0,!r);if(0===d)this._parseAVCDecoderConfigurationRecord(t,e+4,a-4);else if(1===d)this._parseAVCVideoData(t,e+4,a-4,s,i,n,u);else if(2!==d)return void this._onError(c.default.FORMAT_ERROR,"Flv: Invalid video packet type "+d)}}},{key:"_parseAVCDecoderConfigurationRecord",value:function(t,e,a){if(a<7)o.default.w(this.TAG,"Flv: Invalid AVCDecoderConfigurationRecord, lack of data!");else{var s=this._videoMetadata,i=this._videoTrack,n=this._littleEndian,r=new DataView(t,e,a);s?void 0!==s.avcc&&o.default.w(this.TAG,"Found another AVCDecoderConfigurationRecord!"):(!1===this._hasVideo&&!1===this._hasVideoFlagOverrided&&(this._hasVideo=!0,this._mediaInfo.hasVideo=!0),(s=this._videoMetadata={}).type="video",s.id=i.id,s.timescale=this._timescale,s.duration=this._duration);var d=r.getUint8(0),u=r.getUint8(1);if(r.getUint8(2),r.getUint8(3),1===d&&0!==u)if(this._naluLengthSize=1+(3&r.getUint8(4)),3===this._naluLengthSize||4===this._naluLengthSize){var h=31&r.getUint8(5);if(0!==h){h>1&&o.default.w(this.TAG,"Flv: Strange AVCDecoderConfigurationRecord: SPS Count = "+h);for(var m=6,p=0;p<h;p++){var f=r.getUint16(m,!n);if(m+=2,0!==f){var v=new Uint8Array(t,e+m,f);m+=f;var _=l.default.parseSPS(v);if(0===p){s.codecWidth=_.codec_size.width,s.codecHeight=_.codec_size.height,s.presentWidth=_.present_size.width,s.presentHeight=_.present_size.height,s.profile=_.profile_string,s.level=_.level_string,s.bitDepth=_.bit_depth,s.chromaFormat=_.chroma_format,s.sarRatio=_.sar_ratio,s.frameRate=_.frame_rate,!1!==_.frame_rate.fixed&&0!==_.frame_rate.fps_num&&0!==_.frame_rate.fps_den||(s.frameRate=this._referenceFrameRate);var g=s.frameRate.fps_den,b=s.frameRate.fps_num;s.refSampleDuration=s.timescale*(g/b);for(var y=v.subarray(1,4),w="avc1.",C=0;C<3;C++){var x=y[C].toString(16);x.length<2&&(x="0"+x),w+=x}s.codec=w;var k=this._mediaInfo;k.width=s.codecWidth,k.height=s.codecHeight,k.fps=s.frameRate.fps,k.profile=s.profile,k.level=s.level,k.chromaFormat=_.chroma_format_string,k.sarNum=s.sarRatio.width,k.sarDen=s.sarRatio.height,k.videoCodec=w,k.hasAudio?null!=k.audioCodec&&(k.mimeType='video/x-flv; codecs="'+k.videoCodec+","+k.audioCodec+'"'):k.mimeType='video/x-flv; codecs="'+k.videoCodec+'"',k.isComplete()&&this._onMediaInfo(k)}}}var D=r.getUint8(m);if(0!==D){D>1&&o.default.w(this.TAG,"Flv: Strange AVCDecoderConfigurationRecord: PPS Count = "+D),m++;for(var S=0;S<D;S++){var A=r.getUint16(m,!n);m+=2,0!==A&&(m+=A)}s.avcc=new Uint8Array(a),s.avcc.set(new Uint8Array(t,e,a),0),o.default.v(this.TAG,"Parsed AVCDecoderConfigurationRecord"),this._isInitialMetadataDispatched()?this._dispatch&&(this._audioTrack.length||this._videoTrack.length)&&this._onDataAvailable(this._audioTrack,this._videoTrack):this._videoInitialMetadataDispatched=!0,this._dispatch=!1,this._onTrackMetadata("video",s)}else this._onError(c.default.FORMAT_ERROR,"Flv: Invalid AVCDecoderConfigurationRecord: No PPS")}else this._onError(c.default.FORMAT_ERROR,"Flv: Invalid AVCDecoderConfigurationRecord: No SPS")}else this._onError(c.default.FORMAT_ERROR,"Flv: Strange NaluLengthSizeMinusOne: "+(this._naluLengthSize-1));else this._onError(c.default.FORMAT_ERROR,"Flv: Invalid AVCDecoderConfigurationRecord")}}},{key:"_parseAVCVideoData",value:function(t,e,a,s,i,n,r){for(var l=this._littleEndian,c=new DataView(t,e,a),d=[],u=0,h=0,m=this._naluLengthSize,p=this._timestampBase+s,f=1===n;h<a;){if(h+4>=a){o.default.w(this.TAG,"Malformed Nalu near timestamp "+p+", offset = "+h+", dataSize = "+a);break}var v=c.getUint32(h,!l);if(3===m&&(v>>>=8),v>a-m)return void o.default.w(this.TAG,"Malformed Nalus near timestamp "+p+", NaluSize > DataSize!");var _=31&c.getUint8(h+m);5===_&&(f=!0);var g=new Uint8Array(t,e+h,m+v),b={type:_,data:g};d.push(b),u+=g.byteLength,h+=m+v}if(d.length){var y=this._videoTrack,w={units:d,length:u,isKeyframe:f,dts:p,cts:r,pts:p+r};f&&(w.fileposition=i),y.samples.push(w),y.length+=u}}},{key:"onTrackMetadata",get:function(){return this._onTrackMetadata},set:function(t){this._onTrackMetadata=t}},{key:"onMediaInfo",get:function(){return this._onMediaInfo},set:function(t){this._onMediaInfo=t}},{key:"onError",get:function(){return this._onError},set:function(t){this._onError=t}},{key:"onDataAvailable",get:function(){return this._onDataAvailable},set:function(t){this._onDataAvailable=t}},{key:"timestampBase",get:function(){return this._timestampBase},set:function(t){this._timestampBase=t}},{key:"overridedDuration",get:function(){return this._duration},set:function(t){this._durationOverrided=!0,this._duration=t,this._mediaInfo.duration=t}},{key:"overridedHasAudio",set:function(t){this._hasAudioFlagOverrided=!0,this._hasAudio=t,this._mediaInfo.hasAudio=t}},{key:"overridedHasVideo",set:function(t){this._hasVideoFlagOverrided=!0,this._hasVideo=t,this._mediaInfo.hasVideo=t}}],[{key:"probe",value:function(t){var e=new Uint8Array(t),a={match:!1};if(70!==e[0]||76!==e[1]||86!==e[2]||1!==e[3])return a;var s=(4&e[4])>>>2!=0,i=0!=(1&e[4]),n=function(t,e){return t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]}(e,5);return n<9?a:{match:!0,consumed:n,dataOffset:n,hasAudioTrack:s,hasVideoTrack:i}}}]),t}();a.default=p},{"../core/media-info.js":7,"../utils/exception.js":40,"../utils/logger.js":41,"./amf-parser.js":15,"./demux-errors.js":16,"./sps-parser.js":19}],19:[function(t,e,a){Object.defineProperty(a,"__esModule",{value:!0});var s=function(){function t(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),b()(t,s.key,s)}}return function(e,a,s){return a&&t(e.prototype,a),s&&t(e,s),e}}(),i=function(t){return t&&t.__esModule?t:{default:t}}(t("./exp-golomb.js")),n=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return s(t,null,[{key:"_ebsp2rbsp",value:function(t){for(var e=t,a=e.byteLength,s=new Uint8Array(a),i=0,n=0;n<a;n++)n>=2&&3===e[n]&&0===e[n-1]&&0===e[n-2]||(s[i]=e[n],i++);return new Uint8Array(s.buffer,0,i)}},{key:"parseSPS",value:function(e){var a=t._ebsp2rbsp(e),s=new i.default(a);s.readByte();var n=s.readByte();s.readByte();var o=s.readByte();s.readUEG();var r=t.getProfileString(n),l=t.getLevelString(o),c=1,d=420,u=8;if((100===n||110===n||122===n||244===n||44===n||83===n||86===n||118===n||128===n||138===n||144===n)&&(3===(c=s.readUEG())&&s.readBits(1),c<=3&&(d=[0,420,422,444][c]),u=s.readUEG()+8,s.readUEG(),s.readBits(1),s.readBool()))for(var h=3!==c?8:12,m=0;m<h;m++)s.readBool()&&(m<6?t._skipScalingList(s,16):t._skipScalingList(s,64));s.readUEG();var p=s.readUEG();if(0===p)s.readUEG();else if(1===p){s.readBits(1),s.readSEG(),s.readSEG();for(var f=s.readUEG(),v=0;v<f;v++)s.readSEG()}s.readUEG(),s.readBits(1);var _=s.readUEG(),g=s.readUEG(),b=s.readBits(1);0===b&&s.readBits(1),s.readBits(1);var y=0,w=0,C=0,x=0;s.readBool()&&(y=s.readUEG(),w=s.readUEG(),C=s.readUEG(),x=s.readUEG());var k=1,D=1,S=0,A=!0,E=0,I=0;if(s.readBool()){if(s.readBool()){var L=s.readByte();L>0&&L<16?(k=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2][L-1],D=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1][L-1]):255===L&&(k=s.readByte()<<8|s.readByte(),D=s.readByte()<<8|s.readByte())}if(s.readBool()&&s.readBool(),s.readBool()&&(s.readBits(4),s.readBool()&&s.readBits(24)),s.readBool()&&(s.readUEG(),s.readUEG()),s.readBool()){var T=s.readBits(32),B=s.readBits(32);A=s.readBool(),S=(E=B)/(I=2*T)}}var P=1;1===k&&1===D||(P=k/D);var R=0,M=0;0===c?(R=1,M=2-b):(R=3===c?1:2,M=(1===c?2:1)*(2-b));var N=16*(_+1),F=16*(g+1)*(2-b);N-=(y+w)*R,F-=(C+x)*M;var O=Math.ceil(N*P);return s.destroy(),s=null,{profile_string:r,level_string:l,bit_depth:u,chroma_format:d,chroma_format_string:t.getChromaFormatString(d),frame_rate:{fixed:A,fps:S,fps_den:I,fps_num:E},sar_ratio:{width:k,height:D},codec_size:{width:N,height:F},present_size:{width:O,height:F}}}},{key:"_skipScalingList",value:function(t,e){for(var a=8,s=8,i=0;i<e;i++)0!==s&&(s=(a+t.readSEG()+256)%256),a=0===s?a:s}},{key:"getProfileString",value:function(t){switch(t){case 66:return"Baseline";case 77:return"Main";case 88:return"Extended";case 100:return"High";case 110:return"High10";case 122:return"High422";case 244:return"High444";default:return"Unknown"}}},{key:"getLevelString",value:function(t){return(t/10).toFixed(1)}},{key:"getChromaFormatString",value:function(t){switch(t){case 420:return"4:2:0";case 422:return"4:2:2";case 444:return"4:4:4";default:return"Unknown"}}}]),t}();a.default=n},{"./exp-golomb.js":17}],20:[function(t,e,a){function s(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(a,"__esModule",{value:!0});var i="function"==typeof m.a&&"symbol"==A()(u.a)?function(t){return void 0===t?"undefined":A()(t)}:function(t){return t&&"function"==typeof m.a&&t.constructor===m.a&&t!==m.a.prototype?"symbol":void 0===t?"undefined":A()(t)},n=s(t("./utils/polyfill.js")),o=s(t("./core/features.js")),r=s(t("./player/flv-player.js")),l=s(t("./player/native-player.js")),c=s(t("./player/player-events.js")),d=t("./player/player-errors.js"),h=s(t("./utils/logging-control.js")),p=t("./utils/exception.js");n.default.install();var f={createPlayer:function(t,e){var a=t;if(null==a||"object"!==(void 0===a?"undefined":i(a)))throw new p.InvalidArgumentException("MediaDataSource must be an javascript object!");if(!a.hasOwnProperty("type"))throw new p.InvalidArgumentException("MediaDataSource must has type field to indicate video file type!");switch(a.type){case"flv":return new r.default(a,e);default:return new l.default(a,e)}},isSupported:function(){return o.default.supportMSEH264Playback()},getFeatureList:function(){return o.default.getFeatureList()}};f.Events=c.default,f.ErrorTypes=d.ErrorTypes,f.ErrorDetails=d.ErrorDetails,f.FlvPlayer=r.default,f.NativePlayer=l.default,f.LoggingControl=h.default,Object.defineProperty(f,"version",{enumerable:!0,get:function(){return"1.3.3"}}),a.default=f},{"./core/features.js":6,"./player/flv-player.js":32,"./player/native-player.js":33,"./player/player-errors.js":34,"./player/player-events.js":35,"./utils/exception.js":40,"./utils/logging-control.js":42,"./utils/polyfill.js":43}],21:[function(t,e,a){e.exports=t("./flv.js").default},{"./flv.js":20}],22:[function(t,e,a){function s(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(a,"__esModule",{value:!0});var i="function"==typeof m.a&&"symbol"==A()(u.a)?function(t){return void 0===t?"undefined":A()(t)}:function(t){return t&&"function"==typeof m.a&&t.constructor===m.a&&t!==m.a.prototype?"symbol":void 0===t?"undefined":A()(t)},o=function(){function t(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),b()(t,s.key,s)}}return function(e,a,s){return a&&t(e.prototype,a),s&&t(e,s),e}}(),l=s((s(t("../utils/logger.js")),t("../utils/browser.js"))),d=t("./loader.js"),h=t("../utils/exception.js"),p=function(t){function e(t,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var s=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=(void 0===e?"undefined":A()(e))&&"function"!=typeof e?t:e}(this,(e.__proto__||n()(e)).call(this,"fetch-stream-loader"));return s.TAG="FetchStreamLoader",s._seekHandler=t,s._config=a,s._needStash=!0,s._requestAbort=!1,s._contentLength=null,s._receivedLength=0,s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":A()(e)));t.prototype=c()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(f.a?f()(t,e):t.__proto__=e)}(e,d.BaseLoader),o(e,null,[{key:"isSupported",value:function(){try{var t=l.default.msedge&&l.default.version.minor>=15048,e=!l.default.msedge||t;return self.fetch&&self.ReadableStream&&e}catch(t){return!1}}}]),o(e,[{key:"destroy",value:function(){this.isWorking()&&this.abort(),function t(e,a,s){null===e&&(e=Function.prototype);var i=r()(e,a);if(void 0===i){var o=n()(e);return null===o?void 0:t(o,a,s)}if("value"in i)return i.value;var l=i.get;return void 0!==l?l.call(s):void 0}(e.prototype.__proto__||n()(e.prototype),"destroy",this).call(this)}},{key:"open",value:function(t,e){var a=this;this._dataSource=t,this._range=e;var s=t.url;this._config.reuseRedirectedURL&&void 0!=t.redirectedURL&&(s=t.redirectedURL);var n=this._seekHandler.getConfig(s,e),o=new self.Headers;if("object"===i(n.headers)){var r=n.headers;for(var l in r)r.hasOwnProperty(l)&&o.append(l,r[l])}var c={method:"GET",headers:o,mode:"cors",cache:"default",referrerPolicy:"no-referrer-when-downgrade"};!1===t.cors&&(c.mode="same-origin"),t.withCredentials&&(c.credentials="include"),t.referrerPolicy&&(c.referrerPolicy=t.referrerPolicy),this._status=d.LoaderStatus.kConnecting,self.fetch(n.url,c).then(function(t){if(a._requestAbort)return a._requestAbort=!1,void(a._status=d.LoaderStatus.kIdle);if(t.ok&&t.status>=200&&t.status<=299){if(t.url!==n.url&&a._onURLRedirect){var e=a._seekHandler.removeURLParameters(t.url);a._onURLRedirect(e)}var s=t.headers.get("Content-Length");return null!=s&&(a._contentLength=parseInt(s),0!==a._contentLength&&a._onContentLengthKnown&&a._onContentLengthKnown(a._contentLength)),a._pump.call(a,t.body.getReader())}if(a._status=d.LoaderStatus.kError,!a._onError)throw new h.RuntimeException("FetchStreamLoader: Http code invalid, "+t.status+" "+t.statusText);a._onError(d.LoaderErrors.HTTP_STATUS_CODE_INVALID,{code:t.status,msg:t.statusText})}).catch(function(t){if(a._status=d.LoaderStatus.kError,!a._onError)throw t;a._onError(d.LoaderErrors.EXCEPTION,{code:-1,msg:t.message})})}},{key:"abort",value:function(){this._requestAbort=!0}},{key:"_pump",value:function(t){var e=this;return t.read().then(function(a){if(a.done)e._status=d.LoaderStatus.kComplete,e._onComplete&&e._onComplete(e._range.from,e._range.from+e._receivedLength-1);else{if(!0===e._requestAbort)return e._requestAbort=!1,e._status=d.LoaderStatus.kComplete,t.cancel();e._status=d.LoaderStatus.kBuffering;var s=a.value.buffer,i=e._range.from+e._receivedLength;e._receivedLength+=s.byteLength,e._onDataArrival&&e._onDataArrival(s,i,e._receivedLength),e._pump(t)}}).catch(function(t){if(11!==t.code||!l.default.msedge){e._status=d.LoaderStatus.kError;var a=0,s=null;if(19!==t.code&&"network error"!==t.message||!(null===e._contentLength||null!==e._contentLength&&e._receivedLength<e._contentLength)?(a=d.LoaderErrors.EXCEPTION,s={code:t.code,msg:t.message}):(a=d.LoaderErrors.EARLY_EOF,s={code:t.code,msg:"Fetch stream meet Early-EOF"}),!e._onError)throw new h.RuntimeException(s.msg);e._onError(a,s)}})}}]),e}();a.default=p},{"../utils/browser.js":39,"../utils/exception.js":40,"../utils/logger.js":41,"./loader.js":24}],23:[function(t,e,a){function s(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(a,"__esModule",{value:!0});var i=function(){function t(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),b()(t,s.key,s)}}return function(e,a,s){return a&&t(e.prototype,a),s&&t(e,s),e}}(),n=s(t("../utils/logger.js")),o=s(t("./speed-sampler.js")),r=t("./loader.js"),l=s(t("./fetch-stream-loader.js")),c=s(t("./xhr-moz-chunked-loader.js")),d=s((s(t("./xhr-msstream-loader.js")),t("./xhr-range-loader.js"))),u=s(t("./websocket-loader.js")),h=s(t("./range-seek-handler.js")),m=s(t("./param-seek-handler.js")),p=t("../utils/exception.js"),f=function(){function t(e,a,s){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.TAG="IOController",this._config=a,this._extraData=s,this._stashInitialSize=393216,void 0!=a.stashInitialSize&&a.stashInitialSize>0&&(this._stashInitialSize=a.stashInitialSize),this._stashUsed=0,this._stashSize=this._stashInitialSize,this._bufferSize=3145728,this._stashBuffer=new ArrayBuffer(this._bufferSize),this._stashByteStart=0,this._enableStash=!0,!1===a.enableStashBuffer&&(this._enableStash=!1),this._loader=null,this._loaderClass=null,this._seekHandler=null,this._dataSource=e,this._isWebSocketURL=/wss?:\/\/(.+?)/.test(e.url),this._refTotalLength=e.filesize?e.filesize:null,this._totalLength=this._refTotalLength,this._fullRequestFlag=!1,this._currentRange=null,this._redirectedURL=null,this._speedNormalized=0,this._speedSampler=new o.default,this._speedNormalizeList=[64,128,256,384,512,768,1024,1536,2048,3072,4096],this._isEarlyEofReconnecting=!1,this._paused=!1,this._resumeFrom=0,this._onDataArrival=null,this._onSeeked=null,this._onError=null,this._onComplete=null,this._onRedirect=null,this._onRecoveredEarlyEof=null,this._selectSeekHandler(),this._selectLoader(),this._createLoader()}return i(t,[{key:"destroy",value:function(){this._loader.isWorking()&&this._loader.abort(),this._loader.destroy(),this._loader=null,this._loaderClass=null,this._dataSource=null,this._stashBuffer=null,this._stashUsed=this._stashSize=this._bufferSize=this._stashByteStart=0,this._currentRange=null,this._speedSampler=null,this._isEarlyEofReconnecting=!1,this._onDataArrival=null,this._onSeeked=null,this._onError=null,this._onComplete=null,this._onRedirect=null,this._onRecoveredEarlyEof=null,this._extraData=null}},{key:"isWorking",value:function(){return this._loader&&this._loader.isWorking()&&!this._paused}},{key:"isPaused",value:function(){return this._paused}},{key:"_selectSeekHandler",value:function(){var t=this._config;if("range"===t.seekType)this._seekHandler=new h.default(this._config.rangeLoadZeroStart);else if("param"===t.seekType){var e=t.seekParamStart||"bstart",a=t.seekParamEnd||"bend";this._seekHandler=new m.default(e,a)}else{if("custom"!==t.seekType)throw new p.InvalidArgumentException("Invalid seekType in config: "+t.seekType);if("function"!=typeof t.customSeekHandler)throw new p.InvalidArgumentException("Custom seekType specified in config but invalid customSeekHandler!");this._seekHandler=new t.customSeekHandler}}},{key:"_selectLoader",value:function(){if(this._isWebSocketURL)this._loaderClass=u.default;else if(l.default.isSupported())this._loaderClass=l.default;else if(c.default.isSupported())this._loaderClass=c.default;else{if(!d.default.isSupported())throw new p.RuntimeException("Your browser doesn't support xhr with arraybuffer responseType!");this._loaderClass=d.default}}},{key:"_createLoader",value:function(){this._loader=new this._loaderClass(this._seekHandler,this._config),!1===this._loader.needStashBuffer&&(this._enableStash=!1),this._loader.onContentLengthKnown=this._onContentLengthKnown.bind(this),this._loader.onURLRedirect=this._onURLRedirect.bind(this),this._loader.onDataArrival=this._onLoaderChunkArrival.bind(this),this._loader.onComplete=this._onLoaderComplete.bind(this),this._loader.onError=this._onLoaderError.bind(this)}},{key:"open",value:function(t){this._currentRange={from:0,to:-1},t&&(this._currentRange.from=t),this._speedSampler.reset(),t||(this._fullRequestFlag=!0),this._loader.open(this._dataSource,w()({},this._currentRange))}},{key:"abort",value:function(){this._loader.abort(),this._paused&&(this._paused=!1,this._resumeFrom=0)}},{key:"pause",value:function(){this.isWorking()&&(this._loader.abort(),0!==this._stashUsed?(this._resumeFrom=this._stashByteStart,this._currentRange.to=this._stashByteStart-1):this._resumeFrom=this._currentRange.to+1,this._stashUsed=0,this._stashByteStart=0,this._paused=!0)}},{key:"resume",value:function(){if(this._paused){this._paused=!1;var t=this._resumeFrom;this._resumeFrom=0,this._internalSeek(t,!0)}}},{key:"seek",value:function(t){this._paused=!1,this._stashUsed=0,this._stashByteStart=0,this._internalSeek(t,!0)}},{key:"_internalSeek",value:function(t,e){this._loader.isWorking()&&this._loader.abort(),this._flushStashBuffer(e),this._loader.destroy(),this._loader=null;var a={from:t,to:-1};this._currentRange={from:a.from,to:-1},this._speedSampler.reset(),this._stashSize=this._stashInitialSize,this._createLoader(),this._loader.open(this._dataSource,a),this._onSeeked&&this._onSeeked()}},{key:"updateUrl",value:function(t){if(!t||"string"!=typeof t||0===t.length)throw new p.InvalidArgumentException("Url must be a non-empty string!");this._dataSource.url=t}},{key:"_expandBuffer",value:function(t){for(var e=this._stashSize;e+1048576<t;)e*=2;if((e+=1048576)!==this._bufferSize){var a=new ArrayBuffer(e);if(this._stashUsed>0){var s=new Uint8Array(this._stashBuffer,0,this._stashUsed);new Uint8Array(a,0,e).set(s,0)}this._stashBuffer=a,this._bufferSize=e}}},{key:"_normalizeSpeed",value:function(t){var e=this._speedNormalizeList,a=e.length-1,s=0,i=0,n=a;if(t<e[0])return e[0];for(;i<=n;){if((s=i+Math.floor((n-i)/2))===a||t>=e[s]&&t<e[s+1])return e[s];e[s]<t?i=s+1:n=s-1}}},{key:"_adjustStashSize",value:function(t){var e=0;(e=this._config.isLive?t:t<512?t:t>=512&&t<=1024?Math.floor(1.5*t):2*t)>8192&&(e=8192);var a=1024*e+1048576;this._bufferSize<a&&this._expandBuffer(a),this._stashSize=1024*e}},{key:"_dispatchChunks",value:function(t,e){return this._currentRange.to=e+t.byteLength-1,this._onDataArrival(t,e)}},{key:"_onURLRedirect",value:function(t){this._redirectedURL=t,this._onRedirect&&this._onRedirect(t)}},{key:"_onContentLengthKnown",value:function(t){t&&this._fullRequestFlag&&(this._totalLength=t,this._fullRequestFlag=!1)}},{key:"_onLoaderChunkArrival",value:function(t,e,a){if(!this._onDataArrival)throw new p.IllegalStateException("IOController: No existing consumer (onDataArrival) callback!");if(!this._paused){this._isEarlyEofReconnecting&&(this._isEarlyEofReconnecting=!1,this._onRecoveredEarlyEof&&this._onRecoveredEarlyEof()),this._speedSampler.addBytes(t.byteLength);var s=this._speedSampler.lastSecondKBps;if(0!==s){var i=this._normalizeSpeed(s);this._speedNormalized!==i&&(this._speedNormalized=i,this._adjustStashSize(i))}if(this._enableStash)if(0===this._stashUsed&&0===this._stashByteStart&&(this._stashByteStart=e),this._stashUsed+t.byteLength<=this._stashSize){new Uint8Array(this._stashBuffer,0,this._stashSize).set(new Uint8Array(t),this._stashUsed),this._stashUsed+=t.byteLength}else{var n=new Uint8Array(this._stashBuffer,0,this._bufferSize);if(this._stashUsed>0){var o=this._stashBuffer.slice(0,this._stashUsed),r=this._dispatchChunks(o,this._stashByteStart);if(r<o.byteLength){if(r>0){var l=new Uint8Array(o,r);n.set(l,0),this._stashUsed=l.byteLength,this._stashByteStart+=r}}else this._stashUsed=0,this._stashByteStart+=r;this._stashUsed+t.byteLength>this._bufferSize&&(this._expandBuffer(this._stashUsed+t.byteLength),n=new Uint8Array(this._stashBuffer,0,this._bufferSize)),n.set(new Uint8Array(t),this._stashUsed),this._stashUsed+=t.byteLength}else{var c=this._dispatchChunks(t,e);if(c<t.byteLength){var d=t.byteLength-c;d>this._bufferSize&&(this._expandBuffer(d),n=new Uint8Array(this._stashBuffer,0,this._bufferSize)),n.set(new Uint8Array(t,c),0),this._stashUsed+=d,this._stashByteStart=e+c}}}else if(0===this._stashUsed){var u=this._dispatchChunks(t,e);if(u<t.byteLength){var h=t.byteLength-u;h>this._bufferSize&&this._expandBuffer(h),new Uint8Array(this._stashBuffer,0,this._bufferSize).set(new Uint8Array(t,u),0),this._stashUsed+=h,this._stashByteStart=e+u}}else{this._stashUsed+t.byteLength>this._bufferSize&&this._expandBuffer(this._stashUsed+t.byteLength);var m=new Uint8Array(this._stashBuffer,0,this._bufferSize);m.set(new Uint8Array(t),this._stashUsed),this._stashUsed+=t.byteLength;var f=this._dispatchChunks(this._stashBuffer.slice(0,this._stashUsed),this._stashByteStart);if(f<this._stashUsed&&f>0){var v=new Uint8Array(this._stashBuffer,f);m.set(v,0)}this._stashUsed-=f,this._stashByteStart+=f}}}},{key:"_flushStashBuffer",value:function(t){if(this._stashUsed>0){var e=this._stashBuffer.slice(0,this._stashUsed),a=this._dispatchChunks(e,this._stashByteStart),s=e.byteLength-a;if(a<e.byteLength){if(!t){if(a>0){var i=new Uint8Array(this._stashBuffer,0,this._bufferSize),o=new Uint8Array(e,a);i.set(o,0),this._stashUsed=o.byteLength,this._stashByteStart+=a}return 0}n.default.w(this.TAG,s+" bytes unconsumed data remain when flush buffer, dropped")}return this._stashUsed=0,this._stashByteStart=0,s}return 0}},{key:"_onLoaderComplete",value:function(t,e){this._flushStashBuffer(!0),this._onComplete&&this._onComplete(this._extraData)}},{key:"_onLoaderError",value:function(t,e){switch(n.default.e(this.TAG,"Loader error, code = "+e.code+", msg = "+e.msg),this._flushStashBuffer(!1),this._isEarlyEofReconnecting&&(this._isEarlyEofReconnecting=!1,t=r.LoaderErrors.UNRECOVERABLE_EARLY_EOF),t){case r.LoaderErrors.EARLY_EOF:if(!this._config.isLive&&this._totalLength){var a=this._currentRange.to+1;return void(a<this._totalLength&&(n.default.w(this.TAG,"Connection lost, trying reconnect..."),this._isEarlyEofReconnecting=!0,this._internalSeek(a,!1)))}t=r.LoaderErrors.UNRECOVERABLE_EARLY_EOF;break;case r.LoaderErrors.UNRECOVERABLE_EARLY_EOF:case r.LoaderErrors.CONNECTING_TIMEOUT:case r.LoaderErrors.HTTP_STATUS_CODE_INVALID:case r.LoaderErrors.EXCEPTION:}if(!this._onError)throw new p.RuntimeException("IOException: "+e.msg);this._onError(t,e)}},{key:"status",get:function(){return this._loader.status}},{key:"extraData",get:function(){return this._extraData},set:function(t){this._extraData=t}},{key:"onDataArrival",get:function(){return this._onDataArrival},set:function(t){this._onDataArrival=t}},{key:"onSeeked",get:function(){return this._onSeeked},set:function(t){this._onSeeked=t}},{key:"onError",get:function(){return this._onError},set:function(t){this._onError=t}},{key:"onComplete",get:function(){return this._onComplete},set:function(t){this._onComplete=t}},{key:"onRedirect",get:function(){return this._onRedirect},set:function(t){this._onRedirect=t}},{key:"onRecoveredEarlyEof",get:function(){return this._onRecoveredEarlyEof},set:function(t){this._onRecoveredEarlyEof=t}},{key:"currentURL",get:function(){return this._dataSource.url}},{key:"hasRedirect",get:function(){return null!=this._redirectedURL||void 0!=this._dataSource.redirectedURL}},{key:"currentRedirectedURL",get:function(){return this._redirectedURL||this._dataSource.redirectedURL}},{key:"currentSpeed",get:function(){return this._loaderClass===d.default?this._loader.currentSpeed:this._speedSampler.lastSecondKBps}},{key:"loaderType",get:function(){return this._loader.type}}]),t}();a.default=f},{"../utils/exception.js":40,"../utils/logger.js":41,"./fetch-stream-loader.js":22,"./loader.js":24,"./param-seek-handler.js":25,"./range-seek-handler.js":26,"./speed-sampler.js":27,"./websocket-loader.js":28,"./xhr-moz-chunked-loader.js":29,"./xhr-msstream-loader.js":30,"./xhr-range-loader.js":31}],24:[function(t,e,a){Object.defineProperty(a,"__esModule",{value:!0}),a.BaseLoader=a.LoaderErrors=a.LoaderStatus=void 0;var s=function(){function t(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),b()(t,s.key,s)}}return function(e,a,s){return a&&t(e.prototype,a),s&&t(e,s),e}}(),i=t("../utils/exception.js"),n=a.LoaderStatus={kIdle:0,kConnecting:1,kBuffering:2,kError:3,kComplete:4};a.LoaderErrors={OK:"OK",EXCEPTION:"Exception",HTTP_STATUS_CODE_INVALID:"HttpStatusCodeInvalid",CONNECTING_TIMEOUT:"ConnectingTimeout",EARLY_EOF:"EarlyEof",UNRECOVERABLE_EARLY_EOF:"UnrecoverableEarlyEof"},a.BaseLoader=function(){function t(e){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this._type=e||"undefined",this._status=n.kIdle,this._needStash=!1,this._onContentLengthKnown=null,this._onURLRedirect=null,this._onDataArrival=null,this._onError=null,this._onComplete=null}return s(t,[{key:"destroy",value:function(){this._status=n.kIdle,this._onContentLengthKnown=null,this._onURLRedirect=null,this._onDataArrival=null,this._onError=null,this._onComplete=null}},{key:"isWorking",value:function(){return this._status===n.kConnecting||this._status===n.kBuffering}},{key:"open",value:function(t,e){throw new i.NotImplementedException("Unimplemented abstract function!")}},{key:"abort",value:function(){throw new i.NotImplementedException("Unimplemented abstract function!")}},{key:"type",get:function(){return this._type}},{key:"status",get:function(){return this._status}},{key:"needStashBuffer",get:function(){return this._needStash}},{key:"onContentLengthKnown",get:function(){return this._onContentLengthKnown},set:function(t){this._onContentLengthKnown=t}},{key:"onURLRedirect",get:function(){return this._onURLRedirect},set:function(t){this._onURLRedirect=t}},{key:"onDataArrival",get:function(){return this._onDataArrival},set:function(t){this._onDataArrival=t}},{key:"onError",get:function(){return this._onError},set:function(t){this._onError=t}},{key:"onComplete",get:function(){return this._onComplete},set:function(t){this._onComplete=t}}]),t}()},{"../utils/exception.js":40}],25:[function(t,e,a){Object.defineProperty(a,"__esModule",{value:!0});var s=function(){function t(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),b()(t,s.key,s)}}return function(e,a,s){return a&&t(e.prototype,a),s&&t(e,s),e}}(),i=function(){function t(e,a){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this._startName=e,this._endName=a}return s(t,[{key:"getConfig",value:function(t,e){var a=t;if(0!==e.from||-1!==e.to){var s=!0;-1===a.indexOf("?")&&(a+="?",s=!1),s&&(a+="&"),a+=this._startName+"="+e.from.toString(),-1!==e.to&&(a+="&"+this._endName+"="+e.to.toString())}return{url:a,headers:{}}}},{key:"removeURLParameters",value:function(t){var e=t.split("?")[0],a=void 0,s=t.indexOf("?");-1!==s&&(a=t.substring(s+1));var i="";if(void 0!=a&&a.length>0)for(var n=a.split("&"),o=0;o<n.length;o++){var r=n[o].split("="),l=o>0;r[0]!==this._startName&&r[0]!==this._endName&&(l&&(i+="&"),i+=n[o])}return 0===i.length?e:e+"?"+i}}]),t}();a.default=i},{}],26:[function(t,e,a){Object.defineProperty(a,"__esModule",{value:!0});var s=function(){function t(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),b()(t,s.key,s)}}return function(e,a,s){return a&&t(e.prototype,a),s&&t(e,s),e}}(),i=function(){function t(e){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this._zeroStart=e||!1}return s(t,[{key:"getConfig",value:function(t,e){var a={};if(0!==e.from||-1!==e.to){var s;s=-1!==e.to?"bytes="+e.from.toString()+"-"+e.to.toString():"bytes="+e.from.toString()+"-",a.Range=s}else this._zeroStart&&(a.Range="bytes=0-");return{url:t,headers:a}}},{key:"removeURLParameters",value:function(t){return t}}]),t}();a.default=i},{}],27:[function(t,e,a){Object.defineProperty(a,"__esModule",{value:!0});var s=function(){function t(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),b()(t,s.key,s)}}return function(e,a,s){return a&&t(e.prototype,a),s&&t(e,s),e}}(),i=function(){function t(){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this._firstCheckpoint=0,this._lastCheckpoint=0,this._intervalBytes=0,this._totalBytes=0,this._lastSecondBytes=0,self.performance&&self.performance.now?this._now=self.performance.now.bind(self.performance):this._now=Date.now}return s(t,[{key:"reset",value:function(){this._firstCheckpoint=this._lastCheckpoint=0,this._totalBytes=this._intervalBytes=0,this._lastSecondBytes=0}},{key:"addBytes",value:function(t){0===this._firstCheckpoint?(this._firstCheckpoint=this._now(),this._lastCheckpoint=this._firstCheckpoint,this._intervalBytes+=t,this._totalBytes+=t):this._now()-this._lastCheckpoint<1e3?(this._intervalBytes+=t,this._totalBytes+=t):(this._lastSecondBytes=this._intervalBytes,this._intervalBytes=t,this._totalBytes+=t,this._lastCheckpoint=this._now())}},{key:"currentKBps",get:function(){this.addBytes(0);var t=(this._now()-this._lastCheckpoint)/1e3;return 0==t&&(t=1),this._intervalBytes/t/1024}},{key:"lastSecondKBps",get:function(){return this.addBytes(0),0!==this._lastSecondBytes?this._lastSecondBytes/1024:this._now()-this._lastCheckpoint>=500?this.currentKBps:0}},{key:"averageKBps",get:function(){var t=(this._now()-this._firstCheckpoint)/1e3;return this._totalBytes/t/1024}}]),t}();a.default=i},{}],28:[function(t,e,a){Object.defineProperty(a,"__esModule",{value:!0});var s=function(){function t(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),b()(t,s.key,s)}}return function(e,a,s){return a&&t(e.prototype,a),s&&t(e,s),e}}(),i=t("../utils/logger.js"),o=(i&&i.__esModule,t("./loader.js")),l=t("../utils/exception.js"),d=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=(void 0===e?"undefined":A()(e))&&"function"!=typeof e?t:e}(this,(e.__proto__||n()(e)).call(this,"websocket-loader"));return t.TAG="WebSocketLoader",t._needStash=!0,t._ws=null,t._requestAbort=!1,t._receivedLength=0,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":A()(e)));t.prototype=c()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(f.a?f()(t,e):t.__proto__=e)}(e,o.BaseLoader),s(e,null,[{key:"isSupported",value:function(){try{return void 0!==self.WebSocket}catch(t){return!1}}}]),s(e,[{key:"destroy",value:function(){this._ws&&this.abort(),function t(e,a,s){null===e&&(e=Function.prototype);var i=r()(e,a);if(void 0===i){var o=n()(e);return null===o?void 0:t(o,a,s)}if("value"in i)return i.value;var l=i.get;return void 0!==l?l.call(s):void 0}(e.prototype.__proto__||n()(e.prototype),"destroy",this).call(this)}},{key:"open",value:function(t){try{var e=this._ws=new self.WebSocket(t.url);e.binaryType="arraybuffer",e.onopen=this._onWebSocketOpen.bind(this),e.onclose=this._onWebSocketClose.bind(this),e.onmessage=this._onWebSocketMessage.bind(this),e.onerror=this._onWebSocketError.bind(this),this._status=o.LoaderStatus.kConnecting}catch(t){this._status=o.LoaderStatus.kError;var a={code:t.code,msg:t.message};if(!this._onError)throw new l.RuntimeException(a.msg);this._onError(o.LoaderErrors.EXCEPTION,a)}}},{key:"abort",value:function(){var t=this._ws;!t||0!==t.readyState&&1!==t.readyState||(this._requestAbort=!0,t.close()),this._ws=null,this._status=o.LoaderStatus.kComplete}},{key:"_onWebSocketOpen",value:function(t){this._status=o.LoaderStatus.kBuffering}},{key:"_onWebSocketClose",value:function(t){!0!==this._requestAbort?(this._status=o.LoaderStatus.kComplete,this._onComplete&&this._onComplete(0,this._receivedLength-1)):this._requestAbort=!1}},{key:"_onWebSocketMessage",value:function(t){var e=this;if(t.data instanceof ArrayBuffer)this._dispatchArrayBuffer(t.data);else if(t.data instanceof Blob){var a=new FileReader;a.onload=function(){e._dispatchArrayBuffer(a.result)},a.readAsArrayBuffer(t.data)}else{this._status=o.LoaderStatus.kError;var s={code:-1,msg:"Unsupported WebSocket message type: "+t.data.constructor.name};if(!this._onError)throw new l.RuntimeException(s.msg);this._onError(o.LoaderErrors.EXCEPTION,s)}}},{key:"_dispatchArrayBuffer",value:function(t){var e=t,a=this._receivedLength;this._receivedLength+=e.byteLength,this._onDataArrival&&this._onDataArrival(e,a,this._receivedLength)}},{key:"_onWebSocketError",value:function(t){this._status=o.LoaderStatus.kError;var e={code:t.code,msg:t.message};if(!this._onError)throw new l.RuntimeException(e.msg);this._onError(o.LoaderErrors.EXCEPTION,e)}}]),e}();a.default=d},{"../utils/exception.js":40,"../utils/logger.js":41,"./loader.js":24}],29:[function(t,e,a){Object.defineProperty(a,"__esModule",{value:!0});var s="function"==typeof m.a&&"symbol"==A()(u.a)?function(t){return void 0===t?"undefined":A()(t)}:function(t){return t&&"function"==typeof m.a&&t.constructor===m.a&&t!==m.a.prototype?"symbol":void 0===t?"undefined":A()(t)},i=function(){function t(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),b()(t,s.key,s)}}return function(e,a,s){return a&&t(e.prototype,a),s&&t(e,s),e}}(),o=function(t){return t&&t.__esModule?t:{default:t}}(t("../utils/logger.js")),l=t("./loader.js"),d=t("../utils/exception.js"),h=function(t){function e(t,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var s=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=(void 0===e?"undefined":A()(e))&&"function"!=typeof e?t:e}(this,(e.__proto__||n()(e)).call(this,"xhr-moz-chunked-loader"));return s.TAG="MozChunkedLoader",s._seekHandler=t,s._config=a,s._needStash=!0,s._xhr=null,s._requestAbort=!1,s._contentLength=null,s._receivedLength=0,s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":A()(e)));t.prototype=c()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(f.a?f()(t,e):t.__proto__=e)}(e,l.BaseLoader),i(e,null,[{key:"isSupported",value:function(){try{var t=new XMLHttpRequest;return t.open("GET","https://example.com",!0),t.responseType="moz-chunked-arraybuffer","moz-chunked-arraybuffer"===t.responseType}catch(t){return o.default.w("MozChunkedLoader",t.message),!1}}}]),i(e,[{key:"destroy",value:function(){this.isWorking()&&this.abort(),this._xhr&&(this._xhr.onreadystatechange=null,this._xhr.onprogress=null,this._xhr.onloadend=null,this._xhr.onerror=null,this._xhr=null),function t(e,a,s){null===e&&(e=Function.prototype);var i=r()(e,a);if(void 0===i){var o=n()(e);return null===o?void 0:t(o,a,s)}if("value"in i)return i.value;var l=i.get;return void 0!==l?l.call(s):void 0}(e.prototype.__proto__||n()(e.prototype),"destroy",this).call(this)}},{key:"open",value:function(t,e){this._dataSource=t,this._range=e;var a=t.url;this._config.reuseRedirectedURL&&void 0!=t.redirectedURL&&(a=t.redirectedURL);var i=this._seekHandler.getConfig(a,e);this._requestURL=i.url;var n=this._xhr=new XMLHttpRequest;if(n.open("GET",i.url,!0),n.responseType="moz-chunked-arraybuffer",n.onreadystatechange=this._onReadyStateChange.bind(this),n.onprogress=this._onProgress.bind(this),n.onloadend=this._onLoadEnd.bind(this),n.onerror=this._onXhrError.bind(this),t.withCredentials&&n.withCredentials&&(n.withCredentials=!0),"object"===s(i.headers)){var o=i.headers;for(var r in o)o.hasOwnProperty(r)&&n.setRequestHeader(r,o[r])}this._status=l.LoaderStatus.kConnecting,n.send()}},{key:"abort",value:function(){this._requestAbort=!0,this._xhr&&this._xhr.abort(),this._status=l.LoaderStatus.kComplete}},{key:"_onReadyStateChange",value:function(t){var e=t.target;if(2===e.readyState){if(void 0!=e.responseURL&&e.responseURL!==this._requestURL&&this._onURLRedirect){var a=this._seekHandler.removeURLParameters(e.responseURL);this._onURLRedirect(a)}if(0!==e.status&&(e.status<200||e.status>299)){if(this._status=l.LoaderStatus.kError,!this._onError)throw new d.RuntimeException("MozChunkedLoader: Http code invalid, "+e.status+" "+e.statusText);this._onError(l.LoaderErrors.HTTP_STATUS_CODE_INVALID,{code:e.status,msg:e.statusText})}else this._status=l.LoaderStatus.kBuffering}}},{key:"_onProgress",value:function(t){if(this._status!==l.LoaderStatus.kError){null===this._contentLength&&null!==t.total&&0!==t.total&&(this._contentLength=t.total,this._onContentLengthKnown&&this._onContentLengthKnown(this._contentLength));var e=t.target.response,a=this._range.from+this._receivedLength;this._receivedLength+=e.byteLength,this._onDataArrival&&this._onDataArrival(e,a,this._receivedLength)}}},{key:"_onLoadEnd",value:function(t){!0!==this._requestAbort?this._status!==l.LoaderStatus.kError&&(this._status=l.LoaderStatus.kComplete,this._onComplete&&this._onComplete(this._range.from,this._range.from+this._receivedLength-1)):this._requestAbort=!1}},{key:"_onXhrError",value:function(t){this._status=l.LoaderStatus.kError;var e=0,a=null;if(this._contentLength&&t.loaded<this._contentLength?(e=l.LoaderErrors.EARLY_EOF,a={code:-1,msg:"Moz-Chunked stream meet Early-Eof"}):(e=l.LoaderErrors.EXCEPTION,a={code:-1,msg:t.constructor.name+" "+t.type}),!this._onError)throw new d.RuntimeException(a.msg);this._onError(e,a)}}]),e}();a.default=h},{"../utils/exception.js":40,"../utils/logger.js":41,"./loader.js":24}],30:[function(t,e,a){Object.defineProperty(a,"__esModule",{value:!0});var s="function"==typeof m.a&&"symbol"==A()(u.a)?function(t){return void 0===t?"undefined":A()(t)}:function(t){return t&&"function"==typeof m.a&&t.constructor===m.a&&t!==m.a.prototype?"symbol":void 0===t?"undefined":A()(t)},i=function(){function t(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),b()(t,s.key,s)}}return function(e,a,s){return a&&t(e.prototype,a),s&&t(e,s),e}}(),o=function(t){return t&&t.__esModule?t:{default:t}}(t("../utils/logger.js")),l=t("./loader.js"),d=t("../utils/exception.js"),h=function(t){function e(t,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var s=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=(void 0===e?"undefined":A()(e))&&"function"!=typeof e?t:e}(this,(e.__proto__||n()(e)).call(this,"xhr-msstream-loader"));return s.TAG="MSStreamLoader",s._seekHandler=t,s._config=a,s._needStash=!0,s._xhr=null,s._reader=null,s._totalRange=null,s._currentRange=null,s._currentRequestURL=null,s._currentRedirectedURL=null,s._contentLength=null,s._receivedLength=0,s._bufferLimit=16777216,s._lastTimeBufferSize=0,s._isReconnecting=!1,s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":A()(e)));t.prototype=c()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(f.a?f()(t,e):t.__proto__=e)}(e,l.BaseLoader),i(e,null,[{key:"isSupported",value:function(){try{if(void 0===self.MSStream||void 0===self.MSStreamReader)return!1;var t=new XMLHttpRequest;return t.open("GET","https://example.com",!0),t.responseType="ms-stream","ms-stream"===t.responseType}catch(t){return o.default.w("MSStreamLoader",t.message),!1}}}]),i(e,[{key:"destroy",value:function(){this.isWorking()&&this.abort(),this._reader&&(this._reader.onprogress=null,this._reader.onload=null,this._reader.onerror=null,this._reader=null),this._xhr&&(this._xhr.onreadystatechange=null,this._xhr=null),function t(e,a,s){null===e&&(e=Function.prototype);var i=r()(e,a);if(void 0===i){var o=n()(e);return null===o?void 0:t(o,a,s)}if("value"in i)return i.value;var l=i.get;return void 0!==l?l.call(s):void 0}(e.prototype.__proto__||n()(e.prototype),"destroy",this).call(this)}},{key:"open",value:function(t,e){this._internalOpen(t,e,!1)}},{key:"_internalOpen",value:function(t,e,a){this._dataSource=t,a?this._currentRange=e:this._totalRange=e;var i=t.url;this._config.reuseRedirectedURL&&(void 0!=this._currentRedirectedURL?i=this._currentRedirectedURL:void 0!=t.redirectedURL&&(i=t.redirectedURL));var n=this._seekHandler.getConfig(i,e);this._currentRequestURL=n.url;var o=this._reader=new self.MSStreamReader;o.onprogress=this._msrOnProgress.bind(this),o.onload=this._msrOnLoad.bind(this),o.onerror=this._msrOnError.bind(this);var r=this._xhr=new XMLHttpRequest;if(r.open("GET",n.url,!0),r.responseType="ms-stream",r.onreadystatechange=this._xhrOnReadyStateChange.bind(this),r.onerror=this._xhrOnError.bind(this),t.withCredentials&&(r.withCredentials=!0),"object"===s(n.headers)){var c=n.headers;for(var d in c)c.hasOwnProperty(d)&&r.setRequestHeader(d,c[d])}this._isReconnecting?this._isReconnecting=!1:this._status=l.LoaderStatus.kConnecting,r.send()}},{key:"abort",value:function(){this._internalAbort(),this._status=l.LoaderStatus.kComplete}},{key:"_internalAbort",value:function(){this._reader&&(1===this._reader.readyState&&this._reader.abort(),this._reader.onprogress=null,this._reader.onload=null,this._reader.onerror=null,this._reader=null),this._xhr&&(this._xhr.abort(),this._xhr.onreadystatechange=null,this._xhr=null)}},{key:"_xhrOnReadyStateChange",value:function(t){var e=t.target;if(2===e.readyState)if(e.status>=200&&e.status<=299){if(this._status=l.LoaderStatus.kBuffering,void 0!=e.responseURL){var a=this._seekHandler.removeURLParameters(e.responseURL);e.responseURL!==this._currentRequestURL&&a!==this._currentRedirectedURL&&(this._currentRedirectedURL=a,this._onURLRedirect&&this._onURLRedirect(a))}var s=e.getResponseHeader("Content-Length");if(null!=s&&null==this._contentLength){var i=parseInt(s);i>0&&(this._contentLength=i,this._onContentLengthKnown&&this._onContentLengthKnown(this._contentLength))}}else{if(this._status=l.LoaderStatus.kError,!this._onError)throw new d.RuntimeException("MSStreamLoader: Http code invalid, "+e.status+" "+e.statusText);this._onError(l.LoaderErrors.HTTP_STATUS_CODE_INVALID,{code:e.status,msg:e.statusText})}else if(3===e.readyState&&e.status>=200&&e.status<=299){this._status=l.LoaderStatus.kBuffering;var n=e.response;this._reader.readAsArrayBuffer(n)}}},{key:"_xhrOnError",value:function(t){this._status=l.LoaderStatus.kError;var e=l.LoaderErrors.EXCEPTION,a={code:-1,msg:t.constructor.name+" "+t.type};if(!this._onError)throw new d.RuntimeException(a.msg);this._onError(e,a)}},{key:"_msrOnProgress",value:function(t){var e=t.target.result;if(null!=e){var a=e.slice(this._lastTimeBufferSize);this._lastTimeBufferSize=e.byteLength;var s=this._totalRange.from+this._receivedLength;this._receivedLength+=a.byteLength,this._onDataArrival&&this._onDataArrival(a,s,this._receivedLength),e.byteLength>=this._bufferLimit&&(o.default.v(this.TAG,"MSStream buffer exceeded max size near "+(s+a.byteLength)+", reconnecting..."),this._doReconnectIfNeeded())}else this._doReconnectIfNeeded()}},{key:"_doReconnectIfNeeded",value:function(){if(null==this._contentLength||this._receivedLength<this._contentLength){this._isReconnecting=!0,this._lastTimeBufferSize=0,this._internalAbort();var t={from:this._totalRange.from+this._receivedLength,to:-1};this._internalOpen(this._dataSource,t,!0)}}},{key:"_msrOnLoad",value:function(t){this._status=l.LoaderStatus.kComplete,this._onComplete&&this._onComplete(this._totalRange.from,this._totalRange.from+this._receivedLength-1)}},{key:"_msrOnError",value:function(t){this._status=l.LoaderStatus.kError;var e=0,a=null;if(this._contentLength&&this._receivedLength<this._contentLength?(e=l.LoaderErrors.EARLY_EOF,a={code:-1,msg:"MSStream meet Early-Eof"}):(e=l.LoaderErrors.EARLY_EOF,a={code:-1,msg:t.constructor.name+" "+t.type}),!this._onError)throw new d.RuntimeException(a.msg);this._onError(e,a)}}]),e}();a.default=h},{"../utils/exception.js":40,"../utils/logger.js":41,"./loader.js":24}],31:[function(t,e,a){function s(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(a,"__esModule",{value:!0});var i="function"==typeof m.a&&"symbol"==A()(u.a)?function(t){return void 0===t?"undefined":A()(t)}:function(t){return t&&"function"==typeof m.a&&t.constructor===m.a&&t!==m.a.prototype?"symbol":void 0===t?"undefined":A()(t)},o=function(){function t(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),b()(t,s.key,s)}}return function(e,a,s){return a&&t(e.prototype,a),s&&t(e,s),e}}(),l=s(t("../utils/logger.js")),d=s(t("./speed-sampler.js")),h=t("./loader.js"),p=t("../utils/exception.js"),v=function(t){function e(t,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var s=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=(void 0===e?"undefined":A()(e))&&"function"!=typeof e?t:e}(this,(e.__proto__||n()(e)).call(this,"xhr-range-loader"));return s.TAG="RangeLoader",s._seekHandler=t,s._config=a,s._needStash=!1,s._chunkSizeKBList=[128,256,384,512,768,1024,1536,2048,3072,4096,5120,6144,7168,8192],s._currentChunkSizeKB=384,s._currentSpeedNormalized=0,s._zeroSpeedChunkCount=0,s._xhr=null,s._speedSampler=new d.default,s._requestAbort=!1,s._waitForTotalLength=!1,s._totalLengthReceived=!1,s._currentRequestURL=null,s._currentRedirectedURL=null,s._currentRequestRange=null,s._totalLength=null,s._contentLength=null,s._receivedLength=0,s._lastTimeLoaded=0,s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":A()(e)));t.prototype=c()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(f.a?f()(t,e):t.__proto__=e)}(e,h.BaseLoader),o(e,null,[{key:"isSupported",value:function(){try{var t=new XMLHttpRequest;return t.open("GET","https://example.com",!0),t.responseType="arraybuffer","arraybuffer"===t.responseType}catch(t){return l.default.w("RangeLoader",t.message),!1}}}]),o(e,[{key:"destroy",value:function(){this.isWorking()&&this.abort(),this._xhr&&(this._xhr.onreadystatechange=null,this._xhr.onprogress=null,this._xhr.onload=null,this._xhr.onerror=null,this._xhr=null),function t(e,a,s){null===e&&(e=Function.prototype);var i=r()(e,a);if(void 0===i){var o=n()(e);return null===o?void 0:t(o,a,s)}if("value"in i)return i.value;var l=i.get;return void 0!==l?l.call(s):void 0}(e.prototype.__proto__||n()(e.prototype),"destroy",this).call(this)}},{key:"open",value:function(t,e){this._dataSource=t,this._range=e,this._status=h.LoaderStatus.kConnecting;var a=!1;void 0!=this._dataSource.filesize&&0!==this._dataSource.filesize&&(a=!0,this._totalLength=this._dataSource.filesize),this._totalLengthReceived||a?this._openSubRange():(this._waitForTotalLength=!0,this._internalOpen(this._dataSource,{from:0,to:-1}))}},{key:"_openSubRange",value:function(){var t=1024*this._currentChunkSizeKB,e=this._range.from+this._receivedLength,a=e+t;null!=this._contentLength&&a-this._range.from>=this._contentLength&&(a=this._range.from+this._contentLength-1),this._currentRequestRange={from:e,to:a},this._internalOpen(this._dataSource,this._currentRequestRange)}},{key:"_internalOpen",value:function(t,e){this._lastTimeLoaded=0;var a=t.url;this._config.reuseRedirectedURL&&(void 0!=this._currentRedirectedURL?a=this._currentRedirectedURL:void 0!=t.redirectedURL&&(a=t.redirectedURL));var s=this._seekHandler.getConfig(a,e);this._currentRequestURL=s.url;var n=this._xhr=new XMLHttpRequest;if(n.open("GET",s.url,!0),n.responseType="arraybuffer",n.onreadystatechange=this._onReadyStateChange.bind(this),n.onprogress=this._onProgress.bind(this),n.onload=this._onLoad.bind(this),n.onerror=this._onXhrError.bind(this),t.withCredentials&&n.withCredentials&&(n.withCredentials=!0),"object"===i(s.headers)){var o=s.headers;for(var r in o)o.hasOwnProperty(r)&&n.setRequestHeader(r,o[r])}n.send()}},{key:"abort",value:function(){this._requestAbort=!0,this._internalAbort(),this._status=h.LoaderStatus.kComplete}},{key:"_internalAbort",value:function(){this._xhr&&(this._xhr.onreadystatechange=null,this._xhr.onprogress=null,this._xhr.onload=null,this._xhr.onerror=null,this._xhr.abort(),this._xhr=null)}},{key:"_onReadyStateChange",value:function(t){var e=t.target;if(2===e.readyState){if(void 0!=e.responseURL){var a=this._seekHandler.removeURLParameters(e.responseURL);e.responseURL!==this._currentRequestURL&&a!==this._currentRedirectedURL&&(this._currentRedirectedURL=a,this._onURLRedirect&&this._onURLRedirect(a))}if(e.status>=200&&e.status<=299){if(this._waitForTotalLength)return;this._status=h.LoaderStatus.kBuffering}else{if(this._status=h.LoaderStatus.kError,!this._onError)throw new p.RuntimeException("RangeLoader: Http code invalid, "+e.status+" "+e.statusText);this._onError(h.LoaderErrors.HTTP_STATUS_CODE_INVALID,{code:e.status,msg:e.statusText})}}}},{key:"_onProgress",value:function(t){if(this._status!==h.LoaderStatus.kError){if(null===this._contentLength){var e=!1;if(this._waitForTotalLength){this._waitForTotalLength=!1,this._totalLengthReceived=!0,e=!0;var a=t.total;this._internalAbort(),null!=a&0!==a&&(this._totalLength=a)}if(-1===this._range.to?this._contentLength=this._totalLength-this._range.from:this._contentLength=this._range.to-this._range.from+1,e)return void this._openSubRange();this._onContentLengthKnown&&this._onContentLengthKnown(this._contentLength)}var s=t.loaded-this._lastTimeLoaded;this._lastTimeLoaded=t.loaded,this._speedSampler.addBytes(s)}}},{key:"_normalizeSpeed",value:function(t){var e=this._chunkSizeKBList,a=e.length-1,s=0,i=0,n=a;if(t<e[0])return e[0];for(;i<=n;){if((s=i+Math.floor((n-i)/2))===a||t>=e[s]&&t<e[s+1])return e[s];e[s]<t?i=s+1:n=s-1}}},{key:"_onLoad",value:function(t){if(this._status!==h.LoaderStatus.kError){if(this._waitForTotalLength)return void(this._waitForTotalLength=!1);this._lastTimeLoaded=0;var e=this._speedSampler.lastSecondKBps;if(0===e&&++this._zeroSpeedChunkCount>=3&&(e=this._speedSampler.currentKBps),0!==e){var a=this._normalizeSpeed(e);this._currentSpeedNormalized!==a&&(this._currentSpeedNormalized=a,this._currentChunkSizeKB=a)}var s=t.target.response,i=this._range.from+this._receivedLength;this._receivedLength+=s.byteLength;var n=!1;null!=this._contentLength&&this._receivedLength<this._contentLength?this._openSubRange():n=!0,this._onDataArrival&&this._onDataArrival(s,i,this._receivedLength),n&&(this._status=h.LoaderStatus.kComplete,this._onComplete&&this._onComplete(this._range.from,this._range.from+this._receivedLength-1))}}},{key:"_onXhrError",value:function(t){this._status=h.LoaderStatus.kError;var e=0,a=null;if(this._contentLength&&this._receivedLength>0&&this._receivedLength<this._contentLength?(e=h.LoaderErrors.EARLY_EOF,a={code:-1,msg:"RangeLoader meet Early-Eof"}):(e=h.LoaderErrors.EXCEPTION,a={code:-1,msg:t.constructor.name+" "+t.type}),!this._onError)throw new p.RuntimeException(a.msg);this._onError(e,a)}},{key:"currentSpeed",get:function(){return this._speedSampler.lastSecondKBps}}]),e}();a.default=v},{"../utils/exception.js":40,"../utils/logger.js":41,"./loader.js":24,"./speed-sampler.js":27}],32:[function(t,e,a){function s(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(a,"__esModule",{value:!0});var i="function"==typeof m.a&&"symbol"==A()(u.a)?function(t){return void 0===t?"undefined":A()(t)}:function(t){return t&&"function"==typeof m.a&&t.constructor===m.a&&t!==m.a.prototype?"symbol":void 0===t?"undefined":A()(t)},n=function(){function t(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),b()(t,s.key,s)}}return function(e,a,s){return a&&t(e.prototype,a),s&&t(e,s),e}}(),o=s(t("events")),r=s(t("../utils/logger.js")),l=s(t("../utils/browser.js")),c=s(t("./player-events.js")),d=s(t("../core/transmuxer.js")),h=s(t("../core/transmuxing-events.js")),p=s(t("../core/mse-controller.js")),f=s(t("../core/mse-events.js")),v=t("./player-errors.js"),g=t("../config.js"),y=t("../utils/exception.js"),C=function(){function t(e,a){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.TAG="FlvPlayer",this._type="FlvPlayer",this._emitter=new o.default,this._config=(0,g.createDefaultConfig)(),"object"===(void 0===a?"undefined":i(a))&&w()(this._config,a),"flv"!==e.type.toLowerCase())throw new y.InvalidArgumentException("FlvPlayer requires an flv MediaDataSource input!");!0===e.isLive&&(this._config.isLive=!0),this.e={onvLoadedMetadata:this._onvLoadedMetadata.bind(this),onvSeeking:this._onvSeeking.bind(this),onvCanPlay:this._onvCanPlay.bind(this),onvStalled:this._onvStalled.bind(this),onvProgress:this._onvProgress.bind(this)},self.performance&&self.performance.now?this._now=self.performance.now.bind(self.performance):this._now=Date.now,this._pendingSeekTime=null,this._requestSetTime=!1,this._seekpointRecord=null,this._progressChecker=null,this._mediaDataSource=e,this._mediaElement=null,this._msectl=null,this._transmuxer=null,this._mseSourceOpened=!1,this._hasPendingLoad=!1,this._receivedCanPlay=!1,this._mediaInfo=null,this._statisticsInfo=null;var s=l.default.chrome&&(l.default.version.major<50||50===l.default.version.major&&l.default.version.build<2661);this._alwaysSeekKeyframe=!!(s||l.default.msedge||l.default.msie),this._alwaysSeekKeyframe&&(this._config.accurateSeek=!1)}return n(t,[{key:"destroy",value:function(){null!=this._progressChecker&&(window.clearInterval(this._progressChecker),this._progressChecker=null),this._transmuxer&&this.unload(),this._mediaElement&&this.detachMediaElement(),this.e=null,this._mediaDataSource=null,this._emitter.removeAllListeners(),this._emitter=null}},{key:"on",value:function(t,e){var a=this;t===c.default.MEDIA_INFO?null!=this._mediaInfo&&_.a.resolve().then(function(){a._emitter.emit(c.default.MEDIA_INFO,a.mediaInfo)}):t===c.default.STATISTICS_INFO&&null!=this._statisticsInfo&&_.a.resolve().then(function(){a._emitter.emit(c.default.STATISTICS_INFO,a.statisticsInfo)}),this._emitter.addListener(t,e)}},{key:"off",value:function(t,e){this._emitter.removeListener(t,e)}},{key:"attachMediaElement",value:function(t){var e=this;if(this._mediaElement=t,t.addEventListener("loadedmetadata",this.e.onvLoadedMetadata),t.addEventListener("seeking",this.e.onvSeeking),t.addEventListener("canplay",this.e.onvCanPlay),t.addEventListener("stalled",this.e.onvStalled),t.addEventListener("progress",this.e.onvProgress),this._msectl=new p.default(this._config),this._msectl.on(f.default.UPDATE_END,this._onmseUpdateEnd.bind(this)),this._msectl.on(f.default.BUFFER_FULL,this._onmseBufferFull.bind(this)),this._msectl.on(f.default.SOURCE_OPEN,function(){e._mseSourceOpened=!0,e._hasPendingLoad&&(e._hasPendingLoad=!1,e.load())}),this._msectl.on(f.default.ERROR,function(t){e._emitter.emit(c.default.ERROR,v.ErrorTypes.MEDIA_ERROR,v.ErrorDetails.MEDIA_MSE_ERROR,t)}),this._msectl.attachMediaElement(t),null!=this._pendingSeekTime)try{t.currentTime=this._pendingSeekTime,this._pendingSeekTime=null}catch(t){}}},{key:"detachMediaElement",value:function(){this._mediaElement&&(this._msectl.detachMediaElement(),this._mediaElement.removeEventListener("loadedmetadata",this.e.onvLoadedMetadata),this._mediaElement.removeEventListener("seeking",this.e.onvSeeking),this._mediaElement.removeEventListener("canplay",this.e.onvCanPlay),this._mediaElement.removeEventListener("stalled",this.e.onvStalled),this._mediaElement.removeEventListener("progress",this.e.onvProgress),this._mediaElement=null),this._msectl&&(this._msectl.destroy(),this._msectl=null)}},{key:"load",value:function(){var t=this;if(!this._mediaElement)throw new y.IllegalStateException("HTMLMediaElement must be attached before load()!");if(this._transmuxer)throw new y.IllegalStateException("FlvPlayer.load() has been called, please call unload() first!");if(!this._hasPendingLoad){if(this._config.deferLoadAfterSourceOpen&&!1===this._mseSourceOpened)return void(this._hasPendingLoad=!0);this._mediaElement.readyState>0&&(this._requestSetTime=!0,this._mediaElement.currentTime=0),this._transmuxer=new d.default(this._mediaDataSource,this._config),this._transmuxer.on(h.default.INIT_SEGMENT,function(e,a){t._msectl.appendInitSegment(a)}),this._transmuxer.on(h.default.MEDIA_SEGMENT,function(e,a){if(t._msectl.appendMediaSegment(a),t._config.lazyLoad&&!t._config.isLive){var s=t._mediaElement.currentTime;a.info.endDts>=1e3*(s+t._config.lazyLoadMaxDuration)&&null==t._progressChecker&&(r.default.v(t.TAG,"Maximum buffering duration exceeded, suspend transmuxing task"),t._suspendTransmuxer())}}),this._transmuxer.on(h.default.LOADING_COMPLETE,function(){t._msectl.endOfStream(),t._emitter.emit(c.default.LOADING_COMPLETE)}),this._transmuxer.on(h.default.RECOVERED_EARLY_EOF,function(){t._emitter.emit(c.default.RECOVERED_EARLY_EOF)}),this._transmuxer.on(h.default.IO_ERROR,function(e,a){t._emitter.emit(c.default.ERROR,v.ErrorTypes.NETWORK_ERROR,e,a)}),this._transmuxer.on(h.default.DEMUX_ERROR,function(e,a){t._emitter.emit(c.default.ERROR,v.ErrorTypes.MEDIA_ERROR,e,{code:-1,msg:a})}),this._transmuxer.on(h.default.MEDIA_INFO,function(e){t._mediaInfo=e,t._emitter.emit(c.default.MEDIA_INFO,w()({},e))}),this._transmuxer.on(h.default.STATISTICS_INFO,function(e){t._statisticsInfo=t._fillStatisticsInfo(e),t._emitter.emit(c.default.STATISTICS_INFO,w()({},t._statisticsInfo))}),this._transmuxer.on(h.default.RECOMMEND_SEEKPOINT,function(e){t._mediaElement&&!t._config.accurateSeek&&(t._requestSetTime=!0,t._mediaElement.currentTime=e/1e3)}),this._transmuxer.open()}}},{key:"unload",value:function(){this._mediaElement&&this._mediaElement.pause(),this._msectl&&this._msectl.seek(0),this._transmuxer&&(this._transmuxer.close(),this._transmuxer.destroy(),this._transmuxer=null)}},{key:"play",value:function(){return this._mediaElement.play()}},{key:"pause",value:function(){this._mediaElement.pause()}},{key:"_fillStatisticsInfo",value:function(t){if(t.playerType=this._type,!(this._mediaElement instanceof HTMLVideoElement))return t;var e=!0,a=0,s=0;if(this._mediaElement.getVideoPlaybackQuality){var i=this._mediaElement.getVideoPlaybackQuality();a=i.totalVideoFrames,s=i.droppedVideoFrames}else void 0!=this._mediaElement.webkitDecodedFrameCount?(a=this._mediaElement.webkitDecodedFrameCount,s=this._mediaElement.webkitDroppedFrameCount):e=!1;return e&&(t.decodedFrames=a,t.droppedFrames=s),t}},{key:"_onmseUpdateEnd",value:function(){if(this._config.lazyLoad&&!this._config.isLive){for(var t=this._mediaElement.buffered,e=this._mediaElement.currentTime,a=0,s=0;s<t.length;s++){var i=t.start(s),n=t.end(s);if(i<=e&&e<n){a=n;break}}a>=e+this._config.lazyLoadMaxDuration&&null==this._progressChecker&&(r.default.v(this.TAG,"Maximum buffering duration exceeded, suspend transmuxing task"),this._suspendTransmuxer())}}},{key:"_onmseBufferFull",value:function(){r.default.v(this.TAG,"MSE SourceBuffer is full, suspend transmuxing task"),null==this._progressChecker&&this._suspendTransmuxer()}},{key:"_suspendTransmuxer",value:function(){this._transmuxer&&(this._transmuxer.pause(),null==this._progressChecker&&(this._progressChecker=window.setInterval(this._checkProgressAndResume.bind(this),1e3)))}},{key:"_checkProgressAndResume",value:function(){for(var t=this._mediaElement.currentTime,e=this._mediaElement.buffered,a=!1,s=0;s<e.length;s++){var i=e.start(s),n=e.end(s);if(t>=i&&t<n){t>=n-this._config.lazyLoadRecoverDuration&&(a=!0);break}}a&&(window.clearInterval(this._progressChecker),this._progressChecker=null,a&&(r.default.v(this.TAG,"Continue loading from paused position"),this._transmuxer.resume()))}},{key:"_isTimepointBuffered",value:function(t){for(var e=this._mediaElement.buffered,a=0;a<e.length;a++){var s=e.start(a),i=e.end(a);if(t>=s&&t<i)return!0}return!1}},{key:"_internalSeek",value:function(t){var e=this._isTimepointBuffered(t),a=!1,s=0;if(t<1&&this._mediaElement.buffered.length>0){var i=this._mediaElement.buffered.start(0);(i<1&&t<i||l.default.safari)&&(a=!0,s=l.default.safari?.1:i)}if(a)this._requestSetTime=!0,this._mediaElement.currentTime=s;else if(e){if(this._alwaysSeekKeyframe){var n=this._msectl.getNearestKeyframe(Math.floor(1e3*t));this._requestSetTime=!0,this._mediaElement.currentTime=null!=n?n.dts/1e3:t}else this._requestSetTime=!0,this._mediaElement.currentTime=t;null!=this._progressChecker&&this._checkProgressAndResume()}else null!=this._progressChecker&&(window.clearInterval(this._progressChecker),this._progressChecker=null),this._msectl.seek(t),this._transmuxer.seek(Math.floor(1e3*t)),this._config.accurateSeek&&(this._requestSetTime=!0,this._mediaElement.currentTime=t)}},{key:"_checkAndApplyUnbufferedSeekpoint",value:function(){if(this._seekpointRecord)if(this._seekpointRecord.recordTime<=this._now()-100){var t=this._mediaElement.currentTime;this._seekpointRecord=null,this._isTimepointBuffered(t)||(null!=this._progressChecker&&(window.clearTimeout(this._progressChecker),this._progressChecker=null),this._msectl.seek(t),this._transmuxer.seek(Math.floor(1e3*t)),this._config.accurateSeek&&(this._requestSetTime=!0,this._mediaElement.currentTime=t))}else window.setTimeout(this._checkAndApplyUnbufferedSeekpoint.bind(this),50)}},{key:"_checkAndResumeStuckPlayback",value:function(t){var e=this._mediaElement;if(t||!this._receivedCanPlay||e.readyState<2){var a=e.buffered;a.length>0&&e.currentTime<a.start(0)&&(r.default.w(this.TAG,"Playback seems stuck at "+e.currentTime+", seek to "+a.start(0)),this._requestSetTime=!0,this._mediaElement.currentTime=a.start(0),this._mediaElement.removeEventListener("progress",this.e.onvProgress))}else this._mediaElement.removeEventListener("progress",this.e.onvProgress)}},{key:"_onvLoadedMetadata",value:function(t){null!=this._pendingSeekTime&&(this._mediaElement.currentTime=this._pendingSeekTime,this._pendingSeekTime=null)}},{key:"_onvSeeking",value:function(t){var e=this._mediaElement.currentTime,a=this._mediaElement.buffered;if(this._requestSetTime)this._requestSetTime=!1;else{if(e<1&&a.length>0){var s=a.start(0);if(s<1&&e<s||l.default.safari)return this._requestSetTime=!0,void(this._mediaElement.currentTime=l.default.safari?.1:s)}if(this._isTimepointBuffered(e)){if(this._alwaysSeekKeyframe){var i=this._msectl.getNearestKeyframe(Math.floor(1e3*e));null!=i&&(this._requestSetTime=!0,this._mediaElement.currentTime=i.dts/1e3)}null!=this._progressChecker&&this._checkProgressAndResume()}else this._seekpointRecord={seekPoint:e,recordTime:this._now()},window.setTimeout(this._checkAndApplyUnbufferedSeekpoint.bind(this),50)}}},{key:"_onvCanPlay",value:function(t){this._receivedCanPlay=!0,this._mediaElement.removeEventListener("canplay",this.e.onvCanPlay)}},{key:"_onvStalled",value:function(t){this._checkAndResumeStuckPlayback(!0)}},{key:"_onvProgress",value:function(t){this._checkAndResumeStuckPlayback()}},{key:"type",get:function(){return this._type}},{key:"buffered",get:function(){return this._mediaElement.buffered}},{key:"duration",get:function(){return this._mediaElement.duration}},{key:"volume",get:function(){return this._mediaElement.volume},set:function(t){this._mediaElement.volume=t}},{key:"muted",get:function(){return this._mediaElement.muted},set:function(t){this._mediaElement.muted=t}},{key:"currentTime",get:function(){return this._mediaElement?this._mediaElement.currentTime:0},set:function(t){this._mediaElement?this._internalSeek(t):this._pendingSeekTime=t}},{key:"mediaInfo",get:function(){return w()({},this._mediaInfo)}},{key:"statisticsInfo",get:function(){return null==this._statisticsInfo&&(this._statisticsInfo={}),this._statisticsInfo=this._fillStatisticsInfo(this._statisticsInfo),w()({},this._statisticsInfo)}}]),t}();a.default=C},{"../config.js":5,"../core/mse-controller.js":9,"../core/mse-events.js":10,"../core/transmuxer.js":11,"../core/transmuxing-events.js":13,"../utils/browser.js":39,"../utils/exception.js":40,"../utils/logger.js":41,"./player-errors.js":34,"./player-events.js":35,events:2}],33:[function(t,e,a){function s(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(a,"__esModule",{value:!0});var i="function"==typeof m.a&&"symbol"==A()(u.a)?function(t){return void 0===t?"undefined":A()(t)}:function(t){return t&&"function"==typeof m.a&&t.constructor===m.a&&t!==m.a.prototype?"symbol":void 0===t?"undefined":A()(t)},n=function(){function t(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),b()(t,s.key,s)}}return function(e,a,s){return a&&t(e.prototype,a),s&&t(e,s),e}}(),o=s(t("events")),r=s(t("./player-events.js")),l=t("../config.js"),c=t("../utils/exception.js"),d=function(){function t(e,a){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.TAG="NativePlayer",this._type="NativePlayer",this._emitter=new o.default,this._config=(0,l.createDefaultConfig)(),"object"===(void 0===a?"undefined":i(a))&&w()(this._config,a),"flv"===e.type.toLowerCase())throw new c.InvalidArgumentException("NativePlayer does't support flv MediaDataSource input!");if(e.hasOwnProperty("segments"))throw new c.InvalidArgumentException("NativePlayer("+e.type+") doesn't support multipart playback!");this.e={onvLoadedMetadata:this._onvLoadedMetadata.bind(this)},this._pendingSeekTime=null,this._statisticsReporter=null,this._mediaDataSource=e,this._mediaElement=null}return n(t,[{key:"destroy",value:function(){this._mediaElement&&(this.unload(),this.detachMediaElement()),this.e=null,this._mediaDataSource=null,this._emitter.removeAllListeners(),this._emitter=null}},{key:"on",value:function(t,e){var a=this;t===r.default.MEDIA_INFO?null!=this._mediaElement&&0!==this._mediaElement.readyState&&_.a.resolve().then(function(){a._emitter.emit(r.default.MEDIA_INFO,a.mediaInfo)}):t===r.default.STATISTICS_INFO&&null!=this._mediaElement&&0!==this._mediaElement.readyState&&_.a.resolve().then(function(){a._emitter.emit(r.default.STATISTICS_INFO,a.statisticsInfo)}),this._emitter.addListener(t,e)}},{key:"off",value:function(t,e){this._emitter.removeListener(t,e)}},{key:"attachMediaElement",value:function(t){if(this._mediaElement=t,t.addEventListener("loadedmetadata",this.e.onvLoadedMetadata),null!=this._pendingSeekTime)try{t.currentTime=this._pendingSeekTime,this._pendingSeekTime=null}catch(t){}}},{key:"detachMediaElement",value:function(){this._mediaElement&&(this._mediaElement.src="",this._mediaElement.removeAttribute("src"),this._mediaElement.removeEventListener("loadedmetadata",this.e.onvLoadedMetadata),this._mediaElement=null),null!=this._statisticsReporter&&(window.clearInterval(this._statisticsReporter),this._statisticsReporter=null)}},{key:"load",value:function(){if(!this._mediaElement)throw new c.IllegalStateException("HTMLMediaElement must be attached before load()!");this._mediaElement.src=this._mediaDataSource.url,this._mediaElement.readyState>0&&(this._mediaElement.currentTime=0),this._mediaElement.preload="auto",this._mediaElement.load(),this._statisticsReporter=window.setInterval(this._reportStatisticsInfo.bind(this),this._config.statisticsInfoReportInterval)}},{key:"unload",value:function(){this._mediaElement&&(this._mediaElement.src="",this._mediaElement.removeAttribute("src")),null!=this._statisticsReporter&&(window.clearInterval(this._statisticsReporter),this._statisticsReporter=null)}},{key:"play",value:function(){return this._mediaElement.play()}},{key:"pause",value:function(){this._mediaElement.pause()}},{key:"_onvLoadedMetadata",value:function(t){null!=this._pendingSeekTime&&(this._mediaElement.currentTime=this._pendingSeekTime,this._pendingSeekTime=null),this._emitter.emit(r.default.MEDIA_INFO,this.mediaInfo)}},{key:"_reportStatisticsInfo",value:function(){this._emitter.emit(r.default.STATISTICS_INFO,this.statisticsInfo)}},{key:"type",get:function(){return this._type}},{key:"buffered",get:function(){return this._mediaElement.buffered}},{key:"duration",get:function(){return this._mediaElement.duration}},{key:"volume",get:function(){return this._mediaElement.volume},set:function(t){this._mediaElement.volume=t}},{key:"muted",get:function(){return this._mediaElement.muted},set:function(t){this._mediaElement.muted=t}},{key:"currentTime",get:function(){return this._mediaElement?this._mediaElement.currentTime:0},set:function(t){this._mediaElement?this._mediaElement.currentTime=t:this._pendingSeekTime=t}},{key:"mediaInfo",get:function(){var t={mimeType:(this._mediaElement instanceof HTMLAudioElement?"audio/":"video/")+this._mediaDataSource.type};return this._mediaElement&&(t.duration=Math.floor(1e3*this._mediaElement.duration),this._mediaElement instanceof HTMLVideoElement&&(t.width=this._mediaElement.videoWidth,t.height=this._mediaElement.videoHeight)),t}},{key:"statisticsInfo",get:function(){var t={playerType:this._type,url:this._mediaDataSource.url};if(!(this._mediaElement instanceof HTMLVideoElement))return t;var e=!0,a=0,s=0;if(this._mediaElement.getVideoPlaybackQuality){var i=this._mediaElement.getVideoPlaybackQuality();a=i.totalVideoFrames,s=i.droppedVideoFrames}else void 0!=this._mediaElement.webkitDecodedFrameCount?(a=this._mediaElement.webkitDecodedFrameCount,s=this._mediaElement.webkitDroppedFrameCount):e=!1;return e&&(t.decodedFrames=a,t.droppedFrames=s),t}}]),t}();a.default=d},{"../config.js":5,"../utils/exception.js":40,"./player-events.js":35,events:2}],34:[function(t,e,a){Object.defineProperty(a,"__esModule",{value:!0}),a.ErrorDetails=a.ErrorTypes=void 0;var s=t("../io/loader.js"),i=function(t){return t&&t.__esModule?t:{default:t}}(t("../demux/demux-errors.js"));a.ErrorTypes={NETWORK_ERROR:"NetworkError",MEDIA_ERROR:"MediaError",OTHER_ERROR:"OtherError"},a.ErrorDetails={NETWORK_EXCEPTION:s.LoaderErrors.EXCEPTION,NETWORK_STATUS_CODE_INVALID:s.LoaderErrors.HTTP_STATUS_CODE_INVALID,NETWORK_TIMEOUT:s.LoaderErrors.CONNECTING_TIMEOUT,NETWORK_UNRECOVERABLE_EARLY_EOF:s.LoaderErrors.UNRECOVERABLE_EARLY_EOF,MEDIA_MSE_ERROR:"MediaMSEError",MEDIA_FORMAT_ERROR:i.default.FORMAT_ERROR,MEDIA_FORMAT_UNSUPPORTED:i.default.FORMAT_UNSUPPORTED,MEDIA_CODEC_UNSUPPORTED:i.default.CODEC_UNSUPPORTED}},{"../demux/demux-errors.js":16,"../io/loader.js":24}],35:[function(t,e,a){Object.defineProperty(a,"__esModule",{value:!0});a.default={ERROR:"error",LOADING_COMPLETE:"loading_complete",RECOVERED_EARLY_EOF:"recovered_early_eof",MEDIA_INFO:"media_info",STATISTICS_INFO:"statistics_info"}},{}],36:[function(t,e,a){Object.defineProperty(a,"__esModule",{value:!0});var s=function(){function t(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),b()(t,s.key,s)}}return function(e,a,s){return a&&t(e.prototype,a),s&&t(e,s),e}}(),i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return s(t,null,[{key:"getSilentFrame",value:function(t,e){if("mp4a.40.2"===t){if(1===e)return new Uint8Array([0,200,0,128,35,128]);if(2===e)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===e)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224])}else{if(1===e)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===e)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===e)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null}}]),t}();a.default=i},{}],37:[function(t,e,a){Object.defineProperty(a,"__esModule",{value:!0});var s=function(){function t(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),b()(t,s.key,s)}}return function(e,a,s){return a&&t(e.prototype,a),s&&t(e,s),e}}(),i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return s(t,null,[{key:"init",value:function(){for(var e in t.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[],".mp3":[]},t.types)t.types.hasOwnProperty(e)&&(t.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);var a=t.constants={};a.FTYP=new Uint8Array([105,115,111,109,0,0,0,1,105,115,111,109,97,118,99,49]),a.STSD_PREFIX=new Uint8Array([0,0,0,0,0,0,0,1]),a.STTS=new Uint8Array([0,0,0,0,0,0,0,0]),a.STSC=a.STCO=a.STTS,a.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),a.HDLR_VIDEO=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),a.HDLR_AUDIO=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),a.DREF=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),a.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),a.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}},{key:"box",value:function(t){for(var e=8,a=null,s=Array.prototype.slice.call(arguments,1),i=s.length,n=0;n<i;n++)e+=s[n].byteLength;(a=new Uint8Array(e))[0]=e>>>24&255,a[1]=e>>>16&255,a[2]=e>>>8&255,a[3]=255&e,a.set(t,4);for(var o=8,r=0;r<i;r++)a.set(s[r],o),o+=s[r].byteLength;return a}},{key:"generateInitSegment",value:function(e){var a=t.box(t.types.ftyp,t.constants.FTYP),s=t.moov(e),i=new Uint8Array(a.byteLength+s.byteLength);return i.set(a,0),i.set(s,a.byteLength),i}},{key:"moov",value:function(e){var a=t.mvhd(e.timescale,e.duration),s=t.trak(e),i=t.mvex(e);return t.box(t.types.moov,a,s,i)}},{key:"mvhd",value:function(e,a){return t.box(t.types.mvhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,e>>>24&255,e>>>16&255,e>>>8&255,255&e,a>>>24&255,a>>>16&255,a>>>8&255,255&a,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]))}},{key:"trak",value:function(e){return t.box(t.types.trak,t.tkhd(e),t.mdia(e))}},{key:"tkhd",value:function(e){var a=e.id,s=e.duration,i=e.presentWidth,n=e.presentHeight;return t.box(t.types.tkhd,new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,a>>>24&255,a>>>16&255,a>>>8&255,255&a,0,0,0,0,s>>>24&255,s>>>16&255,s>>>8&255,255&s,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,i>>>8&255,255&i,0,0,n>>>8&255,255&n,0,0]))}},{key:"mdia",value:function(e){return t.box(t.types.mdia,t.mdhd(e),t.hdlr(e),t.minf(e))}},{key:"mdhd",value:function(e){var a=e.timescale,s=e.duration;return t.box(t.types.mdhd,new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,a>>>24&255,a>>>16&255,a>>>8&255,255&a,s>>>24&255,s>>>16&255,s>>>8&255,255&s,85,196,0,0]))}},{key:"hdlr",value:function(e){var a;return a="audio"===e.type?t.constants.HDLR_AUDIO:t.constants.HDLR_VIDEO,t.box(t.types.hdlr,a)}},{key:"minf",value:function(e){var a;return a="audio"===e.type?t.box(t.types.smhd,t.constants.SMHD):t.box(t.types.vmhd,t.constants.VMHD),t.box(t.types.minf,a,t.dinf(),t.stbl(e))}},{key:"dinf",value:function(){return t.box(t.types.dinf,t.box(t.types.dref,t.constants.DREF))}},{key:"stbl",value:function(e){return t.box(t.types.stbl,t.stsd(e),t.box(t.types.stts,t.constants.STTS),t.box(t.types.stsc,t.constants.STSC),t.box(t.types.stsz,t.constants.STSZ),t.box(t.types.stco,t.constants.STCO))}},{key:"stsd",value:function(e){return"audio"===e.type?"mp3"===e.codec?t.box(t.types.stsd,t.constants.STSD_PREFIX,t.mp3(e)):t.box(t.types.stsd,t.constants.STSD_PREFIX,t.mp4a(e)):t.box(t.types.stsd,t.constants.STSD_PREFIX,t.avc1(e))}},{key:"mp3",value:function(e){var a=e.channelCount,s=e.audioSampleRate,i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,a,0,16,0,0,0,0,s>>>8&255,255&s,0,0]);return t.box(t.types[".mp3"],i)}},{key:"mp4a",value:function(e){var a=e.channelCount,s=e.audioSampleRate,i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,a,0,16,0,0,0,0,s>>>8&255,255&s,0,0]);return t.box(t.types.mp4a,i,t.esds(e))}},{key:"esds",value:function(e){var a=e.config||[],s=a.length,i=new Uint8Array([0,0,0,0,3,23+s,0,1,0,4,15+s,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([s]).concat(a).concat([6,1,2]));return t.box(t.types.esds,i)}},{key:"avc1",value:function(e){var a=e.avcc,s=e.codecWidth,i=e.codecHeight,n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,s>>>8&255,255&s,i>>>8&255,255&i,0,72,0,0,0,72,0,0,0,0,0,0,0,1,10,120,113,113,47,102,108,118,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,255,255]);return t.box(t.types.avc1,n,t.box(t.types.avcC,a))}},{key:"mvex",value:function(e){return t.box(t.types.mvex,t.trex(e))}},{key:"trex",value:function(e){var a=e.id,s=new Uint8Array([0,0,0,0,a>>>24&255,a>>>16&255,a>>>8&255,255&a,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return t.box(t.types.trex,s)}},{key:"moof",value:function(e,a){return t.box(t.types.moof,t.mfhd(e.sequenceNumber),t.traf(e,a))}},{key:"mfhd",value:function(e){var a=new Uint8Array([0,0,0,0,e>>>24&255,e>>>16&255,e>>>8&255,255&e]);return t.box(t.types.mfhd,a)}},{key:"traf",value:function(e,a){var s=e.id,i=t.box(t.types.tfhd,new Uint8Array([0,0,0,0,s>>>24&255,s>>>16&255,s>>>8&255,255&s])),n=t.box(t.types.tfdt,new Uint8Array([0,0,0,0,a>>>24&255,a>>>16&255,a>>>8&255,255&a])),o=t.sdtp(e),r=t.trun(e,o.byteLength+16+16+8+16+8+8);return t.box(t.types.traf,i,n,r,o)}},{key:"sdtp",value:function(e){for(var a=e.samples||[],s=a.length,i=new Uint8Array(4+s),n=0;n<s;n++){var o=a[n].flags;i[n+4]=o.isLeading<<6|o.dependsOn<<4|o.isDependedOn<<2|o.hasRedundancy}return t.box(t.types.sdtp,i)}},{key:"trun",value:function(e,a){var s=e.samples||[],i=s.length,n=12+16*i,o=new Uint8Array(n);a+=8+n,o.set([0,0,15,1,i>>>24&255,i>>>16&255,i>>>8&255,255&i,a>>>24&255,a>>>16&255,a>>>8&255,255&a],0);for(var r=0;r<i;r++){var l=s[r].duration,c=s[r].size,d=s[r].flags,u=s[r].cts;o.set([l>>>24&255,l>>>16&255,l>>>8&255,255&l,c>>>24&255,c>>>16&255,c>>>8&255,255&c,d.isLeading<<2|d.dependsOn,d.isDependedOn<<6|d.hasRedundancy<<4|d.isNonSync,0,0,u>>>24&255,u>>>16&255,u>>>8&255,255&u],12+16*r)}return t.box(t.types.trun,o)}},{key:"mdat",value:function(e){return t.box(t.types.mdat,e)}}]),t}();i.init(),a.default=i},{}],38:[function(t,e,a){function s(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(a,"__esModule",{value:!0});var i=function(){function t(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),b()(t,s.key,s)}}return function(e,a,s){return a&&t(e.prototype,a),s&&t(e,s),e}}(),n=s(t("../utils/logger.js")),o=s(t("./mp4-generator.js")),r=s(t("./aac-silent.js")),l=s(t("../utils/browser.js")),c=t("../core/media-segment-info.js"),d=t("../utils/exception.js"),u=function(){function t(e){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.TAG="MP4Remuxer",this._config=e,this._isLive=!0===e.isLive,this._dtsBase=-1,this._dtsBaseInited=!1,this._audioDtsBase=1/0,this._videoDtsBase=1/0,this._audioNextDts=void 0,this._videoNextDts=void 0,this._audioMeta=null,this._videoMeta=null,this._audioSegmentInfoList=new c.MediaSegmentInfoList("audio"),this._videoSegmentInfoList=new c.MediaSegmentInfoList("video"),this._onInitSegment=null,this._onMediaSegment=null,this._forceFirstIDR=!(!l.default.chrome||!(l.default.version.major<50||50===l.default.version.major&&l.default.version.build<2661)),this._fillSilentAfterSeek=l.default.msedge||l.default.msie,this._mp3UseMpegAudio=!l.default.firefox,this._fillAudioTimestampGap=this._config.fixAudioTimestampGap}return i(t,[{key:"destroy",value:function(){this._dtsBase=-1,this._dtsBaseInited=!1,this._audioMeta=null,this._videoMeta=null,this._audioSegmentInfoList.clear(),this._audioSegmentInfoList=null,this._videoSegmentInfoList.clear(),this._videoSegmentInfoList=null,this._onInitSegment=null,this._onMediaSegment=null}},{key:"bindDataSource",value:function(t){return t.onDataAvailable=this.remux.bind(this),t.onTrackMetadata=this._onTrackMetadataReceived.bind(this),this}},{key:"insertDiscontinuity",value:function(){this._audioNextDts=this._videoNextDts=void 0}},{key:"seek",value:function(t){this._videoSegmentInfoList.clear(),this._audioSegmentInfoList.clear()}},{key:"remux",value:function(t,e){if(!this._onMediaSegment)throw new d.IllegalStateException("MP4Remuxer: onMediaSegment callback must be specificed!");this._dtsBaseInited||this._calculateDtsBase(t,e),this._remuxVideo(e),this._remuxAudio(t)}},{key:"_onTrackMetadataReceived",value:function(t,e){var a=null,s="mp4",i=e.codec;if("audio"===t)this._audioMeta=e,"mp3"===e.codec&&this._mp3UseMpegAudio?(s="mpeg",i="",a=new Uint8Array):a=o.default.generateInitSegment(e);else{if("video"!==t)return;this._videoMeta=e,a=o.default.generateInitSegment(e)}if(!this._onInitSegment)throw new d.IllegalStateException("MP4Remuxer: onInitSegment callback must be specified!");this._onInitSegment(t,{type:t,data:a.buffer,codec:i,container:t+"/"+s,mediaDuration:e.duration})}},{key:"_calculateDtsBase",value:function(t,e){this._dtsBaseInited||(t.samples&&t.samples.length&&(this._audioDtsBase=t.samples[0].dts),e.samples&&e.samples.length&&(this._videoDtsBase=e.samples[0].dts),this._dtsBase=Math.min(this._audioDtsBase,this._videoDtsBase),this._dtsBaseInited=!0)}},{key:"_remuxAudio",value:function(t){if(null!=this._audioMeta){var e=t,a=e.samples,s=void 0,i=-1,d=-1,u=this._audioMeta.refSampleDuration,h="mp3"===this._audioMeta.codec&&this._mp3UseMpegAudio,m=this._dtsBaseInited&&void 0===this._audioNextDts,p=!1;if(a&&0!==a.length){var f=0,v=null,_=0;h?(f=0,_=e.length):(f=8,_=8+e.length);var g=a[0].dts-this._dtsBase;if(this._audioNextDts)s=g-this._audioNextDts;else if(this._audioSegmentInfoList.isEmpty())s=0,this._fillSilentAfterSeek&&!this._videoSegmentInfoList.isEmpty()&&"mp3"!==this._audioMeta.originalCodec&&(p=!0);else{var b=this._audioSegmentInfoList.getLastSampleBefore(g);if(null!=b){var y=g-(b.originalDts+b.duration);y<=3&&(y=0),s=g-(b.dts+b.duration+y)}else s=0}if(p){var w=g-s,C=this._videoSegmentInfoList.getLastSegmentBefore(g);if(null!=C&&C.beginDts<w){var x=r.default.getSilentFrame(this._audioMeta.originalCodec,this._audioMeta.channelCount);if(x){var k=C.beginDts,D=w-C.beginDts;n.default.v(this.TAG,"InsertPrefixSilentAudio: dts: "+k+", duration: "+D),a.unshift({unit:x,dts:k,pts:k}),_+=x.byteLength}}else p=!1}for(var S=[],A=0;A<a.length;A++){var E=a[A],I=E.unit,L=E.dts-this._dtsBase,T=L-s;-1===i&&(i=T);var B=0,P=!1,R=null;if((B=A!==a.length-1?a[A+1].dts-this._dtsBase-s-T:S.length>=1?S[S.length-1].duration:Math.floor(u))>1.5*u&&"mp3"!==this._audioMeta.codec&&this._fillAudioTimestampGap&&!l.default.safari){P=!0;var M=Math.abs(B-u),N=Math.ceil(M/u),F=T+u;n.default.w(this.TAG,"Large audio timestamp gap detected, may cause AV sync to drift. Silent frames will be generated to avoid unsync.\ndts: "+(T+B)+" ms, expected: "+(T+Math.round(u))+" ms, delta: "+Math.round(M)+" ms, generate: "+N+" frames");var O=r.default.getSilentFrame(this._audioMeta.originalCodec,this._audioMeta.channelCount);null==O&&(n.default.w(this.TAG,"Unable to generate silent frame for "+this._audioMeta.originalCodec+" with "+this._audioMeta.channelCount+" channels, repeat last frame"),O=I),R=[];for(var j=0;j<N;j++){var U=Math.round(F);if(R.length>0){var V=R[R.length-1];V.duration=U-V.dts}var $={dts:U,pts:U,cts:0,unit:O,size:O.byteLength,duration:0,originalDts:L,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0}};R.push($),_+=I.byteLength,F+=u}var z=R[R.length-1];z.duration=T+B-z.dts,B=Math.round(u)}S.push({dts:T,pts:T,cts:0,unit:E.unit,size:E.unit.byteLength,duration:B,originalDts:L,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0}}),P&&S.push.apply(S,R)}h?v=new Uint8Array(_):((v=new Uint8Array(_))[0]=_>>>24&255,v[1]=_>>>16&255,v[2]=_>>>8&255,v[3]=255&_,v.set(o.default.types.mdat,4));for(var q=0;q<S.length;q++){var H=S[q].unit;v.set(H,f),f+=H.byteLength}var W=S[S.length-1];d=W.dts+W.duration,this._audioNextDts=d;var G=new c.MediaSegmentInfo;G.beginDts=i,G.endDts=d,G.beginPts=i,G.endPts=d,G.originalBeginDts=S[0].originalDts,G.originalEndDts=W.originalDts+W.duration,G.firstSample=new c.SampleInfo(S[0].dts,S[0].pts,S[0].duration,S[0].originalDts,!1),G.lastSample=new c.SampleInfo(W.dts,W.pts,W.duration,W.originalDts,!1),this._isLive||this._audioSegmentInfoList.append(G),e.samples=S,e.sequenceNumber++;var Y;Y=h?new Uint8Array:o.default.moof(e,i),e.samples=[],e.length=0;var K={type:"audio",data:this._mergeBoxes(Y,v).buffer,sampleCount:S.length,info:G};h&&m&&(K.timestampOffset=i),this._onMediaSegment("audio",K)}}}},{key:"_remuxVideo",value:function(t){if(null!=this._videoMeta){var e=t,a=e.samples,s=void 0,i=-1,n=-1,r=-1,l=-1;if(a&&0!==a.length){var d=8,u=8+t.length,h=new Uint8Array(u);h[0]=u>>>24&255,h[1]=u>>>16&255,h[2]=u>>>8&255,h[3]=255&u,h.set(o.default.types.mdat,4);var m=a[0].dts-this._dtsBase;if(this._videoNextDts)s=m-this._videoNextDts;else if(this._videoSegmentInfoList.isEmpty())s=0;else{var p=this._videoSegmentInfoList.getLastSampleBefore(m);if(null!=p){var f=m-(p.originalDts+p.duration);f<=3&&(f=0),s=m-(p.dts+p.duration+f)}else s=0}for(var v=new c.MediaSegmentInfo,_=[],g=0;g<a.length;g++){var b=a[g],y=b.dts-this._dtsBase,w=b.isKeyframe,C=y-s,x=b.cts,k=C+x;-1===i&&(i=C,r=k);var D=0;if(D=g!==a.length-1?a[g+1].dts-this._dtsBase-s-C:_.length>=1?_[_.length-1].duration:Math.floor(this._videoMeta.refSampleDuration),w){var S=new c.SampleInfo(C,k,D,b.dts,!0);S.fileposition=b.fileposition,v.appendSyncPoint(S)}_.push({dts:C,pts:k,cts:x,units:b.units,size:b.length,isKeyframe:w,duration:D,originalDts:y,flags:{isLeading:0,dependsOn:w?2:1,isDependedOn:w?1:0,hasRedundancy:0,isNonSync:w?0:1}})}for(var A=0;A<_.length;A++)for(var E=_[A].units;E.length;){var I=E.shift().data;h.set(I,d),d+=I.byteLength}var L=_[_.length-1];if(n=L.dts+L.duration,l=L.pts+L.duration,this._videoNextDts=n,v.beginDts=i,v.endDts=n,v.beginPts=r,v.endPts=l,v.originalBeginDts=_[0].originalDts,v.originalEndDts=L.originalDts+L.duration,v.firstSample=new c.SampleInfo(_[0].dts,_[0].pts,_[0].duration,_[0].originalDts,_[0].isKeyframe),v.lastSample=new c.SampleInfo(L.dts,L.pts,L.duration,L.originalDts,L.isKeyframe),this._isLive||this._videoSegmentInfoList.append(v),e.samples=_,e.sequenceNumber++,this._forceFirstIDR){var T=_[0].flags;T.dependsOn=2,T.isNonSync=0}var B=o.default.moof(e,i);e.samples=[],e.length=0,this._onMediaSegment("video",{type:"video",data:this._mergeBoxes(B,h).buffer,sampleCount:_.length,info:v})}}}},{key:"_mergeBoxes",value:function(t,e){var a=new Uint8Array(t.byteLength+e.byteLength);return a.set(t,0),a.set(e,t.byteLength),a}},{key:"onInitSegment",get:function(){return this._onInitSegment},set:function(t){this._onInitSegment=t}},{key:"onMediaSegment",get:function(){return this._onMediaSegment},set:function(t){this._onMediaSegment=t}}]),t}();a.default=u},{"../core/media-segment-info.js":8,"../utils/browser.js":39,"../utils/exception.js":40,"../utils/logger.js":41,"./aac-silent.js":36,"./mp4-generator.js":37}],39:[function(t,e,a){Object.defineProperty(a,"__esModule",{value:!0});var s={};!function(){var t=self.navigator.userAgent.toLowerCase(),e=/(edge)\/([\w.]+)/.exec(t)||/(opr)[\/]([\w.]+)/.exec(t)||/(chrome)[ \/]([\w.]+)/.exec(t)||/(iemobile)[\/]([\w.]+)/.exec(t)||/(version)(applewebkit)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(t)||/(webkit)[ \/]([\w.]+).*(version)[ \/]([\w.]+).*(safari)[ \/]([\w.]+)/.exec(t)||/(webkit)[ \/]([\w.]+)/.exec(t)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(t)||/(msie) ([\w.]+)/.exec(t)||t.indexOf("trident")>=0&&/(rv)(?::| )([\w.]+)/.exec(t)||t.indexOf("compatible")<0&&/(firefox)[ \/]([\w.]+)/.exec(t)||[],a=/(ipad)/.exec(t)||/(ipod)/.exec(t)||/(windows phone)/.exec(t)||/(iphone)/.exec(t)||/(kindle)/.exec(t)||/(android)/.exec(t)||/(windows)/.exec(t)||/(mac)/.exec(t)||/(linux)/.exec(t)||/(cros)/.exec(t)||[],i={browser:e[5]||e[3]||e[1]||"",version:e[2]||e[4]||"0",majorVersion:e[4]||e[2]||"0",platform:a[0]||""},n={};if(i.browser){n[i.browser]=!0;var o=i.majorVersion.split(".");n.version={major:parseInt(i.majorVersion,10),string:i.version},o.length>1&&(n.version.minor=parseInt(o[1],10)),o.length>2&&(n.version.build=parseInt(o[2],10))}for(var r in i.platform&&(n[i.platform]=!0),(n.chrome||n.opr||n.safari)&&(n.webkit=!0),(n.rv||n.iemobile)&&(n.rv&&delete n.rv,i.browser="msie",n.msie=!0),n.edge&&(delete n.edge,i.browser="msedge",n.msedge=!0),n.opr&&(i.browser="opera",n.opera=!0),n.safari&&n.android&&(i.browser="android",n.android=!0),n.name=i.browser,n.platform=i.platform,s)s.hasOwnProperty(r)&&delete s[r];w()(s,n)}(),a.default=s},{}],40:[function(t,e,a){function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=(void 0===e?"undefined":A()(e))&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+(void 0===e?"undefined":A()(e)));t.prototype=c()(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(f.a?f()(t,e):t.__proto__=e)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(a,"__esModule",{value:!0});var r=function(){function t(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),b()(t,s.key,s)}}return function(e,a,s){return a&&t(e.prototype,a),s&&t(e,s),e}}(),l=a.RuntimeException=function(){function t(e){o(this,t),this._message=e}return r(t,[{key:"toString",value:function(){return this.name+": "+this.message}},{key:"name",get:function(){return"RuntimeException"}},{key:"message",get:function(){return this._message}}]),t}();a.IllegalStateException=function(t){function e(t){return o(this,e),s(this,(e.__proto__||n()(e)).call(this,t))}return i(e,l),r(e,[{key:"name",get:function(){return"IllegalStateException"}}]),e}(),a.InvalidArgumentException=function(t){function e(t){return o(this,e),s(this,(e.__proto__||n()(e)).call(this,t))}return i(e,l),r(e,[{key:"name",get:function(){return"InvalidArgumentException"}}]),e}(),a.NotImplementedException=function(t){function e(t){return o(this,e),s(this,(e.__proto__||n()(e)).call(this,t))}return i(e,l),r(e,[{key:"name",get:function(){return"NotImplementedException"}}]),e}()},{}],41:[function(t,e,a){Object.defineProperty(a,"__esModule",{value:!0});var s=function(){function t(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),b()(t,s.key,s)}}return function(e,a,s){return a&&t(e.prototype,a),s&&t(e,s),e}}(),i=function(t){return t&&t.__esModule?t:{default:t}}(t("events")),n=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return s(t,null,[{key:"e",value:function(e,a){e&&!t.FORCE_GLOBAL_TAG||(e=t.GLOBAL_TAG);var s="["+e+"] > "+a;t.ENABLE_CALLBACK&&t.emitter.emit("log","error",s),t.ENABLE_ERROR&&(console.error?console.error(s):console.warn?console.warn(s):console.log(s))}},{key:"i",value:function(e,a){e&&!t.FORCE_GLOBAL_TAG||(e=t.GLOBAL_TAG);var s="["+e+"] > "+a;t.ENABLE_CALLBACK&&t.emitter.emit("log","info",s),t.ENABLE_INFO&&(console.info?console.info(s):console.log(s))}},{key:"w",value:function(e,a){e&&!t.FORCE_GLOBAL_TAG||(e=t.GLOBAL_TAG);var s="["+e+"] > "+a;t.ENABLE_CALLBACK&&t.emitter.emit("log","warn",s),t.ENABLE_WARN&&(console.warn?console.warn(s):console.log(s))}},{key:"d",value:function(e,a){e&&!t.FORCE_GLOBAL_TAG||(e=t.GLOBAL_TAG);var s="["+e+"] > "+a;t.ENABLE_CALLBACK&&t.emitter.emit("log","debug",s),t.ENABLE_DEBUG&&(console.debug?console.debug(s):console.log(s))}},{key:"v",value:function(e,a){e&&!t.FORCE_GLOBAL_TAG||(e=t.GLOBAL_TAG);var s="["+e+"] > "+a;t.ENABLE_CALLBACK&&t.emitter.emit("log","verbose",s),t.ENABLE_VERBOSE&&console.log(s)}}]),t}();n.GLOBAL_TAG="flv.js",n.FORCE_GLOBAL_TAG=!1,n.ENABLE_ERROR=!0,n.ENABLE_INFO=!0,n.ENABLE_WARN=!0,n.ENABLE_DEBUG=!0,n.ENABLE_VERBOSE=!0,n.ENABLE_CALLBACK=!1,n.emitter=new i.default,a.default=n},{events:2}],42:[function(t,e,a){function s(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(a,"__esModule",{value:!0});var i=function(){function t(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),b()(t,s.key,s)}}return function(e,a,s){return a&&t(e.prototype,a),s&&t(e,s),e}}(),n=s(t("events")),o=s(t("./logger.js")),r=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return i(t,null,[{key:"getConfig",value:function(){return{globalTag:o.default.GLOBAL_TAG,forceGlobalTag:o.default.FORCE_GLOBAL_TAG,enableVerbose:o.default.ENABLE_VERBOSE,enableDebug:o.default.ENABLE_DEBUG,enableInfo:o.default.ENABLE_INFO,enableWarn:o.default.ENABLE_WARN,enableError:o.default.ENABLE_ERROR,enableCallback:o.default.ENABLE_CALLBACK}}},{key:"applyConfig",value:function(t){o.default.GLOBAL_TAG=t.globalTag,o.default.FORCE_GLOBAL_TAG=t.forceGlobalTag,o.default.ENABLE_VERBOSE=t.enableVerbose,o.default.ENABLE_DEBUG=t.enableDebug,o.default.ENABLE_INFO=t.enableInfo,o.default.ENABLE_WARN=t.enableWarn,o.default.ENABLE_ERROR=t.enableError,o.default.ENABLE_CALLBACK=t.enableCallback}},{key:"_notifyChange",value:function(){var e=t.emitter;if(e.listenerCount("change")>0){var a=t.getConfig();e.emit("change",a)}}},{key:"registerListener",value:function(e){t.emitter.addListener("change",e)}},{key:"removeListener",value:function(e){t.emitter.removeListener("change",e)}},{key:"addLogListener",value:function(e){o.default.emitter.addListener("log",e),o.default.emitter.listenerCount("log")>0&&(o.default.ENABLE_CALLBACK=!0,t._notifyChange())}},{key:"removeLogListener",value:function(e){o.default.emitter.removeListener("log",e),0===o.default.emitter.listenerCount("log")&&(o.default.ENABLE_CALLBACK=!1,t._notifyChange())}},{key:"forceGlobalTag",get:function(){return o.default.FORCE_GLOBAL_TAG},set:function(e){o.default.FORCE_GLOBAL_TAG=e,t._notifyChange()}},{key:"globalTag",get:function(){return o.default.GLOBAL_TAG},set:function(e){o.default.GLOBAL_TAG=e,t._notifyChange()}},{key:"enableAll",get:function(){return o.default.ENABLE_VERBOSE&&o.default.ENABLE_DEBUG&&o.default.ENABLE_INFO&&o.default.ENABLE_WARN&&o.default.ENABLE_ERROR},set:function(e){o.default.ENABLE_VERBOSE=e,o.default.ENABLE_DEBUG=e,o.default.ENABLE_INFO=e,o.default.ENABLE_WARN=e,o.default.ENABLE_ERROR=e,t._notifyChange()}},{key:"enableDebug",get:function(){return o.default.ENABLE_DEBUG},set:function(e){o.default.ENABLE_DEBUG=e,t._notifyChange()}},{key:"enableVerbose",get:function(){return o.default.ENABLE_VERBOSE},set:function(e){o.default.ENABLE_VERBOSE=e,t._notifyChange()}},{key:"enableInfo",get:function(){return o.default.ENABLE_INFO},set:function(e){o.default.ENABLE_INFO=e,t._notifyChange()}},{key:"enableWarn",get:function(){return o.default.ENABLE_WARN},set:function(e){o.default.ENABLE_WARN=e,t._notifyChange()}},{key:"enableError",get:function(){return o.default.ENABLE_ERROR},set:function(e){o.default.ENABLE_ERROR=e,t._notifyChange()}}]),t}();r.emitter=new n.default,a.default=r},{"./logger.js":41,events:2}],43:[function(t,e,a){Object.defineProperty(a,"__esModule",{value:!0});var s=function(){function t(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),b()(t,s.key,s)}}return function(e,a,s){return a&&t(e.prototype,a),s&&t(e,s),e}}(),i=function(){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e)}return s(e,null,[{key:"install",value:function(){Object.setPrototypeOf=f.a||function(t,e){return t.__proto__=e,t},Object.assign=w.a||function(t){if(void 0===t||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),a=1;a<arguments.length;a++){var s=arguments[a];if(void 0!==s&&null!==s)for(var i in s)s.hasOwnProperty(i)&&(e[i]=s[i])}return e},"function"!=typeof self.Promise&&t("es6-promise").polyfill()}}]),e}();i.install(),a.default=i},{"es6-promise":1}],44:[function(t,e,a){function s(t,e,a){var s=t;if(e+a<s.length){for(;a--;)if(128!=(192&s[++e]))return!1;return!0}return!1}Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(t){for(var e=[],a=t,i=0,n=t.length;i<n;)if(a[i]<128)e.push(String.fromCharCode(a[i])),++i;else{if(a[i]<192);else if(a[i]<224){if(s(a,i,1)){var o=(31&a[i])<<6|63&a[i+1];if(o>=128){e.push(String.fromCharCode(65535&o)),i+=2;continue}}}else if(a[i]<240){if(s(a,i,2)){var r=(15&a[i])<<12|(63&a[i+1])<<6|63&a[i+2];if(r>=2048&&55296!=(63488&r)){e.push(String.fromCharCode(65535&r)),i+=3;continue}}}else if(a[i]<248&&s(a,i,3)){var l=(7&a[i])<<18|(63&a[i+1])<<12|(63&a[i+2])<<6|63&a[i+3];if(l>65536&&l<1114112){l-=65536,e.push(String.fromCharCode(l>>>10|55296)),e.push(String.fromCharCode(1023&l|56320)),i+=4;continue}}e.push(String.fromCharCode(65533)),++i}return e.join("")}},{}]},{},[21])(21)})}).call(e,a("DuR2"),a("f1Eh")(t))},H1wa:function(t,e){},H2cb:function(t,e){},HHIJ:function(t,e){},HHSB:function(t,e){},Hlk9:function(t,e){},Hzvb:function(t,e,a){"use strict";(function(t){var s=a("kArt"),i=a("KvKp"),n=a("+1Ri");a.n(n);e.a={props:["data","title","formvals"],components:{SelectBox:s.a},data:function(){return{formvals1:{},formval:{starttime:"",device:"",exam:"",area:"",addr:"",system:"",desc:"",data:[],period:"",department:"",time_limit:""},floor_name:""}},methods:{change1:function(t){this.formval.exam=t},change2:function(t){this.$emit("getUserlist",{department_id:t}),this.formval.department=t},change3:function(t){this.formval.limit=t},change4:function(t){this.formval.system=t,this.$emit("getSystemval",{sys_id:t}),this.$emit("getFloorVal",{floor_name:this.formval.area,sys_id:t})},change5:function(e){var a=this;t.each(this.formvals1.areas,function(t,s){s.value==e&&a.$emit("getFloorVal",{floor_name:s.label,sys_id:a.formval.system})}),this.formval.area=e},change6:function(t){this.formval.device=t,this.$emit("getDeviceVal",{device:t,sys_id:this.formval.system})},change7:function(t){this.formval.starttime=t},change8:function(t){this.formval.period=t},change9:function(t){this.formval.data=t},cancelAdd:function(){this.$emit("cancelAdd")},saveAdd:function(){this.formval.starttime&&(this.formval.starttime=i.a.time(new Date(this.formval.starttime)/1e3,1)),this.formval.endtime&&(this.formval.endtime=i.a.time(new Date(this.formval.endtime)/1e3,1));var e=[];if(this.formval.data){var a=this.formval.data;t.each(a,function(t,a){e[t]={cate_id:a}})}this.$emit("saveAdd",{id:this.formvals.id,start_date:this.formval.starttime,end_date:this.formval.endtime,user_id:this.formval.exam,sys_id:this.formval.system,floor_id:this.formval.area,cycle:this.formval.period,ins_place:this.formval.addr,remarks:this.formval.remarks,device_id:this.formval.device,time_limit:this.formval.time_limit,department_id:this.formval.department,device_info:e})}},watch:{formvals:{handler:function(t){t&&(this.formvals=t)},deep:!0},data:{handler:function(t){t&&(this.formval=t)},deep:!0}},mounted:function(){this.formval=this.data,this.formvals1=this.formvals}}}).call(e,a("7t+N"))},I2ML:function(t,e,a){"use strict";var s={props:{isResize:{type:Number}},data:function(){return{loading:!0,agentChart:{},agentData:{finish:{day:{},month:{},year:{}}},finishData:{}}},components:{},watch:{isResize:function(){this.agentChart.resize()}},mounted:function(){this.initData()},methods:{deletCli:function(){this.$emit("deletClick",{self_id:12,componentsName:"AgentManage"})},initData:function(){var t=this;this.$http.get("/index_pc/pc/model",{self_id:12}).then(function(e){0==e.data.code&&(t.agentData=e.data.data,0==t.agentData.finish.day.count&&0==t.agentData.finish.day.finish?t.finishData.dayPercent="100%":t.finishData.dayPercent=Math.round(t.agentData.finish.day.finish/t.agentData.finish.day.count*100)+"%",0==t.agentData.finish.month.count&&0==t.agentData.finish.month.finish?t.finishData.monthPercent="100%":t.finishData.monthPercent=Math.round(t.agentData.finish.month.finish/t.agentData.finish.month.count*100)+"%",0==t.agentData.finish.year.count&&0==t.agentData.finish.year.finish?t.finishData.yearPercent="100%":t.finishData.yearPercent=Math.round(t.agentData.finish.year.finish/t.agentData.finish.year.count*100)+"%",t.drawEchart(),t.loading=!1)}).catch(function(t){console.log(t)})},drawEchart:function(){var t=this.$echarts.init(document.getElementById("echarts"));this.agentChart=t;var e=this.agentData,a={title:{text:"工单统计",top:"2",left:"8%",textStyle:{color:"#fff",fontSize:"12px",fontWeight:"normal"}},grid:{bottom:30},legend:{data:["未完成数","工单总数"],itemWidth:10,itemHeight:10,marginRight:"8%",textStyle:{color:"#858994",fontSize:"10px"},align:"left",right:"8%",top:"2%"},calculable:!0,xAxis:[{type:"category",data:["今日","本月","本年"],axisLine:{lineStyle:{color:"#c9c9c9"}},axisTick:{show:!1}}],yAxis:[{show:!1,type:"value",axisLabel:{formatter:"{value} ms"}}],series:[{name:"未完成数",type:"bar",itemStyle:{normal:{barBorderRadius:[2,2,0,0],color:new this.$echarts.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"#FAD961"},{offset:1,color:"#F76B1C"}]),label:{show:!0,position:"top",color:"#c9c9c9"}}},data:[e.count.day.unfinish,e.count.month.unfinish,e.count.year.unfinish],barGap:0,barMinHeight:2,barMaxWidth:24},{name:"工单总数",type:"bar",itemStyle:{normal:{barBorderRadius:[2,2,0,0],color:new this.$echarts.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"#519BEC"},{offset:1,color:"#214893"}]),label:{show:!0,position:"top",color:"#c9c9c9"}}},data:[e.count.day.count,e.count.month.count,e.count.year.count],barGap:0,barMinHeight:2,barMaxWidth:24}],color:["#c4752a","#264e8c"]};t.setOption(a)}}},i={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"agentComponent",attrs:{"element-loading-background":"rgba(0, 0, 0, 0.5)","element-loading-spinner":"el-icon-loading","element-loading-text":"拼命加载中"}},[s("div",{staticClass:"title"},[s("span",{staticClass:"titleIcon"}),t._v(" "),s("span",{staticClass:"txt"},[t._v("代维管理系统")]),t._v(" "),s("img",{attrs:{src:a("Ilry"),alt:""},on:{click:t.deletCli}})]),t._v(" "),s("div",{staticClass:"con"},[s("div",{staticClass:"echarts",attrs:{id:"echarts"}}),t._v(" "),s("div",{staticClass:"info"},[s("div",{staticClass:"day infoC"},[t._m(0),t._v(" "),s("div",{staticClass:"percent"},[s("span",{domProps:{textContent:t._s(t.finishData.dayPercent)}}),t._v(" "),s("span"),t._v(" "),s("span",{domProps:{textContent:t._s(t.agentData.finish.day.finish+"/"+t.agentData.finish.day.count)}}),t._v(" "),s("span",[t._v("今日完成率")])])]),t._v(" "),s("div",{staticClass:"month infoC"},[t._m(1),t._v(" "),s("div",{staticClass:"percent"},[s("span",{domProps:{textContent:t._s(t.finishData.monthPercent)}}),t._v(" "),s("span"),t._v(" "),s("span",{domProps:{textContent:t._s(t.agentData.finish.month.finish+"/"+t.agentData.finish.month.count)}}),t._v(" "),s("span",[t._v("今月完成率")])])]),t._v(" "),s("div",{staticClass:"year infoC"},[t._m(2),t._v(" "),s("div",{staticClass:"percent"},[s("span",{domProps:{textContent:t._s(t.finishData.yearPercent)}}),t._v(" "),s("span"),t._v(" "),s("span",{domProps:{textContent:t._s(t.agentData.finish.year.finish+"/"+t.agentData.finish.year.count)}}),t._v(" "),s("span",[t._v("今年完成率")])])])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"category"},[e("span",[this._v("日")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"category"},[e("span",[this._v("月")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"category"},[e("span",[this._v("年")])])}]};var n=a("VU/8")(s,i,!1,function(t){a("VybY")},"data-v-a6bf4ac0",null);e.a=n.exports},I3Te:function(t,e,a){"use strict";(function(t){var s,i=a("bOdI"),n=a.n(i),o=a("uYjw"),r=(a.n(o),a("z3di"));e.a=(s={name:"all-views",components:{lineEchart:r.a}},n()(s,"name","all-views"),n()(s,"data",function(){return{viewsLoading:!1,energyArea2Type:"0",energyTrend0:{id:"energyTrendCharts0",echarts:{id:"lineEchartShui1",type:"电",unit:"",title:"单位：月份/KW/h",style:{width:"100%",height:"100%"},xDate:["01","02","03","04","05","06","07","08","09","10","11","12"],list:[{name:"2018",data:[]},{name:"2017",data:[]},{name:"今年计划",data:[]}]}},energyTrend1:{id:"energyTrendCharts1",echarts:{id:"lineEchartShui2",type:"水",unit:"",title:"单位：月份/t",style:{width:"100%",height:"100%"},xDate:["01","02","03","04","05","06","07","08","09","10","11","12"],list:[{name:"2018",data:[]},{name:"2017",data:[]},{name:"今年计划",data:[]}]}},energyTrend2:{id:"energyTrendCharts2",echarts:{id:"lineEchartShui3",type:"气",unit:"",title:"单位：月份/m³",style:{width:"100%",height:"100%"},xDate:["01","02","03","04","05","06","07","08","09","10","11","12"],list:[{name:"2018",data:[]},{name:"2017",data:[]},{name:"今年计划",data:[]}]}},dateDayRangeValue:"",dateRangeValue:"",dateUnit:"month",dateOptions:[{id:"year",title:"年"},{id:"month",title:"月"},{id:"day",title:"日"}],totalEnergyUsageData:{monthActualTotal:0,monthActualUsage:{0:"0",1:"0",2:"0"},monthPlanTotal:"6205.99",monthPlanUsage:{0:0,1:0,2:0},yearActualTotal:"0",yearPlanTotal:"0",monthUsagePer:{0:"0",1:"0",2:"0"}},finance_info:{check_in_rate:"0",energy_cost_rate:0,house_num:[0,0],one_house_one_night_use:{0:0,1:0,2:0},one_seat_use:{0:0,1:0,2:0},real_time_income:0,seat_num:[0,0]},allDatas:""}}),n()(s,"methods",{viewsTrendTypeChange:function(){var t=this.energyArea2Type;this.requestTrendTypeData(t)},calcTipPosition:function(e){var a,s=Number(t(".percentageTextTip").width())/2,i=t("html").width();i<1500&&(a=80),i>1500&&i<=1600&&(a=90),i>1600&&i<=1700&&(a=95),i>1700&&i<=1800&&(a=100),i>1800&&(a=110);var n=145+Number(e)/100*246;return{left:Math.round(s+Math.cos(n*Math.PI/180)*a),top:Math.round(s+Math.sin(n*Math.PI/180)*a)}},dateTypeChange:function(){this.dateRangeValue="",t(".el-date-editor.el-range-editor").css({border:"none!important"})},viewsQueryRangeData:function(){this.requestElcPowerData()},totalEnergyChartRotate:function(e,a){var s=232+Number(e.per)/100*256;t(a).css("transform","rotate("+s+"deg)");var i=this.calcTipPosition(e.per);t(a).siblings(".percentageTextTip").find("span").css({left:i.left,top:i.top}).text(e.rsNum+"%")},initArea3Chart1:function(t){var e=this.$echarts.init(document.getElementById("energyArea3Chart1")),a={backgroundColor:"transparent",tooltip:{trigger:"item",formatter:"{b} : {c} 度"},visualMap:{show:!1,min:80,max:600,inRange:{}},series:[{name:"电能峰平谷",type:"pie",radius:"90%",center:["50%","50%"],color:["#2DF0E0","#FFA414","#316EFF"],data:[{value:t.gu,name:"谷时用电"},{value:t.feng,name:"峰时用电"},{value:t.ping,name:"平时用电"}],roseType:"radius",selectedMode:"single",minAngle:60,label:{normal:{position:"outside",formatter:"{c}度",fontSize:10}},labelLine:{normal:{smooth:.2,length:5,length2:5}},itemStyle:{color:["#2DF0E0","#FFA414","#316EFF"],normal:{shadowBlur:200,shadowColor:"rgba(0, 0, 0, 0)"}},animationType:"scale",animationEasing:"elasticOut",animationDelay:function(t){return 200*Math.random()}}]};e.setOption(a)},initArea3Chart2:function(t){var e=this.$echarts.init(document.getElementById("energyArea3Chart2")),a={backgroundColor:"transparent",tooltip:{trigger:"item",formatter:"{b} : {c} 度",textStyle:{fontSize:10}},visualMap:{show:!1,min:80,max:600,inRange:{}},series:[{name:"电能峰平谷",type:"pie",radius:"90%",center:["50%","50%"],color:["#2DF0E0","#FFA414","#316EFF"],data:[{value:t.gu,name:"谷时用电"},{value:t.feng,name:"峰时用电"},{value:t.ping,name:"平时用电"}],roseType:"radius",selectedMode:"single",minAngle:60,label:{normal:n()({formatter:"{d}% ",position:"inner",fontSize:10},"position","inside")},labelLine:{normal:{smooth:.2,length:5,length2:5}},itemStyle:{color:["#2DF0E0","#FFA414","#316EFF"],normal:{shadowBlur:200,shadowColor:"rgba(0, 0, 0, 0)"}},animationType:"scale",animationEasing:"elasticOut",animationDelay:function(t){return 200*Math.random()}}]};e.setOption(a)},initArea3Chart3:function(t){var e=this.$echarts.init(document.getElementById("energyArea3Chart3")),a={backgroundColor:"transparent",tooltip:{trigger:"item",formatter:"{b} : {c} 元"},visualMap:{show:!1,min:80,max:600,inRange:{}},series:[{name:"电能峰平谷",type:"pie",radius:"90%",center:["50%","50%"],color:["#2DF0E0","#FFA414","#316EFF"],data:[{value:t.gu,name:"谷时费用"},{value:t.feng,name:"峰时费用"},{value:t.ping,name:"平时费用"}],roseType:"radius",selectedMode:"single",minAngle:60,label:{normal:{position:"outside",formatter:"{c}元",fontSize:10}},labelLine:{normal:{smooth:.2,length:5,length2:5}},itemStyle:{color:["#2DF0E0","#FFA414","#316EFF"],normal:{shadowBlur:200,shadowColor:"rgba(0, 0, 0, 0)"}},animationType:"scale",animationEasing:"elasticOut",animationDelay:function(t){return 200*Math.random()}}]};e.setOption(a)},initArea3Chart4:function(t){var e=this.$echarts.init(document.getElementById("energyArea3Chart4")),a={backgroundColor:"transparent",tooltip:{trigger:"item",formatter:"{b} : {c} 元"},visualMap:{show:!1,inRange:{}},series:[{name:"电能峰平谷",type:"pie",radius:"90%",center:["50%","50%"],color:["#2DF0E0","#FFA414","#316EFF"],data:[{value:t.gu,name:"谷时费用"},{value:t.feng,name:"峰时费用"},{value:t.ping,name:"平时费用"}],roseType:"radius",selectedMode:"single",minAngle:60,label:{normal:{formatter:"{d}% ",position:"inner",fontSize:10}},labelLine:{normal:{smooth:.2,length:5,length2:5}},itemStyle:{color:["#2DF0E0","#FFA414","#316EFF"],normal:{shadowBlur:200,shadowColor:"rgba(0, 0, 0, 0)"}},animationType:"scale",animationEasing:"elasticOut",animationDelay:function(t){return 200*Math.random()}}]};e.setOption(a)},initArea3Charts:function(t){this.initArea3Chart1(t[0]),this.initArea3Chart2(t[0]),this.initArea3Chart3(t[1]),this.initArea3Chart4(t[1])},initArea4Chart1:function(){var t=this.finance_info.energy_cost_rate,e={backgroundColor:"transparent",tooltip:{trigger:"item",formatter:"{b} : {d}%"},legend:{bottom:0,left:"center",data:["能源费用占比"],borderRadius:0,itemWidth:10,itemHeight:10,textStyle:{color:"#B5D7FF",fontSize:12}},series:[{color:["#FFA414","#008AFF"],type:"pie",radius:"70%",center:["50%","50%"],selectedMode:"single",label:{normal:{formatter:"{d}% ",position:"inner",fontSize:12}},data:[{value:t,name:"能源费用占比"},{value:100-Number(t),name:"剩余",label:{show:!1}}],itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};this.$echarts.init(document.getElementById("energyArea4Chart1")).setOption(e)},initArea4Chart2:function(){var t=this.finance_info.one_house_one_night_use[1],e={backgroundColor:"transparent",series:[{color:["#59E9F5","#008AFF"],type:"pie",radius:"75%",center:["50%","50%"],selectedMode:"single",label:{normal:{formatter:"{c} t",position:"inner",fontSize:8}},data:[{value:t,name:"水"},{value:100-Number(t),name:"剩余",label:{show:!1}}],itemStyle:{emphasis:{shadowBlur:0,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0)"}}}]};this.$echarts.init(document.getElementById("energyArea4Chart2")).setOption(e)},initArea4Chart3:function(){var t=this.finance_info.one_house_one_night_use[0],e={backgroundColor:"transparent",series:[{color:["#FE5E83","#008AFF"],type:"pie",radius:"75%",center:["50%","50%"],selectedMode:"single",label:{normal:{formatter:"{c} kw/h",position:"inner",fontSize:8}},data:[{value:t,name:"电"},{value:100-Number(t),name:"剩余",label:{show:!1}}],itemStyle:{emphasis:{shadowBlur:0,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0)"}}}]};this.$echarts.init(document.getElementById("energyArea4Chart3")).setOption(e)},initArea4Chart4:function(){var t=this.finance_info.one_house_one_night_use[2],e={backgroundColor:"transparent",series:[{color:["#2772E3","#008AFF"],type:"pie",radius:"75%",center:["50%","50%"],selectedMode:"single",label:{normal:{formatter:"{c} m³ ",position:"inner",fontSize:8}},data:[{value:t,name:"气"},{value:100-Number(t),name:"剩余",label:{show:!1}}],itemStyle:{emphasis:{shadowBlur:0,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0)"}}}]};this.$echarts.init(document.getElementById("energyArea4Chart4")).setOption(e)},initArea4Chart5:function(){var t=this.finance_info.one_seat_use[1],e={backgroundColor:"transparent",series:[{color:["#59E9F5","#008AFF"],type:"pie",radius:"75%",center:["50%","50%"],selectedMode:"single",label:{normal:{formatter:"{c} t",position:"inner",fontSize:8}},data:[{value:t,name:"水"},{value:100-Number(t),name:"剩余",label:{show:!1}}],itemStyle:{emphasis:{shadowBlur:0,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0)"}}}]};this.$echarts.init(document.getElementById("energyArea4Chart5")).setOption(e)},initArea4Chart6:function(){var t=this.finance_info.one_seat_use[0],e={backgroundColor:"transparent",series:[{color:["#FE5E83","#008AFF"],type:"pie",radius:"75%",center:["50%","50%"],selectedMode:"single",label:{normal:{formatter:"{c} kw/h",position:"inner",fontSize:8}},data:[{value:t,name:"电"},{value:100-Number(t),name:"剩余",label:{show:!1}}],itemStyle:{emphasis:{shadowBlur:0,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0)"}}}]};this.$echarts.init(document.getElementById("energyArea4Chart6")).setOption(e)},initArea4Chart7:function(){var t=this.finance_info.one_seat_use[2],e={backgroundColor:"transparent",series:[{color:["#2772E3","#008AFF"],type:"pie",radius:"75%",center:["50%","50%"],selectedMode:"single",label:{normal:{formatter:"{c} m³ ",position:"inner",fontSize:8}},data:[{value:t,name:"气"},{value:100-Number(t),name:"剩余",label:{show:!1}}],itemStyle:{emphasis:{shadowBlur:0,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0)"}}}]};this.$echarts.init(document.getElementById("energyArea4Chart7")).setOption(e)},initArea4Charts:function(){this.initArea4Chart1(),this.initArea4Chart2(),this.initArea4Chart3(),this.initArea4Chart4(),this.initArea4Chart5(),this.initArea4Chart6(),this.initArea4Chart7()},requestAllData:function(){var t=this;t.viewsLoading=!0;var e={project_id:t.$store.state.projectId};t.$http.post("hotel_energy/index",e).then(function(e){if(0==e.data.code){var a=t.allDatas=e.data.data;t.calcArea1Data(a.total_energy_use),t.calcArea2Data(a.energy_trend_3_year,"energyTrend0",0),t.calcArea3Data(a.feng_ping_gu),t.calcArea4Data(a.finance_info),t.viewsLoading=!1}}).catch(function(e){console.log(e),t.viewsLoading=!1})},requestTrendTypeData:function(t){var e=this,a={project_id:e.$store.state.projectId,energy_type:t};e.$http.post("hotel_energy/index",a).then(function(a){if(console.log(a),0==a.data.code){var s=a.data.data;e.calcArea2Data(s.energy_trend_3_year,"energyTrend"+t,t)}}).catch(function(t){console.log(t)})},requestElcPowerData:function(){var t=this,e={project_id:t.$store.state.projectId,query_date_type:t.dateUnit,query_date:t.dateRangeValue};t.$http.post("hotel_energy/index",e).then(function(e){if(console.log(e),0==e.data.code){var a=e.data.data.feng_ping_gu;t.calcArea3Data(a)}}).catch(function(t){console.log(t)})},calcArea1Data:function(t){this.totalEnergyUsageData.monthActualTotal=t.this_month_actual_carbon_emission;var e=this.totalEnergyUsageData.monthActualUsage=t.this_month_actual_use_energy;this.totalEnergyUsageData.monthPlanTotal=t.this_month_plan_carbon_emission;var a=this.totalEnergyUsageData.monthPlanUsage=t.this_month_plan_use_energy;this.totalEnergyUsageData.yearActualTotal=t.this_year_actual_carbon_emission,this.totalEnergyUsageData.yearPlanTotal=t.this_year_plan_carbon_emission;for(var s=[{},{},{}],i=0;i<3;i++){var n,o=(Number(e[i])/Number(a[i])*100).toFixed(1);o=(n=parseInt(o)?Math.round(o):0)>100?100:n,s[i].per=o,s[i].rsNum=n,2==i&&(this.totalEnergyUsageData.monthUsagePer=s)}this.totalEnergyChartRotate(s[0],".energyFinger1"),this.totalEnergyChartRotate(s[1],".energyFinger2"),this.totalEnergyChartRotate(s[2],".energyFinger3")},calcArea2Data:function(e,a,s){var i,n,o=Math.ceil(1e3*Math.random()+1);0==s?(i="月份/KW/h",n="电"):1==s?(i="月份/t",n="水"):2==s&&(i="月份/m³",n="气"),this[a]={id:"energyTrendChart"+o,echarts:{id:"lineEcharts"+o,type:n,unit:"",title:"单位："+i,style:{width:"100%",height:"100%"},xDate:["01","02","03","04","05","06","07","08","09","10","11","12"],list:[{name:"2018",data:e[2018]},{name:"2017",data:e[2017]},{name:"今年计划",data:e.this_year_plan}]}},this.$forceUpdate(),t(".allViewArea2 .myChartBox").eq(s).show().siblings().hide()},calcArea3Data:function(t){for(var e=[],a=0;a<2;a++){var s={};s.feng=t.feng[a],s.gu=t.gu[a],s.ping=t.ping[a],e[a]=s}this.initArea3Charts(e)},calcArea4Data:function(t){this.finance_info=t,this.initArea4Charts(),this.$forceUpdate()},resizeViewCharts:function(){this.$echarts.init(document.getElementById("energyArea3Chart1")).resize(),this.$echarts.init(document.getElementById("energyArea3Chart2")).resize(),this.$echarts.init(document.getElementById("energyArea3Chart3")).resize(),this.$echarts.init(document.getElementById("energyArea3Chart4")).resize(),this.$echarts.init(document.getElementById("energyArea4Chart1")).resize(),this.$echarts.init(document.getElementById("energyArea4Chart2")).resize(),this.$echarts.init(document.getElementById("energyArea4Chart3")).resize(),this.$echarts.init(document.getElementById("energyArea4Chart4")).resize(),this.$echarts.init(document.getElementById("energyArea4Chart5")).resize(),this.$echarts.init(document.getElementById("energyArea4Chart6")).resize(),this.$echarts.init(document.getElementById("energyArea4Chart7")).resize()}}),n()(s,"created",function(){var t=new Date;this.dateRangeValue=t.getFullYear().toString()+(t.getMonth()+1)}),n()(s,"mounted",function(){var e=this;e.requestAllData(),t(window).resize(function(){var t=e.allDatas;e.calcArea1Data(t.total_energy_use),e.calcArea2Data(t.energy_trend_3_year,"energyTrend0",0),e.resizeViewCharts()})}),n()(s,"beforeDestroy",function(){t(window).unbind("resize")}),s)}).call(e,a("7t+N"))},Ilry:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAAAAXNSR0IArs4c6QAAA4xJREFUWAnNmF9IFEEcx793t+rphZWpmCUcFqZgPvgSBUUJhVmE9ZBQD0FFRBGEDwpBBkqBQhKE0YtRDxUEiQ+lD2EPQa8WJSqSIFjH6XFqknGnd7vN7Dp7M+vu3u3VpXvczfz+zO/32d/OzO6tC+x4pXgQhIQo+YbgRh5czJThVkY+4ljECu4griWlMMNE7cJ2KCgm5jwC4c4wCM2gkM8y+YbhQwAFmJfUpKPIJa3f03f2LsLjdS4llsPDKFRQf3htun0xkAzIyCv6phzsbIV//0dWhU0Y7692hUeOG2HSTZvqOALgdv8OVeDz4wYyZpsGFIEXS6GCf1eFVHE4P3lpM8nv04AkeOCRWLU4r0x06bQ1Wy9E54KkzSE1rwWPeMkzQSjE5IAEvSr8ZxY15xqg9YDgSyECrTcNIROAkvHkb9mKM+cvknXqRt/zJ1iYC/MnJ/SpT/3pJpTvrsTQQD/Gvn4S7FaCAGTlxPQtHd2oqd2nigcOH8Ot6xcwGwwws95SmOa2Thw6ekLVHak/hStN9QjPzug+Vh2LpWXuvquiSjcUl+zAvZ5nKC4p1XW0Y4ShuqzsHJT5y2k36eEI6D0pPX8YocxgqH9gegpjX1K7ZI6Aeh924cO7tzwTqZBWqZLSncJlYk6zwR9ou3kZ0UiEqWxbR3NIlmV0t7eqAdn8oAKFevTiDaSsbCEZhVk7z+yXjqMK0WwMylip1GAEXlPBMZAdFMtgXhlmtW/TArIPaWe1v1x0ZFpAVquJobCJntgSKEhymLSArGBiK8uMR23XQglmS8FRhaxg6Jy5du6k5ZaQqJQlh25wBHTpRot+O2AR2AQOBr6rW4Jx9dFKtT/oRU6uV3suY89nxnY1oCOguoZGxqG2DIbdz6y2hNIyP6r21gpjrQRHQJMTY3ocIwwzmEGtLEcxPTWpPrgaC8NkBuJop+663ZzS44eskB29oxWjI8Mo37UHQ4P9CIdmTJ+k2Ymw1hHQ4sI8nvbcZ2NtW1qpwdcvV32UBAwtic3hCMgmThJTEgpudMaABARB4LKbdA1A/G7qIAoXWBglCJyTTZcDIv+y/+ZII7lZOm21xcj7jnjMQJT6/ccssHMdyacgpgF5EYGvaM48CH8ZzT2YViiSIDAP81Z1lXw/yVJcYvvRL1Q2jsQLqwdltxQ1H5YZLXlBJCvewgm55uoAyRDWzmMDvbBKFHaDvNL7A5i2QFtiBQIqAAAAAElFTkSuQmCC"},IoII:function(t,e,a){"use strict";var s={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"dealBox",style:{color:this.txt.color},domProps:{textContent:this._s(this.txt.txt)}},[this._v("\n    任务状态\n")])},staticRenderFns:[]};var i=a("VU/8")({props:["states"],data:function(){return{txt:{}}},methods:{txts:function(t){var e={txt:"",color:""};switch(t){case"0":e.txt="未接单",e.color="#fff";break;case"1":e={txt:"启用",color:"#FFA414"};break;case"2":e.txt="停用",e.color="#4AE283";break;case"3":e.txt="申请退单",e.color="#3B89F9";break;case"4":e.txt="退单完成",e.color="#4AE283"}return this.txt=e,this.txt}},watch:{states:{handler:function(t){t&&this.txts(t.fills)},deep:!0}},mounted:function(){this.txts(this.states.fills)}},s,!1,function(t){a("9Nlf")},"data-v-725cd8b8",null);e.a=i.exports},J0WJ:function(t,e){},JIKC:function(t,e,a){"use strict";var s=a("fYqQ"),i={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"conditioningComponent",attrs:{"element-loading-background":"rgba(0, 0, 0, 0.5)","element-loading-spinner":"el-icon-loading","element-loading-text":"拼命加载中"}},[s("div",{staticClass:"title"},[s("span",{staticClass:"titleIcon"}),t._v(" "),s("span",{staticClass:"txt"},[t._v("中央空调系统")]),t._v(" "),s("img",{attrs:{src:a("Ilry"),alt:""},on:{click:t.deletCli}})]),t._v(" "),s("div",{staticClass:"con"},[s("div",{staticClass:"con-top"},[s("div",{ref:"conditionEcharts1",staticClass:"conditionEcharts1",attrs:{id:"conditionEcharts1"}}),t._v(" "),s("div",{ref:"conditionEcharts2",staticClass:"conditionEcharts2",attrs:{id:"conditionEcharts2"}})]),t._v(" "),s("div",{staticClass:"conditionEcharts3"},t._l(t.patternData,function(e){return s("div",{staticClass:"type"},[s("div",{staticClass:"name",domProps:{textContent:t._s(e.name)}}),t._v(" "),s("div",{staticClass:"typs system"},[s("span",{class:{active:0==e.value},domProps:{textContent:t._s(e.param.showvalue[0])}}),t._v(" "),s("span",{class:{active:1==e.value},domProps:{textContent:t._s(e.param.showvalue[1])}})])])})),t._v(" "),s("div",{staticClass:"conditionEcharts4",on:{mouseenter:function(e){t.enter(1)},mouseleave:function(e){t.mouseleave(1)}}},[t._m(0),t._v(" "),s("div",{staticClass:"broadR"},[s("div",{staticClass:"long",class:{anim:t.animate1}},t._l(t.broadOneList,function(e){return s("div",{staticClass:"item"},[s("span",[t._v(t._s(e.name))]),t._v(" "),s("span",{domProps:{textContent:t._s(e.value)}})])}))])]),t._v(" "),s("div",{staticClass:"conditionEcharts4",on:{mouseenter:function(e){t.enter(2)},mouseleave:function(e){t.mouseleave(2)}}},[t._m(1),t._v(" "),s("div",{staticClass:"broadR"},[s("div",{staticClass:"long",class:{anim:t.animate2}},t._l(t.broadTwoList,function(e){return s("div",{staticClass:"item"},[s("span",[t._v(t._s(e.name))]),t._v(" "),s("span",{class:{gre:"运行"==e.param.showvalue[e.value],red:"停止"==e.param.showvalue[e.value]},domProps:{textContent:t._s(e.param.showvalue[e.value])}})])}))])]),t._v(" "),s("div",{staticClass:"conditionEcharts5"},[s("span",{class:{active:0==t.types},domProps:{textContent:t._s(t.conditionData[0].name)},on:{click:function(e){t.changeType(0)}}}),t._v(" "),t.conditionData[1]?s("span",{class:{active:1==t.types},domProps:{textContent:t._s(t.conditionData[1].name)},on:{click:function(e){t.changeType(1)}}}):t._e()])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"broadL"},[this._v("系"),e("br"),this._v("统"),e("br"),this._v("参"),e("br"),this._v("数")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"broadL"},[this._v("设"),e("br"),this._v("备"),e("br"),this._v("监"),e("br"),this._v("测")])}]};var n=function(t){a("K5PQ")},o=a("VU/8")(s.a,i,!1,n,"data-v-6f19e591",null);e.a=o.exports},Jal1:function(t,e){},"Ji/2":function(t,e){},JzBx:function(t,e){},"K+Y+":function(t,e){},K5PQ:function(t,e){},KJ2l:function(t,e,a){"use strict";var s={name:"gReport",props:["pages"],data:function(){return{pageSize:20}},methods:{currentPageChange:function(t){this.currentPage=this.toPageNum=t,this.$emit("changeCurrentPage",this.currentPage)},toInputPage:function(){var t=Number(this.toPageNum);this.requestTableData(t),this.currentPage=t,this.$emit("changeCurrentPage",this.currentPage)}},watch:{page:{handler:function(t){console.log(t),this.pages=t},deep:!0}},mounted:function(){console.log(this.pages)}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"paginationBox"},[a("div",{staticClass:"totalPageNumBox"},[t._v("共"+t._s(t.pages.totalPageNum)+"页")]),t._v(" "),a("div",{staticClass:"el-input el-pagination__editor is-in-pagination curPageBox"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.pages.currentPage,expression:"pages.currentPage"}],staticClass:"el-input__inner",attrs:{type:"number",autocomplete:"off"},domProps:{value:t.pages.currentPage},on:{input:function(e){e.target.composing||t.$set(t.pages,"currentPage",e.target.value)}}}),t._v(" "),a("span",{on:{click:t.toInputPage}},[t._v("GO")])]),t._v(" "),a("el-pagination",{attrs:{"current-page":t.pages.currentPage,"page-size":t.pageSize,"page-count":t.pages.totalPageNum,layout:"prev, pager, next",total:t.pages.totalDataNumber},on:{"current-change":t.currentPageChange}})],1)},staticRenderFns:[]};var n=a("VU/8")(s,i,!1,function(t){a("zlSF")},"data-v-0cbb6b20",null);e.a=n.exports},KNY7:function(t,e){},KUQL:function(t,e,a){"use strict";var s=a("kArt"),i=(a("IoII"),a("N6wk")),n=a("yivU"),o=(a("bC64"),{props:["table","query"],components:{SelectBox:s.a,TimePickerT:i.a,Table:n.a},data:function(){return{queryCon:{system:"",area:"",exam:"",taskStatu:""}}},methods:{change1:function(t){this.queryCon.system=t,this.$emit("getSys",t)},change2:function(t){this.queryCon.area=t},change4:function(t){this.queryCon.exam=t},change3:function(t){this.queryCon.taskStatu=t},rowClick:function(t){this.$emit("checkDetail",t)},update:function(t){this.$emit("updateDetail",t)},deletes:function(t){this.$emit("deleteDetail",t)},addTemp:function(){this.$emit("addDetail",0)},searchXJ:function(){this.$emit("searchXJ",this.queryCon)}},created:function(){},mounted:function(){}}),r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"routingTaskModdel boxs"},[a("div",{staticClass:"tabHead"},[a("div",{staticClass:"jobBoxs"},[a("SelectBox",{attrs:{options:t.query.systemss,value:t.queryCon.system,icon:"el-icon-d-caret",placeholder:"系统"},on:{change:t.change1}})],1),t._v(" "),a("div",{staticClass:"nameBoxs"},[a("SelectBox",{attrs:{options:t.query.areass,value:t.queryCon.area,icon:"el-icon-d-caret",placeholder:"区域"},on:{change:t.change2}})],1),t._v(" "),a("div",{staticClass:"nameBoxs"},[a("SelectBox",{attrs:{options:t.query.examines,value:t.queryCon.exam,icon:"el-icon-d-caret",placeholder:"巡检人"},on:{change:t.change4}})],1),t._v(" "),a("div",{staticClass:"nameBoxs"},[a("SelectBox",{attrs:{options:t.query.taskStatus,value:t.queryCon.taskStatu,icon:"el-icon-d-caret",placeholder:"任务状态"},on:{change:t.change3}})],1),t._v(" "),a("div",{staticClass:"searchBoxs",on:{click:t.searchXJ}},[a("i",{staticClass:"el-icon-search"}),t._v(" "),a("span",[t._v("筛选")])]),t._v(" "),a("div",{staticClass:"searchBoxs addBoxs",on:{click:t.addTemp}},[a("i"),t._v(" "),a("span",[t._v("新增")])])]),t._v(" "),a("Table",{staticStyle:{width:"100%"},attrs:{table:t.table},on:{rowClick:t.rowClick}})],1)},staticRenderFns:[]};var l=a("VU/8")(o,r,!1,function(t){a("P5Gt")},"data-v-ef1706a2",null);e.a=l.exports},KvKp:function(t,e,a){"use strict";var s=a("//Fk"),i=a.n(s),n=a("mtWM"),o=a.n(n),r={base:"/api",post:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"101_101_101";return e.Authorization=a,new i.a(function(a,s){o.a.post(r.base+"/"+t,e).then(function(t){var e=t.data;a(e)}).catch(function(t){s(t)})})},time:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date/1e3,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a="",s=new Date(1e3*t),i=s.getFullYear(),n=s.getMonth()+1<10?"0"+(s.getMonth()+1):s.getMonth()+1,o=s.getDate()<10?"0"+s.getDate():s.getDate(),r=s.getHours()<10?"0"+s.getHours():s.getHours(),l=s.getMinutes()<10?"0"+s.getMinutes():s.getMinutes(),c=s.getSeconds()<10?"0"+s.getSeconds():s.getSeconds(),d=new Date,u=d.getFullYear(),h=d.getMonth()+1<10?"0"+(d.getMonth()+1):d.getMonth()+1,m=d.getDate()<10?"0"+d.getDate():d.getDate();d.getHours(),d.getHours(),d.getMinutes(),d.getMinutes(),d.getSeconds(),d.getSeconds();switch(e){case 1:a=i+"-"+n+"-"+o;break;case 2:a=n+"-"+o+" "+r+":"+l;break;case 3:a=i+"-"+n+"-"+o+" "+r+":"+l;break;case 4:a=i+"-"+n+"-"+o+" "+r+":"+l+":"+c;break;case 5:a=n+"-"+o;break;case 6:a=i+"年"+n+"月"+o+"日";break;case 7:a=i==u&&n==h&&o==m?"今天 "+r+":"+l:i+"-"+n+"-"+o+" "+r+":"+l;break;case 8:a=i+":"+n+":"+o;break;case 9:a=i+"-"+n;break;case 10:a=i;break;case 11:a=r+":"+l}return a},time2:function(t){var e=new Date;return e.setFullYear(t[0]),e.setMonth(t[1]),e.setDate(t[2]),void 0!==t[3]&&e.setHours(hour),void 0!==t[4]&&e.setMinutes(pickedValue[5]),Date.parse(e)/1e3},time3:function(t){var e=[],a=t.split(" ")[0],s=t.split(" ")[1];e.push(a.split("-")[0]),e.push(Number(a.split("-")[1])-1),e.push(a.split("-")[2]),e.push(s.split(":")[0]),e.push(s.split(":")[1]),e.push(s.split(":")[2]);var i=new Date;return i.setFullYear(e[0]),i.setMonth(e[1]),i.setDate(e[2]),i.setHours(e[3]),i.setMinutes(e[4]),i.setSeconds(e[5]),Date.parse(i)/1e3},wid:function(t){var e=document.getElementsByTagName("body")[0].clientWidth;return t/1366*Number(e)},hei:function(t){var e=document.documentElement.clientHeight;return t/728*Number(e)},timeDeal:function(t){return t.getFullYear()+"年"+(t.getMonth()+1)+"月"+t.getDate()+"日"}};e.a=r},KyDa:function(t,e,a){"use strict";var s=a("dgmn"),i={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.newData.job_list?s("div",{staticClass:"routingTask"},[s("div",{staticClass:"routingTime"},[s("div",{directives:[{name:"show",rawName:"v-show",value:t.isZero,expression:"isZero"}],staticClass:"topBox"},[s("div",[s("span",[t._v("派发时间")]),s("br"),t._v("\n          "+t._s(t.newData.addtime)+"\n        ")]),t._v(" "),s("i",{staticClass:"el-icon-arrow-down"})]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.isZero,expression:"isZero"}],staticClass:"topBox topBox_red",style:{left:1.7+16e3/1366+"vw"}},[t._m(0),t._v(" "),s("i",{staticClass:"el-icon-arrow-down"})]),t._v(" "),t._l(t.newData.job_list,function(e,a){return s("div",{directives:[{name:"show",rawName:"v-show",value:!t.isZero,expression:"!isZero"}],staticClass:"topBox",style:{left:1.7+160*a*100/1366+"vw"}},[s("div",[e.label?s("span",[t._v(t._s(e.label))]):t._e(),s("br"),t._v("\n          "+t._s(e.time)+"\n        ")]),t._v(" "),s("i",{staticClass:"el-icon-arrow-down"})])})],2),t._v(" "),s("div",{staticClass:"progressDiv"},[s("div",[t._l(t.newData.job_list,function(t,e){return s("img",{staticClass:"item1",style:{left:6.73+160*e*100/1366+"vw"},attrs:{src:a("oK6o")}})}),t._v(" "),t._l(t.intervals,function(t,e){return s("img",{staticClass:"item2",style:{left:12.59+160*e*100/1366+"vw"},attrs:{src:a("/nQG")}})})],2)]),t._v(" "),s("div",{staticClass:"middleTime"},t._l(t.intervals,function(e,a){return s("div",{staticClass:"bottomBox",style:{left:9+160*a*100/1366+"vw"}},[e.interval&&""!=e.interval?s("span",[s("i",{staticClass:"el-icon-arrow-up"}),t._v(" "),s("div",[t._v("\n            "+t._s(e.interval)+"\n          ")])]):t._e()])}))]):t._e()},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("span",[this._v("未接单")])])}]};var n=function(t){a("3RYg")},o=a("VU/8")(s.a,i,!1,n,"data-v-e4cece7c",null);e.a=o.exports},LBgT:function(t,e){},LDSB:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAAAXNSR0IArs4c6QAAF1JJREFUeAHlnQt4VcW1gNechAARUdRCsVqhQBJ8fK0VH/gGgSRQFKXWR6v4unq93uoVUfu1erXqbb1aP1/FWp+1WrVyWxEkARUDgmjlcVUQEh4+rl5U6qOAgAlJ9v3X8Zz0ZGdmn33O2eckuZ0v59t7rzWzZs2smTVr1jxipJuH+Q3eN5o8ObPVk7ONkS+NJw94xfLE+GFmS3csmumOTM/7yNvF2yyntLbKWZ6RE8STmK8c24E8pcIZX2Fe9uG69Ge3EYjnebF562R0Sys9wZNTPJFdQtWskXriP1jUQ35fOdRsCpWmEyN1aYEs87wem9bLKGmWyWJkkudJ/6zrykgLPanO0HN6izw9qtx8kjWtPCbscgKpe8frteNLGUuZJ9MLTuTZL+ryU+hmaC/oisLpEgKpWed9LdYqVQzME2jFE6isPlELwUVPhQOujjFnFr9ajIENrriFgHeKQOLjwVoZQcVXI4TxFHSEZWAuRPk75IGl1gCw1otJzaBhsvAAY5o6RMojoGACUfO0UeQExoGxZFrJ82t5LFckpOFzG2PXfJ7zaTh14ytklTGYCHkMeRPIvPVe/9ZmOQ7uR+mPHlAReTmMbIXurja6tPQtCL2vDZc1zMgnVNhCTO26opgsqBpm3sqaliNhZAJ5boM3rKVZjqSCjkYAx1AZ5Y48cwMbeYfK/jOM/5HWO7S1RR63EWRicpEplpe9Vvk+vEzmd5AtXi4wePgUHpbAzxJplVd77SnLRvU3X+RIM/PkdQ3eXo2ejGgVOZSCHg5ThyOIvTKnFCKFoaieLKXQc4pjMntcmXk9map2rXdGkECqh5v7knHnbPDKzM646TyBijySRlOcxEX2xLSG9mroLaMXLY/FZEVsV3mz8utmW9g8SB8u1DR4/07FjCD2dxDCvuFSZRcLpj6jQC+oEBKWz19tlDIRSGp6TOvddzTFxzEVjo5n2c9vUgnb3mlQjDpvg1pJw12N5+AaW7QkLHQrgelpCMSqr5PEcng2xbu9J88zN3i+qkyWM3jSAdMED46yCKMGm7+R7I/6w+Izz6+Tb+MBGMvAPQ4+jqasvbIga0+CWwcmh4IcCrcn84xGIPbcsoTqrFmodOx/Wk9drJ8szqRbt+VqaHM5hoTVpGpQf7fqxLRxJ0JpkdFU5Chgap6Hbrg5slOgjL7SrSuovpdQRQtohS91VW8svedLKvWFxE8W13u7bjVxI0WtxWNpQN/Np4DyInkqnCkHA7Eni3guRM8tObrCbOW924UE3zUwrj+p2+T12bEZa7IVk96TY+iiathEpuJCC4TK5c8eYCpu/oFVV/diKZJl9AAVyv+7kDBrn6Ng+hPcPj2Lm+UQzKuj+TyK30gElPWkN7RANHNbYBC+bny5ucGG+0eAJRreEsqqv3ioWeNdQeP9VfI7k6d/YceZFt1v7SC0hs3ORP+gCFS2WnFZhZx7SFa5ZpEI87QI8/SgnToXSvyYFDpn37Se22ipZ2JILOW3rITnmDKj84EuHbq8QNQls7NJzqutlylU8sCwtUlcdeEfh/D0F7cyENB6hPNA757yCNbUR2FpFTJeaJVVSKZ0sqaz8DlrvIUIYy15/yQTYbh4hcZQVOzNLIC9X1PvPc2APM4Vt7PgXU4g89Z4h9AbliR8VMfmo2IQTDGCmeQ1yzyE/iyCGZKPfLKh2WUE8sIH3p5z6r17m428RoUdkU1hskwzAb/BW/SYG5a877Hc3rmhSwhk3lrv8Mat8ha6/iJ+BeeJ3tKT37V/+0Je1zGrM0VS8ML7C4sX+TQcewuAD/DjCv1NzyxrbpJXa9d4xxc672R+nWplqUufBaSfJ5kJ+8TOX4nb4Fn6UgNr3x8WGdlY1IsnC67bW2UgrWxvaA1k7jScSp5Irxseljbx9yDuc6jPiyZUmIfDposqXqcJBJ19M8K4OoOCLMdkfRSGZ1VWmHcC0ul+q5Up+KtVDdHyTyT9FFSTc+6STINQeiDEh2obvN7V5eaeJLwQz04RCMI4j4oJK4x1MSM/q64wM7KtkHFDzDrS3oY5ffvcBjmTCr+R/Aelo8f6yF2orw2sPM5LFzcqfMHHEIQxmtZ3b7oC4LD8ghZ9cWmF7J+LMFLz0UUvaD22X7mUo/Yuh/6OVHyHd0+KUHtPzV3nHdABlydAQQWi9j6t809xlRBUICNvsxd3JDr83lHGNAdFzQane61YSr2jWN3nRj4IokFP6suc6Fk1y4PiRYUrqEBYhfs1vWP3IOapoBd79pHD2Bi9KiheFLjK4WY5bpRD6Y2vBNFT9da0VX4ZFCcqXMEEwgB5MsKoCmIcYdT2LpfKMfuYT4PiRYmL+7SK40u1LwXRRXWdTxkODYoTBa4gg/qyjV7px5vl9iCGaaWrWdg6PayK0oUhtkHoTkjdhLcPtNXxWII6/BBaGzGJl8ZK5dmqfc1nQfkqTtc02No0ebsnr0FrsDX+V5sVpmMYHKFjkTVOBMCCCARhXAWv+7n4pQI/LSmSiWNCnHrC6hlEpV+vRxSoFeumbPDCEqu0bJMWfFW6y/CGqnKjy8nOoMcTGLwntrSgvhy7axD+obUNcg5EHnISyhGRd5WlZzxQRRcH8Qn+vHRrFdojEMZt1HMDFT6Fn1UY7fLBSuJ7DJ6Al7DuZrG9NXA/mW4NpUL+pR0N3wdCudwHivQz7wL5uF5OpBD9XVzTOxZiis5y4RU+911vIJ7ZhQhjKp8lQXFdOHiY2LxTluJNPtIVR+FV5fIHHssD4hyovrcAfE6o0AIp7Sn9+/WRUv+vtFymB3FA6z/fhQfnsSZ/pQuvcG3VrV+i24XtqrmHAdjQdXPrPadxwfjg4YoJ5Am15ixTrizSQPMXtDKbm+VddLJd8Ey6mGuc5uJAjYFNm2Ux6ulgVxwH/CP21d5Ixeom6E3sCNHtr2fzi+dFQ9jcIyYjx5aZNY70goqrIX61Fc+u++LdZaBrc19tvXc+s/wHbGknDCf3gJDXQZ3d8N9zCkOZitmZTvL78dZ478tIGBR3cUkfmeQznTdCs4YBfhb4x6jo3Xa2yMy3PO8g14Eceu4DzJvsAmHQb/lcRkNzdpLXqJ72lhsRdVr2IU5S7MwYMCzudrdGYRA/GI/uFCvSBaTl9iyRH/mE0Rab1vk4PP1GATzL3mtwD+CxvjIP4ekuRnswkpc5SV4FQkl0t7w10G9rRhgOCLhCs9xMSw7s3v6kRJ5xwrfMe3546ndRccp8yJNrdKtoKj75nlBHzye/LU93Y7NEDgvKm0B0OZQW7nTKkfEzLib1+Bui0JO4mYZl6RJUDpENtPzNGo9esifXPehJX2tgdh5k/Tkbm5VYSGDoMYQFm4wY2LI9vjjkpM/pptUuHptETsq0d8RpeekvE1gg8blJz5S8T+JdTd0OobhVVrs8m/DXX601tvHr+ku7gKAHtwNk8OGssA40OMXUARYAaIGroKArfC48hc2mdwi96jAXzSR8e4N8h66Rujl6XBLnfzLvUWPAGShjrQ2Zpui2JG2wvKmsthwsL6iMRtfAG4/uyTctydKCqIhT5jZ4TqHofi/GmZtTCSH83TAgrIdDucTG2WhSaUT53ikCoQCBBaVidU0884CrhFb7BD6p7/oT60GcufVyNwI4wY8rarXnp05HBFgwz7PyFV5l+UuRx2+acW8qLrvgybc4jv0XJnaPosJegchfmRwezG7F0yFZZiPaEpPeNngChkwKFzpLIIF7dKk47UG7ZVsNpC9mnDg3/gtBpLdDNalDEx/aHiFIRBalU1QWrb9n0JIoTTJwMI2s9BAir+bjB4n12qaiFrsqizJ/P62cewjqZQHzjRV+wq2GU0SenOWHJ7/ZqajjhEs/63xidDJuPp/MNVa4FpwwaQPHMsr+EGV0WcZZsZ2zQFAPM8cPN3f6c084Bs+Iqw8/km98RfvzWGlBiSmSmaiKq2y4yGFGZjppGnikAI7wHhslIvf65qyy6PI9bQyP2NtsB26t8Hh8zz1Drhoqf0GX/K+NbpQwWrjHaPMnF0028umk0R4MPOYhhBYIFW9dm6bLD3fyFcz0BF1NtKVVFcJp+xttuIhhj08YYtbaaOppWwQ2xoaLw4LL5kyWDhFaILTYN63EWt1bMynQq9Y0AHVC9vE6Od6Fr6rANc99iS58rnB4a2Tsu8ZFZ8dnUqXGhwtP2s7tITD2ho05CnYAM+AiGy5WJC9SqXgg7IG9G/9kxzDGGNPCAtMU6Ltd4K7E4eCXs0X0XWdUTy504kQ+16PfAfisUeF7iNh7CK2oV+16+9oAm93epyXVuLgj7alBrg52irzG4H+eK33WcCP3MCDH10VsNOas9cYyljv9aTSS3+frHH5oK6vIkzdc9h0raxMomFU90Xd+ywml79kKrjB2hNzK4zgXvrrMPMGsW2fuWoElrnhh4bTA6WxkuMwVn94eq2mQW1z4OLxI7nPh2Uyne8XOteHp8TdVlptANcxYHS7UeV7x9vr4BKqfPwVE/hvTt4P/SOOpOmMv0zsw6dyCA6OTqirMM366qd8I5Shsohm03MBZfmqa1HdVffTWy1Lv0ErFJ9/ZanQOOvbh5HeHp5FF7AM4tgM8AWCZWK22U/x48m/s31f2SFiffnTbd2iVNUo3Pev9VZZAJR08r94bbEHFxwIsMad60DRsCHgIN8UQW/okDBXzcu89pQwVdh18bE3C0z51DIvJ71gpLEsnDNTntynLr4NoUrHTXXide4GrsuFpkIvSCUPThRaIRqYnOFsxF+E6B8HSErmdgmxQGrZAJeyB2pv9/AYv0H+l94zoNR5Fu8ggGD8Xfp6G7mY/TWCNMLuI0l2BTh46odycq+OZP17qt94RifqcBS+7pMLbvUOzukyeagdL+fhkKxc+i6hQOgR4ndsBaAEQL3yI34TzmXyCtDuYg1TCJs5d7OvaxRFfXXMs6LRxYGQu+7wmxntjGzD9i/K1HVcMbvQeLD19GGY/bypVdc1vb5T5qMQjU+Gp71RUM0ckDg7alY9aXUrd2FdWS6TcNefx5ZP6mf6dTJ8hU+s6NGbumToIu6iQ9inSnurCx+Hc+MlxhFMDF7ACCWSGfK7e2xtjZSZ8Be8iMXIrY4fTnaNjHDQW23JHmAsZY4+34fywjFSWJmYD2t1+Islv1M41aqUkv/3Pnl+dWuqwBt0uHrvZG7+QpQyOB7WD5+FDt4SianEYBAuDCl3Pxrifp2HhWhce39xvXTg/nLwyD9wZsgpde4AtJTvNz2b+8KgNp7Dadd5IBPcildDLFUfhMPYFA/jVvcrkvkxVWBBdxek6h2mRSymDnjXsoH5T08PHp8UlMjJxTjEV1fZO7xgNnfltgNQX7vodVC7fcKny1Kj67mzN/ojtvmNyZ7vvlA8sputcPiqNVj3MvEIh9Z+vUB/uALIP/x9k+o56WcP48wN6XlaNJzUH7b1q1jIvWgeft6QVBsYBGuHkIGEkNMJ/puaT+o6pfU9YYWi6rAqpe64+3yb/Q5XulZp523tMfopl88u2b8sLreoqKsRZEH8SGNU7Gx8t4dL8dEcX/GnZa1uOgE+C37N5Wnu2P402GPj7ke529ONSv+c0eJdgWFtNZXj+DG/yYGb1W1LTBL1nJRAliNr6MYW7y0qc0609Y3JguopjVns5LfVWKqrISscNXAXqWbp3A88PmchtLOUCgR0xlll0w4InA4Hp4pJ6oidSseU8QweE8aW6bIIMFCWG6tsH9bua/Ha1Eec491UctVBPROiQtUDqmLnvaJBVrsJC+Dksi8p0nHCbQzUFehI61q046dLnAf9RcZFMqiwzgd5cuo/BxVID79aJIELduPsuMvTIfc2OTHjMbgwhBx1osaemuTKj94yjsv/VhU/CmejV0j9Goo7eTsI67Wnk9eIenABOIwzlr3atXOsShuJpkP+WqTAS6fSRfcA81Q3J1oWceNfnoA3d9s10OeimZ6bcWkh1/OXsREyXXyqeytvG9y/Q97eF8eJiGFSyZ0B7h7VBU+5ZuHrcq42pmfves1ZZSTowNwjm3oQ5qx6lqawp3UMOC/tfA/TSfNmJFedQBcl8I3tyaIh5whUI4oMwNHHvfJNb7lagAfa0xUcYW5hv7X9CuclqCTpngShTWEx6d8mDNgbjsCxcIupqYcC/BGNXx5hMB30nKwlEEw1lJoPu3VwuY51d2wjo/AWTeRFldc/qOcDKjP5hW/owsEgEohkhFKdLRfEU/gFUl3OFUOPYQvzAZyOnblvlXFplmS1OBjD+Q448yAmrRzN1zeggztWDD8PDFFd+VOYjGDLnuPBh4JEJJO4t3Smvw7BzvQKhXItQbgrDmC1O3EXfyuX4Xvxk1giYP4R3q3VGxasXWN0iS/GxLWWCtzSdx9eWZxLGcQxVo5cmvy3PVQN2k8PDuNgtadtAkQlEKVJhR9ClF1AJTndEOtdKG2chXpjHnM5s/glbVARwBuroSRsuUxi9/ybK9DNXOh03qMjDaGw6L8opWK2EbCkyML6Kq+Cfg9JTgQ/qMmdQnK6ES3gU3MIQ2YnwJ0chDC13pAJRgqzK/Y4Wc4e+2wIqrQdCmUVvGmfDdyUYwriYnhHo3qFnXFhVZl6Iiu/IBaKMVZfLNITyXwFMlrJVdDY+puC1kQAC+UbhGrqCPKYH5aPLydoAg+JkisuLQAx7qlg9/CGmZdCyZQn+pidxzl2QKdP5jB+3prhThZ78K3qHc4wFcUM+/itEXgSiFaYu5wF9ZTI9xW3n60y3Ve6np1yZz0oOS5uLBEpq6uUPNJSpQWko008wb68LipMtLm8CUYbUBOzRgz1ZesVFQNC1CfT1rbTOzPiJ4H9QJdlS1w0XCeimvjOSMP8TQXiY7pfhFgkcV/zpMvnOrAIyoZyIO3aI2czy5zi6eNAhfN3rO42J19yggzwdsveYGUQQ9BrZzZ4sgQe39afbiYxchDVlX3KIgA8lkXeBaCbxWxGKZSJCeVq/XYHaHctBnuW2Q5uuNLnCUZcn6rVN0DnQSYt/akZFTWHMuN8ZJyJEQQSivKoXtbpCTkUo6Qq1H7eAvhxfao2okDYyqh5ZHvgPGoHuOAnaD7adecYP6BmP2ehEDSuYQJRxtb4YDC9EKNPo/oyd9kAF9QL5MK33ftddJPGUWY4hL7ztDVD1iH/sp+QFO/bAmPFujyI5ipXDP9tjRA8tqECS7COU28j4ZGpiWxJmezLYX7CFXfd4fkfZ8IwgGY8hGA/fb2xipTNgd7vmhTBexAk5IvV/71p5iBjYKQLRMqACdNvmSF7XBZWJFjyI3jIf9XJXYu9sUHQnbtF7Xj+EoXdlzUCM9s0Zf099O5PbcZl6hP+ePPu3ThOIssyOjpVcQqNe2+DBHrWCevkxt8u9MXetN6atuCFVFsKctGWHrEQYP2xLa3thcwZm7VnwNVXVqy1KvmFO/ZnvjP301VVBj/kF8BI/zv+NOpnBRWVXNvH/2xP/GskfRXdYnkFre50N1HdCN63fjIpYHyuW07iZdEUHYgUEdBmBaJn1OAAVqNaM2wRNVA5CaeRVNzcfnQC1f+g/nmdlD2H0aI/o+EUl3FfUT6YmLi3rGKGAkC4lEC13Ypn0JipyKro+ryoVoW4ijwswMmYXsM4Ds+pyAklyy0boY+ktj+ignoRF+UQYsznEcwGriJuipJsrrS4rEC2YzkEwe+9AKOflWtC29Jy+4gz8tHSnqdriF/ilSwskWReJfVC/Qb0MTsKyeSZ6xSW5rK1nk28mabqFQLRA8btTtnC+0JOpjC/FmRSSuB9hzl7K3GdGhukKHr3bCCRZM+xuOZDbsu9BMMckYa4nPULn8vf37iVXjxpssv4Pzi76+YB3O4EkKwET+SwG/Vv4/noS5nuuYi5ycSYb4XzpO+Wz2wpEawsTuS9r89dTCD0a8ZUa0yPTRq4vLZO7dEN4p9RqDpl2a4Eky836yQH8x4K7mQh+XGzkinEVZmMS192e/wfJGAIbZGeq3gAAAABJRU5ErkJggg=="},LIpj:function(t,e,a){"use strict";(function(t){var s=a("mvHQ"),i=a.n(s),n=a("+1Ri"),o=(a.n(n),a("866P")),r=a("KvKp"),l=a("kArt"),c=a("N6wk"),d=(a("Og6n"),a("pRIo")),u=a("v7Jf"),h=a("zhb+"),m=a("KUQL"),p=a("KyDa"),f=a("ClXn"),v=a("xfIW"),_=a("KJ2l"),g=a("yivU");e.a={components:{Table:g.a,WorkInfo:d.a,SelectBox:l.a,Header:o.a,TimePickerT:c.a,RoutingTakModdel:m.a,RoutingTask:p.a,RoutingInfo:f.a,AddModel:v.a,Page:_.a},data:function(){var t=this;return{tempTitle:"新增",currentPage:1,backExcu:{info:""},dialogBoxs:{item:{name:""},state0:0,txt:"是否确定退单"},page:{totalDataNumber:0,currentPage:0,totalPageNum:0},activeName:"first",rowData:{},workH:[],jobs:[],vJob:"",names:[],Exitparam:{},newData:{desc:[],item:{},localDesc2:{},tableData:{len:1,data:[],th:[{select:[]}],hei:"0"}},pOptions:[],vName:-1,value7:"8-24",cant:!1,table:{hei:320,len:0,data:[],th:[{prop:"index",label:"编号",minWid:"20%"},{prop:"title",label:"类别"},{prop:"floorname",label:"地点",wid:180},{prop:"addtime",label:"派发时间"},{prop:"dianwei",label:"点位"},{prop:"now_state",label:"状态",operate:!0,render:function(t,e){var a={fills:e.row.now_state};return t(u.a,{props:{state:a}})}},{prop:"dealed",label:"操作",operate:!0,render:function(e,a){var s={item:a.row};return e(h.a,{props:{btnss:s},on:{agree:t.agree,refult:t.refult}})}}]},navsData:{active:"item3",lists:[{id:0,name:"首页",route:"/AgentManage/normalUser"},{id:1,name:"排班表",route:"/AgentManage/normalUser/schedule"},{id:2,name:"工单",route:"/AgentManage/normalUser/workList"},{id:3,name:"巡检",route:"/AgentManage/normalUser/routing"},{id:4,name:"完成情况",route:"/AgentManage/normalUser/report"}]}}},methods:{change1:function(t){this.vJob=t},changes:function(t){this.value7=t},changeCurrentPage:function(t){this.currentPage=t,this.getTableData()},deletes:function(){var t=this.value7.split("-");1==t[2]?(2==t[1]||4==t[1]||6==t[1]||8==t[1]||9==t[1]||11==t[1]||1==t[1]?t[2]=31:5==t[1]||7==t[1]||10==t[1]?t[2]=30:3==t[1]&&Number(t[0])%4==0?t[2]=29:3==t[1]&&Number(t[0])%4!=0&&(t[2]=28),1==t[1]?(t[1]=12,t[0]=Number(t[0])-1):t[1]=Number(t[1])-1):t[2]=Number(t[2])-1,this.value7=t.join("-")},adds:function(){if(!this.cant){var t=this.value7.split("-");(1==t[1]||3==t[1]||5==t[1]||7==t[1]||8==t[1]||10==t[1]||12==t[1])&&31==t[2]||(2==t[1]||6==t[1]||9==t[1]||11==t[1])&&30==t[2]||2==t[1]&&Number(t[0])%4==0&&29==t[2]||2==t[1]&&Number(t[0])%4!=0&&28==t[2]?(t[2]=1,12==t[1]?(t[1]=1,t[0]=Number(t[0])+1):t[1]=Number(t[1])+1):t[2]=Number(t[2])+1,this.value7=t.join("-")}},checkDetail:function(t){this.rowData=t,this.tempTitle="查看",this.$refs.add.show()},updateDetail:function(t){this.rowData=t,this.tempTitle="修改",this.$refs.add.show()},deleteDetail:function(t){console.log(t)},addDetail:function(){this.rowData={},this.tempTitle="新增",this.$refs.add.show()},cancelAdd:function(){this.$refs.add.hide()},rowClick:function(e){var a=this;this.rowData=e,this.$refs.tableInfos2.show(),this.rowData.operate="check",this.$http.post("/pc_ims/staff/inspectiondata_info",{ins_id:e.id}).then(function(s){if(0==s.data.code){var i=s.data.data.info;s.data.data.zhanshi;a.newData.item=i,a.newData.item.info=i.complete_info,a.newData.item.now_value=e.now_state,a.newData.item.user_id=e.user_id,a.newData.tableData.th=[{prop:"serial",label:"序号"},{prop:"time",label:"日期"}],t.each(s.data.data.zhanshi[0],function(e,s){t.each(s,function(t,e){a.newData.tableData.th.push({prop:"value"+t,label:e.name,type:e.type,select:e.select,point_id:e.point_id})})}),a.newData.desc=[{label:"类别",value:i.title},{label:"设备名称",value:i.devicename},{label:"设备地点",value:i.floorname},{label:"检查人员",value:i.user_name},{label:"电话",value:i.user_phone}],a.newData.jduser=i.user_name;var n=s.data.data.values;t.each(n,function(e,a){t.each(a.value,function(t,s){a["value"+t]=String(s),a.serial=e+1})}),a.newData.tableData.data=n,1==a.newData.item.now_value&&(a.newData.tableData.data.push({}),a.newData.tableData.data[a.newData.tableData.data.length-1].serial=a.newData.tableData.data.length,a.newData.tableData.data[a.newData.tableData.data.length-1].time=r.a.time(new Date/1e3,1))}else a.$message({type:"error",message:s.data.msg})})},agree:function(t,e){this.dealWork(t,1)},refult:function(t,e){this.Exitparam=t,this.Exitparam.two=3,this.$refs.isRefult.show()},submitOk:function(){this.$refs.isRefult.hide(),this.$refs.isRefult2.show(),this.backExcu.info=""},submitBack:function(){this.backExcu.info&&""!=this.backExcu.info?(this.dealWork(this.Exitparam,this.Exitparam.two),this.$refs.isRefult2.hide()):this.$message({type:"error",message:"请输入退单原因",duration:2e3})},submitNo:function(){this.$refs.isRefult.hide()},dealWork:function(e,a,s){var n=this;if(s){if(e.id=e.item.id,e.item.user_id&&(e.user_id=""),e.item.newuser_id&&(e.newuser_id=""),!e.item.complete_info)return void this.$message({type:"error",message:"请输入现场处理情况",duration:2e3});e.info=e.item.complete_info;var o=this.newData.tableData.data,r=this.newData.tableData.th,l={list:[]},c=!1;if(2==a&&t.each(r,function(t,e){void 0!=e.point_id&&(o[o.length-1][e.prop]?l.list.push({name:e.label,now_value:o[0][e.prop],point_id:e.point_id,type:e.type,select:e.select}):(n.$message({type:"error",message:"请输入"+e.label,duration:2e3}),c=!0))}),c)return;e.form=l.list}else(e=e.item).info||(e.info=""),e.newuser_id||(e.newuser_id=""),e.list||(e.form={});this.$http.post("/pc_ims/admin/write_inspectionlist",{id:e.id,type:a,info:e.info,user_id:e.user_id,newuser_id:e.newuser_id,form:i()({list:e.form})}).then(function(t){0==t.data.code?(n.$message({type:"success",message:t.data.msg,duration:2e3}),n.$refs.tableInfos2.hide(),n.getTableData()):n.$message({type:"error",message:t.data.msg,duration:2e3})})},tableInfos2Show:function(t){console.log(t)},infoTit:function(t){var e="";switch(t){case 1:e="处理中";break;case 2:e="已完成";break;case 3:e="申请退单";break;case 4:e="退单完成"}return e},getTopData:function(){var t=this;this.$http.post("/pc_ims/staff/inspectiondata").then(function(e){if(0==e.data.code){var a=e.data.data;t.workH=[{id:1,tit:"今日巡检数",val:a.count,color:"#f38a00"},{id:2,tit:"未完成",val:a.wei,color:"#f56c6c"},{id:3,tit:"已完成数量",val:a.wan,color:"#4ae283"}]}else t.$message({type:"error",message:e.data.msg})})},getTableData:function(){var t=this;this.$http.post("/pc_ims/staff/inspectiondata_user",{sys_name:this.vJob,pagenumber:this.currentPage,pagesize:20}).then(function(e){0==e.data.code?(t.table.data=e.data.data,t.table.len=e.data.count,console.log(e.data),t.page={currentPage:t.currentPage,totalDataNumber:20*e.data.pages,totalPageNum:e.data.pages},t.table.data.map(function(e,a){t.table.data[a].index=20*(t.currentPage-1)+1+a;var s=JSON.parse(e.form).list;if(0!=s.length){for(var i="",n=0;n<s.length;n++)i=0==n?s[n].name:i+"、"+s[n].name;e.dianwei=i}0==e.now_state&&(e.stateChi="未接单"),1==e.now_state&&(e.stateChi="处理中"),2==e.now_state&&(e.stateChi="完成"),3==e.now_state&&(e.stateChi="申请退单"),4==e.now_state&&(e.stateChi="退单完成")})):t.$message({type:"error",message:e.data.msg,duration:2e3})})},getSystemsOptions:function(){var e=this;this.$http.post("/pc_ims/get_sysmenu").then(function(a){if(0==a.data.code){var s=a.data.data;t.each(s,function(t,e){s[t].label=s[t].title,s[t].value=s[t].title}),e.jobs=s,e.jobs.unshift({label:"类别",id:""})}else e.$message({type:"error",message:a.data.msg})})}},created:function(){var t=this.$router.history.current.fullPath.split("/AgentManage/normalUser/routing")[1];this.activeName=""==t?"first":t.split("/")[1]},computed:{crumbs:function(){return["代维系统","巡检"]}},mounted:function(){this.getSystemsOptions(),this.getTopData(),this.getTableData()}}}).call(e,a("7t+N"))},LTwX:function(t,e,a){"use strict";var s={props:["value7"],data:function(){return{value7s:(new Date).getFullYear()+"-"+(new Date).getMonth(),cant:!1}},computed:{},methods:{changes:function(){this.$emit("changes",this.value7s)},deletes:function(){this.$emit("deletes");var t=this.value7s.split("-");1==t[1]?(t[1]=12,t[0]=Number(t[0])-1):t[1]=Number(t[1])-1,this.value7s=t.join("-")},adds:function(){if(this.$emit("adds"),!this.cant){var t=this.value7s.split("-");12==t[1]?(t[1]=1,t[0]=Number(t[0])+1):t[1]=Number(t[1])+1,this.value7s=t.join("-")}}},created:function(){void 0!==this.value7&&(this.value7s=this.value7)},mounted:function(){}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"timePickerTit"},[a("div",{staticClass:"HeadTabBox"},[a("div",{staticClass:"HeadTab HeadTab1",on:{click:function(e){t.deletes()}}},[a("i",{staticClass:"el-icon-caret-top"})])]),t._v(" "),a("div",{staticClass:"timeBox"},[a("el-date-picker",{staticClass:"times",attrs:{type:"month",align:"center",clearable:!1,"value-format":"yyyy-M"},on:{change:function(e){t.changes()}},model:{value:t.value7s,callback:function(e){t.value7s=e},expression:"value7s"}}),t._v(" "),a("span",{domProps:{textContent:t._s(t.value7.split("-")[0]+"年      "+t.value7.split("-")[1]+"月")}})],1),t._v(" "),a("div",{staticClass:"HeadTabBox"},[a("div",{staticClass:"HeadTab HeadTab2",class:{cantTab:t.cant},on:{click:function(e){t.adds()}}},[a("i",{staticClass:"el-icon-caret-bottom"})])])])},staticRenderFns:[]};var n=a("VU/8")(s,i,!1,function(t){a("2xWZ")},"data-v-b38df6f4",null);e.a=n.exports},LYgd:function(t,e){},Lehq:function(t,e,a){"use strict";var s={props:{isResize:{type:Number}},data:function(){return{doorControlChart:{},loading:!0,data:{}}},watch:{isResize:function(){this.doorControlChart.resize()}},components:{},mounted:function(){this.initData()},methods:{deletCli:function(){this.$emit("deletClick",{self_id:14,componentsName:"Door"})},initData:function(){var t=this;this.$http.get("/index_pc/pc/model",{self_id:14}).then(function(e){0==e.data.code&&(t.data=e.data.data,t.drawEchart(),t.loading=!1)}).catch(function(t){console.log(t)})},drawEchart:function(){var t=this.$echarts.init(document.getElementById("doorControlEcharts"));this.doorControlChart=t;var e=this.data,a={legend:{bottom:10,left:"center",padding:0,data:[{name:"开启数",icon:"circle"},{name:"异常数",icon:"circle"},{name:"关闭数",icon:"circle"}],textStyle:{color:"white"},formatter:function(t){var a=0,s=[{name:"开启数",value:e.start},{name:"异常数",value:e.fault},{name:"关闭数",value:e.close}];return s.forEach(function(e,s){e.name==t&&(a=s)}),s[a].value+"台"}},series:[{type:"pie",radius:"55%",center:["51%","42%"],labelLine:{show:!0,length:18,length2:14},data:[{value:e.start,name:"开启数"},{value:e.fault,name:"异常数"},{value:e.close,name:"关闭数"}]},{type:"pie",radius:"65%",center:["51%","42%"],selectedMode:"single",label:{show:!0,position:"inside",formatter:"{d}%"},data:[{value:e.start,name:"开启数"},{value:e.fault,name:"异常数"},{value:e.close,name:"关闭数"}]}],color:["#2ddfdf","#ee4a4b","#008aff"]};t.setOption(a)}}},i={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"door",attrs:{"element-loading-background":"rgba(0, 0, 0, 0.5)","element-loading-spinner":"el-icon-loading","element-loading-text":"拼命加载中"}},[s("div",{staticClass:"title"},[s("span",{staticClass:"titleIcon"}),t._v(" "),s("span",{staticClass:"txt"},[t._v("门禁系统")]),t._v(" "),s("img",{attrs:{src:a("Ilry"),alt:""},on:{click:t.deletCli}})]),t._v(" "),s("div",{staticClass:"con"},[s("div",{staticClass:"doorPartOne"},[s("div",{staticClass:"doorPartOneCon"},[s("span",[t._v("当前门禁总数")]),t._v(" "),s("span",{domProps:{textContent:t._s(t.data.count)}})])]),t._v(" "),t._m(0)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"doorPartTwo"},[e("div",{staticClass:"partName"},[this._v("当前门禁情况")]),this._v(" "),e("div",{staticClass:"partCon",attrs:{id:"doorControlEcharts"}})])}]};var n=a("VU/8")(s,i,!1,function(t){a("V/a2")},"data-v-3e6ada6c",null);e.a=n.exports},LhaG:function(t,e){},Lih1:function(t,e){},Lqdk:function(t,e){},MJag:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_exports__.a={components:{},name:"selfPopover2",props:["device_id","devicePic"],data:function(){return{info:[]}},methods:{requestTuLiDeviceInfo:function requestTuLiDeviceInfo(device_id){var _this=this,that=this,config={device_id:device_id},headers={};this.$http.get("/currency/device/info",config,headers).then(function(res){var data=res.data;if(console.log("获取图例设备信息",config,res),0==data.code){var tempArr=[];if(0!==data.data.length){var content=data.data[0].content,dataArr=eval(content);dataArr.map(function(t,e){for(var a in t){var s={};s.tit=a,s.content=t[a],tempArr.push(s)}})}_this.info=tempArr}else _this.$message(data.message)}).catch(function(t){_this.$message(t)})},getInfo:function(){this.requestTuLiDeviceInfo(this.device_id)}},created:function(){},mounted:function(){},watch:{devicePic:{handler:function(t,e){this.$forceUpdate()},deep:!0}}}},Mnav:function(t,e){},Mo2Z:function(t,e){},MovR:function(t,e,a){"use strict";var s=a("MJag"),i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-popover",{staticClass:"self-popover2",attrs:{"popper-class":"self-popper",placement:"right-start",disabled:!1,width:"281",trigger:"hover"},on:{show:t.getInfo}},[a("div",{staticClass:"popover-btn isPointer no-select",attrs:{slot:"reference"},slot:"reference"},t._l(t.devicePic,function(e,s){return a("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"v.show"}],key:s,staticClass:"imgBox",domProps:{innerHTML:t._s(e.codes)}})})),t._v(" "),a("el-scrollbar",{staticStyle:{height:"100%"}},t._l(t.info,function(e,s){return a("div",{key:s,staticClass:"popover-item",style:{marginTop:0==s?0:"0.15rem"}},[a("div",{staticClass:"title",domProps:{textContent:t._s(e.tit)}}),t._v(" "),a("div",{staticClass:"content",domProps:{textContent:t._s(e.content)}})])}))],1)},staticRenderFns:[]};var n=function(t){a("+ESX")},o=a("VU/8")(s.a,i,!1,n,null,null);e.a=o.exports},MwRh:function(t,e){},N6wk:function(t,e,a){"use strict";var s={props:["value7"],data:function(){return{value7s:(new Date).getMonth()+"="+(new Date).getDate(),cant:!1}},computed:{},methods:{changes:function(){this.$emit("changes",this.value7s)},deletes:function(){this.$emit("deletes");var t=this.value7s.split("-");1==t[2]?(2==t[1]||4==t[1]||6==t[1]||8==t[1]||9==t[1]||11==t[1]||1==t[1]?t[2]=31:5==t[1]||7==t[1]||10==t[1]?t[2]=30:3==t[1]&&Number(t[0])%4==0?t[2]=29:3==t[1]&&Number(t[0])%4!=0&&(t[2]=28),1==t[1]?(t[1]=12,t[0]=Number(t[0])-1):t[1]=Number(t[1])-1):t[2]=Number(t[2])-1,this.value7s=t.join("-")},adds:function(){if(this.$emit("adds"),!this.cant){var t=this.value7s.split("-");(1==t[1]||3==t[1]||5==t[1]||7==t[1]||8==t[1]||10==t[1]||12==t[1])&&31==t[2]||(2==t[1]||6==t[1]||9==t[1]||11==t[1])&&30==t[2]||2==t[1]&&Number(t[0])%4==0&&29==t[2]||2==t[1]&&Number(t[0])%4!=0&&28==t[2]?(t[2]=1,12==t[1]?(t[1]=1,t[0]=Number(t[0])+1):t[1]=Number(t[1])+1):t[2]=Number(t[2])+1,this.value7s=t.join("-")}}},created:function(){},watch:{value7:{handler:function(t){this.value7s=t},deep:!0}},mounted:function(){this.value7s=this.value7}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"timePickerTit"},[a("div",{staticClass:"HeadTabBox"},[a("div",{staticClass:"HeadTab HeadTab1",on:{click:function(e){t.deletes()}}},[a("i",{staticClass:"el-icon-caret-top"})])]),t._v(" "),a("div",{staticClass:"timeBox"},[a("el-date-picker",{staticClass:"times",attrs:{type:"date",align:"center",clearable:!1,"value-format":"MM-dd"},on:{change:function(e){t.changes()}},model:{value:t.value7s,callback:function(e){t.value7s=e},expression:"value7s"}}),t._v(" "),a("span",{domProps:{textContent:t._s(t.value7s.split("-")[0]+"月      "+t.value7s.split("-")[1]+"日")}})],1),t._v(" "),a("div",{staticClass:"HeadTabBox"},[a("div",{staticClass:"HeadTab HeadTab2",class:{cantTab:t.cant},on:{click:function(e){t.adds()}}},[a("i",{staticClass:"el-icon-caret-bottom"})])])])},staticRenderFns:[]};var n=a("VU/8")(s,i,!1,function(t){a("T+GN")},"data-v-4e965e80",null);e.a=n.exports},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("7+uW"),i=(a("llnD"),{name:"App",mounted:function(){window.localStorage.getItem("isRefresh")?this.$router.replace({path:"/"}):window.localStorage.setItem("isRefresh",!0)}}),n={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var o=a("VU/8")(i,n,!1,function(t){a("Lih1")},null,null).exports,r=a("/ocq"),l=a("866P"),c={components:{SysHead:l.a},name:"energyBase",data:function(){return{activeName:"first",sData:{id:2,lists:[]}}},methods:{},created:function(){0!=this.$store.state.sysList[2].role_string[0]&&this.sData.lists.push({id:1,name:"全景查看",route:"/energy/allViews"}),0!=this.$store.state.sysList[2].role_string[1]&&this.sData.lists.push({id:2,name:"用能分析",route:"/energy/analysis"}),0==this.$store.state.sysList[2].role_string[2]&&0==this.$store.state.sysList[2].role_string[5]&&0==this.$store.state.sysList[2].role_string[6]||this.sData.lists.push({id:3,name:"三表远抄",route:"/energy/metersRead"}),0!=this.$store.state.sysList[2].role_string[4]&&this.sData.lists.push({id:4,name:"用能预设",route:"/energy/preset"}),0==this.$store.state.sysList[2].role_string[3]&&0==this.$store.state.sysList[2].role_string[7]&&0==this.$store.state.sysList[2].role_string[8]&&0==this.$store.state.sysList[2].role_string[9]||this.sData.lists.push({id:5,name:"用能报表",route:"/energy/report"})},mounted:function(){}},d={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"energyBase autoComponent"},[e("SysHead",{attrs:{datas:this.sData}}),this._v(" "),e("div",{staticClass:"energyBody"},[e("router-view")],1)],1)},staticRenderFns:[]};var u=a("VU/8")(c,d,!1,function(t){a("iUy2")},"data-v-1284bee7",null).exports,h=a("I3Te"),m={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"allViewsContainer"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[t._v("首页")]),t._v(" "),a("el-breadcrumb-item",[t._v("能源管理系统")]),t._v(" "),a("el-breadcrumb-item",[t._v("全景查看")])],1),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.viewsLoading,expression:"viewsLoading"}],staticClass:"viewsContentBox",attrs:{"element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.3)"}},[a("div",{staticClass:"viewRow"},[a("div",{staticClass:"viewColum"},[a("header",[a("div",{staticClass:"titleBox"},[t._v("总能耗")]),t._v(" "),a("div",{staticClass:"exhaustItem"},[t._v("今年碳排放："),a("span",{staticClass:"color1"},[t._v(t._s(t.totalEnergyUsageData.yearActualTotal))]),t._v("Kg，计划"),a("span",{staticClass:"color2"},[t._v(t._s(t.totalEnergyUsageData.yearPlanTotal))]),t._v("Kg")]),t._v(" "),a("div",{staticClass:"exhaustItem"},[t._v("本月碳排放："),a("span",{staticClass:"color1"},[t._v(t._s(t.totalEnergyUsageData.monthActualTotal))]),t._v("Kg，计划"),a("span",{staticClass:"color2"},[t._v(t._s(t.totalEnergyUsageData.monthPlanTotal))]),t._v("Kg")])]),t._v(" "),a("div",{staticClass:"viewItemContent"},[a("div",{staticClass:"totalEnergyItem"},[a("div",{staticClass:"totalEnergyItemHead"},[a("div",[t._v(t._s(t.totalEnergyUsageData.monthActualUsage[0]))]),a("p",[t._v("本月")])]),t._v(" "),a("div",{staticClass:"totalEnergyItemCont"},[t._m(0),t._v(" "),a("div",{staticClass:"totalEnergyItemFoot"},[a("div",{staticClass:"unit"},[t._v("kw/h")]),t._v(" "),a("div",{staticClass:"totalVal"},[t._v(t._s(t.totalEnergyUsageData.monthPlanUsage[0]))]),t._v(" "),a("div",{staticClass:"title"},[t._v("本月能耗值")]),t._v(" "),a("div",{staticClass:"type"},[t._v("电")])])])]),t._v(" "),a("div",{staticClass:"totalEnergyItem"},[a("div",{staticClass:"totalEnergyItemHead"},[a("div",[t._v(t._s(t.totalEnergyUsageData.monthActualUsage[1]))]),a("p",[t._v("本月")])]),t._v(" "),a("div",{staticClass:"totalEnergyItemCont"},[t._m(1),t._v(" "),a("div",{staticClass:"totalEnergyItemFoot"},[a("div",{staticClass:"unit"},[t._v("m³")]),t._v(" "),a("div",{staticClass:"totalVal"},[t._v(t._s(t.totalEnergyUsageData.monthPlanUsage[1]))]),t._v(" "),a("div",{staticClass:"title"},[t._v("本月能耗值")]),t._v(" "),a("div",{staticClass:"type"},[t._v("水")])])])]),t._v(" "),a("div",{staticClass:"totalEnergyItem"},[a("div",{staticClass:"totalEnergyItemHead"},[a("div",[t._v(t._s(t.totalEnergyUsageData.monthActualUsage[2]))]),a("p",[t._v("本月")])]),t._v(" "),a("div",{staticClass:"totalEnergyItemCont"},[t._m(2),t._v(" "),a("div",{staticClass:"totalEnergyItemFoot"},[a("div",{staticClass:"unit"},[t._v("m³")]),t._v(" "),a("div",{staticClass:"totalVal"},[t._v(t._s(t.totalEnergyUsageData.monthPlanUsage[2]))]),t._v(" "),a("div",{staticClass:"title"},[t._v("本月能耗值")]),t._v(" "),a("div",{staticClass:"type"},[t._v("气")])])])])])]),t._v(" "),a("div",{staticClass:"viewColum allViewArea2"},[a("header",[a("div",{staticClass:"titleBox"},[t._v("能耗趋势")]),t._v(" "),a("div",{staticClass:"energyArea2Tabs"},[a("el-tabs",{attrs:{type:"card"},on:{"tab-click":t.viewsTrendTypeChange},model:{value:t.energyArea2Type,callback:function(e){t.energyArea2Type=e},expression:"energyArea2Type"}},[a("el-tab-pane",{attrs:{label:"电",name:"0"}}),t._v(" "),a("el-tab-pane",{attrs:{label:"水",name:"1"}}),t._v(" "),a("el-tab-pane",{attrs:{label:"气",name:"2"}})],1)],1)]),t._v(" "),a("div",{staticClass:"viewItemContent"},[a("lineEchart",{key:t.energyTrend0.id,attrs:{datas:t.energyTrend0.echarts}}),t._v(" "),a("lineEchart",{key:t.energyTrend1.id,attrs:{datas:t.energyTrend1.echarts}}),t._v(" "),a("lineEchart",{key:t.energyTrend2.id,attrs:{datas:t.energyTrend2.echarts}})],1)])]),t._v(" "),a("div",{staticClass:"viewRow"},[a("div",{staticClass:"viewColum energyArea3"},[a("header",[a("div",{staticClass:"titleBox"},[t._v("电能峰平谷")]),t._v(" "),a("div",{staticClass:"queryBox"},[a("el-select",{staticClass:"dateUnitSelectItem",attrs:{placeholder:"请选择",clearable:""},on:{change:t.dateTypeChange},model:{value:t.dateUnit,callback:function(e){t.dateUnit=e},expression:"dateUnit"}},t._l(t.dateOptions,function(t){return a("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})})),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"year"==t.dateUnit,expression:" dateUnit=='year' "}],staticClass:"yearRangeBox"},[a("el-date-picker",{attrs:{type:"year","value-format":"yyyy",placeholder:"请选择"},model:{value:t.dateRangeValue,callback:function(e){t.dateRangeValue=e},expression:"dateRangeValue"}})],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"month"==t.dateUnit,expression:" dateUnit=='month' "}],staticClass:"yearRangeBox"},[a("el-date-picker",{attrs:{format:"yyyy-M","value-format":"yyyyMM",type:"month",placeholder:"请选择"},model:{value:t.dateRangeValue,callback:function(e){t.dateRangeValue=e},expression:"dateRangeValue"}})],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"day"==t.dateUnit,expression:" dateUnit=='day' "}],staticClass:"yearRangeBox"},[a("el-date-picker",{attrs:{format:"yyyy-M-d","value-format":"yyyyMMdd",type:"date",placeholder:"请选择"},model:{value:t.dateRangeValue,callback:function(e){t.dateRangeValue=e},expression:"dateRangeValue"}})],1),t._v(" "),a("div",[a("el-button",{staticClass:"area3-QueryDateBtn",on:{click:t.viewsQueryRangeData}},[a("i"),a("span",[t._v("查询")])])],1)],1)]),t._v(" "),t._m(3)]),t._v(" "),a("div",{staticClass:"viewColum energyArea4"},[t._m(4),t._v(" "),a("div",{staticClass:"viewItemContent"},[a("div",{staticClass:"head"},[a("span",[t._v("营收")]),a("div",{staticClass:"incomeBox"},[t._v(t._s(t.finance_info.real_time_income))])]),t._v(" "),a("div",{staticClass:"head"},[a("span",[t._v("入住率")]),a("div",{staticClass:"perBox"},[t._v(t._s(t.finance_info.check_in_rate)+"%")])]),t._v(" "),a("div",{staticClass:"chartsBox"},[t._m(5),t._v(" "),a("div",{staticClass:"type2"},[t._m(6),t._v(" "),a("div",{staticClass:"typeTitleBox"},[a("div",{staticClass:"typeTitleText"},[t._v("每房晚能耗")]),t._v(" "),a("div",{staticClass:"typeTitleVal"},[a("div",[t._v(t._s(t.finance_info.house_num[0])+"/"+t._s(t.finance_info.house_num[1]))]),t._v(" "),a("p",[t._v("房位数")])])])]),t._v(" "),a("div",{staticClass:"type2"},[t._m(7),t._v(" "),a("div",{staticClass:"typeTitleBox"},[a("div",{staticClass:"typeTitleText"},[t._v("每餐位能耗")]),t._v(" "),a("div",{staticClass:"typeTitleVal"},[a("div",[t._v(t._s(t.finance_info.seat_num[0])+"/"+t._s(t.finance_info.seat_num[1]))]),t._v(" "),a("p",[t._v("餐位数")])])])])])])])])])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"totalEnergyChartBox",attrs:{id:"energyChart1"}},[e("div",{staticClass:"fingerContainer energyFinger1"},[e("div",{staticClass:"fingerBox"})]),this._v(" "),e("div",{staticClass:"percentageTextTip"},[e("span",{staticClass:"percentageRealVal"})])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"totalEnergyChartBox",attrs:{id:"energyChart2"}},[e("div",{staticClass:"fingerContainer energyFinger2"},[e("div",{staticClass:"fingerBox"})]),this._v(" "),e("div",{staticClass:"percentageTextTip"},[e("span",{staticClass:"percentageRealVal"})])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"totalEnergyChartBox",attrs:{id:"energyChart3"}},[e("div",{staticClass:"fingerContainer energyFinger3"},[e("div",{staticClass:"fingerBox"})]),this._v(" "),e("div",{staticClass:"percentageTextTip"},[e("span",{staticClass:"percentageRealVal"})])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"viewItemContent"},[a("div",{staticClass:"energyArea3Item"},[a("div",{staticClass:"head"},[a("div",{staticClass:"type1"},[t._v("谷时用电")]),t._v(" "),a("div",{staticClass:"type2"},[t._v("峰时用电")]),t._v(" "),a("div",{staticClass:"type3"},[t._v("平时用电")])]),t._v(" "),a("div",{staticClass:"content"},[a("div",{attrs:{id:"energyArea3Chart1"}}),t._v(" "),a("div",{attrs:{id:"energyArea3Chart2"}})])]),t._v(" "),a("div",{staticClass:"energyArea3Item"},[a("div",{staticClass:"head"},[a("div",{staticClass:"type1"},[t._v("谷时费用")]),t._v(" "),a("div",{staticClass:"type2"},[t._v("峰时费用")]),t._v(" "),a("div",{staticClass:"type3"},[t._v("平时费用")])]),t._v(" "),a("div",{staticClass:"content"},[a("div",{attrs:{id:"energyArea3Chart3"}}),t._v(" "),a("div",{attrs:{id:"energyArea3Chart4"}})])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("header",[e("div",{staticClass:"titleBox"},[this._v("财务情况")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"type1"},[e("div",{attrs:{id:"energyArea4Chart1"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"typeChartBox"},[a("div",[a("div",{attrs:{id:"energyArea4Chart2"}}),t._v(" "),a("div",{staticClass:"centerType"},[t._v("水")])]),t._v(" "),a("div",[a("div",{attrs:{id:"energyArea4Chart3"}}),t._v(" "),a("div",{staticClass:"centerType"},[t._v("电")])]),t._v(" "),a("div",[a("div",{attrs:{id:"energyArea4Chart4"}}),t._v(" "),a("div",{staticClass:"centerType"},[t._v("气")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"typeChartBox"},[a("div",[a("div",{attrs:{id:"energyArea4Chart5"}}),t._v(" "),a("div",{staticClass:"centerType"},[t._v("水")])]),t._v(" "),a("div",[a("div",{attrs:{id:"energyArea4Chart6"}}),t._v(" "),a("div",{staticClass:"centerType"},[t._v("电")])]),t._v(" "),a("div",[a("div",{attrs:{id:"energyArea4Chart7"}}),t._v(" "),a("div",{staticClass:"centerType"},[t._v("气")])])])}]};var p=function(t){a("3w0Z")},f=a("VU/8")(h.a,m,!1,p,"data-v-1f00964b",null).exports,v=a("VB4Q"),_={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"energyAnalysis"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[t._v("首页")]),t._v(" "),a("el-breadcrumb-item",[t._v("能源管理系统")]),t._v(" "),a("el-breadcrumb-item",[t._v("用能分析")])],1),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading1,expression:"loading1"}],staticClass:"boxs chartTables",attrs:{"element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.3)"}},[a("div",{staticClass:"chartTit"},[a("div",{staticClass:"chartLeftTit"},[a("div",{staticClass:"tit1"},[t._v("区域能耗 | ")]),t._v(" "),a("div",{staticClass:"analysisBoxs analysisBoxs1"},[a("el-select",{on:{change:t.areaDateTypeChange},model:{value:t.areaDateType,callback:function(e){t.areaDateType=e},expression:"areaDateType"}},t._l(t.areaDateTypes,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("div",{staticClass:"analysisBoxs"},["year"==t.areaDateType?a("el-date-picker",{attrs:{"value-format":"yyyy",type:"year",placeholder:"请选择"},model:{value:t.areaDate,callback:function(e){t.areaDate=e},expression:"areaDate "}}):t._e(),t._v(" "),"month"==t.areaDateType?a("el-date-picker",{attrs:{type:"month","value-format":"yyyyMM",placeholder:"请选择"},model:{value:t.areaDate,callback:function(e){t.areaDate=e},expression:"areaDate"}}):t._e(),t._v(" "),"day"==t.areaDateType?a("el-date-picker",{attrs:{type:"date","value-format":"yyyyMMdd",placeholder:"请选择"},model:{value:t.areaDate,callback:function(e){t.areaDate=e},expression:"areaDate"}}):t._e()],1),t._v(" "),a("div",{staticClass:"searchBoxs",on:{click:t.areaQueryData}},[a("i",{staticClass:"el-icon-search"}),t._v(" "),a("span",[t._v("查询")])])]),t._v(" "),a("div",{staticClass:"chartRightTit"},t._l(t.tabs,function(e,s){return a("el-button",{key:e.id,class:{currData:t.iscur==s},attrs:{type:"default"},on:{click:function(e){t.loadBarData(s)}}},[t._v(t._s(e.name))])}))]),t._v(" "),a("EchartsAnalysis",{attrs:{data:t.data}})],1),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading2,expression:"loading2"}],staticClass:"boxs chartTables2",attrs:{"element-loading-background":"rgba(0, 0, 0, 0.5)","element-loading-spinner":"el-icon-loading"}},[a("div",{staticClass:"chartTit"},[a("div",{staticClass:"chartLeftTit"},[a("div",{staticClass:"tit1"},[t._v("设备能耗 | ")]),t._v(" "),a("div",{staticClass:"analysisBoxs analysisBoxs1"},[a("el-select",{on:{change:t.deviceDateTypeChange},model:{value:t.deviceDateType,callback:function(e){t.deviceDateType=e},expression:"deviceDateType"}},t._l(t.deviceDateTypes,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("div",{staticClass:"analysisBoxs"},["year"==t.deviceDateType?a("el-date-picker",{attrs:{type:"year","value-format":"yyyy",placeholder:"请选择"},model:{value:t.deviceDate,callback:function(e){t.deviceDate=e},expression:"deviceDate"}}):t._e(),t._v(" "),"month"==t.deviceDateType?a("el-date-picker",{attrs:{type:"month","value-format":"yyyyMM",placeholder:"请选择"},model:{value:t.deviceDate,callback:function(e){t.deviceDate=e},expression:"deviceDate"}}):t._e(),t._v(" "),"day"==t.deviceDateType?a("el-date-picker",{attrs:{type:"date","value-format":"yyyyMMdd",placeholder:"请选择"},model:{value:t.deviceDate,callback:function(e){t.deviceDate=e},expression:"deviceDate"}}):t._e()],1),t._v(" "),a("div",{staticClass:"searchBoxs",on:{click:t.deviceQueryData}},[a("i",{staticClass:"el-icon-search"}),t._v(" "),a("span",[t._v("查询")])])]),t._v(" "),t._m(0)])])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"chartContent"},[e("div",{staticClass:"charts2Left",attrs:{id:"deviceLeft"}}),this._v(" "),e("div",{staticClass:"charts2Right",attrs:{id:"deviceRight"}})])}]};var g=function(t){a("4kQI")},b=a("VU/8")(v.a,_,!1,g,"data-v-59c110da",null).exports,y=a("lExR"),w={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"readNumber",attrs:{"element-loading-background":"rgba(0, 0, 0, 0.5)","element-loading-spinner":"el-icon-loading"}},[a("div",{staticClass:"head"},[a("div",{staticClass:"type"},[a("span",{class:{active:1==t.currentType},on:{click:function(e){t.changeType(1)}}},[t._v("区域\n        "),t._m(0)]),t._v(" "),a("span",{class:{active:2==t.currentType},on:{click:function(e){t.changeType(2)}}},[t._v("系统")])]),t._v(" "),a("div",{staticClass:"search"},[a("div",{staticClass:"limition"},[1==t.currentType?[a("el-select",{staticClass:"querySelectItem",attrs:{placeholder:"选择楼层",clearbel:""},on:{change:t.choseQuery1},model:{value:t.areaForm.id1,callback:function(e){t.$set(t.areaForm,"id1",e)},expression:"areaForm.id1"}},[a("el-option",{attrs:{label:"选择楼层",value:""}}),t._v(" "),t._l(t.areaData1,function(t){return a("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})})],2)]:t._e(),t._v(" "),1==t.currentType?a("el-select",{staticClass:"querySelectItem",attrs:{placeholder:"选择区间"},on:{change:t.choseQuery2},model:{value:t.areaForm.id2,callback:function(e){t.$set(t.areaForm,"id2",e)},expression:"areaForm.id2"}},[a("el-option",{attrs:{label:"选择区间",value:""}}),t._v(" "),t._l(t.areaData2,function(t){return a("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})})],2):t._e(),t._v(" "),1==t.currentType?a("el-select",{staticClass:"querySelectItem",attrs:{placeholder:"选择区域"},model:{value:t.areaForm.id3,callback:function(e){t.$set(t.areaForm,"id3",e)},expression:"areaForm.id3"}},[a("el-option",{attrs:{label:"选择区域",value:""}}),t._v(" "),t._l(t.areaData3,function(t){return a("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})})],2):t._e(),t._v(" "),2==t.currentType?a("el-select",{staticClass:"querySelectItem",attrs:{placeholder:"选择系统",clearbel:""},on:{change:t.choseQuery4},model:{value:t.sysForm.id1,callback:function(e){t.$set(t.sysForm,"id1",e)},expression:"sysForm.id1"}},[a("el-option",{attrs:{label:"选择系统",value:""}}),t._v(" "),t._l(t.sysData1,function(t){return a("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})})],2):t._e(),t._v(" "),2==t.currentType?a("el-select",{staticClass:"querySelectItem",attrs:{placeholder:"选择区域",clearbel:""},model:{value:t.sysForm.id2,callback:function(e){t.$set(t.sysForm,"id2",e)},expression:"sysForm.id2"}},[a("el-option",{attrs:{label:"选择区域",value:""}}),t._v(" "),t._l(t.sysData2,function(t){return a("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})})],2):t._e()],2),t._v(" "),a("div",{staticClass:"btn22"},[a("el-button",{staticClass:"metersQueryBtn",attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.query}},[t._v("查询")])],1)])]),t._v(" "),a("div",{staticClass:"con"},[a("div",{staticClass:"parts"},[a("div",{staticClass:"part boxs realTime"},[a("div",{staticClass:"boxsTit"},[t._v("实时能耗")]),t._v(" "),a("div",{staticClass:"fir"},[a("div",{staticClass:"box",on:{click:function(e){t.showRealTime(1)}}},[a("div",{staticClass:"cont"},[a("div",{staticClass:"numbers"},t._l(10,function(e,s){return a("span",{domProps:{textContent:t._s(t.shishi.shui[s])}})})),t._v(" "),a("div",{staticClass:"danwei"},[t._v("m³")])]),t._v(" "),a("div",{staticClass:"types"},[t._v("用水总量")])]),t._v(" "),a("div",{staticClass:"box",on:{click:function(e){t.showRealTime(0)}}},[a("div",{staticClass:"cont"},[a("div",{staticClass:"numbers"},t._l(10,function(e,s){return a("span",{domProps:{textContent:t._s(t.shishi.dian[s])}})})),t._v(" "),a("div",{staticClass:"danwei"},[t._v("kw/h")])]),t._v(" "),a("div",{staticClass:"types"},[t._v("用电总量")])]),t._v(" "),a("div",{staticClass:"box",on:{click:function(e){t.showRealTime(2)}}},[a("div",{staticClass:"cont"},[a("div",{staticClass:"numbers"},t._l(10,function(e,s){return a("span",{domProps:{textContent:t._s(t.shishi.qi[s])}})})),t._v(" "),a("div",{staticClass:"danwei"},[t._v("m³")])]),t._v(" "),a("div",{staticClass:"types"},[t._v("用气总量")])])])]),t._v(" "),a("div",{staticClass:"part boxs"},[a(t.shuiComponent,{key:t.shui.id,ref:"lineEchartssss1",tag:"component",attrs:{datas:t.shui.echarts}})],1)]),t._v(" "),a("div",{staticClass:"parts"},[a("div",{staticClass:"part boxs"},[a(t.qiComponent,{key:t.qi.id,ref:"lineEchartssss1",tag:"component",attrs:{datas:t.qi.echarts}})],1),t._v(" "),a("div",{staticClass:"part boxs"},[a(t.dianComponent,{key:t.dian.id,ref:"lineEchartssss1",tag:"component",attrs:{datas:t.dian.echarts}})],1)])]),t._v(" "),a("Dialog",{ref:"dialog",staticStyle:{display:"flex","flex-direction":"column"},attrs:{wid:"578px",hei:"536px",tit:"记录详情"}},[a("div",{staticClass:"showBox2",staticStyle:{height:"486px"}},t._l(t.realtimeData,function(e){return a("div",{staticClass:"itemlist",staticStyle:{height:"486px","overflow-y":"auto"}},t._l(e,function(e){return a("div",{staticClass:"parts"},[a("div",{staticClass:"content"},[a("div",{staticClass:"pic",class:{realtime0:0==t.realtimeType,realtime1:1==t.realtimeType,realtime2:2==t.realtimeType}},[a("div",{staticClass:"numbers"},t._l(10,function(s,i){return a("span",{domProps:{textContent:t._s(e[1][0].data[i])}})})),t._v(" "),a("div",{staticClass:"danwei"},[t._v("kw/h")])]),t._v(" "),a("div",{staticClass:"realtimeCon",staticStyle:{width:"100%",overflow:"hidden","padding-top":".1rem"}},[a("div",{staticClass:"types",staticStyle:{height:"216px","overflow-y":"auto"}},[e[2].length>0?a("div",{staticClass:"typesItemBox"},[a("div",{staticClass:"title"},[t._v(t._s(t.realTimeTypeMap.type_map[2]))]),t._v(" "),t._l(e[2],function(e){return a("div",[a("span",[t._v(t._s(e.title)+" :")]),t._v(" "),a("span",[t._v(t._s(e.data))])])})],2):t._e(),t._v(" "),e[3].length>0?a("div",{staticClass:"typesItemBox"},[a("div",{staticClass:"title"},[t._v(t._s(t.realTimeTypeMap.type_map[3]))]),t._v(" "),t._l(e[3],function(e){return a("div",[a("span",[t._v(t._s(e.title)+" :")]),t._v(" "),a("span",[t._v(t._s(e.data))])])})],2):t._e(),t._v(" "),e[4].length>0?a("div",{staticClass:"typesItemBox"},[a("div",{staticClass:"title"},[t._v(t._s(t.realTimeTypeMap.type_map[4]))]),t._v(" "),t._l(e[4][0].data,function(e){return a("div",[a("span",[t._v(t._s(e.title)+" :")]),t._v(" "),a("span",[t._v(t._s(e.value))])])})],2):t._e()])])]),t._v(" "),a("div",{staticClass:"leixin"},[t._v("\n          "+t._s(e.device)+"\n        ")])])}))}))])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"spacing"},[e("div",{staticClass:"to-top"}),this._v(" "),e("div",{staticClass:"to-bottom"})])}]};var C=function(t){a("rwiD"),a("DAod")},x=a("VU/8")(y.a,w,!1,C,"data-v-324d2b82",null).exports,k=a("E5nt"),D={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"history",attrs:{"element-loading-background":"rgba(0, 0, 0, 0.5)","element-loading-spinner":"el-icon-loading","element-loading-text":"拼命加载中"}},[a("div",{staticClass:"itemsBox"},[a("div",{staticClass:"queryBox"},[a("el-select",{attrs:{placeholder:"楼栋范围"},on:{change:t.areaData1Chang},model:{value:t.areaData.data1,callback:function(e){t.$set(t.areaData,"data1",e)},expression:"areaData.data1"}},t._l(t.areaData1Array,function(t){return a("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})})),t._v(" "),a("el-select",{directives:[{name:"show",rawName:"v-show",value:t.areaData2Array.length>0,expression:"areaData2Array.length>0"}],attrs:{placeholder:"楼栋"},on:{change:t.areaData2Chang},model:{value:t.areaData.data2,callback:function(e){t.$set(t.areaData,"data2",e)},expression:"areaData.data2"}},t._l(t.areaData2Array,function(t){return a("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})})),t._v(" "),a("el-select",{directives:[{name:"show",rawName:"v-show",value:t.areaData3Array.length>0,expression:"areaData3Array.length>0"}],attrs:{placeholder:"楼层范围"},on:{change:t.areaData3Chang},model:{value:t.areaData.data3,callback:function(e){t.$set(t.areaData,"data3",e)},expression:"areaData.data3"}},t._l(t.areaData3Array,function(t){return a("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})})),t._v(" "),a("el-select",{directives:[{name:"show",rawName:"v-show",value:t.areaData4Array.length>0,expression:"areaData4Array.length>0"}],attrs:{placeholder:"楼层"},on:{change:t.areaData4Chang},model:{value:t.areaData.data4,callback:function(e){t.$set(t.areaData,"data4",e)},expression:"areaData.data4"}},t._l(t.areaData4Array,function(t){return a("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})})),t._v(" "),a("el-date-picker",{attrs:{align:"right",type:"month","value-format":"yyyyMM",placeholder:"选择日期"},model:{value:t.formData.date,callback:function(e){t.$set(t.formData,"date",e)},expression:"formData.date"}}),t._v(" "),a("div",[a("el-button",{staticClass:"queryData",attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.queryClick}},[t._v("查询")])],1)],1),t._v(" "),a("div",[a("div",{directives:[{name:"show",rawName:"v-show",value:0!=t.formData.floor_id,expression:"formData.floor_id !=0"}],staticClass:"exBth",on:{click:t.openUploadWin}},[a("span"),t._v(" "),a("span",[t._v("批量导入")])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:0!=t.formData.floor_id,expression:"formData.floor_id !=0"}],staticClass:"exBth",on:{click:t.takeIn}},[a("span"),t._v(" "),a("span",[t._v("单个录入")])]),t._v(" "),a("div",{staticClass:"exBth",on:{click:t.downloadModule}},[a("span"),t._v(" "),a("span",[t._v("模板下载")])])])]),t._v(" "),a("div",{staticClass:"userTableContainer fireAlarmTable",staticStyle:{flex:"1",display:"flex","flex-direction":"column"}},[a("el-table",{staticClass:" tableHeadBlue",staticStyle:{width:"100%",flex:"1","box-sizing":"border-box"},attrs:{data:t.curPageData,height:"500"}},[a("el-table-column",{attrs:{prop:"show_id",label:"序号","min-width":"10%"}}),t._v(" "),a("el-table-column",{attrs:{prop:"area_name",label:"区域名称","min-width":"20%"}}),t._v(" "),a("el-table-column",{attrs:{prop:"used_water",label:"水用量","min-width":"10%"}}),t._v(" "),a("el-table-column",{attrs:{prop:"used_water_price",label:"水费用","min-width":"10%"}}),t._v(" "),a("el-table-column",{attrs:{prop:"used_electric",label:"电用量","min-width":"10%"}}),t._v(" "),a("el-table-column",{attrs:{prop:"used_electric_price",label:"电费用","min-width":"10%"}}),t._v(" "),a("el-table-column",{attrs:{prop:"used_gas",label:"气用量","min-width":"10%"}}),t._v(" "),a("el-table-column",{attrs:{prop:"used_gas_price",label:"气费用","min-width":"10%"}}),t._v(" "),a("el-table-column",{attrs:{prop:"income",label:"收入","min-width":"10%"}}),t._v(" "),a("el-table-column",{attrs:{prop:"rent_house_num",label:"租房量","min-width":"10%"}}),t._v(" "),a("el-table-column",{attrs:{prop:"date",label:"日期","min-width":"20%"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作","min-width":"15%"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.editRecord(e.row)}}},[t._v("修改")]),t._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.openDeleteDialog(e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("div",{staticClass:"paginationBox"},[a("div",{staticClass:"totalPageNumBox"},[t._v("共"+t._s(t.formData.pageCount)+"页")]),t._v(" "),a("div",{staticClass:"el-input el-pagination__editor is-in-pagination curPageBox"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.page_index,expression:"formData.page_index"}],staticClass:"el-input__inner",attrs:{type:"number",autocomplete:"off"},domProps:{value:t.formData.page_index},on:{input:function(e){e.target.composing||t.$set(t.formData,"page_index",e.target.value)}}}),t._v(" "),a("span",{on:{click:t.toInputPage}},[t._v("GO")])]),t._v(" "),a("el-pagination",{attrs:{"current-page":t.formData.page_index,"page-size":t.formData.one_page_num,layout:"prev, pager, next",total:t.formData.total},on:{"current-change":t.currentPageChange}})],1)],1),t._v(" "),a("el-dialog",{staticClass:"metersHistoryDialogBox",attrs:{title:t.dialogTit,visible:t.editInfoDialogVisible,"close-on-click-modal":!1},on:{"update:visible":function(e){t.editInfoDialogVisible=e}}},[a("div",{staticClass:"showBox2 historyBox",staticStyle:{padding:".2rem 0 0 .2rem"}},[a("div",[a("div",{staticClass:"formGroup"},[a("div",{staticClass:"name"},[t._v("区域"),a("i")]),t._v(" "),a("div",{staticClass:"inpArea"},[a("el-input",{attrs:{placeholder:"请输入",disabled:""},model:{value:t.dialogInfoObj.area_name,callback:function(e){t.$set(t.dialogInfoObj,"area_name",e)},expression:"dialogInfoObj.area_name"}})],1)]),t._v(" "),a("div",{staticClass:"formGroup"},[a("div",{staticClass:"name"},[t._v("水用量"),a("i")]),t._v(" "),a("div",{staticClass:"inpArea"},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:t.dialogInfoObj.used_water,callback:function(e){t.$set(t.dialogInfoObj,"used_water",e)},expression:"dialogInfoObj.used_water"}})],1)]),t._v(" "),a("div",{staticClass:"formGroup"},[a("div",{staticClass:"name"},[t._v("水费用"),a("i")]),t._v(" "),a("div",{staticClass:"inpArea"},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:t.dialogInfoObj.used_water_price,callback:function(e){t.$set(t.dialogInfoObj,"used_water_price",e)},expression:"dialogInfoObj.used_water_price"}})],1)]),t._v(" "),a("div",{staticClass:"formGroup"},[a("div",{staticClass:"name"},[t._v("电用量"),a("i")]),t._v(" "),a("div",{staticClass:"inpArea"},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:t.dialogInfoObj.used_electric,callback:function(e){t.$set(t.dialogInfoObj,"used_electric",e)},expression:"dialogInfoObj.used_electric"}})],1)]),t._v(" "),a("div",{staticClass:"formGroup"},[a("div",{staticClass:"name"},[t._v("电费用"),a("i")]),t._v(" "),a("div",{staticClass:"inpArea"},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:t.dialogInfoObj.used_electric_price,callback:function(e){t.$set(t.dialogInfoObj,"used_electric_price",e)},expression:"dialogInfoObj.used_electric_price"}})],1)]),t._v(" "),a("div",{staticClass:"formGroup"},[a("div",{staticClass:"name"},[t._v("气用量"),a("i")]),t._v(" "),a("div",{staticClass:"inpArea"},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:t.dialogInfoObj.used_gas,callback:function(e){t.$set(t.dialogInfoObj,"used_gas",e)},expression:"dialogInfoObj.used_gas"}})],1)]),t._v(" "),a("div",{staticClass:"formGroup"},[a("div",{staticClass:"name"},[t._v("气费用"),a("i")]),t._v(" "),a("div",{staticClass:"inpArea"},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:t.dialogInfoObj.used_gas_price,callback:function(e){t.$set(t.dialogInfoObj,"used_gas_price",e)},expression:"dialogInfoObj.used_gas_price"}})],1)]),t._v(" "),a("div",{staticClass:"formGroup"},[a("div",{staticClass:"name"},[t._v("收入"),a("i")]),t._v(" "),a("div",{staticClass:"inpArea"},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:t.dialogInfoObj.income,callback:function(e){t.$set(t.dialogInfoObj,"income",e)},expression:"dialogInfoObj.income"}})],1)]),t._v(" "),a("div",{staticClass:"formGroup"},[a("div",{staticClass:"name"},[t._v("租房量"),a("i")]),t._v(" "),a("div",{staticClass:"inpArea"},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:t.dialogInfoObj.rent_house_num,callback:function(e){t.$set(t.dialogInfoObj,"rent_house_num",e)},expression:"dialogInfoObj.rent_house_num"}})],1)]),t._v(" "),a("div",{staticClass:"formGroup"},[a("div",{staticClass:"name"},[t._v("日期"),a("i")]),t._v(" "),a("div",{staticClass:"inpArea"},[a("el-date-picker",{attrs:{type:"datetime",format:"yyyy-MM-dd HH:mm","value-format":"yyyy-MM-dd HH:mm",disabled:t.isEdit,placeholder:"选择日期时间"},model:{value:t.dialogInfoObj.date,callback:function(e){t.$set(t.dialogInfoObj,"date",e)},expression:"dialogInfoObj.date"}})],1)])])]),t._v(" "),a("div",{staticClass:"historyBtn"},[a("span",{on:{click:t.cancleImport}},[t._v("取消")]),t._v(" "),a("span",{on:{click:t.saveRecordInfo}},[t._v("确定")])]),t._v(" "),a("bubbleTip",{attrs:{tipText:t.bubbleTip}})],1),t._v(" "),a("el-dialog",{staticClass:"dialogBox deleteInfoDialog",attrs:{visible:t.deleteInfoDialog,"close-on-click-modal":!1},on:{"update:visible":function(e){t.deleteInfoDialog=e}}},[a("div",{staticClass:"deleteTextBox"},[t._v("是否确定删除此信息？")]),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"saveBtn",on:{click:t.confirmDelete}},[t._v("确定")]),t._v(" "),a("el-button",{staticClass:"cancleBtn",on:{click:function(e){t.deleteInfoDialog=!1}}},[t._v("取消")])],1),t._v(" "),a("bubbleTip",{attrs:{tipText:t.bubbleTip}})],1),t._v(" "),a("el-dialog",{staticClass:"metersHistoryDialogBox uploadFileBox",attrs:{title:"批量导入",visible:t.fileUploadDialogVisible,"close-on-click-modal":!1},on:{"update:visible":function(e){t.fileUploadDialogVisible=e},close:t.cancleUpdateFile}},[a("div",{staticClass:"upRowBox"},[a("span",[t._v("上传")]),a("span",{staticClass:"upBtn"},[t._v("选择文件")]),t._v(" "),a("form",{attrs:{id:"uploadFileForm",action:"https://tesing.china-tillage.com/hotel_energy/history_record",method:"post",enctype:"multipart/form-data",name:"fileForm"}},[a("input",{attrs:{type:"file",name:"upload_file",value:"选择文件",id:"upSysFile",accept:"application/vnd.ms-excel"},on:{change:t.fileChange}}),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.project_id,expression:"formData.project_id"}],attrs:{type:"hidden",name:"project_id"},domProps:{value:t.formData.project_id},on:{input:function(e){e.target.composing||t.$set(t.formData,"project_id",e.target.value)}}}),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.floor_id,expression:"formData.floor_id"}],attrs:{type:"hidden",name:"floor_id"},domProps:{value:t.formData.floor_id},on:{input:function(e){e.target.composing||t.$set(t.formData,"floor_id",e.target.value)}}}),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.sys_menu_id,expression:"formData.sys_menu_id"}],attrs:{type:"hidden",name:"sys_menu_id"},domProps:{value:t.formData.sys_menu_id},on:{input:function(e){e.target.composing||t.$set(t.formData,"sys_menu_id",e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"fileNameBox"},[t._v(t._s(t.updateFileName))]),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"cancleBtn",on:{click:t.cancleUpdateFile}},[t._v("取消")]),t._v(" "),a("el-button",{staticClass:"saveBtn",on:{click:t.confirmUpdateFile}},[t._v("确认")])],1)])],1)},staticRenderFns:[]};var S=function(t){a("R6do"),a("GVYO"),a("V3mI")},A={name:"ReadNumber",data:function(){return{timeModel:[],recordType:1,typeName:"电表名",tableData:[],loading:!0,currentType:1,areaData1:[],areaData2:[],areaData3:[],sysData1:[],sysData2:[],dianData:[],shuiData:[],qiData:[],areaForm:{project_id:1,floor_id:0,sys_menu_id:0,start_date:"",end_date:""},sysForm:{project_id:1,system_id:0,sys_menu_id:"",start_date:"",end_date:"",id1:"",id2:""}}},watch:{},methods:{initAreaData:function(t){var e=this,a={};a=1===this.currentType?this.areaForm:this.sysForm,this.dianData=[],this.shuiData=[],this.qiData=[],this.$http.post("/hotel_energy/history_read",a).then(function(a){"success"===a.data.message&&(1===e.currentType?(e.areaData1=a.data.data.area_level,a.data.data.history_read.map(function(t){a.data.data.type_map.map(function(a){a.arr.map(function(s){if(t.category_id!==s);else switch(t.start_read+=a.unit,t.end_read+=a.unit,t.use_value+=a.unit,a.type){case"电":e.dianData.push(t);break;case"水":e.shuiData.push(t);break;default:e.qiData.push(t)}})})})):(e.sysData1=a.data.data.sys_level,a.data.data.history_read.map(function(t){a.data.data.type_map.map(function(a){a.arr.map(function(s){if(t.category_id!==s);else switch(t.start_read+=a.unit,t.end_read+=a.unit,t.use_value+=a.unit,a.type){case"电":e.dianData.push(t);break;case"水":e.shuiData.push(t);break;default:e.qiData.push(t)}})})})),e.changeRecordType(t),e.loading=!1)})},changeRecordType:function(t){switch(this.recordType=t,1===t&&(this.typeName="电表名"),2===t&&(this.typeName="水表名"),3===t&&(this.typeName="气表名"),t){case 1:this.tableData=this.dianData;break;case 2:this.tableData=this.shuiData;break;default:this.tableData=this.qiData}},query:function(){this.loading=!0,1===this.currentType?(console.log(this.timeModel),this.timeModel?(this.areaForm.start_date=this.timeModel[0],this.areaForm.end_date=this.timeModel[1]):this.areaForm.start_date=this.areaForm.end_date="",this.areaForm.id1?this.areaForm.floor_id=this.areaForm.id1:this.areaForm.floor_id=0,this.areaForm.id2&&(this.areaForm.floor_id=this.areaForm.id2),this.areaForm.id3&&(this.areaForm.floor_id=this.areaForm.id3)):(this.timeModel?(this.sysForm.start_date=this.timeModel[0],this.sysForm.end_date=this.timeModel[1]):this.areaForm.start_date=this.areaForm.end_date="",this.sysForm.id1?this.sysForm.system_id=this.sysForm.id1:this.sysForm.system_id=0,this.sysForm.id2&&(this.sysForm.system_id=this.sysForm.id2)),this.initAreaData(this.recordType)},choseQuery1:function(){var t=this;this.areaForm.id1?this.areaData1.map(function(e,a){e.id==t.areaForm.id1&&(t.areaData2=e.child,t.areaForm.id2="",t.areaForm.id3="")}):(this.areaForm.id2="",this.areaForm.id3="",this.areaData2=[])},choseQuery2:function(){var t=this;this.areaData2.map(function(e,a){t.areaForm.id2?e.id==t.areaForm.id2&&(t.areaData3=e.child,t.areaForm.id3=""):(t.areaForm.id3="",t.areaData3=[])})},choseQuery4:function(){var t=this;this.sysData1.map(function(e){t.sysForm.id1?e.id==t.sysForm.id1&&(t.sysData2=e.child,t.sysForm.id2=""):(t.sysForm.id2="",t.sysData2=[])})},changeType:function(t){this.loading=!0,this.currentType=t;var e=new Date,a=new Date(e.getTime()-864e5);this.areaForm.start_date=this.sysForm.start_date=a.getFullYear().toString()+(a.getMonth()+1).toString()+a.getDate(),this.areaForm.end_date=this.sysForm.end_date=this.areaForm.start_date,this.timeModel=[this.areaForm.start_date,this.areaForm.end_date],this.initAreaData(1)}},created:function(){this.areaForm.sys_menu_id=this.$store.state.sysList[2].sys_menu_id,this.areaForm.project_id=this.$store.state.projectId;var t=new Date,e=new Date(t.getTime()-864e5);this.areaForm.start_date=e.getFullYear().toString()+(e.getMonth()+1).toString()+e.getDate(),this.areaForm.end_date=this.areaForm.start_date,this.sysForm.project_id=this.$store.state.projectId,this.sysForm.sys_menu_id=this.$store.state.sysList[2].sys_menu_id,this.timeModel=[this.areaForm.start_date,this.areaForm.end_date]},mounted:function(){this.initAreaData(1)},beforeDestroy:function(){},destroyed:function(){}},E={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"readNumber recordHistory",attrs:{"element-loading-background":"rgba(0, 0, 0, 0.5)","element-loading-spinner":"el-icon-loading"}},[a("div",{staticClass:"head"},[a("div",{staticClass:"timeSercher"},[a("el-date-picker",{attrs:{type:"daterange","value-format":"yyyyMMdd","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.timeModel,callback:function(e){t.timeModel=e},expression:"timeModel"}})],1),t._v(" "),a("div",{staticClass:"type"},[a("span",{class:{active:1==t.currentType},on:{click:function(e){t.changeType(1)}}},[t._v("区域\n        "),t._m(0)]),t._v(" "),a("span",{class:{active:2==t.currentType},on:{click:function(e){t.changeType(2)}}},[t._v("系统")])]),t._v(" "),a("div",{staticClass:"search"},[a("div",{staticClass:"limition"},[1==t.currentType?[a("el-select",{staticClass:"querySelectItem",attrs:{placeholder:"选择楼层",clearbel:""},on:{change:t.choseQuery1},model:{value:t.areaForm.id1,callback:function(e){t.$set(t.areaForm,"id1",e)},expression:"areaForm.id1"}},[a("el-option",{attrs:{label:"选择楼层",value:""}}),t._v(" "),t._l(t.areaData1,function(t){return a("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})})],2)]:t._e(),t._v(" "),1==t.currentType?a("el-select",{staticClass:"querySelectItem",attrs:{placeholder:"选择区间"},on:{change:t.choseQuery2},model:{value:t.areaForm.id2,callback:function(e){t.$set(t.areaForm,"id2",e)},expression:"areaForm.id2"}},[a("el-option",{attrs:{label:"选择区间",value:""}}),t._v(" "),t._l(t.areaData2,function(t){return a("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})})],2):t._e(),t._v(" "),1==t.currentType?a("el-select",{staticClass:"querySelectItem",attrs:{placeholder:"选择区域"},model:{value:t.areaForm.id3,callback:function(e){t.$set(t.areaForm,"id3",e)},expression:"areaForm.id3"}},[a("el-option",{attrs:{label:"选择区域",value:""}}),t._v(" "),t._l(t.areaData3,function(t){return a("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})})],2):t._e(),t._v(" "),2==t.currentType?a("el-select",{staticClass:"querySelectItem",attrs:{placeholder:"选择系统",clearbel:""},on:{change:t.choseQuery4},model:{value:t.sysForm.id1,callback:function(e){t.$set(t.sysForm,"id1",e)},expression:"sysForm.id1"}},[a("el-option",{attrs:{label:"选择系统",value:""}}),t._v(" "),t._l(t.sysData1,function(t){return a("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})})],2):t._e(),t._v(" "),2==t.currentType?a("el-select",{staticClass:"querySelectItem",attrs:{placeholder:"选择区域",clearbel:""},model:{value:t.sysForm.id2,callback:function(e){t.$set(t.sysForm,"id2",e)},expression:"sysForm.id2"}},[a("el-option",{attrs:{label:"选择区域",value:""}}),t._v(" "),t._l(t.sysData2,function(t){return a("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})})],2):t._e()],2),t._v(" "),a("div",{staticClass:"btn22"},[a("el-button",{staticClass:"metersQueryBtn",attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.query}},[t._v("查询")])],1)])]),t._v(" "),a("div",{staticClass:"con"},[a("div",{staticClass:"left"},[a("div",{staticClass:"naver",class:{active:1==t.recordType},on:{click:function(e){t.changeRecordType(1)}}},[a("span",[t._v("电")]),t._v(" "),a("span",[t._v("表")])]),t._v(" "),a("div",{staticClass:"naver",class:{active:2==t.recordType},on:{click:function(e){t.changeRecordType(2)}}},[a("span",[t._v("水")]),t._v(" "),a("span",[t._v("表")])]),t._v(" "),a("div",{staticClass:"naver",class:{active:3==t.recordType},on:{click:function(e){t.changeRecordType(3)}}},[a("span",[t._v("气")]),t._v(" "),a("span",[t._v("表")])])]),t._v(" "),a("div",{staticClass:"right"},[[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,height:"500"}},[a("el-table-column",{attrs:{prop:"name",label:t.typeName}}),t._v(" "),a("el-table-column",{attrs:{prop:"start_read",label:"起始读数"}}),t._v(" "),a("el-table-column",{attrs:{prop:"end_read",label:"截止读数"}}),t._v(" "),a("el-table-column",{attrs:{prop:"use_value",label:"使用值"}})],1)]],2)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"spacing"},[e("div",{staticClass:"to-top"}),this._v(" "),e("div",{staticClass:"to-bottom"})])}]};var I={name:"meterCopy",components:{ReadNumber:x,History:a("VU/8")(k.a,D,!1,S,"data-v-e9b65516",null).exports,RecordHistory:a("VU/8")(A,E,!1,function(t){a("HHIJ"),a("J0WJ")},"data-v-f0514984",null).exports},data:function(){return{viewPath:"",sysInfo:{}}},methods:{changeView:function(t){this.viewPath=t}},created:function(){this.sysInfo=this.$store.state.sysList[2],0!=this.sysInfo.role_string[5]?this.viewPath="ReadNumber":0!=this.sysInfo.role_string[6]?this.viewPath="History":this.viewPath="RecordHistory"},mounted:function(){}},L={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"meterCopy"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[t._v("首页")]),t._v(" "),a("el-breadcrumb-item",[t._v("能源管理系统")]),t._v(" "),a("el-breadcrumb-item",[t._v("三表远抄")])],1),t._v(" "),a("div",{staticClass:"contentBox"},[a("div",{staticClass:"meterNav"},[0!=t.sysInfo.role_string[5]?a("span",{class:{active:"ReadNumber"==t.viewPath},on:{click:function(e){t.changeView("ReadNumber")}}},[t._v("实时读数")]):t._e(),t._v(" "),0!=t.sysInfo.role_string[6]?a("span",{class:{active:"History"==t.viewPath},on:{click:function(e){t.changeView("History")}}},[t._v("历史记录录入")]):t._e(),t._v(" "),0!=t.sysInfo.role_string[10]?a("span",{class:{active:"RecordHistory"==t.viewPath},on:{click:function(e){t.changeView("RecordHistory")}}},[t._v("表具历史读数")]):t._e()]),t._v(" "),a("div",{staticClass:"meterCon boxs"},[a(t.viewPath,{tag:"component"})],1)])],1)},staticRenderFns:[]};var T=a("VU/8")(I,L,!1,function(t){a("V8GT")},"data-v-29904921",null).exports,B=a("mvHQ"),P=a.n(B),R=(a("yGdn"),a("KvKp")),M={computed:{},data:function(){return{hasSearch:!1,canEditMonth:{0:!1,1:!1,2:!1,3:!1,4:!1,5:!1,6:!1,7:!1,8:!1,9:!1,10:!1,11:!1},years:"",updateData:"",loading:!1,dateM:Number((new Date).getMonth()),isChangeing:!1,times:R.a.time(),allData:[{tit:"一月",id:"01",list:[{id:"power",plan:"3888",Actual:3900,tit:"用电"},{id:"water",plan:"1462",Actual:1200,tit:"用水"},{id:"fire",plan:"893",Actual:1384,tit:"用气"}]},{tit:"二月",id:"02",list:[{id:"power",plan:"",Actual:0,tit:"用电"},{id:"water",plan:"",Actual:0,tit:"用水"},{id:"fire",plan:"",Actual:0,tit:"用气"}]},{tit:"三月",id:"03",list:[{id:"power",plan:"",Actual:0,tit:"用电"},{id:"water",plan:"",Actual:0,tit:"用水"},{id:"fire",plan:"",Actual:0,tit:"用气"}]},{tit:"四月",id:"04",list:[{id:"power",plan:"",Actual:0,tit:"用电"},{id:"water",plan:"",Actual:0,tit:"用水"},{id:"fire",plan:"",Actual:0,tit:"用气"}]},{tit:"五月",id:"05",list:[{id:"power",plan:"",Actual:0,tit:"用电"},{id:"water",plan:"",Actual:0,tit:"用水"},{id:"fire",plan:"",Actual:0,tit:"用气"}]},{tit:"六月",id:"06",list:[{id:"power",plan:"",Actual:0,tit:"用电"},{id:"water",plan:"",Actual:0,tit:"用水"},{id:"fire",plan:"",Actual:0,tit:"用气"}]},{tit:"七月",id:"07",list:[{id:"power",plan:"",Actual:0,tit:"用电"},{id:"water",plan:"",Actual:0,tit:"用水"},{id:"fire",plan:"",Actual:0,tit:"用气"}]},{tit:"八月",id:"08",list:[{id:"power",plan:"",Actual:0,tit:"用电"},{id:"water",plan:"",Actual:0,tit:"用水"},{id:"fire",plan:"",Actual:0,tit:"用气"}]},{tit:"九月",id:"09",list:[{id:"power",plan:"",Actual:0,tit:"用电"},{id:"water",plan:"",Actual:0,tit:"用水"},{id:"fire",plan:"",Actual:0,tit:"用气"}]},{tit:"十月",id:"10",list:[{id:"power",plan:"",Actual:0,tit:"用电"},{id:"water",plan:"",Actual:0,tit:"用水"},{id:"fire",plan:"",Actual:0,tit:"用气"}]},{tit:"十一月",id:"11",list:[{id:"power",plan:"",Actual:0,tit:"用电"},{id:"water",plan:"",Actual:0,tit:"用水"},{id:"fire",plan:"",Actual:0,tit:"用气"}]},{tit:"十二月",id:"12",list:[{id:"power",plan:"",Actual:0,tit:"用电"},{id:"water",plan:"",Actual:0,tit:"用水"},{id:"fire",plan:"",Actual:0,tit:"用气"}]}],curYear:Number((new Date).getFullYear())}},methods:{isChange:function(t){for(var e in this.hasSearch=!1,this.isChangeing=!1,this.canEditMonth)this.canEditMonth[e]=!1},isSearch:function(){this.getData()},openChange:function(){if(this.hasSearch){var t=Number(this.years),e=this.curYear;if(t<e)this.isChangeing=!1,this.$message("不可编辑");else if(t>e){for(var a in this.canEditMonth)this.canEditMonth[a]=!0;this.isChangeing=!0}else if(t==e){for(var a in this.canEditMonth)a>this.dateM&&(this.canEditMonth[a]=!0);this.isChangeing=!0}}else this.$message("请先搜索当前年份数据")},ckId:function(t){var e="0";switch(t){case"power":e="0";break;case"water":e="1";break;case"fire":e="2"}return e},changeOk:function(){for(var t=this,e=t.allData,a=e.length,s={},i={},n={},o={},r=0;r<a;r++){var l=e[r],c=r+1;c<10&&(c="0"+c),i[c=c.toString()]=l.list[0].plan.toString(),n[c]=l.list[1].plan.toString(),o[c]=l.list[2].plan.toString()}s[0]=i,s[1]=n,s[2]=o,console.log(s);var d=P()(s),u={project_id:t.$store.state.projectId,year:t.years,update:d};t.$http.post("hotel_energy/energy_plan",u).then(function(e){console.log(e),0==e.data.code?(t.isChangeing=!1,t.$message({showClose:!0,message:"保存成功！",type:"success"})):t.$message(e.data.message)}).catch(function(e){t.isChangeing=!1,t.$message("保存失败！")})},getMonth:function(t){var e="";switch(t){case"01":e="一月";break;case"02":e="二月";break;case"03":e="三月";break;case"04":e="四月";break;case"05":e="五月";break;case"06":e="六月";break;case"07":e="七月";break;case"08":e="八月";break;case"09":e="九月";break;case"10":e="十月";break;case"11":e="十一月";break;case"12":e="十二月"}return e},getData:function(){var t=this,e=this,a={project_id:e.$store.state.projectId,year:e.years,update:e.updateData};e.loading=!0,e.$http.post("hotel_energy/energy_plan",a).then(function(a){if("0"==a.data.code){for(var s=a.data.data,i=s.query_year_actual,n=s.query_year_plan,o=[],r=1;r<13;r++){r<10&&(r="0"+r);var l={tit:e.getMonth(r.toString()),id:r,list:[{id:"power",plan:n[0][r],Actual:i[0][r],tit:"用电"},{id:"water",plan:n[1][r],Actual:i[1][r],tit:"用水"},{id:"fire",plan:n[2][r],Actual:i[2][r],tit:"用气"}]};o.push(l)}e.allData=o,e.loading=!1,e.hasSearch=!0}else t.$message.error(a.data.message),e.loading=!1,e.hasSearch=!1}).catch(function(t){console.log(t)})}},created:function(){this.getData(),this.years=(new Date).getFullYear().toString()},mounted:function(){}},N={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"powerSet",attrs:{"element-loading-background":"rgba(0, 0, 0, 0.5)","element-loading-spinner":"el-icon-loading"}},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[t._v("首页")]),t._v(" "),a("el-breadcrumb-item",[t._v("能源管理系统")]),t._v(" "),a("el-breadcrumb-item",[t._v("用能预设")])],1),t._v(" "),a("div",{staticClass:"presetContentBox boxs"},[a("div",{staticClass:"powerSetTit"},[a("div",{staticClass:"powerYearBox"},[a("el-date-picker",{attrs:{format:"yyyy","value-format":"yyyy",type:"year",placeholder:"请选择年份"},on:{change:t.isChange},model:{value:t.years,callback:function(e){t.years=e},expression:"years"}})],1),t._v(" "),a("el-button",{staticClass:"btns",attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.isSearch}},[t._v("搜索")]),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:!t.isChangeing,expression:"!isChangeing"}],staticClass:"btns",attrs:{type:"success",icon:"el-icon-edit"},on:{click:t.openChange}},[t._v("编辑")]),t._v(" "),t.isChangeing?a("el-button",{staticClass:"btns",attrs:{type:"success",icon:"el-icon-third-baocun"},on:{click:t.changeOk}},[t._v("完成")]):t._e(),t._v(" "),a("span",{staticClass:"timeBoxss"},[t._v("当前日期： "),a("span",{domProps:{textContent:t._s(t.times)}})])],1),t._v(" "),a("div",{staticClass:"powerSetBody"},t._l(t.allData,function(e,s){return a("div",{staticClass:"monBoxs boxs",class:{monBoxsBot:s>=8}},[a("div",{staticClass:"monTit"},[a("div",{staticClass:"monSpan",domProps:{textContent:t._s(e.tit)}}),t._v(" "),t._m(0,!0),t._v(" "),t._m(1,!0)]),t._v(" "),a("div",{staticClass:"monLists"},[a("ul",t._l(e.list,function(i,n){return a("li",{class:{noBot:n==e.list.length-1}},[a("div",{staticClass:"planBox"},[a("span",{domProps:{textContent:t._s("计划"+i.tit)}}),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:!(t.isChangeing&&t.canEditMonth[s]),expression:"!(isChangeing && canEditMonth[i])"}],class:{colorFF:!t.isChangeing,colorGray:t.isChangeing},domProps:{textContent:t._s(""===i.plan?"0":i.plan)}}),t._v(" "),a("input",{directives:[{name:"show",rawName:"v-show",value:t.isChangeing&&t.canEditMonth[s],expression:"isChangeing && canEditMonth[i]"},{name:"model",rawName:"v-model",value:i.plan,expression:"v0.plan"}],attrs:{placeholder:"未设置"},domProps:{value:i.plan},on:{input:function(e){e.target.composing||t.$set(i,"plan",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"actualBox"},[a("span",{domProps:{textContent:t._s("实际"+i.tit)}}),t._v(" "),a("span",{class:{colorFG:Number(i.Actual)<=Number(i.plan)&&0!=Number(i.Actual),colorFR:Number(i.Actual)>Number(i.plan),colorFF:0==i.Actual},domProps:{textContent:t._s(0==i.Actual&&s>t.dateM?"——":i.Actual)}})])])}))])])}))])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"monPonit"},[e("span",{staticClass:"monPonit0 colorG"}),this._v(" "),e("span",{staticClass:"monPonit1"},[this._v("节约")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"monPonit"},[e("span",{staticClass:"monPonit0 colorR"}),this._v(" "),e("span",{staticClass:"monPonit1"},[this._v("超标")])])}]};var F=a("VU/8")(M,N,!1,function(t){a("1MBa")},"data-v-6d854864",null).exports,O=a("3TXG"),j={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"reportTabBoxs reportMonth",attrs:{"element-loading-background":"rgba(0, 0, 0, 0.5)","element-loading-spinner":"el-icon-loading","element-loading-text":"拼命加载中"}},[s("div",{staticClass:"reportTabBoxsHead reportDayQu"},[s("el-select",{staticStyle:{float:"left"},attrs:{placeholder:"类型"},model:{value:t.formData.energy_type,callback:function(e){t.$set(t.formData,"energy_type",e)},expression:"formData.energy_type"}},[s("el-option",{attrs:{label:"电",value:"0"}}),t._v(" "),s("el-option",{attrs:{label:"水",value:"1"}}),t._v(" "),s("el-option",{attrs:{label:"气",value:"2"}})],1),t._v(" "),s("div",{staticClass:"dateBox",staticStyle:{float:"left"}},[s("el-date-picker",{staticClass:"reportDaySle",attrs:{"value-format":"yyyyMM",type:"month",placeholder:"月"},model:{value:t.formData.query_date,callback:function(e){t.$set(t.formData,"query_date",e)},expression:"formData.query_date"}})],1),t._v(" "),s("div",{staticClass:"thSearchBtn",on:{click:t.query}},[s("img",{attrs:{src:a("vwA9"),alt:""}}),t._v(" "),s("button",[t._v("查询")])]),t._v(" "),s("div",{staticClass:"thSearchBtn1",on:{click:t.export1}},[s("img",{attrs:{src:a("3gde"),alt:""}}),t._v(" "),s("button",[t._v("导出")])])],1),t._v(" "),s("div",{staticClass:"reportTablesBox"},[s("div",{staticClass:"con",class:{opacity0:1==t.loading},staticStyle:{height:"100%"}},[s("el-table",{staticClass:"monthTab firstTab",attrs:{data:t.tableData3,"cell-class-name":t.cell,height:"50vh"}},[s("el-table-column",{attrs:{prop:"index",label:"序号",width:"40"}}),t._v(" "),s("el-table-column",{attrs:{label:"名称"}},[s("el-table-column",{attrs:{prop:"day",label:"日期",width:t.columnw}})],1),t._v(" "),s("el-table-column",{attrs:{label:t.label.type}},[s("el-table-column",{attrs:{prop:"elecMount",label:t.label.text,width:t.columnw}}),t._v(" "),s("el-table-column",{attrs:{prop:"totalcaost",label:"总费用",width:t.columnw}})],1),t._v(" "),t._l(t.areaList,function(e){return[s("el-table-column",{attrs:{label:e.parent_area_til}},[t._l(e.sub_area,function(e){return[s("el-table-column",{attrs:{label:e.title}},[s("el-table-column",{attrs:{prop:e.id+"useage",label:"用量",width:t.columnw}}),t._v(" "),s("el-table-column",{attrs:{prop:e.id+"cost",label:"费用",width:t.columnw}})],1)]})],2)]})],2)],1)])])},staticRenderFns:[]};var U=function(t){a("4t0l")},V=a("VU/8")(O.a,j,!1,U,null,null).exports,$=a("NJWw"),z={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"reportTabBoxs reportMonth",attrs:{"element-loading-background":"rgba(0, 0, 0, 0.5)","element-loading-spinner":"el-icon-loading","element-loading-text":"拼命加载中"}},[s("div",{staticClass:"reportTabBoxsHead reportMonthQu"},[s("el-select",{staticStyle:{float:"left"},attrs:{placeholder:"类型"},model:{value:t.formData.energy_type,callback:function(e){t.$set(t.formData,"energy_type",e)},expression:"formData.energy_type"}},[s("el-option",{attrs:{label:"电",value:"0"}}),t._v(" "),s("el-option",{attrs:{label:"水",value:"1"}}),t._v(" "),s("el-option",{attrs:{label:"气",value:"2"}})],1),t._v(" "),s("div",{staticClass:"dateBox ",staticStyle:{float:"left"}},[s("el-date-picker",{attrs:{"value-format":"yyyy",type:"year",placeholder:"年"},model:{value:t.formData.query_date,callback:function(e){t.$set(t.formData,"query_date",e)},expression:"formData.query_date"}})],1),t._v(" "),s("div",{staticClass:"thSearchBtn",on:{click:t.query}},[s("img",{attrs:{src:a("vwA9"),alt:""}}),t._v(" "),s("button",[t._v("查询")])]),t._v(" "),s("div",{staticClass:"thSearchBtn1",on:{click:t.export1}},[s("img",{attrs:{src:a("3gde"),alt:""}}),t._v(" "),s("button",[t._v("导出")])])],1),t._v(" "),s("div",{staticClass:"reportTablesBox"},[s("div",{staticClass:"con",class:{opacity0:1==t.loading},staticStyle:{height:"100%"}},[s("el-table",{staticClass:"monthTab firstTab",attrs:{data:t.tableData3,"show-summary":"","cell-class-name":t.cell,height:"50vh"}},[s("el-table-column",{attrs:{prop:"index",label:"序号",width:"40"}}),t._v(" "),s("el-table-column",{attrs:{label:"名称"}},[s("el-table-column",{attrs:{prop:"month",label:"月份",width:t.columnw}})],1),t._v(" "),s("el-table-column",{attrs:{label:t.label.type}},[s("el-table-column",{attrs:{prop:"elecMount",label:t.label.text,width:t.columnw}}),t._v(" "),s("el-table-column",{attrs:{prop:"totalcaost",label:"总费用",width:t.columnw}})],1),t._v(" "),t._l(t.areaList,function(e){return[s("el-table-column",{attrs:{label:e.parnt}},[t._l(e.child_data,function(e){return[s("el-table-column",{attrs:{label:e.child}},[s("el-table-column",{attrs:{prop:e.id+"useage",label:"用量",width:t.columnw}}),t._v(" "),s("el-table-column",{attrs:{prop:e.id+"cost",label:"费用",width:t.columnw}})],1)]})],2)]})],2)],1)])])},staticRenderFns:[]};var q=function(t){a("AuFl")},H=a("VU/8")($.a,z,!1,q,null,null).exports,W=a("NKm9"),G={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"reportTabBoxs",staticStyle:{"min-height":"620px!important"},attrs:{"element-loading-background":"rgba(0, 0, 0, 0.5)","element-loading-spinner":"el-icon-loading","element-loading-text":"拼命加载中"}},[s("div",{staticClass:"reportTabBoxsHead"},[s("el-select",{staticStyle:{float:"left"},attrs:{placeholder:"日"},on:{change:t.currentSel},model:{value:t.formData.date_type,callback:function(e){t.$set(t.formData,"date_type",e)},expression:"formData.date_type"}},[s("el-option",{attrs:{label:"日",value:""}}),t._v(" "),s("el-option",{attrs:{label:"月",value:"month"}})],1),t._v(" "),s("span",{staticClass:"todaySpan",staticStyle:{"font-size":"0.14rem"}},[t._v(t._s(t.todaySpan))]),t._v(" "),s("div",{staticClass:"thSearchBtn",staticStyle:{"margin-left":"10px"},on:{click:t.queryCli}},[s("img",{attrs:{src:a("vwA9"),alt:""}}),t._v(" "),s("button",[t._v("查询")])]),t._v(" "),s("div",{staticClass:"thSearchBtn1",on:{click:t.export1}},[s("img",{attrs:{src:a("3gde"),alt:""}}),t._v(" "),s("button",[t._v("导出")])])],1),t._v(" "),s("div",{staticClass:"reportTablesBox reportLeader",class:{opacity0:1==t.loading}},[s("el-table",{staticClass:"leaderTab",staticStyle:{"min-height":"541px!important","border-bottom":"none!important"},attrs:{data:t.tableData3,"cell-class-name":t.cell,"show-summary":""}},[s("el-table-column",{attrs:{type:"index",label:"序号"}}),t._v(" "),s("el-table-column",{attrs:{"min-width":"140",label:"名称"}},[s("el-table-column",{attrs:{"min-width":"140",prop:"title",label:"指标"}})],1),t._v(" "),t._l(t.tabData,function(e){return[s("el-table-column",{attrs:{label:e.title}},[t._l(e.data,function(t){return[s("el-table-column",{attrs:{prop:e.title+t.title,label:t.title}})]})],2)]})],2)],1)])},staticRenderFns:[]};var Y=function(t){a("avrW")},K=a("VU/8")(W.a,G,!1,Y,null,null).exports,X=a("sZhX"),Q={components:{bubbleTip:X.a},data:function(){return{aa2:!0,bubbleTip:"",treeVal:"",data2:[{}],defaultProps:{children:"child",label:"title"},list:[],listChange:[],form:{},deletForm:{project_id:"",sys_menu_id:"",query_price:!0,price_set:""}}},mounted:function(){this.deletForm.sys_menu_id=this.$store.state.sysList[2].sys_menu_id,this.deletForm.project_id=this.$store.state.projectId,this.initQuery()},methods:{inputChange:function(t,e){/^([1-9]\d*|0)(\.\d{1,2})?$/.test(t.price)?this.chooseChange(t,e):(this.bubbleTipShow("价格输入不合法"),this.list[e].price="")},timeChange:function(t,e){if(this.list[e].start=this.list[e].dateRange[0],this.list[e].end=this.list[e].dateRange[1],0!=this.listChange.length){for(var a=0;a<this.listChange.length;a++)if(t.self_id==this.listChange[a].self_id)return void(this.listChange[a]=this.list[e]);this.listChange.push(t)}else this.listChange.push(t)},treeChange:function(t,e){var a=this.$refs.tree[e].getCheckedKeys();if(this.list[e].area=a,0!=this.listChange.length){for(var s=!0,i=0;i<this.listChange.length;i++)if(t.self_id==this.listChange[i].self_id)return s=!1,void(this.listChange[i]=this.list[e]);s&&this.listChange.push(t)}else this.listChange.push(t)},chooseChange:function(t,e){if(0!=this.listChange.length){for(var a=!0,s=0;s<this.listChange.length;s++)if(t.self_id==this.listChange[s].self_id)return a=!1,void(this.listChange[s]=t);a&&this.listChange.push(t)}else this.listChange.push(t)},setPrise:function(){var t=this;if(0==this.listChange.length)this.bubbleTipShow("没有任何修改");else{for(var e=0;e<this.listChange.length;e++){var a="";for(a in this.listChange[e])if(!this.listChange[e][a]||0==this.listChange[e][a].length)for(var s=0;s<this.list.length;s++)if(this.listChange[e].self_id==this.list[s].self_id)return void this.bubbleTipShow("请完善第"+(s+1)+"行信息")}this.listChange.map(function(t,e){t.myId&&delete t.self_id}),this.$http.post("/hotel_energy/statement",{project_id:this.deletForm.project_id,query_price:!0,sys_menu_id:this.deletForm.sys_menu_id,price_set:P()(this.listChange)}).then(function(e){0==e.data.code?(t.initQuery(),t.listChange=[],t.bubbleTipShow(e.data.data.result_data.handle_price_record[0])):t.bubbleTipShow(e.data.message)})}},initQuery:function(){var t=this,e=this.$store.state.sysList[2].sys_menu_id,a=this.$store.state.projectId;this.$http.post("/hotel_energy/statement",{project_id:a,sys_menu_id:e,query_price:!0}).then(function(e){if(0==e.data.code){t.data2=e.data.data.area_level;for(var a=0;a<e.data.data.result_data.price_set_record.length;a++)e.data.data.result_data.price_set_record[a].dateRange=[e.data.data.result_data.price_set_record[a].start,e.data.data.result_data.price_set_record[a].end];t.list=e.data.data.result_data.price_set_record}})},bubbleTipShow:function(t){this.bubbleTip=t,this.$store.state.bubbleShow=!0;var e=this;setTimeout(function(){e.$store.state.bubbleShow=!1},3e3)},addMode:function(){var t=Math.floor(900*Math.random())+600;this.list.push({energy:"",user_type:"",area:[],time_type:"",start:"",end:"",price:"",self_id:t,myId:!0}),this.listChange.push({energy:"",user_type:"",area:[],time_type:"",start:"",end:"",price:"",self_id:t,myId:!0})},removLi:function(t,e){var a=this;if(console.log(t),t.myId){this.list.splice(e,1);for(var s=0;s<this.listChange.length;s++)if(t.self_id==this.listChange[s].self_id)return void this.listChange.splice(s,1)}else this.deletForm.price_set=P()({self_id:t.self_id}),this.$http.post("/hotel_energy/statement",this.deletForm).then(function(s){if(0==s.data.code){a.bubbleTipShow("删除成功"),a.list.splice(e,1);for(var i=0;i<a.listChange.length;i++)t.self_id==a.listChange[i].self_id&&a.listChange.splice(i,1)}else a.bubbleTipShow(s.data.message)})},hideModel:function(){this.$emit("unitShowBool",!1)}}},J={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"unitDomBox thUnit"},[a("div",{staticClass:"unitPrice"},[a("span",{staticClass:"closeDoorInfo",on:{click:t.hideModel}},[t._v("×")]),t._v(" "),a("div",{staticClass:"unitHeadBox",staticStyle:{"font-size":"0.12rem"}},[t._v("单价预设")]),t._v(" "),a("el-form",{ref:"form",attrs:{model:t.form}},[a("ul",{staticClass:"unit titleUni"},[a("li",[t._v("序号")]),t._v(" "),a("li",[t._v("类型")]),t._v(" "),a("li",[t._v("能耗用途")]),t._v(" "),a("li",[t._v("表器选择")]),t._v(" "),a("li",[t._v("时段类型")]),t._v(" "),a("li",[t._v("时间段")]),t._v(" "),a("li",[t._v("价格")])]),t._v(" "),t._l(t.list,function(e,s){return a("ul",{staticClass:"itemsBox unit"},[a("li",[a("i",{staticClass:"liCloseBox el-icon-circle-close",on:{click:function(a){t.removLi(e,s)}}}),t._v(t._s(s+1))]),t._v(" "),a("li",[a("el-select",{attrs:{placeholder:"类型"},on:{change:function(a){t.chooseChange(e,s)}},model:{value:e.energy,callback:function(a){t.$set(e,"energy",a)},expression:"item.energy"}},[a("el-option",{attrs:{label:"电",value:"电"}}),t._v(" "),a("el-option",{attrs:{label:"水",value:"水"}}),t._v(" "),a("el-option",{attrs:{label:"气",value:"气"}})],1)],1),t._v(" "),a("li",[a("el-select",{attrs:{placeholder:"能耗用途"},on:{change:function(a){t.chooseChange(e,s)}},model:{value:e.user_type,callback:function(a){t.$set(e,"user_type",a)},expression:"item.user_type"}},[a("el-option",{attrs:{label:"居民",value:"居民"}}),t._v(" "),a("el-option",{attrs:{label:"商业",value:"商业"}})],1)],1),t._v(" "),a("li",[a("el-select",{attrs:{placeholder:"表器选择"},model:{value:e.energyWhere,callback:function(a){t.$set(e,"energyWhere",a)},expression:"item.energyWhere"}},[a("el-option",{attrs:{value:"treeVal"}},[a("el-tree",{ref:"tree",refInFor:!0,attrs:{data:t.data2,"show-checkbox":"","node-key":"id","check-on-click-node":t.aa2,"default-checked-keys":e.area,props:t.defaultProps},on:{"check-change":function(a){t.treeChange(e,s)}}})],1)],1)],1),t._v(" "),a("li",[a("el-select",{attrs:{placeholder:"时段类型"},on:{change:function(a){t.chooseChange(e,s)}},model:{value:e.time_type,callback:function(a){t.$set(e,"time_type",a)},expression:"item.time_type"}},[a("el-option",{attrs:{label:"谷时",value:"谷时"}}),t._v(" "),a("el-option",{attrs:{label:"峰时",value:"峰时"}}),t._v(" "),a("el-option",{attrs:{label:"平时",value:"平时"}})],1)],1),t._v(" "),a("li",[a("el-time-picker",{attrs:{"is-range":"","range-separator":"-",format:"HH:mm","value-format":"HH:mm","start-placeholder":"开始时间","end-placeholder":"结束时间",placeholder:"选择时间范围"},on:{change:function(a){t.timeChange(e,s)}},model:{value:e.dateRange,callback:function(a){t.$set(e,"dateRange",a)},expression:"item.dateRange"}})],1),t._v(" "),a("li",{staticClass:"myInp"},[a("el-input",{attrs:{placeholder:"请输入价格"},on:{change:function(a){t.inputChange(e,s)}},model:{value:e.price,callback:function(a){t.$set(e,"price",a)},expression:"item.price"}}),t._v(" "),a("span",[t._v("元")])],1)])})],2),t._v(" "),a("div",{staticClass:"addMode",on:{click:t.addMode}},[t._m(0)]),t._v(" "),a("div",{staticClass:"btnGroupBox"},[a("span",{on:{click:t.hideModel}},[t._v("取消")]),t._v(" "),a("span",{staticClass:"btnOk",on:{click:t.setPrise}},[t._v("确定")])])],1),t._v(" "),a("bubbleTip",{attrs:{tipText:t.bubbleTip}})],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("span",[e("i",{staticClass:"el-icon-circle-plus"}),this._v("添加模式")])}]};var Z={components:{first:H,second:V,third:K,unit:a("VU/8")(Q,J,!1,function(t){a("7+l2"),a("pj9S")},null,null).exports},data:function(){return{sysInfo:{},unitComponent:"",unitShow:!1,first:"first",second:"second",third:"third",currentView:"",isActive1:!0,isActive2:!1,isActive3:!1}},created:function(){this.sysInfo=this.$store.state.sysList[2],0!=this.sysInfo.role_string[7]?(this.currentView="first",this.isActive2=!1,this.isActive3=!1,this.isActive1=!0):0==this.sysInfo.role_string[7]&&0!=this.sysInfo.role_string[8]?(this.currentView="second",this.isActive2=!0,this.isActive3=!1,this.isActive1=!1):(this.currentView="third",this.isActive2=!1,this.isActive3=!0,this.isActive1=!1)},mounted:function(){this.getData()},methods:{getData:function(){this.$http.post("/video_monitoring/video_index_view",{sys_menu_id:13,floor_id:115}).then(function(t){console.log(t)},function(t){})},unitShowCli:function(){this.unitComponent="unit"},unitShowBool:function(t){0==t&&(this.unitComponent="")},toggleTabs:function(t){"first"==t?(this.isActive2=!1,this.isActive3=!1,this.isActive1=!0):"second"==t?(this.isActive2=!0,this.isActive1=!1,this.isActive3=!1):"third"==t&&(this.isActive3=!0,this.isActive1=!1,this.isActive2=!1),this.currentView=t},goHome:function(){this.$router.push("/home")}}},tt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"energyReport"},[a("div",{staticClass:"navCrumbs"},[a("i",{staticClass:"homeTxt",on:{click:t.goHome}},[t._v("首页")]),t._v("  > 能源管理系统 > "),a("span",[t._v("用能报表")])]),t._v(" "),a("div",{staticClass:"reportTabBox"},[0!=t.sysInfo.role_string[11]?a("span",{staticClass:"unitPriceBtn",on:{click:t.unitShowCli}},[t._v("单价预设")]):t._e(),t._v(" "),a("nav",{staticClass:"tabNav"},[0!=t.sysInfo.role_string[7]?a("span",[a("a",{class:1==t.isActive1?"on":"",on:{click:function(e){t.toggleTabs(t.first)}}},[t._v("月报表")])]):t._e(),t._v(" "),0!=t.sysInfo.role_string[8]?a("span",[a("a",{class:1==t.isActive2?"on":"",on:{click:function(e){t.toggleTabs(t.second)}}},[t._v("日报表")])]):t._e(),t._v(" "),0!=t.sysInfo.role_string[9]?a("span",[a("a",{class:1==t.isActive3?"on":"",on:{click:function(e){t.toggleTabs(t.third)}}},[t._v("能源汇总账单 (领导)")])]):t._e()]),t._v(" "),a(t.currentView,{tag:"tabs",attrs:{"keep-alive":""}})],1),t._v(" "),a(t.unitComponent,{tag:"component",on:{unitShowBool:t.unitShowBool}})],1)},staticRenderFns:[]};var et=a("VU/8")(Z,tt,!1,function(t){a("CK92")},null,null).exports,at={components:{"sys-head":l.a},data:function(){return{sData:{lists:[{id:0,name:"手动操作日志",route:"/operationLog/components/manualOperation"},{id:1,name:"自动控制日志",route:"/operationLog/components/autoOperation"}]}}},created:function(){},methods:{}},st={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"operationLog",staticStyle:{width:"100%",height:"100%"}},[e("sys-head",{attrs:{datas:this.sData}}),this._v(" "),e("router-view")],1)},staticRenderFns:[]};var it=a("VU/8")(at,st,!1,function(t){a("Ewc/")},null,null).exports,nt=a("BPv+"),ot={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tabsDomBox"},[a("div",{staticClass:"navCrumbs"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[t._v("首页")]),t._v(" "),a("el-breadcrumb-item",[t._v("操作日志")]),t._v(" "),a("el-breadcrumb-item",[t._v("自动操作日志")])],1)],1),t._v(" "),a("div",{staticClass:"tableBox"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,height:"100%"}},[a("el-table-column",{attrs:{prop:"indexs",label:"序号",align:"cneter"}}),t._v(" "),a("el-table-column",{attrs:{prop:"time",label:"操作时间",align:"cneter"}}),t._v(" "),a("el-table-column",{attrs:{prop:"floor_name",label:"位置",align:"cneter"}}),t._v(" "),a("el-table-column",{attrs:{prop:"device_name",label:"操作设备",align:"cneter"}}),t._v(" "),a("el-table-column",{attrs:{prop:"reason",label:"操作内容",align:"cneter"}})],1),t._v(" "),a("div",{staticClass:"paginationBox"},[a("div",{staticClass:"totalPageNumBox"},[t._v("共"+t._s(t.totalPageNum)+"页")]),t._v(" "),a("div",{staticClass:"el-input el-pagination__editor is-in-pagination curPageBox"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.currPage,expression:"currPage"}],staticClass:"el-input__inner",attrs:{type:"number",autocomplete:"off"},domProps:{value:t.currPage},on:{input:function(e){e.target.composing||(t.currPage=e.target.value)}}}),t._v(" "),a("span",{on:{click:t.toInputPage}},[t._v("GO")])]),t._v(" "),a("el-pagination",{attrs:{"current-page":t.currentPage,"page-size":t.pagesize,"page-count":t.totalPageNum,total:t.total,layout:"prev, pager, next"},on:{"current-change":t.handleCurrentChange}})],1)],1)])},staticRenderFns:[]};var rt=function(t){a("XqFf")},lt=a("VU/8")(nt.a,ot,!1,rt,"data-v-3491897e",null).exports,ct=a("zG/v"),dt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tabsDomBox"},[a("div",{staticClass:"navCrumbs"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[t._v("首页")]),t._v(" "),a("el-breadcrumb-item",[t._v("操作日志")]),t._v(" "),a("el-breadcrumb-item",[t._v("手动操作日志")])],1)],1),t._v(" "),a("div",{staticClass:"tableBox"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,height:"100%"}},[a("el-table-column",{attrs:{prop:"indexs",label:"序号",align:"cneter"}}),t._v(" "),a("el-table-column",{attrs:{prop:"time",label:"操作时间",align:"cneter"}}),t._v(" "),a("el-table-column",{attrs:{prop:"user_name",label:"操作人",align:"cneter"}}),t._v(" "),a("el-table-column",{attrs:{prop:"floor_name",label:"位置",align:"cneter"}}),t._v(" "),a("el-table-column",{attrs:{prop:"device_name",label:"操作设备",align:"cneter"}}),t._v(" "),a("el-table-column",{attrs:{prop:"word",label:"操作内容",align:"cneter"}})],1),t._v(" "),a("div",{staticClass:"paginationBox"},[a("div",{staticClass:"totalPageNumBox"},[t._v("共"+t._s(t.totalPageNum)+"页")]),t._v(" "),a("div",{staticClass:"el-input el-pagination__editor is-in-pagination curPageBox"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.currPage,expression:"currPage"}],staticClass:"el-input__inner",attrs:{type:"number",autocomplete:"off"},domProps:{value:t.currPage},on:{input:function(e){e.target.composing||(t.currPage=e.target.value)}}}),t._v(" "),a("span",{on:{click:t.toInputPage}},[t._v("GO")])]),t._v(" "),a("el-pagination",{attrs:{"current-page":t.currentPage,"page-size":t.pagesize,"page-count":t.totalPageNum,total:t.total,layout:"prev, pager, next"},on:{"current-change":t.handleCurrentChange}})],1)],1)])},staticRenderFns:[]};var ut=function(t){a("1tkK")},ht=a("VU/8")(ct.a,dt,!1,ut,"data-v-c52dbb0c",null).exports,mt={components:{SysHead:l.a},name:"generationMBase",data:function(){return{sData:{id:3,lists:[{id:0,name:"首页",route:"/AgentManage"},{id:1,name:"排班表",route:"/AgentManage/schedule"},{id:2,name:"工单",route:"/AgentManage/workList"},{id:3,name:"巡检",route:"/AgentManage/routing"},{id:4,name:"统计报表",route:"/AgentManage/report"}]}}},methods:{search:function(t){console.log(t)}},created:function(){},mounted:function(){}},pt={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"generation autoComponent"},[e("SysHead",{attrs:{datas:this.sData},on:{searchCont:this.search}}),this._v(" "),e("router-view")],1)},staticRenderFns:[]};var ft=a("VU/8")(mt,pt,!1,function(t){a("fTIN")},"data-v-39a2a8c9",null).exports,vt={props:["echartCirData"],data:function(){return{fillBoxs:[{id:"year",name:"年"},{id:"mon",name:"月"},{id:"week",name:"周"},{id:"day",name:"日"}],echartCirData3:{id:"echart3",color:["#008aff","#f56c6c"],size:[0,"1.76rem"],total:0,data:[{value:24,name:"0%",tit:"已完成数"},{value:88,name:"0%",tit:"未完成数"}]},echartCirData4:{id:"echart4",color:["#f56c6c","#008aff"],size:[0,"1.76rem"],total:0,data:[{value:2,name:"0%",tit:"未完成数"},{value:100,name:"0%",tit:"已完成数"}]}}},computed:{msgsInTit:function(){for(var t=this.fillBoxs.length,e="",a=0;a<t;a++)this.fillBoxs[a].id==this.idNow&&(e=this.fillBoxs[a].name);return e},yearWeek:function(){for(var t=this.fillBoxs2.length,e=[],a=0;a<t;a++)if(this.fillBoxs2[a].id==this.idNow2){var s=this.fillBoxs2[a].name.split("/");e=[s[0],s[1]]}return e}},methods:{getData:function(){var t="";switch(this.msgsInTit){case"日":t=0;break;case"周":t=1;break;case"月":t=2;break;case"年":t=3}var e=this;this.$http.post("/pc_ims/index",{above_type:t,below_type:"",flg:1}).then(function(t){if(0==t.data.code){e.echartCirData3.total=t.data.data.gongdan.gongdan_count;t.data.data.gongdan.wei,t.data.data.gongdan.wan,t.data.data.xunjian.wei,t.data.data.xunjianwan;e.echartCirData3.data=[{value:t.data.data.gongdan.wan,name:t.data.data.gongdan.wanlv+"%",tit:"已完成数"},{value:t.data.data.gongdan.wei,name:t.data.data.gongdan.weilv+"%",tit:"未完成数"}],e.echartCirData4.data=[{value:t.data.data.xunjian.wan,name:t.data.data.xunjian.wanlv+"%",tit:"已完成数"},{value:t.data.data.xunjian.wei,name:t.data.data.xunjian.weilv+"%",tit:"未完成数"}],"echart3"==e.echartCirData.id?e.drawLine(e.echartCirData3):e.drawLine(e.echartCirData4)}else e.$message({type:"error",message:t.data.msg})})},drawLine:function(t){var e=this.echartCirData,a=this.$echarts.init(document.getElementById(this.echartCirData.id)),s=[0,"66%"];void 0!==e.size&&(s=e.size);var i={color:t.color,cursor:"auto",series:[{name:"访问来源",type:"pie",radius:s,avoidLabelOverlap:!1,hoverOffset:10,label:{normal:{position:"inner",formatter:function(t){return t.percent+"%"}}},labelLine:{normal:{show:!1}},itemStyle:{normal:{color:function(e){return t.color[e.dataIndex]}}},data:this.echartCirData.data}]};a.setOption(i)}},watch:{echartCirData:{handler:function(t){this.getData()},deep:!0}},mounted:function(){this.getData()}},_t={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"myChartBox"},[e("div",{staticClass:"myChart",attrs:{id:this.echartCirData.id}})])},staticRenderFns:[]};var gt=a("VU/8")(vt,_t,!1,function(t){a("1zPE")},"data-v-058b31cc",null).exports,bt=a("XLwt"),yt=a.n(bt),wt={props:["data"],data:function(){return{newData:{}}},methods:{drawLine:function(t){for(var e=t.total,a=this.$echarts.init(document.getElementById(t.id)),s=t.xData,i=[],n=[["#00C1FF","#008EFE","#008EFE","#00C1FF"],["#FF9A6A","#FE5E83","#FE5E83","#FF9A6A"],["#FEE7BB","#FFD08E","#FFD08E","#FEE7BB"]],o=[],r=0;r<s.length;r++)i.push(500),o.push({value:this.data.data[r],itemStyle:{normal:{color:new yt.a.graphic.LinearGradient(0,0,0,1,[{offset:0,color:n[r][0]},{offset:1,color:n[r][1]}])},emphasis:{color:new yt.a.graphic.LinearGradient(0,0,0,1,[{offset:0,color:n[r][2]},{offset:1,color:n[r][3]}])}}});var l={grid:{left:0,bottom:0,right:0,top:0,borderColor:"#2d5e96",containLabel:!0},xAxis:{type:"category",boundaryGap:!0,axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!1},axisLabel:{fontSize:12,color:"#fff"},data:s},yAxis:{axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!1},axisLabel:{show:!1},splitArea:{show:!0,areaStyle:{color:["rgba(142,187,255,.1)","rgba(142,187,255,.05)"]}},type:"value"},dataZoom:[{type:"inside"}],series:[{label:{show:!0,position:"insideTop",distance:5,textStyle:{color:"#fff"},formatter:function(t){return(t.value/e*100).toFixed(2)+"% "+t.value}},type:"bar",barGap:"-100%",barCategoryGap:"40%",animation:!1,data:o}]};a.setOption(l)}},watch:{data:{handler:function(t,e){this.drawLine(t)},deep:!0}},mounted:function(){this.drawLine(this.data)}},Ct={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"barChart"},[e("div",{staticClass:"myChart",style:this.data.style,attrs:{id:this.data.id}})])},staticRenderFns:[]};var xt=a("VU/8")(wt,Ct,!1,function(t){a("+VBa")},"data-v-509e1762",null).exports,kt={props:["data"],data:function(){return{newData:{data:[],total:""}}},methods:{drawLine:function(t){var e=document.getElementById(this.data.id),a=e.getContext("2d"),s=e.width/2,i=e.height/2,n=2*Math.PI/100;!function(){a.clearRect(0,0,e.width,e.height),a.save(),a.beginPath(),a.lineWidth=5,a.strokeStyle="rgba(0,0,0,0.2)",a.arc(s,i,100,0,2*Math.PI,!1),a.closePath(),a.stroke(),a.beginPath(),a.arc(s,i,90,0,2*Math.PI,!1),a.closePath(),a.stroke(),a.beginPath(),a.arc(s,i,80,0,2*Math.PI,!1),a.closePath(),a.stroke(),a.beginPath(),a.arc(s,i,70,0,2*Math.PI,!1),a.stroke(),a.closePath(),a.beginPath(),a.arc(s,i,55,0,2*Math.PI,!1),a.stroke(),a.closePath(),a.restore();var o,r=100*t.total;o=r,a.save(),a.strokeStyle="#4A90E2",a.shadowOffsetX=4,a.shadowOffsetY=20,a.shadowColor="rgba(74,144,226,0.22)",a.shadowBlur="20",a.font="normal 30px Arial",a.fillStyle="#fff",a.fillText(o.toFixed(2)+"%",s-45,i+5),a.font="12px Arial",a.fillText("总完成率",s-25,i+35),a.stroke(),a.restore(),function(t){if(0!=t.length){t[0],t[1],t[2],t[3];var e=t[0],o=t[1],r=t[2],l=t[3];a.save(),a.translate(s,i),a.strokeStyle="#008aff",a.lineWidth=3,a.beginPath(),a.arc(0,0,100,4.5*-Math.PI/3,4.5*-Math.PI/3+e*n,!1),a.stroke(),a.closePath(),a.translate(Math.round(100*Math.cos((3.6*e+90)*Math.PI/180)),Math.round(100*Math.sin((3.6*e+90)*Math.PI/180))),a.fillStyle="#008aff",a.beginPath(),a.arc(0,0,3,4.5*-Math.PI/3,4.5*-Math.PI/3+2*Math.PI,!1),a.fill(),a.closePath(),""!==o&&(a.strokeStyle="#4ae283",a.translate(-Math.round(100*Math.cos((3.6*e+90)*Math.PI/180)),-Math.round(100*Math.sin((3.6*e+90)*Math.PI/180))),a.beginPath(),a.arc(0,0,90,4.5*-Math.PI/3,4.5*-Math.PI/3+o*n,!1),a.stroke(),a.closePath(),a.translate(Math.round(90*Math.cos((3.6*o+90)*Math.PI/180)),Math.round(90*Math.sin((3.6*o+90)*Math.PI/180))),a.fillStyle="#4ae283",a.beginPath(),a.arc(0,0,3,4.5*-Math.PI/3,4.5*-Math.PI/3+2*Math.PI,!1),a.fill(),a.closePath()),""!==r&&(a.strokeStyle="#ffa414",a.translate(-Math.round(90*Math.cos((3.6*o+90)*Math.PI/180)),-Math.round(90*Math.sin((3.6*o+90)*Math.PI/180))),a.beginPath(),a.arc(0,0,80,4.5*-Math.PI/3,4.5*-Math.PI/3+r*n,!1),a.stroke(),a.closePath(),a.translate(Math.round(80*Math.cos((3.6*r+90)*Math.PI/180)),Math.round(80*Math.sin((3.6*r+90)*Math.PI/180))),a.fillStyle="#ffa414",a.beginPath(),a.arc(0,0,3,4.5*-Math.PI/3,4.5*-Math.PI/3+2*Math.PI,!1),a.fill(),a.closePath()),""===o&&""===r?(a.translate(-Math.round(100*Math.cos((3.6*e+90)*Math.PI/180)),-Math.round(100*Math.sin((3.6*e+90)*Math.PI/180))),a.strokeStyle="#fa6074",a.beginPath(),a.arc(0,0,70,4.5*-Math.PI/3,4.5*-Math.PI/3+l*n,!1)):(a.translate(-Math.round(80*Math.cos((3.6*r+90)*Math.PI/180)),-Math.round(80*Math.sin((3.6*r+90)*Math.PI/180))),a.strokeStyle="#fa6074",a.beginPath(),a.arc(0,0,70,4.5*-Math.PI/3,4.5*-Math.PI/3+l*n,!1)),a.stroke(),a.closePath(),a.translate(Math.round(70*Math.cos((3.6*l+90)*Math.PI/180)),Math.round(70*Math.sin((3.6*l+90)*Math.PI/180))),a.fillStyle="#fa6074",a.beginPath(),a.arc(0,0,3,4.5*-Math.PI/3,4.5*-Math.PI/3+2*Math.PI,!1),a.fill(),a.closePath(),a.translate(-Math.round(70*Math.cos((3.6*l+90)*Math.PI/180)),-Math.round(70*Math.sin((3.6*l+90)*Math.PI/180))),a.restore()}}(t.data)}()}},watch:{data:{handler:function(t,e){this.drawLine(t)},deep:!0}},mounted:function(){this.drawLine(this.data)}},Dt={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"pieChart"},[e("canvas",{staticClass:"myChart",attrs:{id:this.data.id,width:"220",height:"220"}})])},staticRenderFns:[]};var St=a("VU/8")(kt,Dt,!1,function(t){a("Lqdk")},"data-v-e08a754e",null).exports,At={name:"generationMBase",components:{EchartCirFull:gt,EchartBar:xt,EchartPie:St},computed:{msgsInTit:function(){for(var t=this.fillBoxs.length,e="",a=0;a<t;a++)this.fillBoxs[a].id==this.idNow&&(e=this.fillBoxs[a].name);return e},yearWeek:function(){for(var t=this.fillBoxs2.length,e=[],a=0;a<t;a++)if(this.fillBoxs2[a].id==this.idNow2){var s=this.fillBoxs2[a].name.split("/");e=[s[0],s[1]]}return e}},data:function(){return{crumbs:["代维系统"],circleData:{id:"canvas",style:{width:"1.98rem",height:"1.98rem"},total:0,data:[1,2,6,4],crate:{monW:"1",monR:"2",yearW:"6",yearR:"4"}},barData:{id:"barData",style:{width:"100%",height:"2.43rem",padding:"0.1rem"},data:[0,0,0],total:1,xData:["系统派发","人工派发","外报维修"]},fillBoxs:[{id:"year",name:"年"},{id:"mon",name:"月"},{id:"week",name:"周"},{id:"day",name:"日"}],idNow:"day",fillBoxs2:[{id:"monYear",name:"月/年"},{id:"dayWeek",name:"日/周"}],idNow2:"dayWeek",echartCirData3:{id:"echart3",color:["#f56c6c","#008aff"],size:[0,"72.89%"],total:1,data:[{value:0,name:"0%",tit:"已完成数"},{value:0,name:"0%",tit:"未完成数"}]},echartCirData4:{id:"echart4",color:["#008aff","#f56c6c"],size:[0,"72.89%"],total:1,data:[{value:0,name:"0%",tit:"未完成数"},{value:0,name:"0%",tit:"已完成数"}]}}},methods:{changeDateType:function(t){this.idNow!=t&&(this.idNow=t,this.getEchartData())},changeDateType2:function(t){this.idNow2!=t&&(this.idNow2=t,this.getEchartData(t))},getEchartData:function(){var t="",e="";switch(this.msgsInTit){case"日":t=0;break;case"周":t=1;break;case"月":t=2;break;case"年":t=3}switch(this.idNow2){case"dayWeek":e=0;break;case"monYear":e=1}var a=this;this.$http.post("/pc_ims/index",{above_type:t,below_type:e,flg:1}).then(function(t){if(0==t.data.code){a.echartCirData3.total=t.data.data.gongdan.gongdan_count;var e=t.data.data.gongdan.wei,s=t.data.data.gongdan.wan,i=t.data.data.xunjian.wei,n=t.data.data.xunjian.wan;a.echartCirData3.data=[{value:t.data.data.gongdan.wan,name:Math.floor(s/(s+e)*100)+"%",tit:"已完成数"},{value:t.data.data.gongdan.wei,name:Math.floor(e/(s+e)*100)+"%",tit:"未完成数"}],a.echartCirData4.total=t.data.data.xunjian.xunjian_count,a.echartCirData4.data=[{value:i,name:Math.floor(i/(i+n)*100)+"%",tit:"未完成数"},{value:n,name:Math.floor(n/(n+i)*100)+"%",tit:"已完成数"}],a.barData.data=[t.data.data.sys,t.data.data.people,t.data.data.complain],a.barData.total=t.data.data.form_count,a.circleData.crate={monW:t.data.data.now.job,monR:t.data.data.now.ins,yearW:t.data.data.old.job,yearR:t.data.data.old.ins},a.circleData.data=[t.data.data.old.ins,t.data.data.old.job,t.data.data.now.job,t.data.data.now.ins],a.circleData.total=t.data.data.percentage_count}else a.$message({type:"error",message:t.data.msg})})}},mounted:function(){this.getEchartData()}},Et={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"generation"},[a("Crumbs",{attrs:{data:t.crumbs}}),t._v(" "),a("div",{staticClass:"msgBox boxs"},[a("div",{staticClass:"boxsTitG"},[a("span",{staticClass:"tit"},[t._v("工单&巡检 完成情况")]),t._v(" "),t._l(t.fillBoxs,function(e,s){return a("div",{staticClass:"btnDate",class:{active:t.idNow==e.id},domProps:{textContent:t._s(e.name)},on:{click:function(a){t.changeDateType(e.id)}}})})],2),t._v(" "),a("div",{staticClass:"msgsIn0"},[a("div",{staticClass:"msgsIn"},[a("div",{staticClass:"msgsInTit",domProps:{textContent:t._s("本"+t.msgsInTit+"工单数")}}),t._v(" "),a("div",{staticClass:"msgsInBoxs"},[a("div",{staticClass:"msgsInCircle"},[a("EchartCirFull",{ref:"echartCirData3",attrs:{echartCirData:t.echartCirData3}})],1),t._v(" "),a("ul",{staticClass:"msgsInTable"},[a("li",[a("label",{attrs:{for:""}},[t._v("工单总数")]),t._v(" "),a("div",{staticClass:"numBox"},[a("span",{domProps:{textContent:t._s(t.echartCirData3.total+"单")}})])]),t._v(" "),a("li",[a("label",{attrs:{for:""}},[t._v("已完成数")]),t._v(" "),a("div",{staticClass:"numBox"},[a("div",{staticClass:"numFeal"},[a("div",{staticClass:"numLines2",style:{width:t.echartCirData3.total?2.1*t.echartCirData3.data[0].value/t.echartCirData3.total+"rem":0}},[t._v(t._s(t.echartCirData3.data[0].value))])])])]),t._v(" "),a("li",[a("label",{attrs:{for:""}},[t._v("未完成数")]),t._v(" "),a("div",{staticClass:"numBox"},[a("div",{staticClass:"numFeals"},[a("div",{staticClass:"numLines",style:{width:t.echartCirData3.total?2.1*t.echartCirData3.data[1].value/t.echartCirData3.total+"rem":0}},[t._v(t._s(t.echartCirData3.data[1].value))])])])])])])]),t._v(" "),a("Lines",{attrs:{top:21,hei:200}}),t._v(" "),a("div",{staticClass:"msgsIn"},[a("div",{staticClass:"msgsInTit",domProps:{textContent:t._s("本"+t.msgsInTit+"巡检任务数")}}),t._v(" "),a("div",{staticClass:"msgsInBoxs"},[a("div",{staticClass:"msgsInCircle"},[a("EchartCirFull",{ref:"echartCirData4",attrs:{echartCirData:t.echartCirData4}})],1),t._v(" "),a("ul",{staticClass:"msgsInTable"},[a("li",[a("label",[t._v("巡检单数")]),t._v(" "),a("div",{staticClass:"numBox"},[a("span",{domProps:{textContent:t._s(t.echartCirData4.total+"单")}})])]),t._v(" "),a("li",[a("label",[t._v("已完成数")]),t._v(" "),a("div",{staticClass:"numBox"},[a("div",{staticClass:"numFeal"},[a("div",{staticClass:"numLines2",style:{width:t.echartCirData4.total?2.1*t.echartCirData4.data[1].value/t.echartCirData4.total+"rem":0}},[t._v(t._s(t.echartCirData4.data[1].value))])])])]),t._v(" "),a("li",[a("label",[t._v("未完成数")]),t._v(" "),a("div",{staticClass:"numBox"},[a("div",{staticClass:"numFeals"},[a("div",{staticClass:"numLines",style:{width:t.echartCirData4.total?2.1*t.echartCirData4.data[0].value/t.echartCirData4.total+"rem":0}},[t._v(t._s(t.echartCirData4.data[0].value))])])])])])])])],1)]),t._v(" "),a("div",{staticClass:"dealed boxs"},[a("div",{staticClass:"boxsTitG"},[a("span",{staticClass:"tit"},[t._v("工单&巡检 完成率")]),t._v(" "),t._l(t.fillBoxs2,function(e,s){return a("div",{staticClass:"btnDate",class:{active:t.idNow2==e.id},domProps:{textContent:t._s(e.name)},on:{click:function(a){t.changeDateType2(e.id)}}})})],2),t._v(" "),a("div",{staticClass:"workBox1"},[a("div",{staticClass:"workBox1In"},[a("div",{staticClass:"workBox1In1"},[a("p",{staticClass:"marginTop",domProps:{textContent:t._s(t.circleData.crate.monW+"%")}}),t._v(" "),a("span",{staticClass:"colorY",domProps:{textContent:t._s("本"+t.yearWeek[0]+"工单完成率")}})]),t._v(" "),a("Lines",{attrs:{type:"h",wid:148,left:35}}),t._v(" "),a("div",{staticClass:"workBox1In1"},[a("p",{domProps:{textContent:t._s(t.circleData.crate.monR+"%")}}),t._v(" "),a("span",{staticClass:"colorR",domProps:{textContent:t._s("本"+t.yearWeek[0]+"巡检完成率")}})])],1),t._v(" "),a("div",{staticClass:"workBox1Cir"},[a("div",{staticClass:"workBox1CirIn"},[a("EchartPie",{attrs:{data:t.circleData}})],1)]),t._v(" "),a("div",{staticClass:"workBox1In"},[a("div",{staticClass:"workBox1In1"},[a("p",{staticClass:"marginTop",domProps:{textContent:t._s(t.circleData.crate.yearW+"%")}}),t._v(" "),a("span",{staticClass:"colorG",domProps:{textContent:t._s("本"+t.yearWeek[1]+"工单完成率")}})]),t._v(" "),a("Lines",{attrs:{type:"h",wid:148,left:35}}),t._v(" "),a("div",{staticClass:"workBox1In1"},[a("p",{domProps:{textContent:t._s(t.circleData.crate.yearR+"%")}}),t._v(" "),a("span",{staticClass:"colorB",domProps:{textContent:t._s("本"+t.yearWeek[1]+"巡检完成率")}})])],1)])]),t._v(" "),a("div",{staticClass:"workFrom boxs"},[a("div",{staticClass:"boxsTitG"},[a("span",{staticClass:"tit"},[t._v("工单来源")]),t._v(" "),a("div",{staticClass:"totalNum"},[a("div",{staticClass:"lines"}),t._v(" "),a("span",[t._v("总数：")]),t._v(" "),a("span",[t._v(t._s(t.barData.total)+"单")])])]),t._v(" "),a("div",{staticClass:"EchartBarBox"},[a("EchartBar",{attrs:{data:t.barData}})],1)])],1)},staticRenderFns:[]};var It=a("VU/8")(At,Et,!1,function(t){a("gDxe")},"data-v-2104c56f",null).exports,Lt=a("xJhD"),Tt={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"schedule"},[s("Crumbs",{attrs:{data:t.crumbs}}),t._v(" "),s("el-tabs",{staticClass:"tabBoxs",on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[s("el-tab-pane",{attrs:{name:"first"}},[s("span",{staticClass:"tabItems",attrs:{slot:"label"},slot:"label"},[t._v("\n                    排班表\n                ")]),t._v(" "),s("ScheduleTable",{attrs:{isShowBtns:"yes",data:t.paibanList},on:{getPaibanData:t.getPaiBanData,saveAddPaiBan:t.saveAddPaiBan,editSchedule:t.editSchedule}})],1),t._v(" "),s("el-tab-pane",{attrs:{name:"second"}},[s("span",{staticClass:"tabItems",attrs:{slot:"label"},slot:"label"},[t._v("\n                    未审核\n                ")]),t._v(" "),s("Examine",{attrs:{data:t.examData1},on:{search:function(e){return t.search(e,1)},showInfo:t.showInfo,isNo:t.isNo,isOk:t.isOk}})],1),t._v(" "),s("el-tab-pane",{attrs:{name:"thrid"}},[s("span",{staticClass:"tabItems",attrs:{slot:"label"},slot:"label"},[t._v("\n                    已审核\n                ")]),t._v(" "),s("Examine",{attrs:{data:t.examData2},on:{search:function(e){return t.search(e,2)},showInfo:t.showInfoed}})],1)],1),t._v(" "),s("transition",{attrs:{name:"fade"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:"first"==t.activeName,expression:"activeName=='first'"}],staticClass:"sceBtn btnBai1",on:{click:t.exportTableList}},[s("img",{attrs:{src:a("+1Ej")}}),t._v(" "),s("span",[t._v("导出排班表")])])]),t._v(" "),s("Dialog",{ref:"dialog",staticClass:"dialog",attrs:{wid:"910",hei:"536"}},[s("div",{staticClass:"diaHei"},[t._v("换班申请")]),t._v(" "),s("div",{staticClass:"pBody"},[s("div",{staticClass:"pBox"},[s("div",{staticClass:"imgBox boxs"},[s("img",{attrs:{src:a("tXnU"),alt:""}})]),t._v(" "),s("div",{staticClass:"nameBox boxs"},[s("div",{staticClass:"labelBox"},[s("label",{attrs:{for:""}},[t._v("申请人：")]),t._v(" "),s("span",{domProps:{textContent:t._s(t.dia.old_truename)}})]),t._v(" "),s("div",{staticClass:"labelBox"},[s("label",{attrs:{for:""}},[t._v("联系电话：")]),t._v(" "),s("span",{domProps:{textContent:t._s(t.dia.old_phone)}})]),t._v(" "),s("div",{staticClass:"labelBox"},[s("label",{attrs:{for:""}},[t._v("申请人班次：")]),t._v(" "),s("span",{domProps:{textContent:t._s(t.dia.olde_workdate+" "+t.dia.oldstarttime+"~"+t.dia.oldendtime)}})])])]),t._v(" "),s("Lines",{attrs:{hei:125,top:20}}),t._v(" "),s("div",{staticClass:"pBox"},[s("div",{staticClass:"imgBox boxs"},[s("img",{attrs:{src:a("tXnU"),alt:""}})]),t._v(" "),s("div",{staticClass:"nameBox boxs"},[s("div",{staticClass:"labelBox"},[s("label",{attrs:{for:""}},[t._v("换班人：")]),t._v(" "),s("span",{domProps:{textContent:t._s(t.dia.new_truename)}})]),t._v(" "),s("div",{staticClass:"labelBox"},[s("label",{attrs:{for:""}},[t._v("联系电话：")]),t._v(" "),s("span",{domProps:{textContent:t._s(t.dia.now_phone)}})]),t._v(" "),s("div",{staticClass:"labelBox"},[s("label",{attrs:{for:""}},[t._v("换班人班次：")]),t._v(" "),s("span",{domProps:{textContent:t._s(t.dia.new_truename+" "+t.dia.newstarttime+"~"+t.dia.newendtime)}})])])])],1),t._v(" "),s("div",{staticClass:"reason"},[s("div",{staticClass:"diaTit2"},[t._v("换班原因")]),t._v(" "),s("div",{staticClass:"reasonBox",domProps:{textContent:t._s(t.dia.description)}})]),t._v(" "),s("div",{staticClass:"time"},[s("div",{staticClass:"diaTit2"},[t._v("申请时间")]),t._v(" "),s("span",{domProps:{textContent:t._s(t.dia.addtime)}})]),t._v(" "),s("div",{staticClass:"examFlag"},[s("img",{directives:[{name:"show",rawName:"v-show",value:1==t.dia.state,expression:"dia.state==1"}],staticClass:"rightBotm",attrs:{src:a("cY+i"),alt:""}}),t._v(" "),s("img",{directives:[{name:"show",rawName:"v-show",value:0==t.dia.state,expression:"dia.state==0"}],staticClass:"rightBotm",attrs:{src:a("8je6"),alt:""}})]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:-1==t.dia.state,expression:"dia.state==-1"}],staticClass:"diaBtns"},[s("div",{staticClass:"diabtn diabtn22",on:{click:function(e){t.isNo(t.dia,t.dia.index)}}},[t._v("驳回")]),t._v(" "),s("div",{staticClass:"diabtn",on:{click:function(e){t.isOk(t.dia,t.dia.index)}}},[t._v("同意")])])]),t._v(" "),s("Dialog",{ref:"edit",staticClass:"dialog",attrs:{wid:"4.16rem",hei:"4.27rem"}},[s("div",{staticClass:"editBox"},[s("ul",t._l(t.editDatas,function(e){return s("li",[s("el-input",{attrs:{placeholder:"请输入班次名"},model:{value:e.label,callback:function(a){t.$set(e,"label",a)},expression:"item.label"}}),t._v(" "),s("el-select",{attrs:{placeholder:"请选择"},model:{value:e.timearea,callback:function(a){t.$set(e,"timearea",a)},expression:"item.timearea"}},t._l(t.options,function(t){return s("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)})),t._v(" "),s("el-button",{staticClass:"addEdit",on:{click:t.addSchedule}},[t._v("新增")]),t._v(" "),s("el-button",{staticClass:"submitEdit"},[t._v("确定")])],1)])],1)},staticRenderFns:[]};var Bt=function(t){a("61bW")},Pt=a("VU/8")(Lt.a,Tt,!1,Bt,"data-v-1bcf9e16",null).exports,Rt=a("kOUd"),Mt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"workBox"},[a("Crumbs",{attrs:{data:t.crumbs}}),t._v(" "),a("div",{staticClass:"workHead boxs"},t._l(t.workH,function(e,s){return a("div",{staticClass:"numBox"},[a("div",{staticClass:"numBoxIn"},[a("p",{style:{color:e.color},domProps:{textContent:t._s(e.val)}}),t._v(" "),a("span",{domProps:{textContent:t._s(e.tit)}})]),t._v(" "),3!=s?a("Lines",{attrs:{hei:60,top:20}}):t._e()],1)})),t._v(" "),a("div",{staticClass:"tableBoxs boxs"},[a("div",{staticClass:"tabHead"},[a("div",{staticClass:"jobBoxs"},[a("SelectBox",{attrs:{options:t.departments,value:t.query.department,icon:"el-icon-d-caret",placeholder:"专业岗位"},on:{change:t.change1}})],1),t._v(" "),a("div",{staticClass:"nameBoxs"},[a("SelectBox",{attrs:{options:t.names,value:t.query.name,icon:"el-icon-d-caret",placeholder:"姓名"},on:{change:t.change2}})],1),t._v(" "),a("div",{staticClass:"searchBoxs",on:{click:t.getTableList}},[a("i",{staticClass:"el-icon-search"}),t._v(" "),a("span",[t._v("筛选")])]),t._v(" "),a("div",{staticClass:"dateBox"},[a("TimePickerT",{attrs:{value7:t.value7,cant:t.cant,timeformat:"M-d"},on:{changes:t.changes,deletes:t.deletes,adds:t.adds}})],1)]),t._v(" "),a("div",{staticClass:"tableIn"},[a("Table",{staticStyle:{width:"100%"},attrs:{table:t.table},on:{rowClick:t.rowClick}})],1)]),t._v(" "),a("div",{staticClass:"dispatch"},[a("div",{on:{click:t.sendWork}},[t._m(0),t._v(" "),a("div",[t._v("工单派发")])])]),t._v(" "),a("Dialog",{ref:"send",attrs:{wid:"5.5rem",hei:"6.1rem"}},[a("SendWork",{attrs:{query:t.query3},on:{sendInfosShow:t.sendInfosShow,getDevVal:t.getDevice}})],1),t._v(" "),a("Dialog",{ref:"dialog",attrs:{wid:"1200",hei:"600"}},[a("WorkInfo",{attrs:{table:t.table2,query:t.query2,dtltime:t.value7},on:{tableInfos2Show:t.tableInfos2Show,getUserList:t.rowClick,getDetailTime:t.getDetailTime}})],1),t._v(" "),a("Dialog",{ref:"tableInfos2",attrs:{wid:"910",hei:"626"}},[a("div",{staticClass:"tableInfos"},[a("div",{staticClass:"infoHead"},[a("span",{staticClass:"infoName",domProps:{textContent:t._s(t.infoItem.user_name)}}),t._v(" "),a("span",{staticClass:"infoState",domProps:{textContent:t._s(t.infoTit2(t.infoItem.now_state))}})]),t._v(" "),a("div",{staticClass:"rightHead"},[a("span",{staticClass:"infoBusy",domProps:{textContent:t._s(t.priority(t.infoItem.priority))}}),t._v(" "),a("span",{staticClass:"infoPer",domProps:{textContent:t._s(t.infoTit(t.infoItem.type_id))}})]),t._v(" "),a("div",{staticClass:"infoWater"},[a("RoutingTask",{attrs:{data:t.infoItem}})],1),t._v(" "),a("div",{staticClass:"infoBoxs"},[a("RoutingInfo",{attrs:{data:t.infoItem},on:{dealWork:t.dealWork}})],1)])]),t._v(" "),a("Dialog",{ref:"isRefult",attrs:{wid:"3.64rem",hei:"2.16rem"}},[a("div",{staticClass:"isRefTxt",domProps:{textContent:t._s(t.dialogBoxs.txt)}}),t._v(" "),a("div",{staticClass:"isRbtnBoxs"},[a("span",{on:{click:t.submitOk}},[t._v("确定")]),t._v(" "),a("span",{on:{click:t.submitNo}},[t._v("取消")])])]),t._v(" "),a("Dialog",{ref:"sendWork2",attrs:{wid:"4.14rem",hei:"2.6rem"}},[a("div",{staticClass:"sendWork2"},[a("div",{staticClass:"oldName"},[a("label",{attrs:{for:""}},[t._v("原处理人员："+t._s(t.detalrowdata.user_name))]),t._v(" "),a("span",{staticClass:"namess",domProps:{textContent:t._s(t.dialogBoxs.item.name)}})]),t._v(" "),a("div",{staticClass:"newName"},[a("label",{attrs:{for:""}},[t._v("新工单处理人员：")]),t._v(" "),a("div",{staticClass:"ChooseBox"},[a("SelectBox",{attrs:{options:t.names,value:t.vName,placeholder:"选择人员"},on:{change:t.changeNew}})],1)]),t._v(" "),a("div",{staticClass:"sendWork2Boxs btnBai1",on:{click:t.sendWork2}},[a("span",[t._v("确定")])])])])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"dispatchBtn"},[e("i",{staticClass:"el-icon-third-feiji"})])}]};var Nt=function(t){a("hqqq")},Ft=a("VU/8")(Rt.a,Mt,!1,Nt,"data-v-7c82e1a6",null).exports,Ot=a("2+5w"),jt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"workBox"},[a("Crumbs",{attrs:{data:t.crumbs}}),t._v(" "),a("el-tabs",{staticClass:"tabBoxs",on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{name:"first"}},[a("span",{staticClass:"tabItems",attrs:{slot:"label"},slot:"label"},[t._v("\n              巡检任务表\n          ")]),t._v(" "),a("div",{staticClass:"workHead boxs"},t._l(t.workH,function(e,s){return a("div",{staticClass:"numBox"},[a("div",{staticClass:"numBoxIn"},[a("p",{style:{color:e.color},domProps:{textContent:t._s(e.val)}}),t._v(" "),a("span",{domProps:{textContent:t._s(e.tit)}})]),t._v(" "),3!=s?a("Lines",{attrs:{hei:60,top:20}}):t._e()],1)})),t._v(" "),a("div",{staticClass:"tableBoxs boxs"},[a("div",{staticClass:"tabHead"},[a("div",{staticClass:"jobBoxs"},[a("SelectBox",{attrs:{options:t.departments,value:t.query.department,icon:"el-icon-d-caret",placeholder:"专业岗位"},on:{change:t.change1}})],1),t._v(" "),a("div",{staticClass:"nameBoxs"},[a("SelectBox",{attrs:{options:t.names,value:t.query.name,icon:"el-icon-d-caret",placeholder:"姓名"},on:{change:t.change2}})],1),t._v(" "),a("div",{staticClass:"searchBoxs",on:{click:t.getTableList}},[a("i",{staticClass:"el-icon-search"}),t._v(" "),a("span",[t._v("筛选")])]),t._v(" "),a("div",{staticClass:"dateBox"},[a("TimePickerT",{attrs:{value7:t.value7,cant:t.cant},on:{changes:t.changes,deletes:t.deletes,adds:t.adds}})],1)]),t._v(" "),a("div",{staticClass:"tableIn"},[a("Table",{staticStyle:{width:"100%"},attrs:{table:t.table},on:{rowClick:t.rowClick}})],1)]),t._v(" "),a("Dialog",{ref:"dialog",attrs:{wid:"1200",hei:"640"}},[a("WorkInfo",{attrs:{table:t.table3,query:t.query2,dtltime:t.value7},on:{tableInfos2Show:t.tableInfos2Show,getUserList:t.rowClick}})],1),t._v(" "),a("Dialog",{ref:"tableInfos2",attrs:{wid:"910",hei:"650"}},[a("div",{staticClass:"tableInfos"},[a("div",{staticClass:"infoHead"},[a("span",{staticClass:"infoName",domProps:{textContent:t._s(t.infoItem.user_name)}}),t._v(" "),a("span",{staticClass:"infoState",domProps:{textContent:t._s(t.infoTit(t.infoItem.now_value))}})]),t._v(" "),a("div",{staticClass:"infoWater"},[a("RoutingTask",{attrs:{data:t.infoItem}})],1),t._v(" "),a("div",{staticClass:"infoBoxs"},[a("RoutingInfo",{attrs:{data:t.infoItem},on:{dealWork:t.dealWork}})],1)])])],1),t._v(" "),a("el-tab-pane",{attrs:{name:"second"}},[a("span",{staticClass:"tabItems",attrs:{slot:"label"},slot:"label"},[t._v("\n              巡检任务模板\n          ")]),t._v(" "),a("RoutingTakModdel",{directives:[{name:"show",rawName:"v-show",value:"second"==t.activeName,expression:"activeName=='second'"}],attrs:{table:t.table2,query:t.queryModel},on:{addDetail:t.addDetail,searchXJ:t.getModelList,getSys:t.getSys}})],1)],1),t._v(" "),a("Dialog",{ref:"add",attrs:{wid:"910",hei:"622"}},[a("AddModel",{attrs:{data:t.rowData,formvals:t.queryModel,title:t.tempTitle},on:{cancelAdd:t.cancelAdd,saveAdd:t.saveAdd,getFloorVal:t.getFloorVal,getDeviceVal:t.getDeviceVal,getSystemval:t.getSystemval,getUserlist:t.getNameList}})],1),t._v(" "),a("Dialog",{ref:"isRefult",attrs:{wid:"364",hei:"2.18rem"}},[a("div",{staticClass:"isRefTxt",domProps:{textContent:t._s(t.dialogBoxs.txt)}}),t._v(" "),a("div",{staticClass:"isRbtnBoxs"},[a("span",{on:{click:t.submitOk}},[t._v("确定")]),t._v(" "),a("span",{on:{click:t.submitNo}},[t._v("取消")])])]),t._v(" "),a("Dialog",{ref:"sendWork2",attrs:{wid:"414",hei:"260"}},[a("div",{staticClass:"sendWork2"},[a("div",{staticClass:"oldName",staticStyle:{"padding-top":"0.2rem"}},[a("label",{attrs:{for:""}},[t._v("原处理人员："+t._s(t.detalrowdata.user_name))]),t._v(" "),a("span",{staticClass:"namess",domProps:{textContent:t._s(t.dialogBoxs.item.name)}})]),t._v(" "),a("div",{staticClass:"newName"},[a("label",{attrs:{for:""}},[t._v("新工单处理人员：")]),t._v(" "),a("div",{staticClass:"ChooseBox"},[a("SelectBox",{attrs:{options:t.queryModel.newNames,value:t.queryModel.vName,placeholder:"选择人员"},on:{change:t.changeNew}})],1)])]),t._v(" "),a("div",{staticClass:"sendWork2Boxs btnBai1",on:{click:t.sendWork2}},[a("span",[t._v("确定")])])])],1)},staticRenderFns:[]};var Ut=function(t){a("LYgd")},Vt=a("VU/8")(Ot.a,jt,!1,Ut,"data-v-fb398e54",null).exports,$t=a("T+oP"),zt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"reportBox"},[a("Crumbs",{attrs:{data:t.crumbs}}),t._v(" "),a("div",{staticClass:"searchBoxs",on:{click:t.exportList}},[a("i"),t._v(" "),a("span",[t._v("导出")])]),t._v(" "),a("el-tabs",{staticClass:"tabBoxs",on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{name:"first"}},[a("span",{staticClass:"tabItems",attrs:{slot:"label"},slot:"label"},[t._v("\n              完成情况\n          ")]),t._v(" "),a("div",{staticClass:"boxs tableBoxs"},[a("div",{staticClass:"tabHead thHead"},[a("div",{staticClass:"jobBoxs thJobBoxs"},[a("el-select",{staticClass:"dateUnitSelectItem",attrs:{placeholder:"请选择",clearable:""},on:{change:t.dateTypeChange},model:{value:t.dateUnit,callback:function(e){t.dateUnit=e},expression:"dateUnit"}},t._l(t.dateOptions,function(t){return a("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})})),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"year"==t.dateUnit,expression:" dateUnit=='year' "}],staticClass:"yearRangeBox"},[a("el-date-picker",{attrs:{type:"year","value-format":"yyyy",placeholder:"请选择"},model:{value:t.dateRangeValue,callback:function(e){t.dateRangeValue=e},expression:"dateRangeValue"}})],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"month"==t.dateUnit,expression:" dateUnit=='month' "}],staticClass:"yearRangeBox"},[a("el-date-picker",{attrs:{format:"yyyy-M","value-format":"yyyyMM",type:"month",placeholder:"请选择"},model:{value:t.dateRangeValue,callback:function(e){t.dateRangeValue=e},expression:"dateRangeValue"}})],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"day"==t.dateUnit,expression:" dateUnit=='day' "}],staticClass:"yearRangeBox"},[a("el-date-picker",{attrs:{format:"yyyy-M-d","value-format":"yyyyMMdd",type:"date",placeholder:"请选择"},model:{value:t.dateRangeValue,callback:function(e){t.dateRangeValue=e},expression:"dateRangeValue"}})],1)],1),t._v(" "),a("div",{staticClass:"checkBox",on:{click:t.getReportData}},[a("i",{staticClass:"el-icon-search"}),t._v(" "),a("span",[t._v("查询")])])]),t._v(" "),a("div",{staticClass:"tableIn myAgenTab reportPages"},[a("Table",{staticStyle:{width:"100%"},attrs:{table:t.table}}),t._v(" "),a("Page",{attrs:{pages:t.page},on:{changeCurrentPage:t.changeCurrentPage}})],1)])]),t._v(" "),a("el-tab-pane",{attrs:{name:"second"}},[a("span",{staticClass:"tabItems",attrs:{slot:"label"},slot:"label"},[t._v("\n              重复报修率\n          ")]),t._v(" "),a("div",{staticClass:"boxs tableBoxs"},[a("div",{staticClass:"tableIn myAgenTab2 reportPages"},[a("Table",{staticStyle:{width:"100%"},attrs:{table:t.table2},on:{changePage:t.changePage2}}),t._v(" "),a("Page",{attrs:{pages:t.page2},on:{changeCurrentPage:t.changeCurrentPage2}})],1)])])],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticStyle:{height:"2rem"}},[a("div",{staticClass:"hover",style:{top:.4*t.hoverIndex+1+.78+"rem"}},[a("ul",t._l(t.hoverData,function(e,s){return a("li",[a("i",{staticClass:"el-icon-arrow-left"}),t._v(" "),a("dl",[a("dt",[a("span",{staticClass:"serial"},[t._v("0"+t._s(s))]),a("span",{staticClass:"line"},[t._v("|")]),t._v(t._s(e.time)+"维修人："+t._s(e.name))]),t._v(" "),a("dd",{staticClass:"desc"},[t._v("内容描述")]),t._v(" "),a("dd",{staticClass:"desccont"},[t._v(t._s(e.description))])])])}))])])],1)},staticRenderFns:[]};var qt=function(t){a("gv/2"),a("CKvl")},Ht=a("VU/8")($t.a,zt,!1,qt,"data-v-5cc01e70",null).exports,Wt={name:"generationMBase",components:{EchartCirFull:gt,EchartBar:xt,EchartPie:St,Header:l.a},computed:{},data:function(){return{crumbs:["代维系统"],navsData:{active:"item0",lists:[{id:0,name:"首页",route:"/AgentManage/normalUser"},{id:1,name:"排班表",route:"/AgentManage/normalUser/schedule"},{id:2,name:"工单",route:"/AgentManage/normalUser/workList"},{id:3,name:"巡检",route:"/AgentManage/normalUser/routing"},{id:4,name:"完成情况",route:"/AgentManage/normalUser/report"}]},barData:{id:"barData",data:[],style:{width:"100%",height:"2.43rem",padding:"0.1rem"},total:1,xData:["系统派发","人工派发"]},fillBoxs:[{id:"year",name:"年"},{id:"mon",name:"月"},{id:"week",name:"周"},{id:"day",name:"日"}],idNow:"day",fillBoxs2:[{id:"dayWeek",name:"日/周"},{id:"monYear",name:"月/年"}],idNow2:"dayWeek",circleData:{id:"canvas",style:{marginLeft:"0.1rem",marginTop:4200/728+"vh"},data:[],total:0,crate:{monW:"0",monR:"0"}},echartCirData3:{id:"echart3",color:["#f56c6c","#008aff"],size:[0,"72.89%"],total:1,data:[{value:0,name:"0%",tit:"未完成数"},{value:0,name:"0%",tit:"已完成数"}]},echartCirData4:{id:"echart4",color:["#f56c6c","#008aff"],size:[0,"72.89%"],total:1,data:[{value:0,name:"0%",tit:"未完成数"},{value:0,name:"0%",tit:"已完成数"}]}}},methods:{getEchartData:function(){var t=this;this.$http.post("/pc_ims/index",{user_id:21,flg:2}).then(function(e){if(0==e.data.code){t.echartCirData3.total=e.data.data.job.count,console.log(e.data.data);var a=e.data.data.job.wei,s=e.data.data.job.wan,i=e.data.data.xunjian.wei,n=e.data.data.xunjian.wan;t.echartCirData3.data=[{value:e.data.data.job.wan,name:Math.floor(s/(s+a)*100)+"%",tit:"已完成数"},{value:e.data.data.job.wei,name:Math.floor(a/(s+a)*100)+"%",tit:"未完成数"}],t.echartCirData4.total=e.data.data.xunjian.count,t.echartCirData4.data=[{value:e.data.data.xunjian.wei,name:Math.floor(i/(i+n)*100)+"%",tit:"未完成数"},{value:e.data.data.xunjian.wan,name:Math.floor(n/(n+i)*100)+"%",tit:"已完成数"}],t.barData.data=[e.data.data.source.sys,e.data.data.source.people],t.barData.total=e.data.data.source.count,console.log(t.barData.data),t.circleData.data=[Math.floor(s/(s+a)*100),"","",Math.floor(n/(n+i)*100)],t.circleData.total=(e.data.data.percent.count/100).toFixed(4),t.circleData.crate={monW:e.data.data.percent.job,monR:e.data.data.percent.xunjian},console.log(t.circleData)}else t.$message({type:"error",message:e.data.msg})})}},created:function(){},mounted:function(){this.getEchartData()}},Gt={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"generation autoComponent"},[a("Header",{attrs:{datas:t.navsData}}),t._v(" "),a("Crumbs",{attrs:{data:t.crumbs}}),t._v(" "),a("div",{staticClass:"msgBox boxs"},[t._m(0),t._v(" "),a("div",{staticClass:"msgsIn0"},[a("div",{staticClass:"msgsIn"},[a("div",{staticClass:"msgsInTit",domProps:{textContent:t._s("本月工单数")}}),t._v(" "),a("div",{staticClass:"msgsInBoxs"},[a("div",{staticClass:"msgsInCircle"},[a("EchartCirFull",{ref:"echartCirData3",attrs:{echartCirData:t.echartCirData3}})],1),t._v(" "),a("ul",{staticClass:"msgsInTable"},[a("li",[a("label",[t._v("工单总数")]),t._v(" "),a("div",{staticClass:"numBox"},[a("span",{domProps:{textContent:t._s(t.echartCirData3.total+"单")}})])]),t._v(" "),a("li",[a("label",[t._v("已完成数")]),t._v(" "),a("div",{staticClass:"numBox"},[a("div",{staticClass:"numFeal"},[a("div",{staticClass:"numLines2",style:{width:2.1*t.echartCirData3.data[0].value/t.echartCirData3.total+"rem"}},[t._v(t._s(t.echartCirData3.data[0].value))])])])]),t._v(" "),a("li",[a("label",[t._v("未完成数")]),t._v(" "),a("div",{staticClass:"numBox"},[a("div",{staticClass:"numFeals"},[a("div",{staticClass:"numLines",style:{width:2.1*t.echartCirData3.data[1].value/t.echartCirData3.total+"rem"}},[t._v(t._s(t.echartCirData3.data[1].value))])])])])])])]),t._v(" "),a("Lines",{attrs:{top:20,hei:213}}),t._v(" "),a("div",{staticClass:"msgsIn"},[a("div",{staticClass:"msgsInTit",domProps:{textContent:t._s("本月巡检任务数")}}),t._v(" "),a("div",{staticClass:"msgsInBoxs"},[a("div",{staticClass:"msgsInCircle"},[a("EchartCirFull",{ref:"echartCirData4",attrs:{echartCirData:t.echartCirData4}})],1),t._v(" "),a("ul",{staticClass:"msgsInTable"},[a("li",[a("label",[t._v("巡检单数")]),t._v(" "),a("div",{staticClass:"numBox"},[a("span",{domProps:{textContent:t._s(t.echartCirData4.total+"单")}})])]),t._v(" "),a("li",[a("label",[t._v("已完成数")]),t._v(" "),a("div",{staticClass:"numBox"},[a("div",{staticClass:"numFeal"},[a("div",{staticClass:"numLines2",style:{width:2.1*t.echartCirData4.data[1].value/t.echartCirData4.total+"rem"}},[t._v(t._s(t.echartCirData4.data[1].value))])])])]),t._v(" "),a("li",[a("label",[t._v("未完成数")]),t._v(" "),a("div",{staticClass:"numBox"},[a("div",{staticClass:"numFeals"},[a("div",{staticClass:"numLines",style:{width:2.1*t.echartCirData4.data[0].value/t.echartCirData4.total+"rem"}},[t._v(t._s(t.echartCirData4.data[0].value))])])])])])])])],1)]),t._v(" "),a("div",{staticClass:"dealed boxs"},[t._m(1),t._v(" "),a("div",{staticClass:"workBox1"},[a("div",{staticClass:"workBox1In"},[a("div",{staticClass:"workBox1In1"},[a("p",{staticClass:"marginTop",domProps:{textContent:t._s(t.circleData.crate.monW+"%")}}),t._v(" "),a("span",{staticClass:"colorY"},[t._v("本月工单完成率")])]),t._v(" "),a("Lines",{attrs:{type:"h",wid:148,left:35}}),t._v(" "),a("div",{staticClass:"workBox1In1"},[a("p",{domProps:{textContent:t._s(t.circleData.crate.monR+"%")}}),t._v(" "),a("span",{staticClass:"colorB"},[t._v("本月巡检完成率")])])],1),t._v(" "),a("div",{staticClass:"workBox1Cir"},[a("div",{staticClass:"workBox1CirIn"},[a("EchartPie",{style:{width:"1.98rem",height:"1.98rem"},attrs:{data:t.circleData}})],1)])])]),t._v(" "),a("div",{staticClass:"workFrom boxs"},[a("div",{staticClass:"boxsTitG"},[a("span",{staticClass:"tit"},[t._v("工单来源")]),t._v(" "),a("div",{staticClass:"totalNum"},[a("div",{staticClass:"lines"}),t._v(" "),a("span",[t._v("总数：")]),t._v(" "),a("span",[t._v(t._s(t.barData.total)+"单")])])]),t._v(" "),a("div",{staticClass:"EchartBarBox"},[a("EchartBar",{attrs:{data:t.barData}})],1)])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"boxsTitG"},[e("span",{staticClass:"tit"},[this._v("工单&巡检 完成情况")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"boxsTitG"},[e("span",{staticClass:"tit"},[this._v("工单&巡检 完成率")])])}]};var Yt=a("VU/8")(Wt,Gt,!1,function(t){a("mX5o")},"data-v-54200a8e",null).exports,Kt=a("8BMp"),Xt={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"schedule autoComponent"},[s("Header",{attrs:{datas:t.navsData}}),t._v(" "),s("Crumbs",{attrs:{data:t.crumbs}}),t._v(" "),s("el-tabs",{staticClass:"tabBoxs",on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[s("el-tab-pane",{attrs:{name:"first"}},[s("span",{staticClass:"tabItems",attrs:{slot:"label"},slot:"label"},[t._v("\n              排班表\n          ")]),t._v(" "),s("ScheduleTable",{staticStyle:{width:"100%"},attrs:{isShowBtns:"no",data:t.scheTable},on:{getPaibanData:t.getTableList}})],1),t._v(" "),s("el-tab-pane",{attrs:{name:"second"}},[s("span",{staticClass:"tabItems",attrs:{slot:"label"},slot:"label"},[t._v("\n            申请换班\n        ")]),t._v(" "),s("div",{staticClass:"boxs"},[s("div",{staticClass:"pBody"},[s("div",{staticClass:"pBox"},[s("div",{staticClass:"imgBox",staticStyle:{padding:"0"}},[s("img",{attrs:{src:a("tXnU"),width:"100%",alt:""}})]),t._v(" "),s("div",{staticClass:"nameBox boxs"},[s("div",{staticClass:"labelBox"},[s("label",{attrs:{for:""}},[t._v("申请人：")]),t._v(" "),s("span",{domProps:{textContent:t._s(t.dia.truename)}})]),t._v(" "),s("div",{staticClass:"labelBox"},[s("label",{attrs:{for:""}},[t._v("联系电话：")]),t._v(" "),s("span",{domProps:{textContent:t._s(t.dia.tel1)}})]),t._v(" "),s("div",{staticClass:"labelBox"},[s("label",{attrs:{for:""}},[t._v("申请人班次：")]),t._v(" "),s("SelectBox",{class:"selectStyle",attrs:{options:t.applyhbSelect.bTimes,value:t.applyhbSelect.bTime,icon:"el-icon-d-caret",placeholder:"选择班次"},on:{change:t.change1}})],1)])]),t._v(" "),s("Lines",{attrs:{hei:125,top:20}}),t._v(" "),s("div",{staticClass:"pBox"},[s("div",{staticClass:"imgBox",staticStyle:{padding:"0"}},[s("img",{attrs:{src:a("tXnU"),alt:""}})]),t._v(" "),s("div",{staticClass:"nameBox boxs"},[s("div",{staticClass:"labelBox"},[s("label",{attrs:{for:""}},[t._v("换班人：")]),t._v(" "),s("SelectBox",{class:"selectStyle",attrs:{options:t.applyhbSelect.peos,value:t.applyhbSelect.vpeo,vmultiple:!0,icon:"el-icon-d-caret",placeholder:"选择人员"},on:{change:t.change2}})],1),t._v(" "),s("div",{staticClass:"labelBox"},[s("label",{attrs:{for:""}},[t._v("联系电话：")]),t._v(" "),s("span",{domProps:{textContent:t._s(t.dia.tel2)}})]),t._v(" "),s("div",{staticClass:"labelBox"},[s("label",{attrs:{for:""}},[t._v("换班人班次：")]),t._v(" "),s("SelectBox",{staticClass:"selectStyle",attrs:{options:t.applyhbSelect.hbTimes,value:t.applyhbSelect.hbTime,icon:"el-icon-d-caret",placeholder:"选择时间段"},on:{change:t.change3}})],1)])])],1),t._v(" "),s("div",{staticClass:"reason"},[s("div",{staticClass:"diaTit2"},[t._v("换班原因")]),t._v(" "),s("div",{staticClass:"reasonBox"},[s("el-input",{attrs:{type:"textarea"},on:{focus:t.clearVal},model:{value:t.dia.reason,callback:function(e){t.$set(t.dia,"reason",e)},expression:"dia.reason"}})],1)]),t._v(" "),s("div",{staticStyle:{"text-align":"center"}},[s("el-button",{staticClass:"submitApply",on:{click:t.submitApply}},[t._v("提交申请")])],1)])]),t._v(" "),s("el-tab-pane",{staticClass:"tabChilds boxs",attrs:{name:"thrid"}},[s("span",{staticClass:"tabItems",attrs:{slot:"label"},slot:"label"},[t._v("\n              申请状态\n          ")]),t._v(" "),s("div",{staticClass:"statusTabs"},[s("el-radio-group",{on:{change:t.changeStatus},model:{value:t.tabPosition,callback:function(e){t.tabPosition=e},expression:"tabPosition"}},[s("el-radio-button",{attrs:{label:"待审核"}},[t._v("待审核")]),t._v(" "),s("Lines",{attrs:{hei:30,top:0}}),t._v(" "),s("el-radio-button",{attrs:{label:"已审核"}},[t._v("已审核")]),t._v(" "),s("Lines",{attrs:{hei:30,top:0}}),t._v(" "),s("el-radio-button",{attrs:{label:"我的处理"}},[t._v("我的处理")])],1)],1),t._v(" "),s("div",[s("ul",{directives:[{name:"show",rawName:"v-show",value:"待审核"==t.tabPosition,expression:"tabPosition=='待审核'"}],staticClass:"tabLists"},t._l(t.noApplyLists,function(e){return s("li",{staticClass:"boxs",staticStyle:{overflow:"visible"}},[s("div",{staticClass:"pBox"},[s("div",{staticClass:"imgBox"},[s("img",{attrs:{src:a("tXnU"),alt:""}})]),t._v(" "),s("div",{staticClass:"descBox"},[s("div",{staticClass:"nameBox"},[s("div",{staticClass:"labelBox"},[s("label",{attrs:{for:""}},[t._v("申请人：")]),t._v(" "),s("span",{domProps:{textContent:t._s(e.old_truename)}})]),t._v(" "),s("div",{staticClass:"labelBox"},[s("label",{attrs:{for:""}},[t._v("联系电话：")]),t._v(" "),s("span",{domProps:{textContent:t._s(e.old_phone)}})]),t._v(" "),s("div",{staticClass:"labelBox"},[s("label",{attrs:{for:""}},[t._v("班次：")]),t._v(" "),s("span",{domProps:{textContent:t._s(e.oldtitle)}})])]),t._v(" "),s("div",{staticStyle:{clear:"both"}}),t._v(" "),s("div",{staticClass:"nameBox"},[s("div",{staticClass:"labelBox"},[s("label",{attrs:{for:""}},[t._v("换班人：")]),t._v(" "),s("span",{domProps:{textContent:t._s(e.new_truename)}})]),t._v(" "),s("div",{staticClass:"labelBox"},[s("label",{attrs:{for:""}},[t._v("联系电话：")]),t._v(" "),s("span",{domProps:{textContent:t._s(e.new_phone)}})]),t._v(" "),s("div",{staticClass:"labelBox"},[s("label",{attrs:{for:""}},[t._v("班次：")]),t._v(" "),s("span",{domProps:{textContent:t._s(e.newtitle)}})])]),t._v(" "),s("div",{staticStyle:{clear:"both"}}),t._v(" "),s("div",{staticClass:"nameBox"},[s("div",{staticClass:"labelBox"},[s("label",{attrs:{for:""}},[t._v("换班原因：")]),t._v(" "),s("span",{staticClass:"hbExcuse",domProps:{textContent:t._s(e.description)}})])]),t._v(" "),s("div",{staticStyle:{clear:"both"}}),t._v(" "),s("div",{staticClass:"nameBox"},[s("div",{staticClass:"labelBox"},[s("label",{attrs:{for:""}},[t._v("申请时间：")]),t._v(" "),s("span",{domProps:{textContent:t._s(e.addtime)}})])]),t._v(" "),s("div",{staticStyle:{clear:"both"}}),t._v(" "),s("div",{staticClass:"nameBox"},[s("div",{staticClass:"labelBox"},[s("label",{attrs:{for:""}},[t._v("当前状态：")]),t._v(" "),1==e.now_process?s("span",{staticClass:"dqStatus"},[t._v("待审核")]):t._e()])])])])])})),t._v(" "),s("ul",{directives:[{name:"show",rawName:"v-show",value:"已审核"==t.tabPosition,expression:"tabPosition=='已审核'"}],staticClass:"tabLists"},t._l(t.noApplyLists,function(e){return s("li",{staticClass:"boxs",staticStyle:{overflow:"visible"}},[s("div",{staticClass:"pBox"},[s("div",{staticClass:"imgBox"},[s("img",{attrs:{src:a("tXnU"),alt:""}})]),t._v(" "),s("div",{staticClass:"descBox"},[s("div",{staticClass:"nameBox"},[s("div",{staticClass:"labelBox"},[s("label",{attrs:{for:""}},[t._v("申请人：")]),t._v(" "),s("span",{domProps:{textContent:t._s(e.old_truename)}})]),t._v(" "),s("div",{staticClass:"labelBox"},[s("label",{attrs:{for:""}},[t._v("联系电话：")]),t._v(" "),s("span",{domProps:{textContent:t._s(e.old_phone)}})]),t._v(" "),s("div",{staticClass:"labelBox"},[s("label",{attrs:{for:""}},[t._v("班次：")]),t._v(" "),s("span",{domProps:{textContent:t._s(e.old_workdate+" "+e.oldstarttime+"~"+e.oldendtime)}})])]),t._v(" "),s("div",{staticStyle:{clear:"both"}}),t._v(" "),s("div",{staticClass:"nameBox"},[s("div",{staticClass:"labelBox"},[s("label",{attrs:{for:""}},[t._v("换班人：")]),t._v(" "),s("span",{domProps:{textContent:t._s(e.new_truename)}})]),t._v(" "),s("div",{staticClass:"labelBox"},[s("label",{attrs:{for:""}},[t._v("联系电话：")]),t._v(" "),s("span",{domProps:{textContent:t._s(e.new_phone)}})]),t._v(" "),s("div",{staticClass:"labelBox"},[s("label",{attrs:{for:""}},[t._v("班次：")]),t._v(" "),s("span",{domProps:{textContent:t._s(e.new_workdate+" "+e.newstarttime+"~"+e.newendtime)}})])]),t._v(" "),s("div",{staticStyle:{clear:"both"}}),t._v(" "),s("div",{staticClass:"nameBox"},[s("div",{staticClass:"labelBox"},[s("label",{attrs:{for:""}},[t._v("换班原因：")]),t._v(" "),s("span",{staticClass:"hbExcuse",domProps:{textContent:t._s(e.description)}})])]),t._v(" "),s("div",{staticStyle:{clear:"both"}}),t._v(" "),s("div",{staticClass:"nameBox"},[s("div",{staticClass:"labelBox"},[s("label",{attrs:{for:""}},[t._v("申请时间：")]),t._v(" "),s("span",{domProps:{textContent:t._s(e.addtime)}})])]),t._v(" "),s("div",{staticStyle:{clear:"both"}}),t._v(" "),s("div",{staticClass:"nameBox"},[s("div",{staticClass:"labelBox"},[s("label",{attrs:{for:""}},[t._v("当前状态：")]),t._v(" "),0==e.now_process?s("span",{staticClass:"dqStatus",staticStyle:{color:"#fff"}},[t._v("新建")]):1==e.now_process?s("span",{staticClass:"dqStatus"},[t._v("被换班人同意换班")]):2==e.now_process?s("span",{staticClass:"dqStatus"},[t._v("换班成功")]):10==e.now_process?s("span",{staticClass:"dqStatus"},[t._v("被换班人拒绝换班")]):t._e(),t._v(" "),11==e.now_process?s("span",{staticClass:"dqStatus"},[t._v("换班驳回")]):t._e()]),t._v(" "),s("div",{staticClass:"labelBox"},[s("label",{attrs:{for:""}},[t._v("审核人：")]),t._v(" "),s("span",{domProps:{textContent:t._s(e.approver_name)}})])])])])])})),t._v(" "),s("ul",{directives:[{name:"show",rawName:"v-show",value:"我的处理"==t.tabPosition,expression:"tabPosition=='我的处理'"}],staticClass:"tabLists"},t._l(t.noApplyLists,function(e){return s("li",{staticClass:"boxs",staticStyle:{overflow:"visible"}},[s("div",{staticClass:"pBox"},[s("div",{staticClass:"imgBox"},[s("img",{attrs:{src:a("tXnU"),alt:""}})]),t._v(" "),s("div",{staticClass:"descBox"},[s("div",{staticClass:"nameBox"},[s("div",{staticClass:"labelBox"},[s("label",{attrs:{for:""}},[t._v("申请人：")]),t._v(" "),s("span",{domProps:{textContent:t._s(e.old_truename)}})]),t._v(" "),s("div",{staticClass:"labelBox"},[s("label",{attrs:{for:""}},[t._v("联系电话：")]),t._v(" "),s("span",{domProps:{textContent:t._s(e.old_phone)}})]),t._v(" "),s("div",{staticClass:"labelBox"},[s("label",{attrs:{for:""}},[t._v("班次：")]),t._v(" "),s("span",{domProps:{textContent:t._s(e.old_workdate+" "+e.oldstarttime+"~"+e.oldendtime)}})])]),t._v(" "),s("div",{staticStyle:{clear:"both"}}),t._v(" "),s("div",{staticClass:"nameBox"},[s("div",{staticClass:"labelBox"},[s("label",{attrs:{for:""}},[t._v("换班人：")]),t._v(" "),s("span",{domProps:{textContent:t._s(e.new_truename)}})]),t._v(" "),s("div",{staticClass:"labelBox"},[s("label",{attrs:{for:""}},[t._v("联系电话：")]),t._v(" "),s("span",{domProps:{textContent:t._s(e.new_phone)}})]),t._v(" "),s("div",{staticClass:"labelBox"},[s("label",{attrs:{for:""}},[t._v("班次：")]),t._v(" "),s("span",{domProps:{textContent:t._s(e.new_workdate+" "+e.newstarttime+"~"+e.newendtime)}})])]),t._v(" "),s("div",{staticStyle:{clear:"both"}}),t._v(" "),s("div",{staticClass:"nameBox"},[s("div",{staticClass:"labelBox"},[s("label",{attrs:{for:""}},[t._v("换班原因：")]),t._v(" "),s("span",{staticClass:"hbExcuse",domProps:{textContent:t._s(e.description)}})])]),t._v(" "),s("div",{staticStyle:{clear:"both"}}),t._v(" "),s("div",{staticClass:"nameBox"},[s("div",{staticClass:"labelBox"},[s("label",{attrs:{for:""}},[t._v("申请时间：")]),t._v(" "),s("span",{domProps:{textContent:t._s(e.addtime)}})])]),t._v(" "),s("div",{staticStyle:{clear:"both"}}),t._v(" "),s("div",{staticClass:"nameBox"},[s("div",{staticClass:"labelBox"},[0==e.now_process?s("span",[s("el-button",{staticClass:"refuseHb",on:{click:function(a){t.noAgree(e.id)}}},[t._v("拒绝换班")]),t._v(" "),s("el-button",{staticClass:"agreeHb",on:{click:function(a){t.agreeReplace(e.id)}}},[t._v("同意换班")])],1):1==e.now_process?s("span",{staticClass:"dqStatus"},[s("el-button",{staticClass:"refuseHb"},[t._v("已同意换班")])],1):2==e.now_process?s("span",{staticClass:"dqStatus"},[s("el-button",{staticClass:"refuseHb"},[t._v("换班成功")])],1):10==e.now_process?s("span",{staticClass:"dqStatus"},[s("el-button",{staticClass:"refuseHb"},[t._v("已拒绝换班")])],1):t._e(),t._v(" "),11==e.now_process?s("span",{staticClass:"dqStatus"},[s("el-button",{staticClass:"refuseHb"},[t._v("换班驳回")])],1):t._e()])])])])])}))])])],1),t._v(" "),s("transition",{attrs:{name:"fade"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:"first"==t.activeName,expression:"activeName=='first'"}],staticClass:"sceBtn btnBai1",on:{click:t.exportTable}},[s("img",{attrs:{src:a("+1Ej")}}),t._v(" "),s("span",[t._v("导出排班表")])])])],1)},staticRenderFns:[]};var Qt=function(t){a("5Ss9")},Jt=a("VU/8")(Kt.a,Xt,!1,Qt,"data-v-39564deb",null).exports,Zt=a("f6zP"),te={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"workBox autoComponent"},[a("Header",{attrs:{datas:t.navsData}}),t._v(" "),a("Crumbs",{attrs:{data:t.crumbs}}),t._v(" "),a("div",{staticClass:"workHead boxs"},t._l(t.workH,function(e,s){return a("div",{staticClass:"numBox"},[a("div",{staticClass:"numBoxIn"},[a("p",{style:{color:e.color},domProps:{textContent:t._s(e.val)}}),t._v(" "),a("span",{domProps:{textContent:t._s(e.tit)}})]),t._v(" "),3!=s?a("Lines",{attrs:{hei:60,top:20}}):t._e()],1)})),t._v(" "),a("div",{staticClass:"tableBoxs boxs"},[a("div",{staticClass:"tabHead"},[a("div",{staticClass:"jobBoxs"},[a("SelectBox",{attrs:{options:t.vSystems,value:t.vsystem,icon:"el-icon-d-caret",placeholder:"类别"},on:{change:t.change1}})],1),t._v(" "),a("div",{staticClass:"nameBoxs"},[a("SelectBox",{attrs:{options:t.vTypes,value:t.vtype,icon:"el-icon-d-caret",placeholder:"派发类别"},on:{change:t.change2}})],1),t._v(" "),a("div",{staticClass:"searchBoxs",on:{click:t.getTableList}},[a("i",{staticClass:"el-icon-search"}),t._v(" "),a("span",[t._v("筛选")])])]),t._v(" "),a("div",{staticClass:"tableIn"},[a("Table",{staticStyle:{width:"100%"},attrs:{table:t.table},on:{rowClick:t.rowClick}}),t._v(" "),a("Page",{attrs:{pages:t.page},on:{changeCurrentPage:t.changeCurrentPage}})],1)]),t._v(" "),a("Dialog",{ref:"tableInfos2",attrs:{wid:"910",hei:"600"}},[a("div",{staticClass:"tableInfos"},[a("div",{staticClass:"infoHead"},[a("span",{staticClass:"infoState",domProps:{textContent:t._s(t.dtlObj.sendSrc)}})]),t._v(" "),a("div",{staticClass:"rightHead"},[a("span",{staticClass:"infoBusy",domProps:{textContent:t._s(t.dtlObj.jinji)}})]),t._v(" "),a("div",{staticClass:"infoBoxs"},[a("div",{staticClass:"statusTabs"},[a("el-radio-group",{on:{change:t.changeStatus},model:{value:t.tabPosition,callback:function(e){t.tabPosition=e},expression:"tabPosition"}},[a("el-radio-button",{attrs:{label:"正常处理"}},[t._v("正常处理")]),t._v(" "),a("Lines",{attrs:{hei:30,top:0}}),t._v(" "),a("el-radio-button",{attrs:{label:"延期处理"}},[t._v("延期处理")]),t._v(" "),a("Lines",{attrs:{hei:30,top:0}})],1)],1),t._v(" "),a("div",[a("div",{directives:[{name:"show",rawName:"v-show",value:"正常处理"==t.tabPosition,expression:"tabPosition=='正常处理'"}],staticClass:"tabLists"},[a("ul",t._l(t.dtlObj.devices,function(e,s){return a("li",{key:s},[a("span",{staticClass:"taskLabel"},[t._v(t._s(e.label))]),t._v(" "),a("span",{staticClass:"taskCont"},[t._v(t._s(e.value))])])})),t._v(" "),a("div",[a("div",{staticClass:"contLabel"},[t._v("详情描述")]),t._v(" "),a("el-input",{staticClass:"controlCont controlCont1",attrs:{type:"textarea",rows:2,placeholder:"请输入内容"},model:{value:t.dtlObj.description,callback:function(e){t.$set(t.dtlObj,"description",e)},expression:"dtlObj.description"}})],1),t._v(" "),a("ul",[a("li",[a("span",{staticClass:"taskLabel"},[t._v("派发人员")]),t._v(" "),a("span",{staticClass:"taskCont"},[t._v(t._s(t.dtlObj.dispatch_user_name))])]),t._v(" "),a("li",[a("span",{staticClass:"taskLabel"},[t._v("联系电话")]),t._v(" "),a("span",{staticClass:"taskCont"},[t._v(t._s(t.dtlObj.dispatch_user_phone))])])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.dtlObj.dtlIsShow,expression:"dtlObj.dtlIsShow"}],staticStyle:{clear:"both"}},[a("div",{staticClass:"contLabel"},[t._v("现场处理情况")]),t._v(" "),a("el-input",{staticClass:"controlCont controlCont2",attrs:{type:"textarea",rows:2,placeholder:"请输入内容"},model:{value:t.dtlObj.complete_info,callback:function(e){t.$set(t.dtlObj,"complete_info",e)},expression:"dtlObj.complete_info"}})],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.dtlObj.dtlIsShow,expression:"dtlObj.dtlIsShow"}],staticClass:"dealimg"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("div",[t._v("处理前")])]),t._v(" "),a("el-col",{attrs:{span:12}},[a("div",[t._v("处理后")])])],1),t._v(" "),a("div",[a("div",{staticClass:"imgs1"},t._l(t.dtlObj.pic1,function(t){return a("img",{attrs:{src:t.src}})})),t._v(" "),a("Lines",{staticClass:"lines",attrs:{top:0,hei:100}}),t._v(" "),a("div",{staticClass:"imgs2"},t._l(t.dtlObj.pic2,function(t){return a("img",{attrs:{src:t.src}})}))],1)],1),t._v(" "),0==t.dtlObj.now_state?a("div",{staticClass:"btnsgroups"},[a("span",{staticClass:"infoBusy",domProps:{textContent:t._s("退单")},on:{click:function(e){t.refult(t.dtlObj,5)}}}),t._v(" "),a("span",{staticClass:"infoSend",domProps:{textContent:t._s("取消")},on:{click:function(e){t.backWork(t.dtlObj,0)}}}),t._v(" "),a("span",{staticClass:"infoSubmit",domProps:{textContent:t._s("接单")},on:{click:function(e){t.backWork(t.dtlObj,1)}}})]):1==t.dtlObj.now_state||3==t.dtlObj.now_state?a("div",{staticClass:"btnsgroups"},[a("span",{staticClass:"infoBusy",domProps:{textContent:t._s("退单")},on:{click:function(e){t.refult(t.dtlObj,5)}}}),t._v(" "),a("span",{staticClass:"infoSend",domProps:{textContent:t._s("取消")},on:{click:function(e){t.backWork(t.dtlObj,0)}}}),t._v(" "),a("span",{staticClass:"infoSubmit",domProps:{textContent:t._s("提交")},on:{click:function(e){t.backWork(t.dtlObj,4)}}})]):t._e()]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"延期处理"==t.tabPosition,expression:"tabPosition=='延期处理'"}],staticClass:"tabLists"},[a("ul",t._l(t.dtlObj.devices,function(e,s){return a("li",{key:s},[a("span",{staticClass:"taskLabel"},[t._v(t._s(e.label))]),t._v(" "),a("span",{staticClass:"taskCont"},[t._v(t._s(e.value))])])})),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.dtlObj.dtlIsShow,expression:"dtlObj.dtlIsShow"}]},[a("div",{staticClass:"contLabel"},[t._v("详情描述")]),t._v(" "),a("el-input",{staticClass:"controlCont controlCont1",attrs:{type:"textarea",rows:2,placeholder:"请输入内容"},model:{value:t.dtlObj.description,callback:function(e){t.$set(t.dtlObj,"description",e)},expression:"dtlObj.description"}})],1),t._v(" "),a("ul",[a("li",[a("span",{staticClass:"taskLabel"},[t._v("派发人员")]),t._v(" "),a("span",{staticClass:"taskCont"},[t._v(t._s(t.dtlObj.dispatch_user_name))])]),t._v(" "),a("li",[a("span",{staticClass:"taskLabel"},[t._v("联系电话")]),t._v(" "),a("span",{staticClass:"taskCont"},[t._v(t._s(t.dtlObj.dispatch_user_phone))])])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.dtlObj.dtlIsShow,expression:"dtlObj.dtlIsShow"}],staticClass:"yuji",staticStyle:{clear:"both"}},[a("div",{staticClass:"contLabel"},[t._v("延后预计完成时间")]),t._v(" "),a("div",{staticClass:"yujiDate"},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:t.value1,callback:function(e){t.value1=e},expression:"value1"}})],1),t._v(" "),a("div",{staticClass:"yujitime"},[a("el-time-select",{attrs:{placeholder:"选择时间"},model:{value:t.value2,callback:function(e){t.value2=e},expression:"value2"}})],1)]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.dtlObj.dtlIsShow,expression:"dtlObj.dtlIsShow"}],staticStyle:{clear:"both"}},[a("div",{staticClass:"contLabel"},[t._v("现场处理情况")]),t._v(" "),a("el-input",{staticClass:"controlCont controlCont2",attrs:{type:"textarea",rows:2,placeholder:"请输入内容"},model:{value:t.dtlObj.complete_info,callback:function(e){t.$set(t.dtlObj,"complete_info",e)},expression:"dtlObj.complete_info"}})],1),t._v(" "),0==t.dtlObj.now_state?a("div",{staticClass:"btnsgroups"},[a("span",{staticClass:"infoBusy",domProps:{textContent:t._s("退单")},on:{click:function(e){t.refult(t.dtlObj,5)}}}),t._v(" "),a("span",{staticClass:"infoSend",domProps:{textContent:t._s("取消")},on:{click:function(e){t.backWork(t.dtlObj,0)}}}),t._v(" "),a("span",{staticClass:"infoSubmit",domProps:{textContent:t._s("接单")},on:{click:function(e){t.backWork(t.dtlObj,1)}}})]):1==t.dtlObj.now_state||3==t.dtlObj.now_state?a("div",{staticClass:"btnsgroups"},[a("span",{staticClass:"infoBusy",domProps:{textContent:t._s("退单")},on:{click:function(e){t.refult(t.dtlObj,5)}}}),t._v(" "),a("span",{staticClass:"infoSend",domProps:{textContent:t._s("取消")},on:{click:function(e){t.backWork(t.dtlObj,0)}}}),t._v(" "),a("span",{staticClass:"infoSubmit",domProps:{textContent:t._s("提交")},on:{click:function(e){t.backWork(t.dtlObj,2)}}})]):t._e()])])])])]),t._v(" "),a("Dialog",{ref:"isRefult2",attrs:{wid:"564",hei:"286"}},[a("div",{staticClass:"isRefTit"},[t._v("退单原因")]),t._v(" "),a("div",{staticClass:"isRefDesc"},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入退单原因"},model:{value:t.dealWorkParam.info,callback:function(e){t.$set(t.dealWorkParam,"info",e)},expression:"dealWorkParam.info"}})],1),t._v(" "),a("div",{staticClass:"isRbtnBoxs2"},[a("span",{on:{click:t.submitBack}},[t._v("提交")])])]),t._v(" "),a("Dialog",{ref:"isRefult",attrs:{wid:"364",hei:"216"}},[a("div",{staticClass:"isRefTxt",domProps:{textContent:t._s(t.dialogBoxs.txt)}}),t._v(" "),a("div",{staticClass:"isRbtnBoxs"},[a("span",{on:{click:t.submitOk}},[t._v("确定")]),t._v(" "),a("span",{on:{click:t.submitNo}},[t._v("取消")])])]),t._v(" "),a("Dialog",{ref:"sendWork2",attrs:{wid:"414",hei:"256"}},[a("div",{staticClass:"sendWork2"},[a("div",{staticClass:"oldName"},[a("label",{attrs:{for:""}},[t._v("原处理人员：")]),t._v(" "),a("span",{staticClass:"namess",domProps:{textContent:t._s(t.dialogBoxs.item.name)}})]),t._v(" "),a("div",{staticClass:"newName"},[a("label",{attrs:{for:""}},[t._v("新工单处理人员：")]),t._v(" "),a("div",{staticClass:"ChooseBox"},[a("SelectBox",{attrs:{options:t.names,value:t.vName,placeholder:"姓名"},on:{change:t.change2}})],1)]),t._v(" "),a("div",{staticClass:"sendWork2Boxs btnBai1",on:{click:t.sendWork2}},[a("span",[t._v("确定")])])])])],1)},staticRenderFns:[]};var ee=function(t){a("17rw")},ae=a("VU/8")(Zt.a,te,!1,ee,"data-v-876d8e98",null).exports,se=a("LIpj"),ie={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"workBox autoComponent"},[a("Header",{attrs:{datas:t.navsData}}),t._v(" "),a("Crumbs",{attrs:{data:t.crumbs}}),t._v(" "),a("div",{staticClass:"workHead boxs"},t._l(t.workH,function(e,s){return a("div",{staticClass:"numBox"},[a("div",{staticClass:"numBoxIn"},[a("p",{style:{color:e.color},domProps:{textContent:t._s(e.val)}}),t._v(" "),a("span",{domProps:{textContent:t._s(e.tit)}})]),t._v(" "),3!=s?a("Lines",{attrs:{hei:60,top:20}}):t._e()],1)})),t._v(" "),a("div",{staticClass:"tableBoxs boxs"},[a("div",{staticClass:"tabHead"},[a("div",{staticClass:"jobBoxs"},[a("SelectBox",{attrs:{options:t.jobs,value:t.vJob,icon:"el-icon-d-caret",placeholder:"类别"},on:{change:t.change1}})],1),t._v(" "),a("div",{staticClass:"searchBoxs",on:{click:t.getTableData}},[a("i",{staticClass:"el-icon-search"}),t._v(" "),a("span",[t._v("筛选")])])]),t._v(" "),a("div",{staticClass:"tableIn"},[a("Table",{staticStyle:{width:"100%"},attrs:{table:t.table},on:{rowClick:t.rowClick}}),t._v(" "),a("Page",{attrs:{pages:t.page},on:{changeCurrentPage:t.changeCurrentPage}})],1)]),t._v(" "),a("Dialog",{ref:"tableInfos2",attrs:{wid:"910",hei:"500"}},[a("div",{staticClass:"tableInfos"},[a("div",{staticClass:"infoHead"},[a("span",{staticClass:"infoName",domProps:{textContent:t._s("巡检详情")}}),t._v(" "),0==t.newData.item.now_value?a("span",{staticClass:"infoState"},[t._v("未接单\n                "),a("span",{staticClass:"infoBack",domProps:{textContent:t._s("退单")},on:{click:function(e){t.refult(t.newData,5)}}})]):1==t.newData.item.now_value?a("span",{staticClass:"infoState"},[t._v("\n                处理中\n              ")]):2==t.newData.item.now_value?a("span",{staticClass:"infoState"},[t._v("已完成")]):3==t.newData.item.now_value?a("span",{staticClass:"infoState"},[t._v("申请退单")]):4==t.newData.item.now_value?a("span",{staticClass:"infoState"},[t._v("退单完成")]):t._e()]),t._v(" "),a("div",{staticClass:"infoBoxs"},[a("div",{staticClass:"routingTask"},[t.newData.desc&&t.newData.desc.length>0?a("ul",t._l(t.newData.desc,function(e,s){return a("li",{key:s,staticClass:"job_det"},[a("div",{staticClass:"taskDtl"},[e?a("div",{staticClass:"taskLabel"},[t._v(t._s(e.label))]):t._e(),t._v(" "),a("div",{staticClass:"taskCont"},[t._v(t._s(e.value))])])])})):t._e(),t._v(" "),a("div",{staticStyle:{clear:"both"}}),t._v(" "),a("div",{staticClass:"routingDtl"},[a("div",{staticClass:"contLabel",domProps:{textContent:t._s("现场处理情况")}}),t._v(" "),a("el-input",{staticClass:"controlCont controlCont2",style:{color:"#fff"},attrs:{type:"textarea",rows:2,placeholder:"请输入内容"},model:{value:t.newData.item.complete_info,callback:function(e){t.$set(t.newData.item,"complete_info",e)},expression:"newData.item.complete_info"}})],1),t._v(" "),a("div",{staticClass:"contLabel",domProps:{textContent:t._s("巡检表格")}}),t._v(" "),a("div",{staticClass:"boxs routigtable",staticStyle:{width:"95.6%",margin:"0 2.2%"}},[2!=t.newData.item.now_value?a("div",{staticClass:"jduser"},[t._v("检点人："+t._s(t.newData.jduser))]):t._e(),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{height:t.table.hei,data:t.newData.tableData.data}},t._l(t.newData.tableData.th,function(e,s){return a("el-table-column",{key:s,attrs:{label:e.label},scopedSlots:t._u([{key:"default",fn:function(s){return[a("div",[s.row.serial!=t.newData.tableData.data.length?a("span",[a("el-input",{attrs:{placeholder:"",readonly:s.row.serial!=t.newData.tableData.data.length},model:{value:s.row[e.prop],callback:function(a){t.$set(s.row,e.prop,a)},expression:"scope.row[v.prop]"}})],1):s.row.serial==t.newData.tableData.data.length&&0!=e.type&&1!=e.type?a("span",[a("el-input",{attrs:{placeholder:"",readonly:"readonly"},model:{value:s.row[e.prop],callback:function(a){t.$set(s.row,e.prop,a)},expression:"scope.row[v.prop]"}})],1):s.row.serial==t.newData.tableData.data.length&&1==e.type?a("span",[a("el-select",{class:s.row.serial==t.newData.tableData.data.length?"":"noicon",attrs:{placeholder:"请选择"},model:{value:s.row[e.prop],callback:function(a){t.$set(s.row,e.prop,a)},expression:"scope.row[v.prop]"}},t._l(e.select,function(t,e){return a("el-option",{key:e,attrs:{label:t,value:t}})}))],1):s.row.serial==t.newData.tableData.data.length&&"0"==e.type?a("span",[a("el-input",{attrs:{placeholder:"请输入"},model:{value:s.row[e.prop],callback:function(a){t.$set(s.row,e.prop,a)},expression:"scope.row[v.prop]"}})],1):t._e()])]}}])})}))],1),t._v(" "),1==t.newData.item.now_value?a("div",{staticClass:"rightHead"},[a("span",{staticClass:"infoBusy",domProps:{textContent:t._s("提交")},on:{click:function(e){t.dealWork(t.newData,2,"d")}}})]):0==t.newData.item.now_value?a("div",{staticClass:"rightHead"},[a("span",{staticClass:"infoBusy",domProps:{textContent:t._s("接单")},on:{click:function(e){t.agree(t.newData,1)}}})]):t._e()])])])]),t._v(" "),a("Dialog",{ref:"isRefult2",attrs:{wid:"564",hei:"286"}},[a("div",{staticClass:"isRefTit"},[t._v("退单原因")]),t._v(" "),a("div",{staticClass:"isRefDesc"},[a("el-input",{attrs:{type:"textarea",placeholder:"请输入退单原因"},model:{value:t.backExcu.info,callback:function(e){t.$set(t.backExcu,"info",e)},expression:"backExcu.info"}})],1),t._v(" "),a("div",{staticClass:"isRbtnBoxs2"},[a("span",{on:{click:t.submitBack}},[t._v("提交")])])]),t._v(" "),a("Dialog",{ref:"isRefult",attrs:{wid:"364",hei:"216"}},[a("div",{staticClass:"isRefTxt",domProps:{textContent:t._s(t.dialogBoxs.txt)}}),t._v(" "),a("div",{staticClass:"isRbtnBoxs"},[a("span",{on:{click:t.submitOk}},[t._v("确定")]),t._v(" "),a("span",{on:{click:t.submitNo}},[t._v("取消")])])])],1)},staticRenderFns:[]};var ne=function(t){a("BCs0")},oe=a("VU/8")(se.a,ie,!1,ne,"data-v-3402c31d",null).exports,re=a("kArt"),le=(a("Rg6g"),a("N6wk")),ce=(a("Og6n"),{name:"gReport",components:{Table:a("yivU").a,SelectBox:re.a,TimePickerT:le.a,Header:l.a},data:function(){return{navsData:{active:"item4",lists:[{id:0,name:"首页",route:"/AgentManage/normalUser"},{id:1,name:"排班表",route:"/AgentManage/normalUser/schedule"},{id:2,name:"工单",route:"/AgentManage/normalUser/workList"},{id:3,name:"巡检",route:"/AgentManage/normalUser/routing"},{id:4,name:"完成情况",route:"/AgentManage/normalUser/report"}]},query:{states:[{label:"完成情况",value:""},{label:"未完成",value:0},{label:"已完成",value:1}],systems:[],types:[{label:"类别",value:""},{label:"巡检",value:0},{label:"工单",value:1}],times:[],sys_id:[]},crumbs:["代维系统","完成情况"],activeName:"first",jobs:[{label:"给排水",value:1},{label:"电梯",value:2},{label:"变配电",value:3},{label:"照明",value:4},{label:"暖通",value:5}],vJob:-1,formData:{pagenumber:1,pagesize:20,sys_id:"",type:"",time:"",now_state:"",pages:"",total:0},tabData:[]}},methods:{getTypes:function(){var t=this;this.$http.post("/pc_ims/get_sysmenu").then(function(e){0==e.data.code&&(t.query.sys_id=e.data.data,t.query.sys_id.unshift({id:"",title:"工种"}),console.log(t.query.sys_id))})},currentPageChange:function(t){this.formData.pagenumber=t,this.getTableData()},toInputPage:function(){this.formData.pagenumber>this.formData.pages&&(this.formData.pagenumber=this.formData.pages),this.getTableData()},setColor:function(t){var e=t.row;t.column,t.rowIndex;if(5==t.columnIndex){if("已完成"==e.now_state)return"bulue";if("未完成"==e.now_state)return"red"}},handleClick:function(){},change1:function(t){this.query.sys_id=t},change2:function(t){this.query.type=t},change3:function(t){this.query.time=t},change4:function(t){this.query.now_state=t},getTableData:function(){var t=this;this.$http.post("/pc_ims/staff/count_byuser",this.formData).then(function(e){0==e.data.code?(t.tabData=e.data.data,t.tabData.map(function(e,a){e.index=t.formData.pagesize*(t.formData.pagenumber-1)+a+1,1==e.now_state?e.now_state="已完成":e.now_state="未完成",0==e.type?e.type="巡检":e.type="工单"}),t.formData.pages=e.data.pages,t.formData.total=t.formData.pages*t.formData.pagesize):t.$message({type:"error",message:e.data.msg,duration:2e3})})}},mounted:function(){this.getTypes(),this.getTableData()}}),de={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"reportBox autoComponent"},[a("Header",{attrs:{datas:t.navsData}}),t._v(" "),a("Crumbs",{attrs:{data:t.crumbs}}),t._v(" "),a("div",{staticClass:"boxs thBoxs tableBoxs"},[a("div",{staticClass:"tabHead"},[a("div",{staticClass:"nameBoxs"},[a("el-select",{staticClass:"querySelectItem",attrs:{placeholder:"工种"},model:{value:t.formData.sys_id,callback:function(e){t.$set(t.formData,"sys_id",e)},expression:"formData.sys_id"}},t._l(t.query.sys_id,function(t){return a("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})}))],1),t._v(" "),a("div",{staticClass:"nameBoxs"},[a("el-select",{staticClass:"querySelectItem",attrs:{placeholder:"类别"},model:{value:t.formData.type,callback:function(e){t.$set(t.formData,"type",e)},expression:"formData.type"}},t._l(t.query.types,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("div",{staticClass:"nameBoxs"},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"date",placeholder:"选择日期"},model:{value:t.formData.time,callback:function(e){t.$set(t.formData,"time",e)},expression:"formData.time"}})],1),t._v(" "),a("div",{staticClass:"nameBoxs"},[a("el-select",{staticClass:"querySelectItem",attrs:{placeholder:"完成情况"},model:{value:t.formData.now_state,callback:function(e){t.$set(t.formData,"now_state",e)},expression:"formData.now_state"}},t._l(t.query.states,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("div",{staticClass:"searchBoxs",on:{click:t.getTableData}},[a("i",{staticClass:"el-icon-search"}),t._v(" "),a("span",[t._v("筛选")])])]),t._v(" "),a("div",{staticClass:"thAgenTab"},[a("el-table",{staticClass:" tableHeadBlue",staticStyle:{width:"100%",flex:"1"},attrs:{"cell-class-name":t.setColor,data:t.tabData,height:"500"}},[a("el-table-column",{attrs:{prop:"index",label:"编号","min-width":"5%"}}),t._v(" "),a("el-table-column",{attrs:{prop:"title",label:"工种","min-width":"11%"}}),t._v(" "),a("el-table-column",{attrs:{prop:"type",label:"类别","min-width":"8%"}}),t._v(" "),a("el-table-column",{attrs:{prop:"addtime",label:"派发时间","min-width":"15%"}}),t._v(" "),a("el-table-column",{attrs:{prop:"description",label:"详情","min-width":"16%"}}),t._v(" "),a("el-table-column",{attrs:{prop:"now_state",label:"完成情况","min-width":"10%"}})],1),t._v(" "),a("div",{staticClass:"paginationBox"},[a("div",{staticClass:"totalPageNumBox"},[t._v("共"+t._s(t.formData.pages)+"页")]),t._v(" "),a("div",{staticClass:"el-input el-pagination__editor is-in-pagination curPageBox"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.pagenumber,expression:"formData.pagenumber"}],staticClass:"el-input__inner",attrs:{type:"number",autocomplete:"off"},domProps:{value:t.formData.pagenumber},on:{input:function(e){e.target.composing||t.$set(t.formData,"pagenumber",e.target.value)}}}),t._v(" "),a("span",{on:{click:t.toInputPage}},[t._v("GO")])]),t._v(" "),a("el-pagination",{attrs:{"current-page":t.formData.pagenumber,"page-size":t.formData.pagesize,layout:"prev, pager, next",total:t.formData.total},on:{"current-change":t.currentPageChange}})],1)],1)])],1)},staticRenderFns:[]};var ue=a("VU/8")(ce,de,!1,function(t){a("B0LX"),a("zc6Y")},"data-v-478143e1",null).exports,he=(a("Cgfr"),{components:{SysHead:l.a},name:"fireAlarm",data:function(){return{loading:!0,downloadFile:"https://tesing.china-tillage.com/index_pc/pc/select/alarm/excel",formData:{level:"",sys_id:"",floor_id:"",device_id:"",start_time:"",end_time:"",project_id:"",pagesize:20,pagenumber:1,total:0,pageCount:0},sysData:[],floorData:[],deviceData:[],routerData:{id:0,lists:[{id:0,name:"告警管理",route:"/alarm"}]},options:[{placeHolder:"报警级别",data:[{value:1,label:"预警"},{value:0,label:"提醒"},{value:2,label:"告警"}]}],timeValue:[],curPageData:[],fileTime:["",""]}},created:function(){this.initData(),this.initTitle()},mounted:function(){this.formData.project_id=this.$store.state.projectId},methods:{indexMethod:function(t){return this.formData.pagesize*(this.formData.pagenumber-1)+t+1},initData:function(){var t=this;this.$http.get("/index_pc/pc/select/alarm",this.formData).then(function(e){t.curPageData=e.data.data,t.curPageData.map(function(t,e){0==t.now_state&&(t.now_state="待处理"),1==t.now_state&&(t.now_state="已维修")}),t.formData.total=e.data.paging,t.formData.pageCount=Math.ceil(e.data.paging/t.formData.pagesize),t.loading=!1}).catch(function(t){console.log(t)})},initTitle:function(){var t=this;this.$http.get("/index_pc/pc/select/alarm/title").then(function(e){t.sysData=e.data.data}).catch(function(t){console.log(t)})},choseTime:function(){null==this.timeValue&&(this.timeValue=["",""]),this.fileTime=this.timeValue},choseSys:function(){var t=this;this.sysData.map(function(e,a){if(t.formData.sys_id){if(e.sys_id==t.formData.sys_id)return t.floorData=e.floors,t.formData.floor_id="",t.deviceData=[],void(t.formData.device_id="")}else t.floorData=[],t.formData.floor_id="",t.deviceData=[],t.formData.device_id=""})},choseFloor:function(){var t=this;this.formData.floor_id?this.floorData.map(function(e,a){e.floor_id==t.formData.floor_id&&(t.deviceData=e.device,t.formData.device_id="")}):(this.deviceData=[],this.formData.device_id="")},queryForm:function(){console.log(this.timeValue),this.loading=!0,this.timeValue&&0!=this.timeValue.length&&this.timeValue[0]==this.timeValue[1]&&(this.timeValue[1]=this.timeValue[1].split(" ")[0]+" 23:59:59"),this.timeValue&&0!=this.timeValue.length&&this.timeValue.length>0?(this.formData.start_time=this.timeValue[0],this.formData.end_time=this.timeValue[1]):(this.formData.start_time="",this.formData.end_time=""),this.initData()},search:function(t){},toInputPage:function(){this.loading=!0,this.formData.pagenumber>this.formData.pageCount&&(this.formData.pagenumber=this.formData.pageCount),this.initData()},currentPageChange:function(t){this.loading=!0,this.formData.pagenumber=t,this.initData()},exports:function(){this.timeValue&&0!=this.timeValue.length&&this.timeValue.length>0?(this.formData.start_time=this.timeValue[0],this.formData.end_time=this.timeValue[1]):(this.formData.start_time="",this.formData.end_time=""),window.location.href="/index_pc/pc/select/alarm/excel"}}}),me={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"permissionBox autoComponent alarm",attrs:{"element-loading-background":"rgba(0, 0, 0, 0.5)","element-loading-spinner":"el-icon-loading","element-loading-text":"拼命加载中"}},[a("SysHead",{attrs:{datas:t.routerData},on:{searchCont:t.search}}),t._v(" "),a("div",{staticClass:"userBox"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[t._v("首页")]),t._v(" "),a("el-breadcrumb-item",[t._v("告警管理")])],1),t._v(" "),a("div",{staticClass:"contentBox boxs"},[a("div",{staticClass:"itemsBox"},[a("div",{staticClass:"queryBox"},[t._l(t.options,function(e,s){return a("el-select",{key:s,staticClass:"querySelectItem",attrs:{clearable:"",placeholder:e.placeHolder},model:{value:t.formData.level,callback:function(e){t.$set(t.formData,"level",e)},expression:"formData.level"}},[a("el-option",{attrs:{label:"请选择"}}),t._v(" "),t._l(e.data,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})],2)}),t._v(" "),a("el-select",{staticClass:"querySelectItem",attrs:{placeholder:"子系统"},on:{change:t.choseSys},model:{value:t.formData.sys_id,callback:function(e){t.$set(t.formData,"sys_id",e)},expression:"formData.sys_id"}},[a("el-option",{attrs:{label:"请选择"}}),t._v(" "),t._l(t.sysData,function(t){return a("el-option",{key:t.sys_id,attrs:{label:t.name,value:t.sys_id}})})],2),t._v(" "),a("el-select",{staticClass:"querySelectItem",attrs:{placeholder:"楼层"},on:{change:t.choseFloor},model:{value:t.formData.floor_id,callback:function(e){t.$set(t.formData,"floor_id",e)},expression:"formData.floor_id"}},[a("el-option",{attrs:{label:"请选择"}}),t._v(" "),t._l(t.floorData,function(t){return a("el-option",{key:t.floor_id,attrs:{label:t.floor_name,value:t.floor_id}})})],2),t._v(" "),a("el-select",{staticClass:"querySelectItem",attrs:{placeholder:"设备"},model:{value:t.formData.device_id,callback:function(e){t.$set(t.formData,"device_id",e)},expression:"formData.device_id"}},[a("el-option",{attrs:{label:"请选择"}}),t._v(" "),t._l(t.deviceData,function(t){return a("el-option",{key:t.device_id,attrs:{label:t.device_name,value:t.device_id}})})],2),t._v(" "),a("el-date-picker",{attrs:{type:"daterange",size:"mini","range-separator":"-","value-format":"yyyy-MM-dd HH:mm:ss","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:t.choseTime},model:{value:t.timeValue,callback:function(e){t.timeValue=e},expression:"timeValue"}}),t._v(" "),a("div",[a("el-button",{staticClass:"queryDataBtn queryBoxBtn",on:{click:t.queryForm}},[a("i"),a("span",[t._v("查询")])])],1)],2),t._v(" "),a("div",[a("a",{staticStyle:{display:"block"},attrs:{href:t.downloadFile+"?start_time="+t.fileTime[0]+"&end_time="+t.fileTime[1]+"&level="+t.formData.level+"&sys_id="+t.formData.sys_id+"&floor_id="+t.formData.floor_id+"&device_id="+t.formData.device_id+"&project_id="+this.formData.project_id}},[a("el-button",{staticClass:" queryBoxBtn exports"},[a("i"),a("span",[t._v("导出")])])],1)])]),t._v(" "),a("div",{staticClass:"userTableContainer fireAlarmTable",staticStyle:{flex:"1",display:"flex","flex-direction":"column"}},[a("el-table",{staticClass:" tableHeadBlue",staticStyle:{width:"100%",flex:"1"},attrs:{data:t.curPageData,height:"500"}},[a("el-table-column",{attrs:{type:"index",index:t.indexMethod,label:"序号","min-width":"14%"}}),t._v(" "),a("el-table-column",{attrs:{prop:"time",label:"日期","min-width":"11%"}}),t._v(" "),a("el-table-column",{attrs:{prop:"level",label:"报警级别","min-width":"8%"}}),t._v(" "),a("el-table-column",{attrs:{prop:"word",label:"报警描述","min-width":"15%"}}),t._v(" "),a("el-table-column",{attrs:{prop:"sys_name",label:"子系统","min-width":"10%"}}),t._v(" "),a("el-table-column",{attrs:{prop:"device_name",label:"设备","min-width":"10%"}}),t._v(" "),a("el-table-column",{attrs:{prop:"floor_name",label:"楼层","min-width":"8%"}}),t._v(" "),a("el-table-column",{attrs:{prop:"recovery_time",label:"持续时间","min-width":"6%"}}),t._v(" "),a("el-table-column",{attrs:{prop:"now_state",label:"维修状态","min-width":"6%"}}),t._v(" "),a("el-table-column",{attrs:{prop:"control_user",label:"维修人","min-width":"8%"}})],1),t._v(" "),a("div",{staticClass:"paginationBox"},[a("div",{staticClass:"totalPageNumBox"},[t._v("共"+t._s(t.formData.pageCount)+"页")]),t._v(" "),a("div",{staticClass:"el-input el-pagination__editor is-in-pagination curPageBox"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.formData.pagenumber,expression:"formData.pagenumber"}],staticClass:"el-input__inner",attrs:{type:"number",autocomplete:"off"},domProps:{value:t.formData.pagenumber},on:{input:function(e){e.target.composing||t.$set(t.formData,"pagenumber",e.target.value)}}}),t._v(" "),a("span",{on:{click:t.toInputPage}},[t._v("GO")])]),t._v(" "),a("el-pagination",{attrs:{"current-page":t.formData.pagenumber,"page-size":t.formData.pagesize,layout:"prev, pager, next",total:t.formData.total},on:{"current-change":t.currentPageChange}})],1)],1)])],1)],1)},staticRenderFns:[]};var pe=a("VU/8")(he,me,!1,function(t){a("ZQ1G"),a("mTsu")},"data-v-a841aa38",null).exports,fe={components:{"sys-head":l.a},name:"fireAlarm",data:function(){return{sData:{active:"item0",lists:[]}}},methods:{},created:function(){0!=this.$store.state.sysList[16].role_string[0]?this.sData.lists.push({id:0,name:"火警监测",route:"/fireAlarm/fireMonitor"}):this.sData.lists.push({id:1,name:"历史记录",route:"/fireAlarm/fireHistory"})},mounted:function(){}},ve={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"fireAlarm"},[e("sys-head",{attrs:{datas:this.sData}}),this._v(" "),e("router-view")],1)},staticRenderFns:[]};var _e=a("VU/8")(fe,ve,!1,function(t){a("im2C")},null,null).exports,ge={components:{},name:"fireMonitor",data:function(){return{videoUrl:"",floorTit:"",cirStateArr:[!1,!1,!1,!1,!1],showTip:!0,showCir:!1,fireState:1,type:"",warnId:"",warnIndex:"",fireWarnLists:[{id:"1",class:"烟感报警",devicename:"酒楼7层-点型光电感烟火灾探测器-22205083",floor_id:"88",floor_title:"消防报警酒楼四层",key:"1536647719alarm22d173job0",message:"测试，消防报警了报警了！",time:"2018-09-11 14:35",type:"0"},{id:"2",class:"烟感报警",devicename:"酒楼7层-点型光电感烟火灾探测器-22205084",floor_id:"88",floor_title:"消防报警酒楼四层",key:"1536647719alarm22d174job0",message:"测试，消防报警了报警了！",time:"2018-09-11 14:34",type:"0"},{id:"3",class:"烟感报警",devicename:"酒楼7层-点型光电感烟火灾探测器-22205085",floor_id:"88",floor_title:"消防报警酒楼四层",key:"1536647719alarm22d175job0",message:"测试，消防报警了报警了！",time:"2018-09-11 14:34",type:"0"},{id:"4",class:"烟感报警",devicename:"酒楼7层-点型光电感烟火灾探测器-22205086",floor_id:"88",floor_title:"消防报警酒楼四层",key:"1536647719alarm22d176job0",message:"测试，消防报警了报警了！",time:"2018-09-11 14:33",type:"0"},{id:"5",class:"烟感报警",devicename:"酒楼7层-点型光电感烟火灾探测器-22205087",floor_id:"88",floor_title:"消防报警酒楼四层",key:"1536647719alarm22d177job0",message:"测试，消防报警了报警了！",time:"2018-09-11 14:33",type:"0"}],isDetail:!1,errMsg:"",errorTipShow:!1,isError:!1,codeError:!1,emptyInputs:!0,videoTit:"",playerOptions:{playbackRates:[.7,1,1.5,2],autoplay:!1,muted:!1,loop:!1,preload:"auto",language:"zh-CN",aspectRatio:"16:9",fluid:!0,sources:[{type:"",src:"http://clips.vorwaerts-gmbh.de/big_buck_bunny.mp4"}],poster:"https://ss0.bdstatic.com/94oJfD_bAAcT8t7mm9GUKT-xh_/timg?image&quality=100&size=b4000_4000&sec=1536198298&di=a980cc1553e2bec11ddef063aeba25d9&src=http://pic.58pic.com/58pic/15/33/18/13A58PICi3r_1024.jpg",notSupportedMessage:"此视频暂无法播放，请稍后再试",controlBar:{timeDivider:!0,durationDisplay:!0,remainingTimeDisplay:!1,fullscreenToggle:!0}},isShowVideo:!1,videoBtnActive:0,videoList:[{id:1,url:"/static/testVideo/test1.html",poster:"https://ss0.bdstatic.com/94oJfD_bAAcT8t7mm9GUKT-xh_/timg?image&quality=100&size=b4000_4000&sec=1536198298&di=a980cc1553e2bec11ddef063aeba25d9&src=http://pic.58pic.com/58pic/15/33/18/13A58PICi3r_1024.jpg"},{id:2,url:"/static/testVideo/test2.html",poster:"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1541311886121&di=4844f0b21c6a53dfb0870fc825e4cf71&imgtype=0&src=http%3A%2F%2Fpic.58pic.com%2F58pic%2F14%2F45%2F78%2F02j58PICEVZ_1024.jpg"},{id:3,url:"/static/testVideo/test3.html",poster:"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1541311969570&di=b9adee174d91efa6b4871668423626e8&imgtype=0&src=http%3A%2F%2Fpic.xtuan.com%2Fupload%2FcasePictures%2F20131218%2F09565524262_w.gif"},{id:4,url:"/static/testVideo/test4.html",poster:"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1541311994921&di=cc3192752c3d864644e618ff51f239ca&imgtype=0&src=http%3A%2F%2Fpic.qiantucdn.com%2F58pic%2F17%2F92%2F61%2F55ad624dd33e8_1024.jpg"}]}},methods:{toggleCir:function(t,e){if(1===e)switch(t){case"1":this.cirStateArr=[!0,!1,!1,!1,!1];break;case"2":this.cirStateArr=[!1,!0,!1,!1,!1];break;case"3":this.cirStateArr=[!1,!1,!0,!1,!1];break;case"4":this.cirStateArr=[!1,!1,!1,!0,!1];break;case"5":this.cirStateArr=[!1,!1,!1,!1,!0]}else this.cirStateArr=[!1,!1,!1,!1,!1]},selVideo:function(t,e){this.videoBtnActive=e,this.videoUrl=t.url},showVideo:function(t,e){this.videoTit=t.time,this.videoUrl=4!==e?this.videoList[e].url:this.videoList[0].url,this.isShowVideo=!0},hideVideo:function(){this.isShowVideo=!1},showErr:function(t){this.errorTipShow=this.emptyInputs=!0,this.errMsg=t},closeErr:function(){this.errorTipShow=this.codeError=this.isError=!1,this.errMsg=""},getMonitorData:function(){var t=this,e=this,a={sys_menu_id:this.$store.state.sysList[16].sys_menu_id};this.$http.post("/firealarm/firealarm_monitoring",a,{}).then(function(e){var s=e.data;console.log("消防监测信息列表",a,e),0==s.code?(s.data.length,t.fireState=1):t.$message(s.message)}).catch(function(t){console.log(t),e.showErr("服务器请求失败")})},getMonitorControl:function(t,e){var a=this,s={sys_menu_id:this.$store.state.sysList[16].sys_menu_id,key:t,value:e};R.a.post("fireAlarm/control",s).then(function(e){console.log("消防监测控制",s,e),0==e.code?(a.fireWarnLists.map(function(e,s){e.key==t&&a.fireWarnLists.splice(s,1)}),a.$message({type:"success",message:e.message})):a.$message(e.message)}).catch(function(t){a.$message(t)})},hide:function(){this.showTip=!0,this.isDetail=!1,this.showCir=!1},showFloor:function(t){this.showTip=!1,this.isDetail=!0,1==t?(this.showCir=!0,this.floorTit="酒店7楼"):3==t?this.floorTit="酒店3楼":2==t?this.floorTit="酒店2楼":4==t&&(this.floorTit="酒店1楼")},showArea:function(t,e){1==e?Velocity(this.$refs[t],{opacity:1},{duration:300}):0===e&&Velocity(this.$refs[t],{opacity:0},{duration:300})},init:function(){var t=this,e=this;setTimeout(function(){Velocity(t.$refs.radarBox,{scale:.185,right:"-2.34rem",top:"-2.34rem"},{duration:1e3,easing:"linear",complete:function(t){console.log(t),e.getMonitorData()}})},5e3)},showSure:function(t,e,a){this.type=a,this.warnId=t,this.warnIndex=e,this.$refs.dialog.show()},dealWarn:function(t,e,a){console.log("处理报警",t,e,a),this.getMonitorControl(t,a),this.$refs.dialog.hide()},toHome:function(){this.$router.replace({path:"/home",params:{isLogin:!0}})}},created:function(){},mounted:function(){this.getMonitorData()},watch:{}},be={render:function(){var t=this,e=this,s=e.$createElement,i=e._self._c||s;return i("div",[i("div",{staticClass:"tabsDomBox0 h-paddingTop"},[i("div",{staticClass:"navCrumbs"},[i("p",{on:{click:e.toHome}},[e._v("首页")]),e._v(" > 消防系统 > "),i("span",[e._v("火警监测")])])]),e._v(" "),i("div",{staticClass:"fireMonitor",style:0!=e.fireState?{boxShadow:"none"}:null},[0==e.fireState?i("div",{staticClass:"noHaveFire"},[i("div",{ref:"building",staticClass:"building"},[i("img",{attrs:{src:a("rHyk"),alt:"建筑图"}})])]):e._e(),e._v(" "),i("div",{ref:"radarBox",staticClass:"radarBox",style:e.isDetail?{top:"-1.90rem"}:null},[e._m(0),e._v(" "),i("div",{staticClass:"row-line"}),e._v(" "),i("div",{staticClass:"col-line"})]),e._v(" "),i("div",{staticClass:"radarBoxBg",style:e.isDetail?{top:"0.46rem"}:null}),e._v(" "),0!=e.fireState?i("div",{staticClass:"haveFire"},[i("div",{directives:[{name:"show",rawName:"v-show",value:0!==e.fireWarnLists.length,expression:"fireWarnLists.length!==0"}],staticClass:"infoCardBox"},[i("el-scrollbar",{staticStyle:{height:"100%"}},e._l(e.fireWarnLists,function(t,a){return i("div",{key:a,staticClass:"infoCard",on:{mouseenter:function(a){e.toggleCir(t.id,1)},mouseleave:function(a){e.toggleCir(t.id,0)}}},[i("div",{staticClass:"type",domProps:{textContent:e._s(t.class)}}),e._v(" "),i("div",{staticClass:"content"},[i("div",{staticClass:"top"},[i("span",{staticClass:"time",domProps:{textContent:e._s(t.time)}}),e._v(" "),i("button",{staticClass:"btn",attrs:{type:"button"},on:{click:function(s){e.showVideo(t,a)}}},[i("span",{staticClass:"icon_play"}),e._v("\n                  视频\n                ")])]),e._v(" "),i("div",{staticClass:"bottom",domProps:{textContent:e._s(t.devicename+t.message)}})])])}))],1),e._v(" "),i("div",{staticClass:"buildingBox",style:0===e.fireWarnLists.length?{width:"100%"}:null},[i("div",{directives:[{name:"show",rawName:"v-show",value:!e.isDetail,expression:"!isDetail"}],staticClass:"floors"},[i("div",{staticStyle:{position:"absolute","z-index":"1",width:"604px",height:"583px"}},[i("div",{staticStyle:{position:"relative",width:"100%",height:"100%"}},[i("div",{staticStyle:{width:"100%",height:"100%"}},[i("img",{staticStyle:{width:"604px",height:"583px"},attrs:{src:a("/oIv"),usemap:"Map"}}),e._v(" "),i("map",{attrs:{id:"Map",name:"Map"}},[i("area",{staticStyle:{background:"#ccc"},attrs:{alt:"1f",href:"javascript:void(0)",coords:"208, 219, 691, 389, 828, 333, 826, 303, 691, 342, 673, 341, 200, 186, 208, 219",shape:"poly"},on:{mouseenter:function(t){e.showArea("floor_1",1)},mouseleave:function(t){e.showArea("floor_1",0)},click:function(t){e.showFloor(1)}}})])])])]),e._v(" "),i("div",{staticStyle:{position:"absolute","z-index":"0",width:"0",height:"0"}},[i("div",{staticStyle:{position:"relative",width:"100%",height:"100%"}},[i("div",{staticStyle:{width:"100%",height:"100%"}},[i("div",{staticStyle:{width:"604px",height:"583px",position:"relative"}},[i("div",{ref:"floor_1",staticClass:"floor1"})])])])]),e._v(" "),i("img",{staticStyle:{width:"604px",height:"583px"},attrs:{src:a("XsGa")}}),e._v(" "),i("div",{staticClass:"img_red"})]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.showTip,expression:"showTip"}],staticClass:"self-tip"},[i("div",{staticClass:"tit"},[e._v("\n            2018/09/11 14:35\n          ")]),e._v(" "),i("div",{staticClass:"con"},[e._v("\n            酒楼7层消防设备发生火灾报警情况，请火速处理\n          ")]),e._v(" "),i("div",{staticClass:"sjx"})]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.isDetail,expression:"isDetail"}],staticClass:"floorDetail"},[i("i",{staticClass:"el-icon-circle-close colseBoxs",staticStyle:{position:"absolute",right:"-5px",top:"-5px"},on:{click:e.hide}}),e._v(" "),i("div",{staticClass:"title"},[e._v(e._s(e.floorTit))]),e._v(" "),i("div",{staticClass:"floorBoxWrap"},[i("div",{staticClass:"floorBox"},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.showCir,expression:"showCir"}],staticClass:"spot",staticStyle:{left:"139px",top:"92px"}},[i("div",{staticClass:"circle"}),e._v(" "),i("div",{staticClass:"circle2"}),e._v(" "),e.cirStateArr[0]?i("div",{staticClass:"circle3"}):e._e()]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.showCir,expression:"showCir"}],staticClass:"spot",staticStyle:{left:"692px",top:"57px"}},[i("div",{staticClass:"circle"}),e._v(" "),i("div",{staticClass:"circle2"}),e._v(" "),e.cirStateArr[1]?i("div",{staticClass:"circle3"}):e._e()]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.showCir,expression:"showCir"}],staticClass:"spot",staticStyle:{left:"277px",top:"162px"}},[i("div",{staticClass:"circle"}),e._v(" "),i("div",{staticClass:"circle2"}),e._v(" "),e.cirStateArr[2]?i("div",{staticClass:"circle3"}):e._e()]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.showCir,expression:"showCir"}],staticClass:"spot",staticStyle:{left:"410px",top:"37px"}},[i("div",{staticClass:"circle"}),e._v(" "),i("div",{staticClass:"circle2"}),e._v(" "),e.cirStateArr[3]?i("div",{staticClass:"circle3"}):e._e()]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.showCir,expression:"showCir"}],staticClass:"spot",staticStyle:{left:"600px",top:"30px"}},[i("div",{staticClass:"circle"}),e._v(" "),i("div",{staticClass:"circle2"}),e._v(" "),e.cirStateArr[4]?i("div",{staticClass:"circle3"}):e._e()])])])])]),e._v(" "),e.isShowVideo?i("div",{staticClass:"videoBoxWrap"},[i("i",{staticClass:"el-icon-circle-close colseBoxs",staticStyle:{position:"absolute",right:"-5px",top:"-5px"},on:{click:e.hideVideo}}),e._v(" "),i("div",{staticClass:"title",domProps:{textContent:e._s(e.videoTit)}}),e._v(" "),i("div",{staticClass:"videoBox"},[i("iframe",{attrs:{name:"myFrame22",frameborder:"0",width:"100%",height:"100%",src:e.videoUrl}}),e._v(" "),i("div",{staticClass:"videoList"},e._l(e.videoList,function(t,a){return i("button",{class:["item",{active:e.videoBtnActive==a}],attrs:{type:"button"},domProps:{textContent:e._s(a+1<10?"0"+(a+1):a+1)},on:{click:function(s){e.selVideo(t,a)}}})}))])]):e._e()]):e._e(),e._v(" "),i("Dialog",{ref:"dialog",attrs:{wid:"3.64rem",hei:"2.16rem"}},[i("div",{staticClass:"dialog-in"},[i("div",{staticClass:"content"},[e._v("是否确认消除此报警信息？")]),e._v(" "),i("div",{staticClass:"btnWrap"},[i("button",{attrs:{type:"button"},on:{click:function(t){e.dealWarn(e.warnId,e.warnIndex,e.type)}}},[e._v("确定")]),e._v(" "),i("button",{attrs:{type:"button"},on:{click:function(){t.$refs.dialog.hide(),t.$message("取消操作！")}}},[e._v("取消")])])])])],1),e._v(" "),i("transition",{attrs:{name:"el-fade-in-linear"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.errorTipShow,expression:"errorTipShow"}],staticClass:"errTipBox",domProps:{innerHTML:e._s(e.errMsg)}})])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"radar1"},[e("div",{staticClass:"radar2"})])}]};var ye=a("VU/8")(ge,be,!1,function(t){a("ZoHM")},null,null).exports,we=a("yqZi"),Ce={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"btnBoxss"},[e("span",{staticClass:"text",style:0==this.state?{color:"#ff4a60"}:null,domProps:{textContent:this._s(0==this.state?"未撤销":"已撤销")}})])},staticRenderFns:[]};var xe=a("VU/8")({props:["state"],data:function(){return{}},methods:{},created:function(){},mounted:function(){}},Ce,!1,function(t){a("Wwj4")},"data-v-5175b630",null).exports,ke={components:{Table:we.a},name:"fireHistory",data:function(){return{loading:!1,dateVal:"",dateVal2:"",options:[{value:"",label:"全部类型"},{value:"17001",label:"烟感报警"},{value:"17002",label:"温感报警"},{value:"17003",label:"手动报警"}],value:"",options2:[{value:"",label:"全部设备"}],value2:"",options3:[{value:"",label:"全部状态"}],value3:"",posInput:"",pagenum:1,table:{showPagination:!0,hei:490,len:0,pageSize:20,page:1,data:[{num:"01",time:"2018/06/02  16:55",position:"青羊工业园区A区17栋7楼1号消防设备区域",type:"烟感报警",device:"001号消防设备",state:0},{num:"02",time:"2018/06/02  16:55",position:"青羊工业园区A区17栋7楼1号消防设备区域",type:"温感报警",device:"001号消防设备",state:1}],th:[{prop:"num",label:"编号",wid:93},{prop:"time",label:"时间",wid:210},{prop:"position",label:"地点",wid:300},{prop:"type",label:"类型",wid:143},{prop:"device",label:"设备"},{prop:"state",label:"状态",operate:!0,wid:90,render:function(t,e){return t(xe,{props:{state:e.row.state},on:{}})}}]}}},methods:{getHistory:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",s=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";this.loading=!0;var o={sys_menu_id:this.$store.state.sysList[16].sys_menu_id,pagesize:20,pagenumber:t,date:e,state:a,cont:n,type:i};this.$http.post("/firealarm/firealarm_record",o,{}).then(function(t){var e=t.data;if(console.log("消防历史记录",o,t),0==e.code){s.table.len=e.paging.count;var a=[];e.data.map(function(t,e){var s=e+1,i={};i.num=s<10?"0"+s:s,i.time=t.time,i.position=t.floor_title,i.type=t.class,i.device=t.devicename,i.state=2==t.schedule?1:0,a.push(i)}),s.table.data=a,s.loading=!1}else s.loading=!1,s.$message(e.message)}).catch(function(t){s.loading=!1,s.$message(t)})},changePage:function(t){this.pagenum=t,this.getHistory(t,""==this.dateVal?"":R.a.time(this.dateVal/1e3),"",this.value,this.posInput)},search:function(){this.getHistory(1,""==this.dateVal?"":R.a.time(this.dateVal/1e3),"",this.value,this.posInput)},toHome:function(){this.$router.replace({path:"/home",params:{isLogin:!0}})}},created:function(){this.getHistory()},mounted:function(){}},De={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"tabsDomBox0 h-paddingTop"},[a("div",{staticClass:"navCrumbs"},[a("p",{on:{click:t.toHome}},[t._v("首页")]),t._v(" > 消防系统 > "),a("span",[t._v("历史记录")])])]),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"fireHistory",attrs:{"element-loading-background":"rgba(0, 0, 0, 0.5)","element-loading-spinner":"el-icon-loading","element-loading-text":"拼命加载中"}},[a("div",{staticClass:"selectBox"},[a("div",{staticClass:"dateBox"},[a("el-date-picker",{attrs:{type:"date",placeholder:"请选择开始时间"},model:{value:t.dateVal,callback:function(e){t.dateVal=e},expression:"dateVal"}})],1),t._v(" "),a("div",{staticClass:"dateBox",staticStyle:{"margin-left":"0.12rem"}},[a("el-date-picker",{attrs:{type:"date",placeholder:"请选择结束时间"},model:{value:t.dateVal2,callback:function(e){t.dateVal2=e},expression:"dateVal2"}})],1),t._v(" "),a("div",{staticClass:"oneLevelBox"},[a("el-select",{attrs:{placeholder:"选择类型"},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t._l(t.options,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("div",{staticClass:"oneLevelBox"},[a("el-select",{attrs:{placeholder:"选择设备"},model:{value:t.value2,callback:function(e){t.value2=e},expression:"value2"}},t._l(t.options2,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("div",{staticClass:"oneLevelBox"},[a("el-select",{attrs:{placeholder:"选择状态"},model:{value:t.value3,callback:function(e){t.value3=e},expression:"value3"}},t._l(t.options3,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("div",{staticClass:"searchBox"},[a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入地点名称"},model:{value:t.posInput,callback:function(e){t.posInput=e},expression:"posInput"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.search},slot:"append"},[t._v("查询")])],1)],1),t._v(" "),t._m(0)]),t._v(" "),a("div",{staticClass:"self-table"},[a("Table",{attrs:{table:t.table},on:{changePage:t.changePage}})],1)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"exportBox"},[e("a",{staticClass:"self-button",attrs:{href:"https://tesing.china-tillage.com/firealarm/firealarm_record_excel?sys_menu_id=22&project_id=101&pagesize=500&pagenumber=1",type:"button"}},[e("span",{staticClass:"icon-export"}),this._v(" "),e("span",[this._v("导出")])])])}]};var Se=a("VU/8")(ke,De,!1,function(t){a("/RSW")},null,null).exports,Ae=a("mtWM"),Ee=a.n(Ae),Ie={components:{SysHead:l.a},name:"permission",data:function(){return{routerData:{id:0,lists:[]}}},created:function(){console.log(this.$store.state),"0"!=this.$store.state.userInfoTotal.permissions_manage.role_string[0]&&this.routerData.lists.push({id:0,name:"用户设置",route:"/permission/user"}),"0"!=this.$store.state.userInfoTotal.permissions_manage.role_string[1]&&this.routerData.lists.push({id:1,name:"角色设置",route:"/permission/role"}),this.routerData.lists.push({id:2,name:"登录日志",route:"/permission/loginLog"})},methods:{search:function(t){console.log(t)}},mounted:function(){},beforeDestroy:function(){this.$store.state.permission.options=[]}},Le={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"permissionBox autoComponent"},[e("SysHead",{attrs:{datas:this.routerData},on:{searchCont:this.search}}),this._v(" "),e("router-view")],1)},staticRenderFns:[]};var Te=a("VU/8")(Ie,Le,!1,function(t){a("9Jcj")},"data-v-b30b7d88",null).exports,Be=a("BO1k"),Pe=a.n(Be),Re={components:{bubbleTip:X.a},name:"role-setting",data:function(){return{userLoading:!0,sysInfo:{},options:[],itemValue:[],tableData:[],currentPage:1,pageSize:20,totalPageNum:1,totalDataNumber:20,curPageData:[],groupPageData:[],accountInfoDialog:!1,deleteInfoDialog:!1,isAdd:!1,curEditRoleId:"",toPageNum:1,form:{role:{label:"角色名",key:""},powerRange:{label:"权限设置",key:""}},formTitle:"",bubbleTip:"",powerValue:"",powerArray:[],defaultProps:{children:"child",label:"title"},role_sys_list:"",checkedListItems:[],disabledSelectedItems:{}}},methods:{removeDisItem:function(t){var e=this.disabledSelectedItems,a=!0,s=!1,i=void 0;try{for(var n,o=Pe()(t);!(a=(n=o.next()).done);a=!0){var r=n.value;for(var l in e)if(r.sys_id==l){var c=e[l],d=!0,u=!1,h=void 0;try{for(var m,p=Pe()(c);!(d=(m=p.next()).done);d=!0){var f=m.value,v=r.ids.indexOf(f);v>-1&&r.ids.splice(v,1)}}catch(t){u=!0,h=t}finally{try{!d&&p.return&&p.return()}finally{if(u)throw h}}}}}catch(t){s=!0,i=t}finally{try{!a&&o.return&&o.return()}finally{if(s)throw i}}return t},powerSelectBlur:function(t){t||(this.form.powerRange.key=this.powerValue,this.$refs.powerSelectEl.blur())},cancleSave:function(){this.clearNodes(),this.accountInfoDialog=!1},nodeChange:function(){var t=[],e=this.$refs.tree.getCheckedNodes(!1,!0),a={ids:[]},s=e.length,i="";if(s)for(var n=0;n<s;n++){var o=e[n];if(n?i+="/"+o.title:i=o.title,o.hasOwnProperty("sys_id"))0==n?(a.sys_id=o.sys_id,a.role_string=o.role_string):(t.push(a),(a={ids:[]}).sys_id=o.sys_id,a.role_string=o.role_string);else{var r=o.id,l=r.indexOf("_")+1,c=r.substr(l);if(a.ids.push(c),n==s-1)return t.push(a),t=this.removeDisItem(t),this.role_sys_list=P()(t),void(this.powerValue=i)}}},clearNodes:function(){this.$refs.tree.setCheckedNodes([]),this.role_sys_list=[]},queryData:function(){this.requestTableData(1)},currentPageChange:function(t){this.currentPage=this.toPageNum=t,this.requestTableData(t)},getCurPageData:function(t){this.curPageData=t.data,this.totalDataNumber=t.paging.count,this.totalPageNum=Math.ceil(Number(this.totalDataNumber)/this.pageSize)},toInputPage:function(){var t=Number(this.toPageNum);this.requestTableData(t),this.currentPage=t},addAccount:function(){this.accountInfoDialog=!0,this.formTitle="新增角色",this.isAdd=!0;var t=this.checkedListItems,e=this;setTimeout(function(){e.$refs.tree.setCheckedKeys(t)},1e3)},saveNewAccount:function(t){var e,a=this;for(var s in a.form){if(!a.form[s].key)return void a.bubbleTipShow("请完善信息")}e=t?0:a.curEditRoleId;var i=a.role_sys_list,n={project_id:a.$store.state.projectId,id:e,role_name:a.form.role.key,role_sys_list:i};console.log(n),a.$http.post("users_manage/users_role_addmodify",n).then(function(e){if("0"==e.data.code){var s=t?"保存成功":"修改成功";a.bubbleTipShow(s),t&&a.requestOptions(),setTimeout(function(){a.accountInfoDialog=!1,a.clearForm(),a.clearNodes(),a.requestTableData(1),a.requestOptions()},2e3)}else a.bubbleTipShow(e.data.message)}).catch(function(t){console.log(t)})},editAccount:function(t){this.isAdd=!1,this.accountInfoDialog=!0,this.formTitle="修改角色",this.form.role.key=t.title,this.form.powerRange.key=this.role_sys_list=t.sys_menu,this.curEditRoleId=t.id;var e=this,a={role_id:t.id};e.$http.post("users_manage/users_roleid_info",a).then(function(t){if(console.log(t),0==t.data.code){var a=t.data.data.chk_data;e.$refs.tree.setCheckedKeys(a);var s=t.data.data.role_data;e.disabledSelectedItems={},s.map(function(t,a){t.child&&t.child.map(function(a,s){a.child&&a.child.length>0&&(e.disabledSelectedItems[t.id]?e.disabledSelectedItems[t.id].push((s+1).toString()):(e.disabledSelectedItems[t.id]=[],e.disabledSelectedItems[t.id].push((s+1).toString())))})}),console.log(e.disabledSelectedItems)}}).catch(function(t){})},deleteAccount:function(t){this.deleteInfoDialog=!0,this.curEditRoleId=t.id},confirmDelete:function(){var t=this,e={role_id:t.curEditRoleId};t.$http.post("users_manage/users_role_delete",e).then(function(e){"0"==e.data.code?(t.bubbleTipShow("删除成功"),t.requestTableData(1),t.requestOptions(),setTimeout(function(){t.deleteInfoDialog=!1},2e3)):t.bubbleTipShow(e.data.message)}).catch(function(t){console.log(t)})},resetPw:function(){var t=this;this.isReset=!0,setTimeout(function(){t.isReset=!1,t.bubbleTipShow("重置成功")},1e3)},clearForm:function(){for(var t in this.form)this.form[t].key=""},bubbleTipShow:function(t){this.bubbleTip=t,this.$store.state.bubbleShow=!0;var e=this;setTimeout(function(){e.$store.state.bubbleShow=!1},3e3)},requestOptions:function(){var t=this;t.sysInfo.projectId=t.$store.state.projectId,t.sysInfo.roleId=t.$store.state.userInfoTotal.role_info.role_id,t.sysInfo.roleType=t.$store.state.userInfoTotal.usergrouprolesyslist[0].role_type,Ee.a.all([t.$http.post("/users_manage/users_department",{project_id:t.sysInfo.projectId}),t.$http.post("/users_manage/users_dept_position",{project_id:t.sysInfo.projectId}),t.$http.post("/users_manage/users_roleinfo_list",{user_role_id:t.sysInfo.roleId})]).then(Ee.a.spread(function(e,a,s){var i=[];i[0]=e.data.data,i[1]=a.data.data,i[2]=s.data.data;var n=!0,o=!1,r=void 0;try{for(var l,c=Pe()(i);!(n=(l=c.next()).done);n=!0){l.value.unshift({id:"",title:"请选择"})}}catch(t){o=!0,r=t}finally{try{!n&&c.return&&c.return()}finally{if(o)throw r}}t.$store.state.permission.options=t.options=i,t.$forceUpdate()}))},requestTableData:function(t){var e=this;e.userLoading=!0;var a={pagenumber:t,pagesize:e.pageSize,user_role_id:e.$store.state.userInfoTotal.role_info.role_id,role_id:e.itemValue[0]};e.$http.post("users_manage/users_role_manage",a).then(function(t){e.userLoading=!1,e.getCurPageData(t.data)}).catch(function(t){console.log(t),e.userLoading=!1})},requestPowerList:function(){var t=this,e={project_id:t.$store.state.projectId};t.$http.post("users_manage/users_setRole",e).then(function(e){console.log(e),"0"==e.data.code?(t.powerArray=e.data.data.role_data,t.checkedListItems=e.data.data.chk_data):t.bubbleTipShow(e.data.message)}).catch(function(t){console.log(t)})}},created:function(){var t=this.$store.state.permission.options;t.length>0?this.options=t:this.requestOptions(),this.requestTableData(1)},mounted:function(){this.requestPowerList()}},Me={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"userBox roleBox"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[t._v("首页")]),t._v(" "),a("el-breadcrumb-item",[t._v("权限管理")]),t._v(" "),a("el-breadcrumb-item",[t._v("角色设置")])],1),t._v(" "),a("div",{staticClass:"contentBox boxs"},[a("div",{staticClass:"itemsBox"},[a("div",{staticClass:"queryBox"},[a("el-select",{staticClass:"querySelectItem",attrs:{placeholder:"请选择"},model:{value:t.itemValue[0],callback:function(e){t.$set(t.itemValue,0,e)},expression:"itemValue[0]"}},t._l(t.options[2],function(t){return a("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})})),t._v(" "),a("div",[a("el-button",{staticClass:"queryDataBtn queryBoxBtn",on:{click:t.queryData}},[a("i"),a("span",[t._v("查询")])])],1)],1),t._v(" "),a("div",[a("el-button",{staticClass:"addNewRoleBtn queryBoxBtn",on:{click:t.addAccount}},[a("i"),a("span",[t._v("新增角色")])])],1)]),t._v(" "),a("div",{staticClass:"userTableContainer"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.userLoading,expression:"userLoading"}],staticClass:"tableAlignCenter tableHeadBlue roleSetTable",staticStyle:{width:"100%"},attrs:{"element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.3)",data:t.curPageData}},[a("el-table-column",{attrs:{prop:"code",label:"编号","min-width":"7%"}}),t._v(" "),a("el-table-column",{attrs:{prop:"title",label:"角色","min-width":"11%"}}),t._v(" "),a("el-table-column",{attrs:{prop:"sys_menu",label:"权限查看","min-width":"33%"}}),t._v(" "),a("el-table-column",{attrs:{prop:"create_date",label:"创建时间","min-width":"14%"}}),t._v(" "),a("el-table-column",{attrs:{prop:"id",label:"操作","min-width":"11%"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("a",{staticClass:"tableBtn",attrs:{href:"javascrtip:;"},on:{click:function(a){t.editAccount(e.row)}}},[t._v("修改")]),t._v(" "),a("a",{staticClass:"tableBtn",attrs:{href:"javascrtip:;"},on:{click:function(a){t.deleteAccount(e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("div",{staticClass:"paginationBox"},[a("div",{staticClass:"totalPageNumBox"},[t._v("共"+t._s(t.totalPageNum)+"页")]),t._v(" "),a("div",{staticClass:"el-input el-pagination__editor is-in-pagination curPageBox"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.toPageNum,expression:"toPageNum"}],staticClass:"el-input__inner",attrs:{type:"number",autocomplete:"off"},domProps:{value:t.toPageNum},on:{input:function(e){e.target.composing||(t.toPageNum=e.target.value)}}}),t._v(" "),a("span",{on:{click:t.toInputPage}},[t._v("GO")])]),t._v(" "),a("el-pagination",{attrs:{"current-page":t.currentPage,"page-size":t.pageSize,"page-count":t.totalPageNum,layout:"prev, pager, next",total:t.totalDataNumber},on:{"current-change":t.currentPageChange}})],1)],1),t._v(" "),a("el-dialog",{staticClass:"dialogBox",attrs:{title:t.formTitle,visible:t.accountInfoDialog,"close-on-click-modal":!1},on:{"update:visible":function(e){t.accountInfoDialog=e},close:t.clearForm}},[a("el-form",{attrs:{model:t.form}},[a("el-form-item",{attrs:{label:t.form.role.label}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"输入角色名称"},model:{value:t.form.role.key,callback:function(e){t.$set(t.form.role,"key",e)},expression:"form.role.key"}})],1),t._v(" "),a("el-form-item",{staticClass:"powerSelectBox",attrs:{label:t.form.powerRange.label}},[a("el-select",{ref:"powerSelectEl",attrs:{placeholder:"选择权限"},on:{"visible-change":t.powerSelectBlur},model:{value:t.form.powerRange.key,callback:function(e){t.$set(t.form.powerRange,"key",e)},expression:"form.powerRange.key"}},[a("el-option",{attrs:{value:t.powerValue}},[a("el-tree",{ref:"tree",attrs:{data:t.powerArray,"show-checkbox":"","default-expand-all":"","node-key":"id","highlight-current":"",props:t.defaultProps},on:{"check-change":t.nodeChange}})],1)],1)],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"saveBtn",on:{click:function(e){t.saveNewAccount(t.isAdd)}}},[t._v("保存")]),t._v(" "),a("el-button",{staticClass:"cancleBtn",on:{click:t.cancleSave}},[t._v("取消")])],1),t._v(" "),a("bubbleTip",{attrs:{tipText:t.bubbleTip}})],1),t._v(" "),a("el-dialog",{staticClass:"dialogBox deleteInfoDialog",attrs:{visible:t.deleteInfoDialog,"close-on-click-modal":!1},on:{"update:visible":function(e){t.deleteInfoDialog=e}}},[a("div",{staticClass:"deleteTextBox"},[t._v("是否确定删除此信息？")]),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"saveBtn",on:{click:function(e){t.confirmDelete()}}},[t._v("确定")]),t._v(" "),a("el-button",{staticClass:"cancleBtn",on:{click:function(e){t.deleteInfoDialog=!1}}},[t._v("取消")])],1),t._v(" "),a("bubbleTip",{attrs:{tipText:t.bubbleTip}})],1)],1)],1)},staticRenderFns:[]};var Ne=a("VU/8")(Re,Me,!1,function(t){a("TZBf")},"data-v-362b521a",null).exports,Fe={components:{bubbleTip:X.a},name:"user-setting",data:function(){return{userLoading:!0,sysInfo:{},options:[],itemValue:[],tableData:[],currentPage:1,pageSize:20,totalPageNum:1,totalDataNumber:20,curPageData:[],groupPageData:[],accountInfoDialog:!1,deleteInfoDialog:!1,form:{name:{label:"用户名",key:""},password:{label:"密码",key:""},department:{label:"部门",key:""},position:{label:"职位",key:""},role:{label:"角色",key:""}},formTitle:"",isAdd:!0,bubbleTip:"",isReset:!1,phoneRegexp:/^0?(13|14|15|17|18|19)[0-9]{9}$/,curEditUserId:"",curEditUserPw:"",toPageNum:1}},methods:{userNameBlur:function(){var t=this.form.name.key;this.phoneRegexp.test(t)?this.form.password.key=t.substr(5):this.bubbleTipShow("用户名格式错误")},queryData:function(){this.requestTableData(1)},currentPageChange:function(t){this.currentPage=this.toPageNum=t,this.requestTableData(t)},getCurPageData:function(t){this.curPageData=t.data,this.totalDataNumber=t.paging.count,this.totalPageNum=Math.ceil(Number(this.totalDataNumber)/this.pageSize)},toInputPage:function(){var t=Number(this.toPageNum);this.requestTableData(t),this.currentPage=t},addAccount:function(){this.accountInfoDialog=!0,this.formTitle="新增帐号",this.isAdd=!0},saveNewAccount:function(t){var e=this;for(var a in e.form)if(t||"password"!=a){var s=e.form[a].key;if(!s)return void e.bubbleTipShow("请完善信息");if("name"==a&&!e.phoneRegexp.test(s))return void e.bubbleTipShow("用户名格式不正确")}var i={user_id:t?0:e.curEditUserId,phone:e.form.name.key,username:e.form.name.key,pwd:e.form.password.key,dept_id:e.form.department.key,posit_id:e.form.position.key,role_id:e.form.role.key,address:""};console.log(i),e.$http.post("users_manage/users_addmodify",i).then(function(a){if(console.log(a),"0"==a.data.code){var s=t?"保存成功":"修改成功";e.bubbleTipShow(s),setTimeout(function(){e.accountInfoDialog=!1,e.clearForm(),e.requestTableData(1)},2e3)}else e.bubbleTipShow(a.data.message)}).catch(function(t){console.log(t)})},editAccount:function(t){console.log(t),this.accountInfoDialog=!0,this.formTitle="修改信息",this.isAdd=!1,this.form.name.key=t.username,this.form.department.key=t.dept_id,this.form.position.key=t.position_id,this.form.role.key=t.role_id,this.curEditUserId=t.user_id},deleteAccount:function(t){this.deleteInfoDialog=!0,this.curEditUserId=t.user_id},confirmDelete:function(){var t=this,e={user_id:t.curEditUserId};t.$http.post("users_manage/users_delete",e).then(function(e){"0"==e.data.code?(t.isReset=!1,t.bubbleTipShow("删除成功"),setTimeout(function(){t.deleteInfoDialog=!1,t.requestTableData(1)},2e3)):t.bubbleTipShow(e.data.message)}).catch(function(t){console.log(t)})},resetPw:function(){var t=this;t.isReset=!0;var e=t.form.name.key.substr(5),a={user_id:t.curEditUserId,pwd:e};t.$http.post("users_manage/users_reset_password",a).then(function(e){"0"==e.data.code?(t.isReset=!1,t.bubbleTipShow("重置成功")):t.bubbleTipShow(e.data.message)}).catch(function(t){console.log(t)})},clearForm:function(){for(var t in this.form)this.form[t].key=""},bubbleTipShow:function(t){this.bubbleTip=t,this.$store.state.bubbleShow=!0;var e=this;setTimeout(function(){e.$store.state.bubbleShow=!1},3e3)},requestOptions:function(){var t=this;Ee.a.all([t.$http.post("/users_manage/users_department",{project_id:t.sysInfo.projectId}),t.$http.post("/users_manage/users_dept_position",{project_id:t.sysInfo.projectId}),t.$http.post("/users_manage/users_roleinfo_list",{user_role_id:t.sysInfo.roleId})]).then(Ee.a.spread(function(e,a,s){var i=[];i[0]=e.data.data,i[1]=a.data.data,i[2]=s.data.data;var n=!0,o=!1,r=void 0;try{for(var l,c=Pe()(i);!(n=(l=c.next()).done);n=!0){l.value.unshift({id:"",title:"请选择"})}}catch(t){o=!0,r=t}finally{try{!n&&c.return&&c.return()}finally{if(o)throw r}}t.$store.state.permission.options=t.options=i,t.$forceUpdate()}))},requestTableData:function(t){var e=this;e.userLoading=!0;var a={project_id:e.sysInfo.projectId,pagenumber:t,pagesize:e.pageSize,role_type:"",dept_id:e.itemValue[0],posit_id:e.itemValue[1],role_id:e.itemValue[2],username:e.itemValue[3],user_role_id:Number(e.sysInfo.roleId)};e.$http.post("users_manage/usersinfo",a).then(function(t){console.log(t),e.getCurPageData(t.data),e.userLoading=!1}).catch(function(t){console.log(t),e.userLoading=!1})}},created:function(){this.sysInfo.projectId=this.$store.state.projectId,this.sysInfo.roleId=this.$store.state.userInfoTotal.role_info.role_id,this.sysInfo.roleType=this.$store.state.userInfoTotal.usergrouprolesyslist[0].role_type;var t=this.$store.state.permission.options;t.length>0?this.options=t:this.requestOptions(),this.requestTableData(1)},mounted:function(){}},Oe={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"userBox"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[t._v("首页")]),t._v(" "),a("el-breadcrumb-item",[t._v("权限管理")]),t._v(" "),a("el-breadcrumb-item",[t._v("用户设置")])],1),t._v(" "),a("div",{staticClass:"contentBox boxs"},[a("div",{staticClass:"itemsBox"},[a("div",{staticClass:"queryBox"},[a("el-select",{staticClass:"querySelectItem",attrs:{placeholder:"请选择",clearable:""},model:{value:t.itemValue[0],callback:function(e){t.$set(t.itemValue,0,e)},expression:"itemValue[0]"}},t._l(t.options[0],function(t){return a("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})})),t._v(" "),a("el-select",{staticClass:"querySelectItem",attrs:{placeholder:"请选择",clearable:""},model:{value:t.itemValue[1],callback:function(e){t.$set(t.itemValue,1,e)},expression:"itemValue[1]"}},t._l(t.options[1],function(t){return a("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})})),t._v(" "),a("el-select",{staticClass:"querySelectItem",attrs:{placeholder:"请选择",clearable:""},model:{value:t.itemValue[2],callback:function(e){t.$set(t.itemValue,2,e)},expression:"itemValue[2]"}},t._l(t.options[2],function(t){return a("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})})),t._v(" "),a("el-input",{staticClass:"userNameInput",attrs:{placeholder:"请输入用户名称",clearable:""},model:{value:t.itemValue[3],callback:function(e){t.$set(t.itemValue,3,e)},expression:"itemValue[3]"}}),t._v(" "),a("div",[a("el-button",{staticClass:"queryDataBtn queryBoxBtn",on:{click:t.queryData}},[a("i"),a("span",[t._v("查询")])])],1)],1),t._v(" "),a("div",[a("el-button",{staticClass:"addNewUserBtn queryBoxBtn",on:{click:t.addAccount}},[a("i"),a("span",[t._v("新增账号")])])],1)]),t._v(" "),a("div",{staticClass:"userTableContainer"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.userLoading,expression:"userLoading"}],staticClass:"tableAlignCenter tableHeadBlue",staticStyle:{width:"100%"},attrs:{"element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.3)",data:t.curPageData}},[a("el-table-column",{attrs:{prop:"code",label:"编号","min-width":"10%"}}),t._v(" "),a("el-table-column",{attrs:{prop:"username",label:"用户名(手机号)","min-width":"10%"}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"昵称","min-width":"16%"}}),t._v(" "),a("el-table-column",{attrs:{prop:"dept_title",label:"部门","min-width":"12%"}}),t._v(" "),a("el-table-column",{attrs:{prop:"position_title",label:"职位","min-width":"12%"}}),t._v(" "),a("el-table-column",{attrs:{prop:"role_title",label:"角色","min-width":"12%"}}),t._v(" "),a("el-table-column",{attrs:{prop:"create_date",label:"创建时间","min-width":"19%"}}),t._v(" "),a("el-table-column",{attrs:{prop:"operation",label:"操作","min-width":"9%"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("a",{staticClass:"tableBtn",attrs:{href:"javascrtip:;"},on:{click:function(a){t.editAccount(e.row)}}},[t._v("修改")]),t._v(" "),a("a",{staticClass:"tableBtn",attrs:{href:"javascrtip:;"},on:{click:function(a){t.deleteAccount(e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("div",{staticClass:"paginationBox"},[a("div",{staticClass:"totalPageNumBox"},[t._v("共"+t._s(t.totalPageNum)+"页")]),t._v(" "),a("div",{staticClass:"el-input el-pagination__editor is-in-pagination curPageBox"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.toPageNum,expression:"toPageNum"}],staticClass:"el-input__inner",attrs:{type:"number",autocomplete:"off"},domProps:{value:t.toPageNum},on:{input:function(e){e.target.composing||(t.toPageNum=e.target.value)}}}),t._v(" "),a("span",{on:{click:t.toInputPage}},[t._v("GO")])]),t._v(" "),a("el-pagination",{attrs:{"current-page":t.currentPage,"page-size":t.pageSize,"page-count":t.totalPageNum,layout:"prev, pager, next"},on:{"current-change":t.currentPageChange}})],1)],1),t._v(" "),a("el-dialog",{staticClass:"dialogBox",attrs:{title:t.formTitle,visible:t.accountInfoDialog,"close-on-click-modal":!1},on:{"update:visible":function(e){t.accountInfoDialog=e},close:t.clearForm}},[a("el-form",{attrs:{model:t.form}},[a("el-form-item",{attrs:{label:t.form.name.label}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"请输入用户名可以默认手机号",id:"userPhoneInput"},on:{blur:t.userNameBlur},model:{value:t.form.name.key,callback:function(e){t.$set(t.form.name,"key",e)},expression:"form.name.key"}})],1),t._v(" "),t.isAdd?a("el-form-item",{attrs:{label:t.form.password.label}},[a("el-input",{attrs:{type:"password",autocomplete:"off",placeholder:"请设置初始密码",disabled:!0},model:{value:t.form.password.key,callback:function(e){t.$set(t.form.password,"key",e)},expression:"form.password.key"}})],1):a("el-form-item",{attrs:{label:t.form.password.label}},[a("el-button",{staticClass:"queryBoxBtn resetPwBtn",class:{loading:t.isReset},on:{click:t.resetPw}},[a("i"),t._v("重 置")])],1),t._v(" "),a("el-form-item",{attrs:{label:t.form.department.label}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.department.key,callback:function(e){t.$set(t.form.department,"key",e)},expression:"form.department.key"}},t._l(t.options[0],function(t){return a("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:t.form.position.label}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.position.key,callback:function(e){t.$set(t.form.position,"key",e)},expression:"form.position.key"}},t._l(t.options[1],function(t){return a("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:t.form.role.label}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.role.key,callback:function(e){t.$set(t.form.role,"key",e)},expression:"form.role.key"}},t._l(t.options[2],function(t){return a("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})}))],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"saveBtn",on:{click:function(e){t.saveNewAccount(t.isAdd)}}},[t._v("保存")]),t._v(" "),a("el-button",{staticClass:"cancleBtn",on:{click:function(e){t.accountInfoDialog=!1}}},[t._v("取消")])],1),t._v(" "),a("bubbleTip",{attrs:{tipText:t.bubbleTip}})],1),t._v(" "),a("el-dialog",{staticClass:"dialogBox deleteInfoDialog",attrs:{visible:t.deleteInfoDialog,"close-on-click-modal":!1},on:{"update:visible":function(e){t.deleteInfoDialog=e}}},[a("div",{staticClass:"deleteTextBox"},[t._v("是否确定删除此信息？")]),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"saveBtn",on:{click:function(e){t.confirmDelete()}}},[t._v("保存")]),t._v(" "),a("el-button",{staticClass:"cancleBtn",on:{click:function(e){t.deleteInfoDialog=!1}}},[t._v("取消")])],1),t._v(" "),a("bubbleTip",{attrs:{tipText:t.bubbleTip}})],1)],1)],1)},staticRenderFns:[]};var je=a("VU/8")(Fe,Oe,!1,function(t){a("K+Y+")},"data-v-6a8151c8",null).exports,Ue={name:"login-log",data:function(){return{logLoading:!1,dateRangeValue:[],tableData:[],currentPage:1,pageSize:20,totalPageNum:1,totalDataNumber:0,curPageData:[],groupPageData:[],logDetailDialog:!1,logDetailTitle:"",toPageNum:1,detailData:""}},methods:{queryData:function(){this.requestTableData(1)},currentPageChange:function(t){this.currentPage=this.toPageNum=t,this.requestTableData(t)},toInputPage:function(){var t=Number(this.toPageNum);this.requestTableData(t),this.currentPage=t},lookDetail:function(t){console.log(t);var e=this;this.logDetailDialog=!0,this.logDetailTitle=t.username;var a={keys:t.keys};e.$http.post("users_manage/users_login_log_details",a).then(function(t){e.detailData=t.data.data}).catch(function(t){console.log(t)})},requestTableData:function(t){var e=this;e.logLoading=!0;var a={pagenumber:t,pagesize:e.pageSize,date_s:e.dateRangeValue[0],date_e:e.dateRangeValue[1]};e.$http.post("users_manage/users_login_log",a).then(function(t){e.getCurPageData(t.data),e.logLoading=!1}).catch(function(t){console.log(t),e.logLoading=!1})},getCurPageData:function(t){this.curPageData=t.data,this.totalDataNumber=t.paging.count,this.totalPageNum=Math.ceil(Number(this.totalDataNumber)/this.pageSize)},getBeforeDate:function(t){var e=new Date;e.setDate(e.getDate()-t);var a=e.getFullYear(),s=e.getMonth()+1,i=e.getDate();return s>=1&&s<=9&&(s="0"+s),i>=0&&i<=9&&(i="0"+i),a+"-"+s+"-"+i},getNowFormatDate:function(){var t=this.getBeforeDate(7),e=this.getBeforeDate(0);this.dateRangeValue[1]=e,this.dateRangeValue[0]=t,this.requestTableData(1)}},created:function(){this.getNowFormatDate()},mounted:function(){}},Ve={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"userBox loginLogBox"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[t._v("首页")]),t._v(" "),a("el-breadcrumb-item",[t._v("日志管理")])],1),t._v(" "),a("div",{staticClass:"contentBox boxs"},[a("div",{staticClass:"itemsBox"},[a("div",{staticClass:"queryBox"},[a("el-date-picker",{staticClass:"dateRangeBox",attrs:{type:"daterange","range-separator":"-","start-placeholder":"开始日期","end-placeholder":"结束日期",format:"yyyy-M-d","value-format":"yyyy-MM-dd"},model:{value:t.dateRangeValue,callback:function(e){t.dateRangeValue=e},expression:"dateRangeValue"}}),t._v(" "),a("div",[a("el-button",{staticClass:"queryDataBtn queryBoxBtn",on:{click:t.queryData}},[a("i"),a("span",[t._v("查询")])])],1)],1)]),t._v(" "),a("div",{staticClass:"userTableContainer loginLogTable"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.logLoading,expression:"logLoading"}],staticStyle:{width:"100%"},attrs:{"element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.3)",data:t.curPageData,stripe:""}},[a("el-table-column",{attrs:{prop:"code",label:"序号","min-width":"8%"}}),t._v(" "),a("el-table-column",{attrs:{prop:"username",label:"帐号","min-width":"20%"}}),t._v(" "),a("el-table-column",{attrs:{prop:"dept_name",label:"所属部门","min-width":"20%"}}),t._v(" "),a("el-table-column",{attrs:{prop:"ip",label:"IP地址","min-width":"20%"}}),t._v(" "),a("el-table-column",{attrs:{prop:"login_date",label:"登录时间","min-width":"20%"}}),t._v(" "),a("el-table-column",{attrs:{prop:"keys",label:"操作","min-width":"12%"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("a",{staticClass:"tableBtn",attrs:{href:"javascrtip:;"},on:{click:function(a){t.lookDetail(e.row)}}},[t._v("日志详情")])]}}])})],1),t._v(" "),a("div",{staticClass:"paginationBox"},[a("div",{staticClass:"totalPageNumBox"},[t._v("共"+t._s(t.totalPageNum)+"页")]),t._v(" "),a("div",{staticClass:"el-input el-pagination__editor is-in-pagination curPageBox"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.toPageNum,expression:"toPageNum"}],staticClass:"el-input__inner",attrs:{type:"number",autocomplete:"off"},domProps:{value:t.toPageNum},on:{input:function(e){e.target.composing||(t.toPageNum=e.target.value)}}}),t._v(" "),a("span",{on:{click:t.toInputPage}},[t._v("GO")])]),t._v(" "),a("el-pagination",{attrs:{"current-page":t.currentPage,"page-size":t.pageSize,"page-count":t.totalPageNum,layout:"prev, pager, next",total:t.totalDataNumber},on:{"current-change":t.currentPageChange}})],1)],1),t._v(" "),a("el-dialog",{staticClass:"dialogBox loginLogDialogBox",attrs:{title:t.logDetailTitle+" 日志详情",visible:t.logDetailDialog,"close-on-click-modal":!1},on:{"update:visible":function(e){t.logDetailDialog=e}}},t._l(t.detailData,function(e){return a("div",{staticClass:"detailItem"},[a("div",{staticClass:"detailTitle"},[a("span",[t._v(t._s(e.login_date))]),a("i",[t._v("|")]),a("span",[t._v(t._s(e.username))])]),t._v(" "),a("div",{staticClass:"detailDes"},[t._v(t._s(e.content))])])}))],1)],1)},staticRenderFns:[]};var $e=a("VU/8")(Ue,Ve,!1,function(t){a("Ym3h")},"data-v-7955faae",null).exports,ze=a("szMG"),qe={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"home"}},[s("div",{staticClass:"buildModel"},[s("iframe",{ref:"iframe",attrs:{name:"myFrame",frameborder:"0",width:"100%",height:"100%",src:t.url3d}})]),t._v(" "),t._m(0),t._v(" "),s("div",{staticClass:"header"},[s("div",{staticClass:"companyName",on:{click:t.showBanerClick}},[s("span"),t._v(" "),s("span",[t._v("泰立智汇")])]),t._v(" "),s("div",{staticClass:"info"},[s("span",{domProps:{textContent:t._s(t.dateInfo.numbers)}}),t._v(" "),s("span",{domProps:{textContent:t._s(t.jiuli)}}),t._v(" "),s("span",{domProps:{textContent:t._s(t.wetherInfo.weather)}}),t._v(" "),s("span",{domProps:{textContent:t._s(t.wetherInfo.temperature)}}),t._v(" "),t.wetherInfo.code?s("img",{staticClass:"wetherIcon",attrs:{src:t.wetherInfo.code}}):t._e(),t._v(" "),s("el-row",{staticClass:"block-col-2"},[s("el-col",{attrs:{span:12}},[s("el-dropdown",{attrs:{trigger:"hover"},on:{command:t.handleCommand}},[s("span",{staticClass:"el-dropdown-link"},[s("span",{staticClass:"userIcon",on:{click:t.showPersonInfo}})]),t._v(" "),s("el-dropdown-menu",{staticClass:"homeDropDown",attrs:{slot:"dropdown",placement:"top-right"},slot:"dropdown"},[s("el-dropdown-item",{staticClass:"homeDropdownItem",staticStyle:{"text-align":"center",color:"#f6f6f6"},attrs:{command:"personInfo"}},[t._v("个人信息")]),t._v(" "),s("el-dropdown-item",{staticClass:"homeDropdownItem",staticStyle:{"text-align":"center",color:"#f6f6f6"},attrs:{command:"changePassword"}},[t._v("修改密码")]),t._v(" "),s("el-dropdown-item",{staticClass:"homeDropdownItem",staticStyle:{"text-align":"center",color:"#f6f6f6"},attrs:{command:"loginOut"}},[t._v("退出登录")])],1)],1)],1)],1)],1)]),t._v(" "),s("div",{staticClass:"partOne dragEle"},[t.partsData[0].componentsName?t._e():s("div",{staticClass:"add",on:{click:function(e){t.addModules(0)}}},[t._m(1),t._v(" "),t._m(2)]),t._v(" "),t.partsData[0].componentsName?s(t.partsData[0].componentsName,{tag:"component",attrs:{isResize:t.isResize},on:{deletClick:t.deletModels}}):t._e()],1),t._v(" "),s("div",{staticClass:"partTwo dragEle"},[t.partsData[1].componentsName?t._e():s("div",{staticClass:"add",on:{click:function(e){t.addModules(1)}}},[t._m(3),t._v(" "),t._m(4)]),t._v(" "),t.partsData[1].componentsName?s(t.partsData[1].componentsName,{tag:"component",attrs:{isResize:t.isResize},on:{deletClick:t.deletModels}}):t._e()],1),t._v(" "),s("div",{staticClass:"partThree dragEle"},[t.partsData[2].componentsName?t._e():s("div",{staticClass:"add",on:{click:function(e){t.addModules(2)}}},[t._m(5),t._v(" "),t._m(6)]),t._v(" "),t.partsData[2].componentsName?s(t.partsData[2].componentsName,{tag:"component",attrs:{isResize:t.isResize},on:{deletClick:t.deletModels}}):t._e()],1),t._v(" "),s("div",{staticClass:"partFour dragEle"},[t.partsData[3].componentsName?t._e():s("div",{staticClass:"add",on:{click:function(e){t.addModules(3)}}},[t._m(7),t._v(" "),t._m(8)]),t._v(" "),t.partsData[3].componentsName?s(t.partsData[3].componentsName,{tag:"component",attrs:{isResize:t.isResize},on:{deletClick:t.deletModels}}):t._e()],1),t._v(" "),t.isOpenMonitor?s("div",{staticClass:"monitoring"},[t._m(9),t._v(" "),s("div",{staticClass:"monitoringCon"},[s("div",{staticClass:"monitoringConL"},t._l(t.monitoringData,function(e,a){return a<5?s("div",{staticClass:"monitorItem"},[t.monitoringData?s("div",{staticClass:"monitorItemCon"},[s("span",{class:{"cor-r":0==a,"cor-y":0!=a},domProps:{textContent:t._s(e.name+"："+e.word)}}),t._v(" "),s("div",{staticClass:"time"},[s("span",{domProps:{textContent:t._s(e.time)}},[t._v("14:00")]),t._v(" "),s("span",[s("i",{staticStyle:{color:"#f36b6d"},domProps:{textContent:t._s("0"+(a+1))}}),t._v("/05\n              ")])])]):t._e(),t._v(" "),s("div",{staticClass:"shutIcon"},[s("span",{directives:[{name:"show",rawName:"v-show",value:0===a,expression:"index===0"}],on:{click:t.openMonitor}})])]):t._e()}))])]):t._e(),t._v(" "),t.isOpenMonitor?t._e():s("div",{staticClass:"smallMonitoring"},[s("div",{staticClass:"left"},[s("img",{attrs:{src:a("jCW5"),alt:""}}),t._v(" "),0!=t.monitoringData.length?s("span",{staticClass:"cor-r",domProps:{textContent:t._s(t.monitoringData[0].name+"："+t.monitoringData[0].word)}},[t._v("电压告警：电压超过正常水平")]):t._e()]),t._v(" "),s("div",{staticClass:"right"},[0!=t.monitoringData.length?s("span",{domProps:{textContent:t._s(t.monitoringData[0].time)}},[t._v("14:00")]):t._e(),t._v(" "),0!=t.monitoringData.length?s("span",[s("i",{staticStyle:{color:"#f36b6d"}},[t._v("01")]),t._v("/05\n        ")]):t._e(),t._v(" "),t.monitoringData.length>1?s("span",{staticClass:"myBtn",on:{click:t.openMonitor}}):t._e()])]),t._v(" "),t.isOperateModules?s("div",{staticClass:"modules"},[s("div",{staticClass:"title"},[s("a",{attrs:{href:"javascript:void(0)"},on:{click:function(e){t.isOperateModules=!1}}})]),t._v(" "),s("div",{staticClass:"modeCon"},[s("div",{staticClass:"modeBox"},[t.routerInfo[12]&&0!=t.routerInfo[12].role_string[0]?s("div",{staticClass:"modeDetail boxs",on:{click:function(e){t.chooseSystem(12,"AgentManage")}}},[s("img",{attrs:{src:a("pFsi"),alt:""}}),t._v(" "),s("span",[t._v("代维管理系统")])]):t._e(),t._v(" "),s("div",{staticClass:"modeDetail boxs",on:{click:function(e){t.chooseSystem("-1","Equipment")}}},[s("img",{attrs:{src:a("LDSB"),alt:""}}),t._v(" "),s("span",[t._v("设备情况")])]),t._v(" "),t._l(t.list,function(e,a){return t.routerInfo[e.id]?s("div",{staticClass:"modeDetail boxs",on:{click:function(a){t.chooseSystem(e.id,e.componentsName)}}},[s("img",{attrs:{src:e.src,alt:""}}),t._v(" "),s("span",{domProps:{textContent:t._s(e.name)}})]):t._e()})],2)])]):t._e(),t._v(" "),s("Banner",{tag:"component",attrs:{isShowBannerParam:t.showBannerParam},on:{changeBannerParam:t.updateBannerParam}}),t._v(" "),s("PersonInfo",{tag:"component",attrs:{options:t.personInfoOptions},on:{showTips:t.personInfoShowTips}}),t._v(" "),s("el-dialog",{attrs:{visible:t.personalCenter.isShowDialog,width:"364px",top:"30vh","custom-class":"homeLoginDialog"},on:{"update:visible":function(e){t.$set(t.personalCenter,"isShowDialog",e)}}},[s("span",[t._v("是否确定退出此账号登录")]),t._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{attrs:{type:"primary"},on:{click:t.loginOut}},[t._v("确 定")]),t._v(" "),s("el-button",{on:{click:function(e){t.personalCenter.isShowDialog=!1}}},[t._v("取 消")])],1)]),t._v(" "),s("bubbleTip",{attrs:{tipText:t.bubbleTip}})],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"systemName"},[e("div",{staticClass:"systemCon"},[this._v("泰立汇云智慧酒店管理系统")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title"},[e("span",{staticClass:"titleIcon"}),this._v(" "),e("span",{staticClass:"txt"},[this._v("请添加系统")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"addIcon"},[e("img",{attrs:{src:a("sXzr"),alt:""}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title"},[e("span",{staticClass:"titleIcon"}),this._v(" "),e("span",{staticClass:"txt"},[this._v("请添加系统")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"addIcon"},[e("img",{attrs:{src:a("sXzr"),alt:""}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title"},[e("span",{staticClass:"titleIcon"}),this._v(" "),e("span",{staticClass:"txt"},[this._v("请添加系统")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"addIcon"},[e("img",{attrs:{src:a("sXzr"),alt:""}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title"},[e("span",{staticClass:"titleIcon"}),this._v(" "),e("span",{staticClass:"txt"},[this._v("请添加系统")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"addIcon"},[e("img",{attrs:{src:a("sXzr"),alt:""}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"monitoringName"},[e("i"),this._v(" "),e("span",[this._v("实"),e("br"),this._v("时"),e("br"),this._v("监"),e("br"),this._v("控")])])}]};var He=function(t){a("HHSB"),a("Tzno")},We=a("VU/8")(ze.a,qe,!1,He,"data-v-599fca34",null).exports,Ge={props:["pageType"],data:function(){return{toPageNum:1,totalPageNum:3,total:0,floorId:0,releasetime1:"",releasetime2:"",enternameinput:"",tableData:[],pagesize:20,currentPage:1,downLoadSrc:"",currPage:""}},mounted:function(){this.floorId=sessionStorage.getItem("sentFloorIds"),this.getData(),console.log(this.floorId)},methods:{getData:function(){console.log(this.floorId);var t=this,e="",a="";""==this.releasetime1||""==this.releasetime2?(e="",a=""):(e=t.format(this.releasetime1,"yyyyMMdd"),a=t.format(this.releasetime2,"yyyyMMdd")),"19700101"!=e&&"19700101"!=a||(e="",a=""),console.log(this.$store.state),this.$http.post("/entrance/record",{sys_menu_id:this.$store.state.sysList[14].sys_menu_id,project_id:this.$store.state.projectId,floor_id:this.floorId,page_index:t.currentPage,one_page_num:t.pagesize,start_date:e,end_date:a,query_name:t.enternameinput}).then(function(e){console.log(e),t.total=e.data.data.record_num_total,t.totalPageNum=e.data.data.page_num_total,t.tableData=e.data.data.entrance_guard_record,console.log(t.tableData)},function(t){})},exportTable:function(){var t=this;this.$http.post("/entrance/record",{sys_menu_id:this.$store.state.sysList[14].sys_menu_id,project_id:this.$store.state.projectId,floor_id:this.floorId,export:1}).then(function(e){var a="http://"+e.data;t.downLoadSrc=a,console.log(a),window.open(a)},function(t){})},toInputPage:function(){this.currentPage=Number(this.currPage),this.getData()},doSearch:function(){},addPolicy:function(){},handleEdit:function(t,e){},handleSizeChange:function(t){this.pagesize=t},handleCurrentChange:function(t){this.currentPage=Number(t),this.currPage=this.currentPage,this.getData()},format:function(t,e){var a=new Date(t),s=function(t){return(t<10?"0":"")+t};return e.replace(/yyyy|MM|dd|HH|mm|ss/g,function(t){switch(t){case"yyyy":return s(a.getFullYear());case"MM":return s(a.getMonth()+1);case"mm":return s(a.getMinutes());case"dd":return s(a.getDate());case"HH":return s(a.getHours());case"ss":return s(a.getSeconds())}})}}},Ye={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tabsDomBox"},[a("div",{staticClass:"navCrumbs"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[t._v("首页")]),t._v(" "),a("el-breadcrumb-item",[t._v("门禁系统")]),t._v(" "),a("el-breadcrumb-item",[t._v("门禁记录")])],1)],1),t._v(" "),a("div",{staticClass:"borderShadow"},[a("a",{staticStyle:{display:"none"},attrs:{href:t.downLoadSrc}}),t._v(" "),a("div",{staticClass:"searchConditionBox"},[a("div",{staticClass:"dateBox"},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择开始时间"},model:{value:t.releasetime1,callback:function(e){t.releasetime1=e},expression:"releasetime1"}})],1),t._v(" "),a("div",{staticClass:"dateBox"},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择结束时间"},model:{value:t.releasetime2,callback:function(e){t.releasetime2=e},expression:"releasetime2"}})],1),t._v(" "),a("div",{staticClass:"dateBox"},[a("el-input",{attrs:{type:"text",placeholder:"请输入设备名称或门名称"},model:{value:t.enternameinput,callback:function(e){t.enternameinput=e},expression:"enternameinput"}})],1),t._v(" "),a("button",{staticClass:"btn btnSearch",on:{click:function(e){t.getData(t.releasetime1,t.releasetime2,t.enternameinput,t.toPageNum)}}},[a("i",{staticClass:"el-icon-search marginRt10"}),t._v("查询")]),t._v(" "),a("button",{staticClass:"btn btnExport floatRt",on:{click:t.exportTable}},[a("i",{staticClass:"exportIcon"}),t._v("导出")])]),t._v(" "),a("div",{staticClass:"tableBox"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,height:"100%"}},[a("el-table-column",{attrs:{prop:"show_id",label:"编号",align:"cneter"}}),t._v(" "),a("el-table-column",{attrs:{prop:"id_card",label:"ID卡号",align:"cneter"}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"姓名",align:"cneter"}}),t._v(" "),a("el-table-column",{attrs:{prop:"department",label:"部门",align:"cneter"}}),t._v(" "),a("el-table-column",{attrs:{prop:"card_type",label:"卡类型",align:"cneter"}}),t._v(" "),a("el-table-column",{attrs:{prop:"device_name",label:"设备名称",align:"cneter"}}),t._v(" "),a("el-table-column",{attrs:{prop:"door_name",label:"门名称",align:"cneter"}}),t._v(" "),a("el-table-column",{attrs:{prop:"open_datetime",label:"开门时间",align:"cneter"}}),t._v(" "),a("el-table-column",{attrs:{prop:"tag",label:"开门事件"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("a",{staticClass:"cursor",on:{click:function(a){t.handleEdit(e.$index,e.row)}}},[t._v(t._s(e.row.open_event))])]}}])})],1),t._v(" "),a("div",{staticClass:"paginationBox"},[a("div",{staticClass:"totalPageNumBox"},[t._v("共"+t._s(t.totalPageNum)+"页")]),t._v(" "),a("div",{staticClass:"el-input el-pagination__editor is-in-pagination curPageBox"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.currPage,expression:"currPage"}],staticClass:"el-input__inner",attrs:{type:"number",autocomplete:"off"},domProps:{value:t.currPage},on:{input:function(e){e.target.composing||(t.currPage=e.target.value)}}}),t._v(" "),a("span",{on:{click:t.toInputPage}},[t._v("GO")])]),t._v(" "),a("el-pagination",{attrs:{"current-page":t.currentPage,"page-size":t.pagesize,"page-count":t.totalPageNum,total:t.total,layout:"prev, pager, next"},on:{"current-change":t.handleCurrentChange}})],1)],1)])])},staticRenderFns:[]};var Ke=a("VU/8")(Ge,Ye,!1,function(t){a("Mnav")},null,null).exports,Xe=a("6Zcj"),Qe={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tabsDomBox0"},[a("div",{staticClass:"navCrumbs"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[t._v("首页")]),t._v(" "),a("el-breadcrumb-item",[t._v("门禁系统")]),t._v(" "),a("el-breadcrumb-item",[t._v("门禁平面")])],1)],1),t._v(" "),a("div",{staticClass:"topShadow"},[a("el-select",{attrs:{placeholder:"楼号"},on:{change:t.chooseLevels},model:{value:t.buildingNumber,callback:function(e){t.buildingNumber=e},expression:"buildingNumber"}},t._l(t.areaLevel,function(t){return a("el-option",{key:t.value,attrs:{label:t.title,value:t.id}})})),t._v(" "),a("el-select",{attrs:{placeholder:"层号"},on:{change:t.chooseLevelNum},model:{value:t.floorNumber,callback:function(e){t.floorNumber=e},expression:"floorNumber"}},t._l(t.levels,function(t){return a("el-option",{key:t.value,attrs:{label:t.title,value:t.id}})})),t._v(" "),a("el-select",{attrs:{placeholder:"层号"},on:{change:t.getFloorIdData},model:{value:t.floorNum,callback:function(e){t.floorNum=e},expression:"floorNum"}},t._l(t.levelNum,function(t){return a("el-option",{key:t.value,attrs:{label:t.title,value:t.id}})})),t._v(" "),a("ul",{staticClass:"doorStatusBox"},[a("li",[a("span",[t._v("当前门禁数")]),t._v(" "),a("span",{staticClass:"doorAllN"},[t._v(t._s(t.totleDoors))])]),t._v(" "),a("li",[t._m(0),t._v(" "),a("span",{staticClass:"doorCloseN"},[t._v(t._s(t.doorClose))])]),t._v(" "),a("li",[t._m(1),t._v(" "),a("span",{staticClass:"doorWarningN"},[t._v(t._s(t.doorWarning))])]),t._v(" "),a("li",[t._m(2),t._v(" "),a("span",{staticClass:"doorOpenN"},[t._v(t._s(t.doorOpenN))])])])],1),t._v(" "),a("div",{staticClass:"bottomShadow"},[a("div",{staticClass:"floorImgBox",attrs:{id:"floorImgBox"}},[a("img",{attrs:{src:t.floorBgImg}}),t._v(" "),t._l(t.iList,function(e,s){return a("i",{class:["doorSta"+e.device_state,"door"+(s+1)],style:{left:e.position_x/1326*100-4+"%",top:e.position_y/580*100-3+"%"},on:{mouseenter:function(a){t.popToggle(s,e.x,e.y,e.device_name,e.device_state,e.point_list)},mouseout:t.popHide,click:function(a){a.stopPropagation(),t.doorInfoPanel(e.device_id,e.device_name,e)}}},[a("span",{domProps:{innerHTML:t._s(e.all_state_pic[e.device_state])}}),t._v(" "),a("pops",{attrs:{doorControlMsg:t.doorControlMsg,info:t.onMouseDoor,infoSta:t.infoSta,controlDoorFun:t.controlDoorFun,itemIndex:s,infoControlTit:t.infoControlTit,infoStaTit:t.infoStaTit},on:{doorInfoHide:t.doorInfoHide,changeDoorStatus:t.changeDoorStatus}})],1)})],2)]),t._v(" "),a("door-info",{directives:[{name:"show",rawName:"v-show",value:t.doorInfoShow,expression:"doorInfoShow"}],attrs:{doorInfoId:t.doorInfoId,floorIds:t.floorIds,doorDeviceId:t.doorDeviceId,doorInfomation:t.doorInfomation,hid:t.doorInfoShow},on:{doorInfoHide:t.doorInfoHide}})],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("span",[e("i",{staticClass:"doorClose"}),this._v("关闭")])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",[e("i",{staticClass:"doorWarning"}),this._v("异常")])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",[e("i",{staticClass:"doorOpen"}),this._v("开启")])}]};var Je=function(t){a("Fxxr")},Ze=a("VU/8")(Xe.a,Qe,!1,Je,null,null).exports,ta={name:"door-control",components:{"sys-head":l.a},data:function(){return{first:"first",second:"second",currentView:"first",isActive1:!0,isActive2:!1,searchinput:"",sData:{lists:[]}}},methods:{},created:function(){0!=this.$store.state.sysList[14].role_string[0]&&this.sData.lists.push({id:0,name:"系统平面",route:"/DoorControl/components/tabsSys"}),0!=this.$store.state.sysList[14].role_string[1]&&this.sData.lists.push({id:1,name:"门禁记录",route:"/DoorControl/components/tabs"})}},ea={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"doorControl"},[e("sys-head",{attrs:{datas:this.sData}}),this._v(" "),e("router-view")],1)},staticRenderFns:[]};var aa=a("VU/8")(ta,ea,!1,function(t){a("bn05")},null,null).exports,sa=a("dK46"),ia={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"doorControl VideoSurveillance"},[a("sys-head",{attrs:{datas:t.sData}}),t._v(" "),a("div",{staticClass:"navCrumbs"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[t._v("首页")]),t._v(" "),a("el-breadcrumb-item",[t._v("视频监控系统")]),t._v(" "),a("el-breadcrumb-item",[t._v("查看视频")])],1)],1),t._v(" "),a("div",{staticClass:"mainContentBox"},[a("ul",{staticClass:"videoConditionsBox"},[a("li",[t._v("区域选择")]),t._v(" "),a("li",[a("el-select",{on:{change:t.chooseBuild},model:{value:t.selectedValue,callback:function(e){t.selectedValue=e},expression:"selectedValue"}},t._l(t.buildDatas,function(t,e){return a("el-option",{key:t.value,attrs:{label:t.title,value:t.floor_id}})}))],1),t._v(" "),a("li",[a("el-select",{directives:[{name:"show",rawName:"v-show",value:t.isSelectShow,expression:"isSelectShow"}],on:{change:t.chooseBuild1},model:{value:t.selectedValue1,callback:function(e){t.selectedValue1=e},expression:"selectedValue1"}},t._l(t.buildDatas1,function(t,e){return a("el-option",{key:t.value,attrs:{label:t.title,value:t.floor_id}})}))],1),t._v(" "),a("li",{staticClass:"floatRt"},[a("div",{staticClass:"vieCtBgBox"},[a("span",[t._v("当前监控总数")]),t._v(" "),a("span",{staticClass:"totleVideosNum"},[t._v(t._s(t.totalVdeoNum))])])])]),t._v(" "),a("div",{staticClass:"bottomShadow"},[a("div",{staticClass:"floorImgBox",attrs:{id:"floorImgBox"}},[a("iframe",{ref:"iframe",staticClass:"videoFrame",attrs:{src:t.iframeSrc,name:"myFrame"}})])])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.isVideoShowBoxShow,expression:"isVideoShowBoxShow"}],staticClass:"videoShowBox"},[a("div",{staticClass:"videoPopBg"},[a("i",{attrs:{clase:"closevideoShowBoxIcon"},on:{click:t.emptyVideo}},[t._v("×")]),t._v(" "),a("div",{staticClass:"videoDeviceTitle"},[a("span",{staticClass:"deviceaAcription"},[t._v(t._s(t.onVideoId))]),t._v(" "),a("button",{staticClass:"videoDeviceInfo floatRt",on:{click:function(e){t.deviceInfoGet(t.onVideoId)}}},[t._v("设备信息")])]),t._v(" "),a("div",{staticClass:"videoPanelBox",attrs:{id:"videoPanelBox"},domProps:{innerHTML:t._s(t.videoHtml)}})]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.isDeviceInfoPopShow,expression:"isDeviceInfoPopShow"}],staticClass:"deviceInfoPop"},[a("div",{staticClass:"deviceInfoBgBox"},[a("i",{attrs:{clase:"closeDeviceInfoIcon"},on:{click:t.clearIframeStale}},[t._v("×")]),t._v(" "),a("span",[t._v(t._s(t.onVideoId))]),t._v(" "),a("div",{staticClass:"deviceTabBox"},[a("nav",{staticClass:"tabNav"},[a("span",[a("a",{class:1==t.isActive1?"on":"",on:{click:function(e){t.toggleTabs(t.first)}}},[t._v("设备信息")])]),t._v(" "),a("span",[a("a",{class:1==t.isActive2?"on":"",on:{click:function(e){t.toggleTabs(t.second)}}},[t._v("维保历史")])])]),t._v(" "),a(t.currentView,{tag:"tabs",attrs:{onVideoId:t.onVideoId,"keep-alive":""}})],1)])])])],1)},staticRenderFns:[]};var na=function(t){a("66m+")},oa=a("VU/8")(sa.a,ia,!1,na,null,null).exports,ra={name:"login",data:function(){return{userName:"",password:"",validateCode:"",nameText:"请输入用户名",pwText:"请输入密码",codeText:"请输入验证码",imgApi:"https://tesing.china-tillage.com/users_manage/users_get_verifg_code",codeImgPath:"",forgetPw:!1,isError:!1,codeError:!1,errorTipShow:!1,errMsg:"",emptyInputs:!0}},methods:{codeFocus:function(){this.validateCode="",this.codeError=!1,this.errorTipShow=!1},refrenshCode:function(){var t=Math.ceil(10*Math.random());this.codeImgPath=this.imgApi+"?"+t},userLogin:function(){this.verifyInput()},verifyInput:function(){this.userName?this.password?this.validateCode?this.requestCode():this.showErr(this.codeText):this.showErr(this.pwText):this.showErr(this.nameText)},showErr:function(t){this.errorTipShow=this.emptyInputs=!0,this.errMsg=t},closeErr:function(){this.errorTipShow=this.codeError=this.isError=!1,this.errMsg=""},requestCode:function(){var t=this;t.$http.post("users_manage/users_login_validation_code",{code:t.validateCode},{"Content-Type":"multipart/form-data"}).then(function(e){var a=e.data;"0"==a.code?(t.closeErr(),t.requestLogin()):(t.codeError=!0,t.refrenshCode(),t.showErr(a.message))}).catch(function(t){console.log(t)})},requestLogin:function(){var t=this,e={username:this.userName,password:this.password};this.$http.post("/users_manage/user_login",e,{"Content-Type":"multipart/form-data"}).then(function(e){var a=e.data;if("0"==a.code){t.closeErr();var s=t.$store.state.userInfoTotal=a.data,i=t.$store.state.projectId=s.projectInfo[0].project_id,n=t.$store.state.userId=s.userinfo.id,o=s.userinfo.password+"_"+i+"_"+n;Ee.a.defaults.headers.common.Authorization=o;for(var r=a.data.usergrouprolesyslist[0].syslist,l=r.length,c={},d=0;d<l;d++){c[r[d].self_id]=r[d],t.$store.state.sysList=c}sessionStorage.setItem("routerInfo",P()(t.$store.state)),t.$router.replace({path:"/home",params:{isLogin:!0}})}else t.isError=!0,t.refrenshCode(),t.showErr(a.message)}).catch(function(e){console.log(e),t.showErr("服务器请求失败")})},enterLogin:function(){var t=this;window.onkeydown=function(){13==event.keyCode&&t.requestCode()}}},mounted:function(){this.codeImgPath=this.imgApi,this.enterLogin()}},la={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"loginContainer"},[a("div",{staticClass:"loginFormBox"},[t._m(0),t._v(" "),a("div",{staticClass:"loginInfoBox"},[a("div",{staticClass:"inputItem"},[a("label",{attrs:{for:"userName"}},[t._v("用户名")]),a("span",{staticClass:"break breakWidth1"}),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.userName,expression:"userName"}],class:{error:t.isError},attrs:{type:"text",placeholder:t.nameText,id:"userName"},domProps:{value:t.userName},on:{input:function(e){e.target.composing||(t.userName=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"inputItem"},[a("label",{attrs:{for:"password"}},[t._v("密码")]),a("span",{staticClass:"break breakWidth1"}),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],class:{error:t.isError},attrs:{type:"password",placeholder:t.pwText,id:"password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),t._v(" "),a("div",{staticClass:"forgetPw",on:{click:function(e){t.forgetPw=!0}}},[t._v("忘记密码")])]),t._v(" "),a("div",{staticClass:"inputItem code"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.validateCode,expression:"validateCode"}],class:{error:t.codeError},attrs:{type:"text",placeholder:t.codeText,id:"validateCode"},domProps:{value:t.validateCode},on:{focus:t.codeFocus,input:function(e){e.target.composing||(t.validateCode=e.target.value)}}}),t._v(" "),a("span",{staticClass:"break breakWidth2"}),t._v(" "),a("div",{staticClass:"codeImg"},[a("img",{attrs:{src:t.codeImgPath,alt:""}})]),t._v(" "),a("div",{staticClass:"refreshBtn",on:{click:t.refrenshCode}})])]),t._v(" "),a("div",{staticClass:"inputItem loginBtn",on:{click:t.userLogin}},[t._v("登录")])]),t._v(" "),t._m(1),t._v(" "),a("transition",{attrs:{name:"el-fade-in-linear"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.errorTipShow,expression:"errorTipShow"}],staticClass:"errTipBox",domProps:{innerHTML:t._s(t.errMsg)}})]),t._v(" "),a("transition",{attrs:{name:"el-fade-in-linear"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.forgetPw,expression:"forgetPw"}],staticClass:"forgetPwBox"},[a("div",[a("div",{staticClass:"text"},[t._v("忘记密码，请与管理员取得联系")]),t._v(" "),a("div",{staticClass:"confirmBtn",on:{click:function(e){t.forgetPw=!1}}},[t._v("确定")])])])])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("h1",{staticClass:"sysName"},[this._v("泰立汇云"),e("span"),this._v("智慧酒店系统")])},function(){var t=this.$createElement,e=this._self._c||t;return e("footer",[this._v("智能改变生活"),e("span"),this._v("数据成就未来")])}]};var ca=a("VU/8")(ra,la,!1,function(t){a("D3NR")},"data-v-1d2d3424",null).exports,da={components:{"sys-head":l.a},data:function(){return{sData:{lists:[]}}},created:function(){console.log(this.$store.state.sysList[17]),"0"!=this.$store.state.sysList[17].role_string[0]&&this.sData.lists.push({id:0,name:"酒店房态",route:"/HotelStatus/components/HotelRoomStatus"}),"0"==this.$store.state.sysList[17].role_string[1]&&"0"==this.$store.state.sysList[17].role_string[2]&&"0"==this.$store.state.sysList[17].role_string[3]&&"0"==this.$store.state.sysList[17].role_string[4]||this.sData.lists.push({id:1,name:"房单",route:"/HotelStatus/components/roomLists"}),"0"!=this.$store.state.sysList[17].role_string[5]&&this.sData.lists.push({id:2,name:"报表",route:"/HotelStatus/components/roomCharts"})},methods:{}},ua={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"doorControl"},[e("sys-head",{attrs:{datas:this.sData}}),this._v(" "),e("router-view")],1)},staticRenderFns:[]};var ha=a("VU/8")(da,ua,!1,function(t){a("99tx")},null,null).exports,ma={components:{},data:function(){return{activeIndex:-1,thisClassOn:"left",onItemFloor:"全部",hotelFloors:[],floorNumber:"全部",separate_room:[],standard_room:[],suite:[],roomNum:"",roomSta:"",roomsType:[{roomType:"单间",roomsLst:[]},{roomType:"标间",roomsLst:[]},{roomType:"套房",roomsLst:[]}],roomListsStaTit:[{labName:"空脏",sta:"emptyDirty"},{labName:"空净",sta:"emptyClean"},{labName:"住脏",sta:"fullDurty"},{labName:"住净",sta:"fullClean"},{labName:"锁房",sta:"roomLock"},{labName:"维修",sta:"roomRepair"}],hotelMainInfo:[{labName:"房间总数",labVal:""},{labName:"房间预定数量",labVal:""},{labName:"闲置数量",labVal:""},{labName:"入住人数",labVal:""},{labName:"入住率",labVal:""},{labName:"闲置率",labVal:""},{labName:"用餐人数",labVal:""}],dataObjseparate_room:[],dataObjstandard_room:[],dataObjsuite:[],thisCheckFloor:""}},mounted:function(){this.getHotelMainData(),this.getData("")},methods:{toggleHdOn:function(t){this.activeIndex=t},changeItemId:function(t,e){this.onItemFloor=e,console.log(t),console.log(e),this.getData(t)},getFloorsFn:function(){var t=this;this.$http.post("/hotel/get_floor",{}).then(function(e){t.hotelFloors=e.data.data,console.log(e.data.data),t.roomsType[0].roomsLst=t.dataObjseparate_room,t.roomsType[1].roomsLst=t.dataObjstandard_room,t.roomsType[2].roomsLst=t.dataObjsuite},function(t){})},getData:function(t){var e=this;e.thisCheckFloor=t,this.$http.post("/hotel/hotel_state",{project_id:this.$store.state.projectId,floor_id:t}).then(function(t){e.dataObjseparate_room=t.data.data.separate_room,e.dataObjstandard_room=t.data.data.standard_room,e.dataObjsuite=t.data.data.suite,e.getFloorsFn(),console.log(e.roomsType)},function(t){})},getHotelMainData:function(){var t=this;this.$http.post("/hotel/hotel_state",{project_id:this.$store.state.projectId,floor_id:""}).then(function(e){console.log(e.data.data),t.hotelMainInfo[0].labVal=Number(e.data.data.rooms).toFixed(0),t.hotelMainInfo[1].labVal=Number(e.data.data.room_reservation).toFixed(0),t.hotelMainInfo[2].labVal=Number(e.data.data.vacancy).toFixed(0),t.hotelMainInfo[3].labVal=Number(e.data.data.check_in_num).toFixed(0),t.hotelMainInfo[4].labVal=Number(e.data.data.occupancy_rate).toFixed(1)+"%",t.hotelMainInfo[5].labVal=Number(e.data.data.vacancy_rate).toFixed(1)+"%",t.hotelMainInfo[6].labVal=Number(e.data.data.diners).toFixed(0)},function(t){})}}},pa={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hotelStatus"},[a("div",{staticClass:"navCrumbs"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[t._v("首页")]),t._v(" "),a("el-breadcrumb-item",[t._v("营收数据分析")]),t._v(" "),a("el-breadcrumb-item",[t._v("酒店房态")])],1)],1),t._v(" "),a("div",{staticClass:"hotelMainContent"},[a("ul",{staticClass:"hotelMainInfo"},[t._m(0),t._v(" "),t._l(t.hotelMainInfo,function(e){return a("li",[a("span",[t._v(t._s(e.labName))]),t._v(" "),a("a",[t._v(t._s(e.labVal))])])})],2),t._v(" "),a("div",{staticClass:"roomsStaListPanel"},[a("div",{staticClass:"roomListHeadBox"},[t._m(1),t._v(" "),t._l(t.roomListsStaTit,function(e){return a("span",{class:e.sta},[a("i"),t._v(t._s(e.labName))])}),t._v(" "),a("el-dropdown",{attrs:{trigger:"click"}},[a("span",{staticClass:"el-dropdown-link"},[t._v(t._s(t.onItemFloor))]),t._v(" "),a("el-dropdown-menu",{staticClass:"hotelStaDropDown",attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",[a("div",{on:{click:function(e){t.changeItemId("","全部")}}},[t._v("全部")])]),t._v(" "),t._l(t.hotelFloors,function(e,s){return a("el-dropdown-item",{key:e.id,attrs:{divided:""}},[a("div",{on:{click:function(a){t.changeItemId(e.id,e.title)}}},[a("b",{class:s==t.activeIndex?"bottom":"left",on:{click:function(e){e.stopPropagation(),t.toggleHdOn(s)}}}),t._v(t._s(e.title)+" "),a("input",{domProps:{value:e.id}})]),t._v(" "),t._l(e.child,function(e){return a("div",{directives:[{name:"show",rawName:"v-show",value:t.activeIndex===s,expression:"activeIndex===index"}],staticClass:"itemChild",on:{click:function(a){t.changeItemId(e.id,e.title)}}},[t._v(t._s(e.title)+" "),a("input",{domProps:{value:e.id}})])})],2)})],2)],1)],2),t._v(" "),a("div",{staticClass:"roomsTypeStaBox"},[a("el-scrollbar",{staticStyle:{height:"100%"}},t._l(t.roomsType,function(e){return a("ul",[a("li",[t._v(t._s(e.roomType))]),t._v(" "),t._l(e.roomsLst,function(e,s){return a("li",{staticClass:"roomLstLi"},[a("div",{class:"roomSta"+e[1]},[a("span",{staticClass:"roomNumber"},[t._v(t._s(e[0]))]),t._v(" "),"OD"==e[1]?a("label",{staticClass:"labName"},[t._v("住脏")]):"OC"==e[1]?a("label",{staticClass:"labName"},[t._v("住净")]):"VD"==e[1]?a("label",{staticClass:"labName"},[t._v("空脏")]):"VC"==e[1]?a("label",{staticClass:"labName"},[t._v("空净")]):"OO"==e[1]?a("label",{staticClass:"labName"},[t._v("维修")]):a("label",{staticClass:"labName"},[t._v("锁房")])])])}),t._v(" "),a("li",{staticStyle:{clear:"both",height:"6px"}})],2)}))],1)])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("li",[e("span",[this._v("酒店概况")]),this._v(" "),e("i")])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",[this._v("酒店房态表 "),e("i")])}]};var fa=a("VU/8")(ma,pa,!1,function(t){a("H1wa")},null,null).exports,va=a("Tf5g"),_a={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"roomListAll"},[a("div",{staticClass:"roomListSearchPanel"},[a("el-select",{attrs:{placeholder:"状态选择"},model:{value:t.roomListAllSta,callback:function(e){t.roomListAllSta=e},expression:"roomListAllSta"}},[a("el-option",{attrs:{label:"住脏",value:"1"}}),t._v(" "),a("el-option",{attrs:{label:"住净",value:"2"}}),t._v(" "),a("el-option",{attrs:{label:"空脏",value:"3"}}),t._v(" "),a("el-option",{attrs:{label:"空净",value:"4"}}),t._v(" "),a("el-option",{attrs:{label:"锁房",value:"5"}}),t._v(" "),a("el-option",{attrs:{label:"维修",value:"6"}})],1),t._v(" "),a("el-select",{attrs:{placeholder:"房间号"},on:{change:t.change},model:{value:t.roomListAllNumber,callback:function(e){t.roomListAllNumber=e},expression:"roomListAllNumber"}},t._l(t.roomListAllNumbers,function(t,e){return a("el-option",{key:e,attrs:{label:t.num,value:t.num}})})),t._v(" "),a("div",{staticClass:"roomListDatePicker"},[a("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.datetimerange,callback:function(e){t.datetimerange=e},expression:"datetimerange"}})],1),t._v(" "),a("button",{staticClass:"btn",on:{click:t.getData}},[a("i",{staticClass:"el-icon-search"}),t._v("搜索")])],1),t._v(" "),a("div",{staticClass:"tableBox"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,height:"100%"}},[a("el-table-column",{attrs:{prop:"indexs",label:"序号",align:"cneter"}}),t._v(" "),a("el-table-column",{attrs:{prop:"room_state",label:"房间状态",align:"cneter",formatter:t.stateFormat}}),t._v(" "),a("el-table-column",{attrs:{prop:"room_id",label:"房间号",align:"cneter"}}),t._v(" "),a("el-table-column",{attrs:{prop:"stay_name",label:"入住人",align:"cneter"}}),t._v(" "),a("el-table-column",{attrs:{prop:"phone",label:"手机号",align:"cneter"}}),t._v(" "),a("el-table-column",{attrs:{prop:"num",label:"入住人数",align:"cneter"}}),t._v(" "),a("el-table-column",{attrs:{prop:"stay_time",label:"入住时间",align:"cneter"}}),t._v(" "),a("el-table-column",{attrs:{prop:"leave_time",label:"退房时间",align:"cneter"}})],1),t._v(" "),a("div",{staticClass:"paginationBox"},[a("div",{staticClass:"totalPageNumBox"},[t._v("共"+t._s(t.totalPageNum)+"页")]),t._v(" "),a("div",{staticClass:"el-input el-pagination__editor is-in-pagination curPageBox"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.currPage,expression:"currPage"}],staticClass:"el-input__inner",attrs:{type:"number",autocomplete:"off"},domProps:{value:t.currPage},on:{input:function(e){e.target.composing||(t.currPage=e.target.value)}}}),t._v(" "),a("span",{on:{click:t.toInputPage}},[t._v("GO")])]),t._v(" "),a("el-pagination",{attrs:{"current-page":t.currentPage,"page-size":t.pagesize,"page-count":t.totalPageNum,total:t.total,layout:"prev, pager, next"},on:{"current-change":t.handleCurrentChange}})],1)],1)])},staticRenderFns:[]};var ga=function(t){a("7TcJ")},ba=a("VU/8")(va.a,_a,!1,ga,null,null).exports,ya=a("8aqH"),wa={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"roomListAll"},[a("div",{staticClass:"roomListSearchPanel"},[a("el-select",{attrs:{placeholder:"宴会厅"},on:{change:t.changeDescript},model:{value:t.roomListAllNumber,callback:function(e){t.roomListAllNumber=e},expression:"roomListAllNumber"}},t._l(t.roomListAllNumbers,function(t,e){return a("el-option",{key:e,attrs:{label:t.num,value:t.num}})})),t._v(" "),a("div",{staticClass:"roomListDatePicker roomListDatePickerDef"},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:t.datetimerange,callback:function(e){t.datetimerange=e},expression:"datetimerange"}})],1),t._v(" "),a("button",{staticClass:"btn",on:{click:t.getData}},[a("i",{staticClass:"el-icon-search"}),t._v("搜索")])],1),t._v(" "),a("div",{staticClass:"tableBox"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,height:"100%"}},[a("el-table-column",{attrs:{prop:"indexs",label:"序号",align:"cneter"}}),t._v(" "),a("el-table-column",{attrs:{prop:"descript",label:"预定大厅",align:"cneter"}}),t._v(" "),a("el-table-column",{attrs:{prop:"biz_date",label:"预定日期",align:"cneter"}}),t._v(" "),a("el-table-column",{attrs:{prop:"res_name",label:"预定人",align:"cneter"}}),t._v(" "),a("el-table-column",{attrs:{prop:"phone",label:"预定人手机号",align:"cneter"}})],1),t._v(" "),a("div",{staticClass:"paginationBox"},[a("div",{staticClass:"totalPageNumBox"},[t._v("共"+t._s(t.totalPageNum)+"页")]),t._v(" "),a("div",{staticClass:"el-input el-pagination__editor is-in-pagination curPageBox"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.currPage,expression:"currPage"}],staticClass:"el-input__inner",attrs:{type:"number",autocomplete:"off"},domProps:{value:t.currPage},on:{input:function(e){e.target.composing||(t.currPage=e.target.value)}}}),t._v(" "),a("span",{on:{click:t.toInputPage}},[t._v("GO")])]),t._v(" "),a("el-pagination",{attrs:{"current-page":t.currentPage,"page-size":t.pagesize,"page-count":t.totalPageNum,total:t.total,layout:"prev, pager, next"},on:{"current-change":t.handleCurrentChange}})],1)],1)])},staticRenderFns:[]};var Ca=function(t){a("4mPM")},xa=a("VU/8")(ya.a,wa,!1,Ca,null,null).exports,ka=a("TmA6"),Da={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"roomListAll"},[a("div",{staticClass:"roomListSearchPanel"},[a("el-select",{attrs:{placeholder:"状态选择"},model:{value:t.roomListAllSta,callback:function(e){t.roomListAllSta=e},expression:"roomListAllSta"}},[a("el-option",{attrs:{label:"住脏",value:"1"}}),t._v(" "),a("el-option",{attrs:{label:"住净",value:"2"}}),t._v(" "),a("el-option",{attrs:{label:"空脏",value:"3"}}),t._v(" "),a("el-option",{attrs:{label:"空净",value:"4"}}),t._v(" "),a("el-option",{attrs:{label:"锁房",value:"5"}}),t._v(" "),a("el-option",{attrs:{label:"维修",value:"6"}})],1),t._v(" "),a("el-select",{attrs:{placeholder:"房间号"},on:{change:t.change},model:{value:t.roomListAllNumber,callback:function(e){t.roomListAllNumber=e},expression:"roomListAllNumber"}},t._l(t.roomListAllNumbers,function(t,e){return a("el-option",{key:e,attrs:{label:t.num,value:t.num}})})),t._v(" "),a("div",{staticClass:"roomListDatePicker"},[a("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.datetimerange,callback:function(e){t.datetimerange=e},expression:"datetimerange"}})],1),t._v(" "),a("button",{staticClass:"btn",on:{click:t.getData}},[a("i",{staticClass:"el-icon-search"}),t._v("搜索")])],1),t._v(" "),a("div",{staticClass:"tableBox"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,height:"100%"}},[a("el-table-column",{attrs:{prop:"indexs",label:"序号",align:"cneter"}}),t._v(" "),a("el-table-column",{attrs:{prop:"room_state",label:"房间状态",align:"cneter",formatter:t.stateFormat}}),t._v(" "),a("el-table-column",{attrs:{prop:"room_id",label:"房间号",align:"cneter"}}),t._v(" "),a("el-table-column",{attrs:{prop:"stay_name",label:"入住人",align:"cneter"}}),t._v(" "),a("el-table-column",{attrs:{prop:"phone",label:"手机号",align:"cneter"}}),t._v(" "),a("el-table-column",{attrs:{prop:"num",label:"入住人数",align:"cneter"}}),t._v(" "),a("el-table-column",{attrs:{prop:"stay_time",label:"入住时间",align:"cneter"}}),t._v(" "),a("el-table-column",{attrs:{prop:"leave_time",label:"退房时间",align:"cneter"}})],1),t._v(" "),a("div",{staticClass:"paginationBox"},[a("div",{staticClass:"totalPageNumBox"},[t._v("共"+t._s(t.totalPageNum)+"页")]),t._v(" "),a("div",{staticClass:"el-input el-pagination__editor is-in-pagination curPageBox"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.currPage,expression:"currPage"}],staticClass:"el-input__inner",attrs:{type:"number",autocomplete:"off"},domProps:{value:t.currPage},on:{input:function(e){e.target.composing||(t.currPage=e.target.value)}}}),t._v(" "),a("span",{on:{click:t.toInputPage}},[t._v("GO")])]),t._v(" "),a("el-pagination",{attrs:{"current-page":t.currentPage,"page-size":t.pagesize,"page-count":t.totalPageNum,total:t.total,layout:"prev, pager, next"},on:{"current-change":t.handleCurrentChange}})],1)],1)])},staticRenderFns:[]};var Sa=function(t){a("qmbW")},Aa={components:{first:ba,second:xa,third:a("VU/8")(ka.a,Da,!1,Sa,null,null).exports},data:function(){return{sysInfo:{},first:"first",second:"second",third:"third",currentView:"first",isActive1:!0,isActive2:!1,isActive3:!1}},created:function(){this.sysInfo=this.$store.state.sysList[17],0!=this.sysInfo.role_string[2]?(this.currentView="first",this.isActive1=!0,this.isActive2=!1,this.isActive3=!1):0==this.sysInfo.role_string[3]&&0!=this.sysInfo.role_string[4]?(this.currentView="second",this.isActive2=!0,this.isActive1=!1,this.isActive3=!1):(this.currentView="third",this.isActive3=!0,this.isActive1=!1,this.isActive2=!1)},methods:{toggleTabs:function(t){"first"==t?(this.isActive2=!1,this.isActive3=!1,this.isActive1=!0):"second"==t?(this.isActive3=!1,this.isActive2=!0,this.isActive1=!1):"third"==t&&(this.isActive2=!1,this.isActive1=!1,this.isActive3=!0),this.currentView=t}}},Ea={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hotelStatus roomLists"},[a("div",{staticClass:"navCrumbs"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[t._v("首页")]),t._v(" "),a("el-breadcrumb-item",[t._v("营收数据分析")]),t._v(" "),a("el-breadcrumb-item",[t._v("房单")])],1)],1),t._v(" "),a("div",{staticClass:"roomListsTabBox"},[a("nav",{staticClass:"tabNav"},[0!=t.sysInfo.role_string[2]?a("span",[a("a",{class:1==t.isActive1?"on":"",on:{click:function(e){t.toggleTabs(t.first)}}},[t._v("全部房单 "),a("i")])]):t._e(),t._v(" "),0!=t.sysInfo.role_string[3]?a("span",[a("a",{class:1==t.isActive2?"on":"",on:{click:function(e){t.toggleTabs(t.second)}}},[t._v("宴会厅订单"),a("i")])]):t._e(),t._v(" "),0!=t.sysInfo.role_string[4]?a("span",[a("a",{class:1==t.isActive3?"on":"",on:{click:function(e){t.toggleTabs(t.third)}}},[t._v("今日已退房单"),a("i")])]):t._e()]),t._v(" "),a(t.currentView,{tag:"tabs",staticClass:"roomListsTabDomBox",attrs:{"keep-alive":""}})],1)])},staticRenderFns:[]};var Ia=a("VU/8")(Aa,Ea,!1,function(t){a("PFbu")},null,null).exports,La=a("x+wv"),Ta={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hotelStatus hotelReportForm"},[a("div",{staticClass:"navCrumbs"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[t._v("首页")]),t._v(" "),a("el-breadcrumb-item",[t._v("营收数据分析")]),t._v(" "),a("el-breadcrumb-item",[t._v("报表")])],1)],1),t._v(" "),a("div",{staticClass:"reportHt50"},[a("div",{staticClass:"reportChartbox"},[a("div",{staticClass:"reportChartHeadBox"},[t._m(0),t._v(" "),a("el-select",{attrs:{placeholder:"月份"},on:{change:t.getDataChooseMonth},model:{value:t.floorNumber,callback:function(e){t.floorNumber=e},expression:"floorNumber"}},[a("el-option",{attrs:{label:"1月",value:"01"}}),t._v(" "),a("el-option",{attrs:{label:"2月",value:"02"}}),t._v(" "),a("el-option",{attrs:{label:"3月",value:"03"}}),t._v(" "),a("el-option",{attrs:{label:"4月",value:"04"}}),t._v(" "),a("el-option",{attrs:{label:"5月",value:"05"}}),t._v(" "),a("el-option",{attrs:{label:"6月",value:"06"}}),t._v(" "),a("el-option",{attrs:{label:"7月",value:"07"}}),t._v(" "),a("el-option",{attrs:{label:"8月",value:"08"}}),t._v(" "),a("el-option",{attrs:{label:"9月",value:"09"}}),t._v(" "),a("el-option",{attrs:{label:"10月",value:"10"}}),t._v(" "),a("el-option",{attrs:{label:"11月",value:"11"}}),t._v(" "),a("el-option",{attrs:{label:"12月",value:"12"}})],1)],1),t._v(" "),a("div",{staticClass:"chartDom",attrs:{id:"reportChartMonth"}})])]),t._v(" "),a("div",{staticClass:"reportHt50"},[a("div",{staticClass:"reportChartbox"},[a("div",{staticClass:"reportChartHeadBox"},[t._m(1),t._v(" "),a("el-select",{attrs:{placeholder:"年份"},on:{change:t.getDataChooseYear},model:{value:t.floorNumber1,callback:function(e){t.floorNumber1=e},expression:"floorNumber1"}},t._l(t.SelesData,function(t){return a("el-option",{key:t.valueX,attrs:{label:t.valueX,value:t.valueX}})}))],1),t._v(" "),a("div",{staticClass:"chartDom",attrs:{id:"reportChartYear"}})])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("span",[this._v("营收报表(日) "),e("i")])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",[this._v("营收报表(月) "),e("i")])}]};var Ba=function(t){a("JzBx")},Pa=a("VU/8")(La.a,Ta,!1,Ba,null,null).exports,Ra={components:{"sys-head":l.a},name:"airConditioner",data:function(){return{sData:{active:"item0",lists:[]},modeData:{show:!0,list:[]},animate:!1}},methods:{getModeList:function(){var t=this,e={};this.$http.get("/hvac_pc/pc/yjqt",e,{}).then(function(a){var s=a.data;console.log("获取模式轮播列表",e,a),0==s.code?t.modeData.list=s.data:t.$message(s.message)}).catch(function(e){t.$message(e)})},scroll:function(){var t=this;this.animate=!0,setTimeout(function(){t.modeData.list.push(t.modeData.list[0]),t.modeData.list.shift(),t.animate=!1},500)}},created:function(){setInterval(this.getModeList(),3e5),setInterval(this.scroll,2e3),0==this.$store.state.sysList[1].role_string[0]&&0==this.$store.state.sysList[1].role_string[3]&&0==this.$store.state.sysList[1].role_string[4]||this.sData.lists.push({id:0,name:"远程控制",route:"/airConditioner/components/telecontrol"}),0==this.$store.state.sysList[1].role_string[1]&&0==this.$store.state.sysList[1].role_string[5]&&0==this.$store.state.sysList[1].role_string[6]&&0==this.$store.state.sysList[1].role_string[7]||this.sData.lists.push({id:1,name:"系统监测",route:"/airConditioner/components/sysMonitor"}),0==this.$store.state.sysList[1].role_string[2]&&0==this.$store.state.sysList[1].role_string[8]&&0==this.$store.state.sysList[1].role_string[9]||this.sData.lists.push({id:2,name:"定时模式",route:"/airConditioner/components/timerMode"})},mounted:function(){}},Ma={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"airConditioner"},[a("sys-head",{attrs:{datas:t.sData}}),t._v(" "),t.modeData.show?a("div",{staticClass:"modeBox"},[a("div",{class:["mode",{anim:1==t.animate}],attrs:{id:"con1"}},t._l(t.modeData.list,function(e,s){return a("p",{key:s,staticClass:"text rowHei",domProps:{textContent:t._s(e)}})}))]):t._e(),t._v(" "),a("router-view")],1)},staticRenderFns:[]};var Na=a("VU/8")(Ra,Ma,!1,function(t){a("g6SQ")},null,null).exports,Fa=a("92NL"),Oa={render:function(){var t=this,e=this,a=e.$createElement,s=e._self._c||a;return s("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"coldSourceStation",attrs:{"element-loading-background":"rgba(0, 0, 0, 0.5)","element-loading-spinner":"el-icon-loading","element-loading-text":"拼命加载中"}},[s("div",{staticClass:"deviceLists"},[e._l(e.lists1,function(t,a){return s("div",{key:a,staticClass:"part"},[s("div",{staticClass:"img",domProps:{innerHTML:e._s(1102==t.self_id?e.imgArr[0]:1103==t.self_id?e.imgArr[1]:1108==t.self_id?e.imgArr[2]:"")}}),e._v(" "),s("div",{staticClass:"progressBox"},[s("self-progress2",{attrs:{tit:"总",per:"100%",val:t.all}}),e._v(" "),s("self-progress2",{attrs:{tit:"开",per:t.on/t.all*100+"%",val:t.on}}),e._v(" "),s("self-progress2",{attrs:{tit:"故",per:t.break/t.all*100+"%",val:t.break}}),e._v(" "),s("self-progress2",{attrs:{tit:"未",per:t.off/t.all*100+"%",val:t.off}})],1)])}),e._v(" "),0===e.lists1.length?s("div",{staticClass:"emptyText"},[e._v("\n      没有数据\n    ")]):e._e()],2),e._v(" "),s("div",{staticClass:"deviceDetailBox",attrs:{id:"deviceDetailBox"}},[s("div",{staticClass:"deviceSet"},[s("self-popover2",{attrs:{device_id:e.tuliDeviceId,devicePic:e.device_pic}}),e._v(" "),s("el-scrollbar",{staticStyle:{height:"99%"}},[s("div",{staticClass:"controlBtnBox"},[e._l(e.tuliBtnList,function(t,a){return s("div",{key:"first"+a,staticClass:"btnItem"},[s("span",{staticClass:"tit"},[e._v(e._s(t.title))]),e._v(" "),s("div",{staticClass:"selBtnList"},e._l(t.btnList,function(i,n){return s("button",{key:n,class:{active:i.id==t.now_value},attrs:{type:"button"},domProps:{textContent:e._s(i.tit)},on:{click:function(s){e.tuliBtnClick(t.point_id,i.id,a,n)}}})}))])}),e._v(" "),e._l(e.tuliTempBtnList,function(t,a){return s("div",{key:"second"+a,staticClass:"btnItem"},[s("span",{staticClass:"tit"},[e._v(e._s(t.title))]),e._v(" "),s("div",{staticClass:"inputBox"},[s("div",{staticClass:"showState"},[s("p",{staticClass:"text"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.now_value,expression:"v2.now_value"}],ref:"tempInput",refInFor:!0,attrs:{type:"text",readonly:!e.btnActive,oninput:"value=value.replace(/[^\\d]/g,'')",maxlength:"2"},domProps:{value:t.now_value},on:{input:function(a){a.target.composing||e.$set(t,"now_value",a.target.value)}}}),e._v(" "),s("span",{domProps:{textContent:e._s(t.unit)}})]),e._v(" "),s("i",{class:["editBtn",{one:!e.btnActive},{two:e.btnActive}],on:{click:function(s){e.changeEditState(t.point_id,t.now_value,a)}}})])])])})],2)])],1),e._v(" "),s("div",{staticClass:"deviceEchart"},[s("i",{staticClass:"el-icon-circle-close colseBoxs",staticStyle:{position:"absolute",right:"0",top:"0"},on:{click:e.hide}}),e._v(" "),s("div",{staticClass:"selfTabBox"},[s("ul",{staticClass:"self-tab-head"},[e._l(e.tabData,function(t,a){return s("li",{key:a,class:["part",{active:a==e.tabActive}],domProps:{textContent:e._s(0!=t.unit.length?t.title+"("+t.unit[0]+")":t.title)},on:{click:function(t){e.tabToggle(a)}}})}),e._v(" "),s("li",{staticClass:"extra"})],2),e._v(" "),s("div",{staticClass:"self-tab-body"},[e._l(e.tabData,function(t,a){return s("line-echarts4",{directives:[{name:"show",rawName:"v-show",value:a==e.tabActive,expression:"i==tabActive"}],key:a,ref:"lineCharts4",refInFor:!0,attrs:{datas:t.datas}})}),e._v(" "),0===e.tabData.length?s("div",{staticClass:"emptyText"},[e._v("没有数据")]):e._e()],2)])])]),e._v(" "),s("div",{staticClass:"threeDBox",attrs:{id:"threeDBox"}},[s("div",{staticClass:"btnBox"},[s("div",{staticClass:"cascaderBox"},[s("el-cascader",{attrs:{"expand-trigger":"hover",options:e.options},on:{change:e.handleChange},model:{value:e.selectedOptions2,callback:function(t){e.selectedOptions2=t},expression:"selectedOptions2"}})],1),e._v(" "),s("div",{staticClass:"btnClickBox"},[s("button",{attrs:{disabled:!(0==e.yijianNowVal||1==e.yijianNowVal),type:"button"},domProps:{textContent:e._s(0==e.yijianNowVal?"一键关闭":1==e.yijianNowVal?"一键开启":"未知错误")},on:{click:e.oneKeySwitch}})])]),e._v(" "),s("iframe",{ref:"iframe",attrs:{name:"myFrame",frameborder:"0",width:"100%",height:"100%",src:e.modelUrl}})]),e._v(" "),s("Dialog",{ref:"dialog",attrs:{wid:"3.64rem",hei:"2.16rem"}},[s("div",{staticClass:"dialog-in"},[s("p",{staticClass:"p-text"},[e._v("是否确认"+e._s(this.parentToggle?"开启":"关闭")+"？")]),e._v(" "),s("div",{staticClass:"btnWrap"},[s("button",{attrs:{type:"button"},on:{click:e.sureControl}},[e._v("确定")]),e._v(" "),s("button",{attrs:{type:"button"},on:{click:function(){t.$refs.dialog.hide(),t.$message("取消操作！")}}},[e._v("取消")])])])]),e._v(" "),s("Dialog",{ref:"dialog2",attrs:{wid:"3.64rem",hei:"2.16rem"}},[s("div",{staticClass:"dialog-in"},[s("p",{staticClass:"p-text"},[e._v("是否确认"+e._s(0==e.yijianNowVal?"一键开启":1==e.yijianNowVal?"一键关闭":"未知错误")+"？")]),e._v(" "),s("div",{staticClass:"btnWrap"},[s("button",{attrs:{type:"button"},on:{click:e.sureControl2}},[e._v("确定")]),e._v(" "),s("button",{attrs:{type:"button"},on:{click:function(){t.$refs.dialog2.hide(),t.$message("取消操作！")}}},[e._v("取消")])])])])],1)},staticRenderFns:[]};var ja=function(t){a("0LWd")},Ua=a("VU/8")(Fa.a,Oa,!1,ja,null,null).exports,Va=a("ZKCf"),$a={render:function(){var t=this,e=this,a=e.$createElement,s=e._self._c||a;return s("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"airConditionerEnd",attrs:{"element-loading-background":"rgba(0, 0, 0, 0.5)","element-loading-spinner":"el-icon-loading","element-loading-text":"拼命加载中"}},[s("div",{staticClass:"rtBtnBox"},[s("button",{attrs:{type:"button"},on:{click:e.showControlFail}},[e._v("控制失败列表（"+e._s(e.newNum)+"）"),s("span",{directives:[{name:"show",rawName:"v-show",value:0!=e.newNum,expression:"newNum!=0"}],staticClass:"tip"})]),e._v(" "),s("button",{attrs:{type:"button"},on:{click:e.showControlMost}},[e._v("批量控制")])]),e._v(" "),s("div",{staticClass:"deviceDetailBox",attrs:{id:"deviceDetailBox2"}},[s("div",{staticClass:"deviceSet"},[e._l(e.device_pic,function(t,a){return s("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"v.show"}],key:a,staticClass:"imgBox",domProps:{innerHTML:e._s(t.codes)}})}),e._v(" "),s("div",{staticClass:"btnBox"},[s("div",{staticClass:"head"},[s("div",{staticClass:"left",domProps:{textContent:e._s(e.tuliTit)}}),e._v(" "),s("self-popover3",{attrs:{device_id:e.tuliDeviceId}})],1),e._v(" "),s("div",{staticClass:"controlBtnBoxWrap"},[s("el-scrollbar",{staticStyle:{height:"100%"}},[s("div",{staticClass:"controlBtnBox"},[e._l(e.tuliBtnList,function(t,a){return s("div",{key:a,staticClass:"btnItem"},[s("span",{staticClass:"tit"},[e._v(e._s(t.title))]),e._v(" "),s("div",{staticClass:"selBtnList"},e._l(t.btnList,function(i,n){return s("button",{key:n,class:{active:i.id==t.now_value},attrs:{type:"button"},domProps:{textContent:e._s(i.tit)},on:{click:function(s){e.tuliBtnClick(t.point_id,i.id,a,n)}}})}))])}),e._v(" "),e._l(e.tuliTempBtnList,function(t,a){return s("div",{key:"a"+a,staticClass:"btnItem"},[s("span",{staticClass:"tit"},[e._v(e._s(t.title))]),e._v(" "),s("div",{staticClass:"inputBox"},[s("el-input-number",{attrs:{min:1,max:30,label:"描述文字"},on:{change:function(a){e.tempHandleChange(t.point_id,t.now_value)}},model:{value:t.now_value,callback:function(a){e.$set(t,"now_value",a)},expression:"v3.now_value"}}),e._v(" "),s("span",{staticClass:"unit",domProps:{textContent:e._s(t.unit)}})],1)])})],2)])],1)])],2),e._v(" "),s("div",{staticClass:"deviceEchart"},[s("i",{staticClass:"el-icon-circle-close colseBoxs",staticStyle:{position:"absolute",right:"0",top:"0","z-index":"100"},on:{click:e.hide}}),e._v(" "),s("div",{staticClass:"selfTabBox"},[s("ul",{staticClass:"self-tab-head"},[e._l(e.tabData,function(t,a){return s("li",{key:a,class:["part",{active:a==e.tabActive}],domProps:{textContent:e._s(0!=t.unit.length?t.title+"("+t.unit[0]+")":t.title)},on:{click:function(t){e.tabToggle(a)}}})}),e._v(" "),s("li",{staticClass:"extra"})],2),e._v(" "),s("div",{staticClass:"self-tab-body"},e._l(e.tabData,function(t,a){return s("line-echarts4",{directives:[{name:"show",rawName:"v-show",value:a==e.tabActive,expression:"i==tabActive"}],key:a,attrs:{datas:t.datas}})}))])])]),e._v(" "),s("div",{staticClass:"threeDBox",attrs:{id:"threeDBox2"}},[s("div",{staticClass:"btnBox"},[s("div",{staticClass:"cascaderBox"},[s("el-cascader",{attrs:{"expand-trigger":"hover",options:e.options},on:{change:e.handleChange},model:{value:e.selectedOptions2,callback:function(t){e.selectedOptions2=t},expression:"selectedOptions2"}})],1)]),e._v(" "),s("iframe",{ref:"iframe2",attrs:{name:"myFrame2",frameborder:"0",width:"100%",height:"100%",src:e.modelUrl2}})]),e._v(" "),s("Dialog",{ref:"dialog",attrs:{wid:"3.64rem",hei:"2.16rem"}},[s("div",{staticClass:"dialog-in"},[s("p",{staticClass:"p-text"},[e._v("是否确认"+e._s(this.parentToggle?"开启":"关闭")+"？")]),e._v(" "),s("div",{staticClass:"btnWrap"},[s("button",{attrs:{type:"button"},on:{click:e.sureControl}},[e._v("确定")]),e._v(" "),s("button",{attrs:{type:"button"},on:{click:function(){t.$refs.dialog.hide(),t.$message("取消操作！")}}},[e._v("取消")])])])]),e._v(" "),s("Dialog",{ref:"dialog2",attrs:{wid:"13.26rem",hei:"640"}},[s("div",{staticClass:"dialog2-in"},[s("div",{staticClass:"title"},[e._v("控制失败列表")]),e._v(" "),s("div",{staticClass:"padding",staticStyle:{padding:"0 0.2rem"}},[s("Table",{attrs:{table:e.table},on:{rowEnter:e.rowEnter,rowLeave:e.rowLeave,changePage:e.changePage}})],1)])]),e._v(" "),s("Dialog",{ref:"dialog3",attrs:{wid:"13.26rem",hei:"640"}},[s("div",{staticClass:"dialog3-in"},[s("div",{staticClass:"title"},[e._v("批量控制")]),e._v(" "),s("div",{staticClass:"content"},[s("div",{staticClass:"controlBtnBox no-select"},[e.showDevice.one.show?s("div",{staticClass:"switchControl"},[s("span",{staticClass:"text",domProps:{textContent:e._s(e.showDevice.one.tit)}}),e._v(" "),s("button",{class:{active:0==e.switchConVal},attrs:{type:"button"},on:{click:function(t){e.switchControl(e.showDevice.one,0)}}},[e._v("开启")]),e._v(" "),s("button",{class:{active:1==e.switchConVal},attrs:{type:"button"},on:{click:function(t){e.switchControl(e.showDevice.one,1)}}},[e._v("关闭")])]):e._e(),e._v(" "),e.showDevice.two.show?s("div",{staticClass:"modeControl222"},[s("span",{staticClass:"text",domProps:{textContent:e._s(e.showDevice.two.tit)}}),e._v(" "),s("button",{class:{active:0==e.modeConVal},attrs:{type:"button"},on:{click:function(t){e.modeControl(0)}}},[e._v("制冷")]),e._v(" "),s("button",{class:{active:1==e.modeConVal},attrs:{type:"button"},on:{click:function(t){e.modeControl(1)}}},[e._v("制热")])]):e._e(),e._v(" "),e.showDevice.three.show?s("div",{staticClass:"tempControl"},[s("span",{staticClass:"text",domProps:{textContent:e._s(e.showDevice.three.tit)}}),e._v(" "),s("div",{staticClass:"inputBox"},[s("el-input-number",{attrs:{min:1,max:10,label:"描述文字"},on:{change:e.tempHandleChange2},model:{value:e.tempVal2,callback:function(t){e.tempVal2=t},expression:"tempVal2"}}),e._v(" "),s("span",{staticClass:"unit"},[e._v("℃")])],1)]):e._e()]),e._v(" "),s("div",{staticClass:"collapseBox"},[s("el-scrollbar",{staticStyle:{height:"100%"}},[s("el-tree",{ref:"hTree",attrs:{accordion:"",data:e.loopRenderData,"show-checkbox":"","node-key":"id","default-checked-keys":[5],props:e.defaultProps},on:{"check-change":e.getCheckedArr}})],1)],1)])])])],1)},staticRenderFns:[]};var za=function(t){a("dXBL")},qa={components:{AirConditionerEnd:a("VU/8")(Va.a,$a,!1,za,null,null).exports,ColdSourceStation:Ua},name:"telecontrol",data:function(){return{showFirst:!1,showSecond:!1,activeName:"",first:this.$store.state.sysList[1].son_list[0].sys_menu_title,second:this.$store.state.sysList[1].sys_menu_title}},methods:{handleClick:function(t,e){console.log(t.index),this.showFirst&&this.showSecond&&(0==t.index?(this.$refs.second.removeMessageEvent(),this.$refs.first.addMessageEvent()):1==t.index&&(this.$refs.first.removeMessageEvent(),this.$refs.second.addMessageEvent()))},toHome:function(){this.$router.replace({path:"/home",params:{isLogin:!0}})}},created:function(){0!=this.$store.state.sysList[1].role_string[3]?this.showFirst=!0:this.showFirst=!1,0!=this.$store.state.sysList[1].role_string[4]?this.showSecond=!0:this.showSecond=!1,0!=this.$store.state.sysList[1].role_string[3]?this.activeName="first":0==this.$store.state.sysList[1].role_string[3]&&0!=this.$store.state.sysList[1].role_string[4]&&(this.activeName="second")},mounted:function(){}},Ha={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"tabsDomBox0 h-paddingTop"},[a("div",{staticClass:"navCrumbs"},[a("p",{on:{click:t.toHome}},[t._v("首页")]),t._v(" > 空调系统 > "),a("span",[t._v("远程控制")])])]),t._v(" "),a("div",{staticClass:"telecontrol"},[a("el-tabs",{staticClass:"tabBoxs",on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[t.showFirst?a("el-tab-pane",{attrs:{name:"first",lazy:""}},[a("span",{staticClass:"tabItems",attrs:{slot:"label"},slot:"label"},[t._v(t._s(t.first))]),t._v(" "),a("cold-source-station",{ref:"first"})],1):t._e(),t._v(" "),t.showSecond?a("el-tab-pane",{attrs:{name:"second",lazy:""}},[a("span",{staticClass:"tabItems",attrs:{slot:"label"},slot:"label"},[t._v(t._s(t.second))]),t._v(" "),a("air-conditioner-end",{ref:"second"})],1):t._e()],1)],1)])},staticRenderFns:[]};var Wa=a("VU/8")(qa,Ha,!1,function(t){a("Yy2O")},null,null).exports,Ga={name:"chillerRunning",components:{},data:function(){return{loading:!1,tableHei:0,title:[],data:[],tableData3:[],paging:0,pagenumber:1,btnActiveIndex:0,btnActiveId:"",devTitLists:[],dateVal:[],floor_id:void 0}},methods:{get3DFloor:function(){var t=this,e={sys_menu_id:arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.$store.state.sysList[1].son_list[0].sys_menu_id};this.$http.get("/hvac_pc/pc/floor",e,{}).then(function(a){var s=a.data;if(console.log("获取机房3d模型，为了楼层",e,a),0==s.code){var i=s.data[0].floor_id;t.floor_id=i,t.getChillerTitle(t.$store.state.sysList[1].son_list[0].sys_menu_id,i)}else t.$message("未获取到楼层！！！")}).catch(function(e){t.$message(e)})},getChillerTitle:function(){var t=this,e={sys_menu_id:arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.$store.state.sysList[1].son_list[0].sys_menu_id,floor_id:arguments[1]};this.$http.get("hvac_pc/pc/water/title",e,{}).then(function(a){var s=a.data;if(console.log("冷水机组的title数据",e,a),0==s.code){var i=[];if(s.data.map(function(t,e){var a={};a.id=t.id,a.tit=t.title,i.push(a)}),void 0!=i[0]&&i[0].tit.indexOf("机房")>-1){i.length;var n=i[0];i.splice(0,1),i.push(n)}t.devTitLists=i,t.btnActiveId=i[0].id,t.dateVal=[],t.getChillerContent(i[0].id,1,20)}else t.$message(s.message)}).catch(function(e){t.$message(e)})},getChillerContent:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=this,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];this.loading=!0;var n="",o="";null==i||0===i.length?(n="",o=""):(n=i[0]+" 00:00:00",o=i[1]+" 23:59:59"),this.title=[],this.data=[];var r={device_id:t,pagenumber:e,pagesize:s,time_start:n,time_end:o};this.$http.get("hvac_pc/pc/water/device",r,{}).then(function(t){var e=t.data;console.log("冷水机组运行参数",r,t),0==e.code?(a.paging=e.paging,a.title=e.data.title,a.data=e.data.data,a.dealData()):(a.loading=!1,a.$message(e.message))}).catch(function(t){a.loading=!1,a.$message(t)})},changeHeadColor:function(t){t.row,t.column;var e=t.rowIndex,a=t.columnIndex;return 0===e?0!==a&&1!==a?{color:"#ffa414!important"}:{color:"#b5d7ff!important"}:""},changeCellColor:function(t){t.row,t.column,t.rowIndex;var e=t.columnIndex;if(0===e||1===e)return{color:"#b5d7ff!important"}},getIndex:function(){return this.index?this.index++:this.index=1,this.index},tabClick:function(t,e){this.btnActiveIndex=t,this.pagenumber=1,this.btnActiveId=e,this.getChillerContent(e,1,20)},dealData:function(){var t=this,e=[];(function t(e,a){return a==e.length-1?e[a].son_title:e[a].son_title.concat(t(e,a+1))})(this.title,0).map(function(t,a){e.push(t.id)}),console.log(e);var a=[];this.data.map(function(s,i){var n={};s.data.map(function(t,a){n["hu"+e[a]]=t});var o=i+1+20*(t.pagenumber-1);n.num=o<10?"0"+o:o,n.date=s.time,a.push(n)}),this.tableData3=a,this.loading=!1},handleCurrentChange:function(t){this.pagenumber=t,this.getChillerContent(this.btnActiveId,t,20,this.dateVal)},search:function(){this.pagenumber=1,this.getChillerContent(this.btnActiveId,1,20,this.dateVal)}},created:function(){this.get3DFloor(),this.tableHei=R.a.hei(435)}},Ya={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"chillerRunning",attrs:{"element-loading-background":"rgba(0, 0, 0, 0.5)","element-loading-spinner":"el-icon-loading","element-loading-text":"拼命加载中"}},[a("div",{staticClass:"btnBox"},[a("div",{staticClass:"tabHead"},t._l(t.devTitLists,function(e,s){return a("button",{key:s,class:["btn1",{active:s==t.btnActiveIndex}],attrs:{type:"button"},domProps:{textContent:t._s(e.tit)},on:{click:function(a){t.tabClick(s,e.id)}}})})),t._v(" "),a("div",{staticClass:"dateBox"},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"daterange","start-placeholder":"开始日期","end-placeholder":"结束日期","default-time":["00:00:00","23:59:59"]},model:{value:t.dateVal,callback:function(e){t.dateVal=e},expression:"dateVal"}})],1),t._v(" "),a("div",{staticClass:"searchBtn"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(e){t.search()}}},[t._v("查询")])],1),t._v(" "),a("div",{staticClass:"exportBox"},[a("a",{staticClass:"self-button",attrs:{href:"https://tesing.china-tillage.com/hvac_pc/pc/water/device/excel?device_id="+t.btnActiveId+"&project_id="+t.$store.state.projectId+(0!==t.dateVal.length?"&time_start="+t.dateVal[0]+" 00:00:00&time_end="+t.dateVal[1]+" 23:59:59":""),type:"button"}},[a("span",{staticClass:"icon-export"}),t._v(" "),a("span",[t._v("导出")])])])]),t._v(" "),a("div",{staticClass:"h-tableBox"},[a("el-table",{staticStyle:{width:"100%"},attrs:{height:t.tableHei,"cell-style":t.changeCellColor,"header-cell-style":t.changeHeadColor,data:t.tableData3}},[a("el-table-column",{attrs:{prop:"num",label:"序号",width:"80","min-width":"40"}}),t._v(" "),a("el-table-column",{attrs:{prop:"date",width:"150",label:"时间"}}),t._v(" "),t._l(t.title,function(e,s){return a("el-table-column",{key:s,attrs:{"show-overflow-tooltip":!0,label:e.title}},t._l(e.son_title,function(t,s){return a("el-table-column",{key:"a"+s,attrs:{"show-overflow-tooltip":!0,prop:"hu"+e.son_title[s].id,label:t.title+"\n("+t.unit+")"}})}))})],2)],1),t._v(" "),a("div",{staticClass:"pagingBox"},[a("el-pagination",{attrs:{"current-page":t.pagenumber,"pager-count":5,"page-size":20,layout:"prev, pager, next, jumper",total:t.paging},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.pagenumber=e}}}),t._v(" "),a("span",{staticClass:"totalPage"},[t._v("共"+t._s(parseInt(t.paging/20)+(t.paging%20!=0?1:0))+"页")])],1)])},staticRenderFns:[]};var Ka=a("VU/8")(Ga,Ya,!1,function(t){a("fFTH")},null,null).exports,Xa={props:["datas","range"],name:"echartsL",data:function(){return{color:[{color1:"rgba(229,81,80,1)",color3:"rgba(229,81,80,0.5)"},{color1:"rgba(45,240,224,1)",color3:"rgba(45,240,224,0.5)"},{color1:"rgba(229,81,80,1)",color3:"rgba(229,81,80,0.5)"},{color1:"rgba(45,240,224,1)",color3:"rgba(45,240,224,0.5)"},{color1:"rgba(229,81,80,1)",color3:"rgba(229,81,80,0.5)"},{color1:"rgba(45,240,224,1)",color3:"rgba(45,240,224,0.5)"},{color1:"rgba(229,81,80,1)",color3:"rgba(229,81,80,0.5)"},{color1:"rgba(45,240,224,1)",color3:"rgba(45,240,224,0.5)"}]}},methods:{drawLine:function(){for(var t=this.$echarts.init(document.getElementById(this.datas.id)),e=[],a=[],s="month"==this.range?{color:function(t,e){return"#f8fbff"},fontSize:10,formatter:function(t,e){var a=new Date(t);return a.getFullYear()+"-"+(a.getMonth()+1<10?"0"+(a.getMonth()+1):""+(a.getMonth()+1))}}:"hours"==this.range?{color:function(t,e){return"#f8fbff"},fontSize:10,formatter:function(t,e){var a=new Date(t);return a.getFullYear()+"-"+(a.getMonth()+1<10?"0"+(a.getMonth()+1):""+(a.getMonth()+1))+"-"+(a.getDate()<10?"0"+a.getDate():""+a.getDate())+" "+(a.getHours()<10?"0"+a.getHours():""+a.getHours())+":00"}}:{color:function(t,e){return"#f8fbff"},fontSize:10},i=this.datas,n=i.list.length,o=0;o<n;o++){var r={name:i.list[o].name,data:i.list[o].data,type:"line",smooth:!0,symbol:"circle",symbolSize:9,showSymbol:!1,itemStyle:{color:i.colorArr[o].color1,shadowColor:i.colorArr[o].color1,shadowBlur:1},lineStyle:{color:i.colorArr[o].color1,shadowColor:i.colorArr[o].color3,shadowBlur:5,shadowOffsetX:2,shadowOffsetY:6}};1==i.showMarkL&&(r.markLine={silent:!0,symbol:"none",label:{position:"start",formatter:function(t){return t.value}},lineStyle:{width:1,type:"solid",color:"#8ebbff"},data:[{symbol:"none",name:"Y 轴值为 x 的水平线",yAxis:i.markLineVal,x:"1.5%"}]}),1==i.showLegends&&a.push(i.list[o].name),e.push(r)}var l={legend:{data:a,textStyle:{color:"#f8fbff",fontSize:10},top:"3%",right:1==i.legendsC?"auto":"3%"},tooltip:{trigger:"axis",axisPointer:{snap:!0,lineStyle:{opacity:1,color:"#fff"}},backgroundColor:"#fff",formatter:function(t){for(var e="",a=t.length,s=0;s<a;s++){e+='<span style = "padding:0 4px;color:'+t[s].color+'">'+t[s].value[1]+"</span>"}return"<span>"+e+"</span>"},confine:!0,padding:[6,12],textStyle:{fontFamily:"PingFangSC-Regular",fontSize:"0.14rem",color:"#000"},extraCssText:"box-shadow: 0px 1px 10px 0px rgba(0, 0, 0, 0.5);border-radius:4px"},grid:{top:1==i.showLegends?"16%":"2%",left:"0%",right:"0%",bottom:"2%",containLabel:!0},dataZoom:[{type:"inside",start:0,end:100}],xAxis:{offset:0,type:"time",splitLine:{show:!1},axisLine:{show:!1},axisTick:{show:!1},axisLabel:s},yAxis:{show:!0,type:"value",axisLine:{show:!1},axisTick:{show:!1},axisLabel:{show:!1},splitArea:{show:!0,areaStyle:{color:["rgba(142,187,255,0.05)","rgba(142,187,255,0.08)"]}},splitLine:{show:!1}},series:e};t.setOption(l)}},mounted:function(){this.drawLine()},updated:function(){this.drawLine()}},Qa={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"echartBox"},[e("div",{staticClass:"myChart",style:this.datas.style,attrs:{id:this.datas.id}})])},staticRenderFns:[]};var Ja=a("VU/8")(Xa,Qa,!1,function(t){a("9ubA")},"data-v-e6215d20",null).exports,Za={props:["datas"],name:"echartsBar",data:function(){return{color:[{color1:"rgba(229,81,80,1)",color3:"rgba(229,81,80,0.5)"},{color1:"rgba(45,240,224,1)",color3:"rgba(45,240,224,0.5)"}]}},methods:{drawLine:function(){for(var t=this.$echarts.init(document.getElementById(this.datas.id)),e=[],a=[],s=this.datas,i=s.list.length,n=0;n<i;n++){var o={name:s.list[n].name,data:s.list[n].data,type:"bar",smooth:!0,symbol:"circle",symbolSize:9,showSymbol:!1,itemStyle:{normal:{color:new this.$echarts.graphic.LinearGradient(0,0,0,1,[{offset:0,color:s.colorArr[n].color2},{offset:1,color:s.colorArr[n].color1}])}}};1==s.showMarkL&&(o.markLine={silent:!0,symbol:"none",label:{position:"start",formatter:function(t){return t.value}},lineStyle:{width:1,type:"solid",color:"#8ebbff"},data:[{symbol:"none",name:"Y 轴值为 x 的水平线",yAxis:5,x:"1.5%"}]}),1==s.showLegends&&a.push(s.list[n].name),e.push(o)}var r={legend:{data:a,textStyle:{color:"#f8fbff",fontSize:10},itemWidth:12,itemHeight:12,top:"3%",right:1==s.legendsC?"auto":"3%"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"},backgroundColor:"#fff",formatter:function(t){for(var e="",a=t.length,s=0;s<a;s++){e+='<span style = "padding:0 4px;color:'+t[s].color.colorStops[1].color+'">'+t[s].value+"</span>"}return"<span>"+e+"</span>"},confine:!0,padding:[6,12],textStyle:{fontFamily:"PingFangSC-Regular",fontSize:"0.14rem",color:"#000"},extraCssText:"box-shadow: 0px 1px 10px 0px rgba(0, 0, 0, 0.5);border-radius:4px"},grid:{top:1==s.showLegends?"16%":"2%",left:"0%",right:"0%",bottom:"2%",containLabel:!0},dataZoom:[{type:"inside",start:0,end:100}],xAxis:{type:"category",data:s.time,splitLine:{show:!1},axisLine:{show:!1},axisTick:{show:!1},axisLabel:{color:function(t,e){return"#f8fbff"},fontSize:10}},yAxis:{show:!0,type:"value",axisLine:{show:!1},axisTick:{show:!1},axisLabel:{show:!1},splitArea:{show:!0,areaStyle:{color:["rgba(142,187,255,0.05)","rgba(142,187,255,0.08)"]}},splitLine:{show:!1}},series:e};t.setOption(r)}},mounted:function(){this.drawLine()},updated:function(){this.drawLine()}},ts={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"echartBox"},[e("div",{staticClass:"myChart",style:this.datas.style,attrs:{id:this.datas.id}})])},staticRenderFns:[]};var es={name:"energySituation",components:{EchartsBar:a("VU/8")(Za,ts,!1,function(t){a("gSaj")},"data-v-be070064",null).exports,EchartsL:Ja},data:function(){return{loading:!1,btnActiveId:"",btnActiveIndex:0,devTitLists:[],tabData2:[],tabData3:[],selectedOptions2:[],options:[]}},methods:{get3DFloor:function(){var t=this,e={sys_menu_id:arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.$store.state.sysList[1].son_list[0].sys_menu_id};this.$http.get("/hvac_pc/pc/floor",e,{}).then(function(a){var s=a.data;if(console.log("获取机房3d模型，为了楼层,能耗情况",e,a),0==s.code){var i=s.data[0].floor_id,n=[];s.data.map(function(t,e){var a={};a.id=t.floor_id,a.tit=t.title,n.push(a)}),t.devTitLists=n,t.devTitLists.map(function(e,a){t.btnActiveId=e.id,e.tabData={datas:{id:"selfEchart111"+e.id,style:{width:"12.76rem",height:24400/728+"vh"},showMarkL:!0,colorArr:[{color1:"rgba(229,81,80,1)",color3:"rgba(229,81,80,0.5)"},{color1:"rgba(45,240,224,1)",color3:"rgba(45,240,224,0.5)"},{color1:"rgba(229,81,80,1)",color3:"rgba(229,81,80,0.5)"},{color1:"rgba(45,240,224,1)",color3:"rgba(45,240,224,0.5)"},{color1:"rgba(229,81,80,1)",color3:"rgba(229,81,80,0.5)"},{color1:"rgba(45,240,224,1)",color3:"rgba(45,240,224,0.5)"}],markLineVal:0,showLegends:!0,list:[]}}}),setTimeout(function(){t.floor_id=i,t.getTitData(i),t.getCOPData(t.$store.state.sysList[1].son_list[0].sys_menu_id,i)},200)}else t.$message("网络问题！未获取到楼层！请重新进入空调模块！")}).catch(function(e){t.$message(e)})},getCOPData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.$store.state.sysList[1].son_list[0].sys_menu_id,a=arguments[1];this.loading=!0;var s={sys_menu_id:e,floor_id:a};this.$http.get("hvac_pc/pc/energy/floor",s,{}).then(function(e){var i=e.data;if(console.log("能耗情况cop",s,e),0==i.code){t.btnActiveId=a;var n=i.data,o=[];n.map(function(t,e){if(0!==t.data.length){var a={};a.name=t.device_title+t.point_title,a.data=t.data,o.push(a)}}),t.devTitLists.some(function(e,a){if(e.id==t.btnActiveId)return t.btnActiveIndex=a,t.devTitLists[a].tabData={datas:{id:"selfEchart111"+e.id,style:{width:"12.76rem",height:24400/728+"vh"},showMarkL:!0,colorArr:[{color1:"rgba(229,81,80,1)",color3:"rgba(229,81,80,0.5)"},{color1:"rgba(45,240,224,1)",color3:"rgba(45,240,224,0.5)"},{color1:"rgba(229,81,80,1)",color3:"rgba(229,81,80,0.5)"},{color1:"rgba(45,240,224,1)",color3:"rgba(45,240,224,0.5)"},{color1:"rgba(229,81,80,1)",color3:"rgba(229,81,80,0.5)"},{color1:"rgba(45,240,224,1)",color3:"rgba(45,240,224,0.5)"}],markLineVal:n[n.length-1].standard,showLegends:!0,list:o}},!0}),t.loading=!1}else t.loading=!1,t.$message(i.message)}).catch(function(e){t.loading=!1,t.$message(e)})},getTitData:function(t){var e=this,a={floor_id:t};this.$http.get("hvac_pc/pc/energy/title",a,{}).then(function(t){var s=t.data;if(console.log("能耗筛选题目",a,t),0==s.code){var i=s.data,n=[];0===i.length?e.$message(s.message):i.map(function(t,a){0==a&&(e.selectedOptions2=[t.id],e.btnActiveIndex=a,e.getEnergy1(t.id),e.getEnergy2(t.id));var s={};s.value=t.id,s.label=t.title,n.push(s)}),e.options=n}else e.$message(s.message)}).catch(function(t){e.$message(t)})},getEnergy1:function(t){var e=this;this.loading=!0;var a={floor_id:t};this.$http.get("hvac_pc/pc/energy/table_one",a,{}).then(function(t){var s=t.data;if(console.log("能耗报表1",a,t),0==s.code){var i=s.data.reverse(),n=[],o={id:999,title:"能耗",unit:[]};o.unit.push("待定"),o.datas={},o.datas.id="EEE"+i[0].year,o.datas.style={width:"6.3rem",height:24400/728+"vh"},o.datas.colorArr=[{color1:"rgba(255,159,6,1)",color3:"rgba(255,159,6,0.5"},{color1:"rgba(74,144,226,1)",color3:"rgba(74,144,226,0.5)"}],o.datas.showLegends=!0,o.datas.legendsC=!0,o.datas.list=[],i.map(function(t,e){var a={};a.name=""+t.year,a.data=t.data.map(function(t,e){return t.value[0]=t.value[0]+":00",t}),o.datas.list.push(a),n.push(o)}),e.tabData2=n,e.loading=!1}else e.loading=!1,e.$message(s.message)}).catch(function(t){e.loading=!1,e.$message(t)})},getEnergy2:function(t){var e=this;this.loading=!0;var a={floor_id:t,type:2};this.$http.get("hvac_pc/pc/energy/table_two",a,{}).then(function(t){var s=t.data;if(console.log("能耗报表2",a,t),0==s.code){var i=s.data.data.reverse(),n=[],o={id:9999,title:"能耗2",unit:[]};o.unit.push("待定"),o.datas={},o.datas.id="EEEE2",o.datas.style={width:"6.3rem",height:24400/728+"vh"},o.datas.colorArr=[{color1:"rgba(250,96,116,1)",color2:"#fd99ac",color3:"rgba(250,96,116,0.5"},{color1:"rgba(255,159,6,1)",color2:"#ffd12d",color3:"rgba(255,159,6,0.5"},{color1:"rgba(74,144,226,1)",color2:"#6dbefd",color3:"rgba(74,144,226,0.5)"}],o.datas.showLegends=!0,o.datas.legendsC=!0,o.datas.time=s.data.time,o.datas.list=[],i.map(function(t,e){var a={};a.name=""+t.title,a.data=t.data,o.datas.list.push(a),n.push(o)}),e.tabData3=n,e.loading=!1}else e.loading=!1,e.$message(s.message)}).catch(function(t){e.loading=!1,e.$message(t)})},tabClick:function(t,e){this.getCOPData(this.$store.state.sysList[1].son_list[0].sys_menu_id,e),this.getTitData(e)},handleChange:function(t){this.getEnergy1(this.selectedOptions2[0]),this.getEnergy2(this.selectedOptions2[0])}},created:function(){this.get3DFloor()},mounted:function(){console.log(this.devTitLists)}},as={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"energySituation",attrs:{"element-loading-background":"rgba(0, 0, 0, 0.5)","element-loading-spinner":"el-icon-loading","element-loading-text":"拼命加载中"}},[a("div",{staticClass:"btnBox"},[a("div",{staticClass:"tabHead"},t._l(t.devTitLists,function(e,s){return a("button",{key:s,class:["btn1",{active:e.id==t.btnActiveId}],attrs:{type:"button"},domProps:{textContent:t._s(e.tit)},on:{click:function(a){t.tabClick(s,e.id)}}})}))]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"copEchartBox"},[a("div",{staticClass:"title"},[t._v("cop情况")]),t._v(" "),a("div",{staticClass:"content"},t._l(t.devTitLists,function(t,e){return a("echarts-l",{key:"ss"+e,ref:"myEcharts",refInFor:!0,attrs:{range:"hours",datas:t.tabData.datas}})}))])]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"energyEchartBox"},[a("div",{staticClass:"title"},[t._v("机房能耗情况")]),t._v(" "),a("div",{staticClass:"btnBox"},[a("div",{staticClass:"cascaderBox"},[a("el-cascader",{attrs:{"expand-trigger":"hover",options:t.options},on:{change:t.handleChange},model:{value:t.selectedOptions2,callback:function(e){t.selectedOptions2=e},expression:"selectedOptions2"}})],1)]),t._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"left"},t._l(t.tabData2,function(t,e){return a("echarts-l",{key:e,attrs:{range:"month",datas:t.datas}})})),t._v(" "),a("div",{staticClass:"right"},t._l(t.tabData3,function(t,e){return a("echarts-bar",{key:e,attrs:{datas:t.datas}})}))])])])])},staticRenderFns:[]};var ss=a("VU/8")(es,as,!1,function(t){a("8sLZ")},null,null).exports,is={name:"showColorSpan",props:["btnss"],data:function(){return{val:"",color:"#fff"}},methods:{render:function(){var t=this.btnss.val,e="#fff";switch(t){case"故障中":e="#fa6074";break;case"正常":e="#4ae283";break;case"未处理":e="#fa6074";break;case"处理中":e="#ffa414";break;case"已处理":e="#4ae283";break;case"未恢复":e="#3b89f9";break;default:console.log(t)}this.val=t,this.color=e}},created:function(){this.render()},mounted:function(){}},ns={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"box"},[e("span",{style:{color:this.color},domProps:{textContent:this._s(this.val)}}),this._v(" "),"未恢复"==this.val?e("div",{staticClass:"line"}):this._e()])},staticRenderFns:[]};var os=a("VU/8")(is,ns,!1,function(t){a("jrx9")},"data-v-c3e30ef2",null).exports,rs={name:"airConAlarmManage",components:{Table:we.a},data:function(){return{loading:!1,btnActiveIndex:0,devTitLists:[],dateVal:[],value:0,options2:[{value:"",label:"全部状态"},{value:"17001",label:"故障中"},{value:"17002",label:"正常"}],value2:"",options3:[{value:"-1",label:"全部进度"},{value:"0",label:"未处理"},{value:"4",label:"已处理"},{value:"1",label:"处理中"}],value3:"-1",table:{showPagination:!0,hei:450,len:0,pageSize:20,page:1,data:[],th:[{prop:"num",label:"序号",wid:120},{prop:"time",label:"时间",wid:214},{prop:"position",label:"位置",wid:253},{prop:"deviceName",label:"设备",wid:158},{prop:"breakDetail",label:"故障详情",wid:148},{prop:"breakState",label:"故障状态",wid:148,operate:!0,render:function(t,e){var a={val:e.row.breakState};return t(os,{props:{btnss:a},on:{}})}},{prop:"orderProgress",label:"故障进度",wid:148,operate:!0,render:function(t,e){var a={val:e.row.orderProgress};return t(os,{props:{btnss:a},on:{}})}},{prop:"breakTime",label:"故障时长",operate:!0,render:function(t,e){var a={val:e.row.breakTime};return t(os,{props:{btnss:a},on:{}})}}]}}},methods:{getAlarmTitle:function(){var t=this,e={};this.$http.get("hvac_pc/pc/alarm/title",e,{}).then(function(a){var s=a.data;if(console.log("报警管理title",e,a),0==s.code){var i=[];s.data.map(function(t,e){var a={};a.id=t.id,a.tit=t.title,a.val="",a.options=[{value:0,label:"全部"}],t.floor.map(function(t,e){var s={};s.value=t.id,s.label=t.title,a.options.push(s)}),i.push(a)}),t.devTitLists=i,t.getAlarmContent(t.devTitLists[0].id,t.value)}else t.$message(s.message)}).catch(function(e){t.$message(e)})},getAlarmContent:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.devTitLists[0].id,e=arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=this,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:20;this.loading=!0;var r="",l="";null==s||0===s.length?(r="",l=""):(r=s[0],l=s[1]);var c={sys_menu_id:t,floor_id:e,state:a,time_s:r,time_e:l,pagenumber:n,pageSize:o};this.$http.get("hvac_pc/pc/alarm/table",c,{}).then(function(t){var e=t.data;if(console.log("报警管理table",c,t),0==e.code){var a=[];i.table.len=e.paging,e.data.map(function(t,e){var s={},n=e+1+20*(i.table.page-1);s.num=n<10?"0"+n:n,s.time=t.time,s.position=t.floor,s.deviceName=t.devicename,s.breakDetail=t.message,s.breakState=0==t.device_state?"正常":"故障中",s.orderProgress=0==t.now_state?"未处理":4==t.now_state?"已处理":"处理中",s.breakTime=t.recovery_time,a.push(s)}),i.table.data=a,i.loading=!1}else i.loading=!1,i.$message(e.message)}).catch(function(t){i.loading=!1,i.$message(t)})},tabClick:function(t){this.btnActiveIndex=t},changePage:function(t){},search:function(){this.getAlarmContent(this.devTitLists[this.btnActiveIndex].id,this.value,this.value3,this.dateVal)}},created:function(){this.getAlarmTitle()}},ls={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"airConAlarmManage",attrs:{"element-loading-background":"rgba(0, 0, 0, 0.5)","element-loading-spinner":"el-icon-loading","element-loading-text":"拼命加载中"}},[a("div",{staticClass:"btnBox"},[a("div",{staticClass:"tabHead"},t._l(t.devTitLists,function(e,s){return a("button",{key:s,class:["btn1",{active:s==t.btnActiveIndex}],attrs:{type:"button"},domProps:{textContent:t._s(e.tit)},on:{click:function(e){t.tabClick(s)}}})})),t._v(" "),a("div",{staticClass:"oneLevelBox"},t._l(t.devTitLists,function(e,s){return a("el-select",{directives:[{name:"show",rawName:"v-show",value:s==t.btnActiveIndex,expression:"i==btnActiveIndex"}],key:s,attrs:{placeholder:"选择类型"},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t._l(e.options,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))})),t._v(" "),a("div",{staticClass:"dateBox"},[a("el-date-picker",{attrs:{type:"daterange","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"yyyy-MM-dd HH:mm:ss","default-time":["00:00:00","23:59:59"]},model:{value:t.dateVal,callback:function(e){t.dateVal=e},expression:"dateVal"}})],1),t._v(" "),a("div",{staticClass:"oneLevelBox"},[a("el-select",{attrs:{placeholder:"选择类型"},model:{value:t.value3,callback:function(e){t.value3=e},expression:"value3"}},t._l(t.options3,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("div",{staticClass:"searchBtn"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(e){t.search()}}},[t._v("查询")])],1)]),t._v(" "),a("div",{staticClass:"h-tableBox"},[a("Table",{attrs:{table:t.table},on:{changePage:t.changePage}})],1)])},staticRenderFns:[]};var cs={components:{AirConAlarmManage:a("VU/8")(rs,ls,!1,function(t){a("rvVE")},null,null).exports,EnergySituation:ss,chillerRunning:Ka},name:"sysMonitor",data:function(){return{showFirst:!1,showSecond:!1,showThird:!1,activeName:""}},methods:{handleClick:function(t,e){console.log(t.index)},toHome:function(){this.$router.replace({path:"/home",params:{isLogin:!0}})}},created:function(){0!=this.$store.state.sysList[1].role_string[5]?this.showFirst=!0:this.showFirst=!1,0!=this.$store.state.sysList[1].role_string[6]?this.showSecond=!0:this.showSecond=!1,0!=this.$store.state.sysList[1].role_string[7]?this.showThird=!0:this.showThird=!1,0!=this.$store.state.sysList[1].role_string[5]?this.activeName="first":0==this.$store.state.sysList[1].role_string[5]&&0!=this.$store.state.sysList[1].role_string[6]?this.activeName="second":0==this.$store.state.sysList[1].role_string[5]&&0==this.$store.state.sysList[1].role_string[6]&&0!=this.$store.state.sysList[1].role_string[7]&&(this.activeName="third")},mounted:function(){}},ds={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"tabsDomBox0 h-paddingTop"},[a("div",{staticClass:"navCrumbs"},[a("p",{on:{click:t.toHome}},[t._v("首页")]),t._v(" > 空调系统 > "),a("span",[t._v("系统监测")])])]),t._v(" "),a("div",{staticClass:"sysMonitor"},[a("el-tabs",{staticClass:"tabBoxs",on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[t.showFirst?a("el-tab-pane",{attrs:{name:"first",lazy:""}},[a("span",{staticClass:"tabItems",attrs:{slot:"label"},slot:"label"},[t._v("冷水机组运行")]),t._v(" "),a("chiller-running")],1):t._e(),t._v(" "),t.showSecond?a("el-tab-pane",{attrs:{name:"second",lazy:""}},[a("span",{staticClass:"tabItems",attrs:{slot:"label"},slot:"label"},[t._v("能耗情况")]),t._v(" "),a("energy-situation")],1):t._e(),t._v(" "),t.showThird?a("el-tab-pane",{attrs:{name:"third",lazy:""}},[a("span",{staticClass:"tabItems",attrs:{slot:"label"},slot:"label"},[t._v("设备告警")]),t._v(" "),a("air-con-alarm-manage")],1):t._e()],1)],1)])},staticRenderFns:[]};var us=a("VU/8")(cs,ds,!1,function(t){a("LBgT")},null,null).exports,hs={components:{},name:"modeControl",data:function(){return{showAllModeBtn:!0,btnId:-1,btnActive:0,btnLists:[{id:1,tit:"开启"},{id:2,tit:"关闭"}],tableThLists:[{id:1,label:"编号",wid:"0.5rem"},{id:2,label:"模式名称",wid:"1.2rem"},{id:3,label:"开启时间",wid:"1.2rem"},{id:4,label:"关闭时间",wid:"1.2rem"},{id:5,label:"循环",wid:"6.12rem"},{id:6,label:"机房",wid:"1.64rem"},{id:7,label:"操作",wid:"1.2rem"}],tableTdLists:[],weeks:["1","2","3","4","5","6","0"],options:[]}},methods:{requestFloor:function(){var t=this,e={sys_menu_id:arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.$store.state.sysList[1].son_list[0].sys_menu_id};this.$http.get("/hvac_pc/pc/floor",e,{}).then(function(a){var s=a.data;if(console.log("获取机房信息",e,a),0==s.code){var i=[];s.data.map(function(t,e){var a={};a.value=t.floor_id.toString(),a.label=t.title,i.push(a)}),t.options=i}else t.$message(s.message)}).catch(function(e){t.$message(e)})},modeObjValChange:function(t){this.addModes(t.id,t.room.join(","),t.loop.join(","),t.startTime,t.endTime,t.name,t.state)},getNowModes:function(){var t=this,e={};this.$http.get("hvac_pc/pc/control/select",e,{}).then(function(a){var s=a.data;if(console.log("模式控制下的当前模式",e,a),0==s.code){var i=[];s.data.map(function(t,e){var a={};a.id=t.id,a.name=t.title,a.startTime=t.time_start,a.endTime=t.time_end,a.loop=t.loop.split(","),a.room=t.floor.split(","),a.state=t.state,i.push(a),console.log("标记",a.room)}),t.tableTdLists=i}else t.$message(s.message)}).catch(function(e){t.$message(e)})},addModes:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"0",s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"00:00",i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"23:59",n=this,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"新增的模式",r=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,l={id:t,floor:e,loop:a,time_start:s,time_end:i,title:o,state:r};this.$http.get("hvac_pc/pc/control",l,{}).then(function(e){var a=e.data;if(console.log("新增或修改当前模式",l,e),0==a.code)if(0==t){n.tableTdLists.length;var s={id:a.data,name:"新增的模式",startTime:"00:00",endTime:"00:00",loop:[0],room:[],state:0};n.tableTdLists.push(s)}else n.$message(a.message);else n.$message(a.message)}).catch(function(t){n.$message(t)})},delModes:function(t){var e=this,a={id:t};this.$http.get("hvac_pc/pc/control/delete",a,{}).then(function(t){var s=t.data;console.log("删除模式",a,t),s.code,e.$message(s.message)}).catch(function(t){e.$message(t)})},selectAllModes:function(){var t=this,e={};this.$http.get("hvac_pc/pc/control/all/select",e,{}).then(function(a){var s=a.data;console.log("模式控制总开关",e,a),0==s.code?0!==s.data.length?0==s.data[0].state?(t.btnActive=1,t.btnId=s.data[0].id):1==s.data[0].state?(t.btnActive=0,t.btnId=s.data[0].id):alert("总开关按钮未知错误！"):t.showAllModeBtn=!1:t.$message(s.message)}).catch(function(e){t.$message(e)})},requestControlAllModes:function(t,e){var a=this,s={id:t,state:e};this.$http.get("hvac_pc/pc/control/all/add",s,{}).then(function(t){var i=t.data;console.log("模式控制总开关的控制",s,t),0==i.code?1===e?(a.btnActive=0,a.$message("修改成功")):(a.btnActive=1,a.$message("修改成功")):a.$message(i.message)}).catch(function(t){a.$message(t)})},switchControl:function(t){-1!==this.btnId&&(0===t?this.requestControlAllModes(this.btnId,1):1===t&&this.requestControlAllModes(this.btnId,0))},addMode:function(){this.addModes()},toggleSwitch:function(t,e,a){1==t?(this.tableTdLists[e].state=0,this.addModes(a.id,a.room.join(","),a.loop.join(","),a.startTime,a.endTime,a.name,a.state)):0==t&&(this.tableTdLists[e].state=1,this.addModes(a.id,a.room.join(","),a.loop.join(","),a.startTime,a.endTime,a.name,a.state))},del:function(t){for(var e=this.tableTdLists,a=0;a<e.length;a++)e[a].id===t&&this.tableTdLists.splice(a,1);this.delModes(t)}},created:function(){this.requestFloor(),this.getNowModes(),this.selectAllModes()},mounted:function(){},watch:{}},ms={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modeControl"},[a("div",{staticClass:"head"},[a("span",{staticClass:"title"},[t._v("定时自动控制")]),t._v(" "),a("div",{staticClass:"btnBox"},t._l(t.btnLists,function(e,s){return a("button",{directives:[{name:"show",rawName:"v-show",value:t.showAllModeBtn,expression:"showAllModeBtn"}],key:s,class:{active:s==t.btnActive},attrs:{type:"button"},domProps:{textContent:t._s(e.tit)},on:{click:function(e){t.switchControl(s)}}})}))]),t._v(" "),a("div",{staticClass:"body"},[a("div",{staticClass:"h-tableBox"},[a("div",{staticClass:"title"},t._l(t.tableThLists,function(e,s){return a("div",{key:s,staticClass:"th",style:{width:e.wid},domProps:{textContent:t._s(e.label)}})})),t._v(" "),a("div",{staticClass:"content"},[t._l(t.tableTdLists,function(e,s){return a("div",{staticClass:"tr"},[a("div",{staticClass:"td"},[a("div",{staticClass:"num",style:{width:t.tableThLists[0].wid},domProps:{textContent:t._s(s+1<10?"0"+(s+1):s+1)}}),t._v(" "),a("div",{staticClass:"mode",style:{width:t.tableThLists[1].wid}},[a("el-input",{attrs:{placeholder:"请输入内容"},on:{change:function(a){t.modeObjValChange(e)}},model:{value:e.name,callback:function(a){t.$set(e,"name",a)},expression:"v.name"}})],1),t._v(" "),a("div",{staticClass:"startTime",style:{width:t.tableThLists[2].wid}},[a("el-time-picker",{attrs:{format:"HH:mm","value-format":"HH:mm",placeholder:"无"},on:{change:function(a){t.modeObjValChange(e)}},model:{value:e.startTime,callback:function(a){t.$set(e,"startTime",a)},expression:"v.startTime"}})],1),t._v(" "),a("div",{staticClass:"endTime",style:{width:t.tableThLists[3].wid}},[a("el-time-picker",{attrs:{format:"HH:mm","value-format":"HH:mm",placeholder:"无"},on:{change:function(a){t.modeObjValChange(e)}},model:{value:e.endTime,callback:function(a){t.$set(e,"endTime",a)},expression:"v.endTime"}})],1),t._v(" "),a("div",{staticClass:"loop",style:{width:t.tableThLists[4].wid}},[a("el-checkbox-group",{attrs:{size:"medium"},on:{change:function(a){t.modeObjValChange(e)}},model:{value:e.loop,callback:function(a){t.$set(e,"loop",a)},expression:"v.loop"}},t._l(t.weeks,function(e){return a("el-checkbox-button",{key:e,attrs:{label:e}},[t._v(t._s(1==e?"星期一":2==e?"星期二":3==e?"星期三":4==e?"星期四":5==e?"星期五":6==e?"星期六":0==e?"星期日":"未知错误"))])}))],1),t._v(" "),a("div",{staticClass:"room",style:{width:t.tableThLists[5].wid}},[a("el-select",{attrs:{multiple:"","collapse-tags":"",placeholder:"请选择"},on:{change:function(a){t.modeObjValChange(e)}},model:{value:e.room,callback:function(a){t.$set(e,"room",a)},expression:"v.room"}},t._l(t.options,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),a("div",{staticClass:"operate no-select",style:{width:t.tableThLists[6].wid}},[a("span",{staticClass:"switch",domProps:{textContent:t._s(0==e.state?"开启":"关闭")},on:{click:function(a){t.toggleSwitch(e.state,s,e)}}}),t._v(" "),a("span",{staticClass:"del",on:{click:function(a){t.del(e.id)}}},[t._v("删除")])])])])}),t._v(" "),a("div",{staticClass:"addBtns",on:{click:function(e){t.addMode()}}},[a("i",{staticClass:"el-icon-circle-plus"}),t._v(" "),a("span",[t._v("添加模式")])])],2)])])])},staticRenderFns:[]};var ps=a("VU/8")(hs,ms,!1,function(t){a("Q8wZ")},null,null).exports,fs={components:{},name:"controlLog",data:function(){return{tableHei:0,paging:0,pagenumber:1,tableThLists:[{prop:"num",label:"编号",wid:60},{prop:"time",label:"时间",wid:180},{prop:"mode",label:"模式",wid:120},{prop:"waterPump",label:"水泵",wid:180},{prop:"host",label:"主机",wid:120},{prop:"coolTower",label:"冷却塔",wid:120},{prop:"reason",label:"原因"}],tableData:[]}},methods:{getControlLog:function(){var t=this,e={pagenumber:arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,pagesize:arguments.length>1&&void 0!==arguments[1]?arguments[1]:20};this.$http.get("hvac_pc/pc/control/record",e,{}).then(function(a){var s=a.data;if(console.log("获取控制日志",e,a),0==s.code){var i=[];t.paging=s.paging,s.data.map(function(e,a){var s={},n=a+1+20*(t.pagenumber-1);s.num=n<10?"0"+n:n,s.time=e.time,s.mode=e.model,s.waterPump=e.water,s.host=e.host,s.coolTower=e.cool,s.reason=e.reason,i.push(s)}),t.tableData=i}else t.$message(s.message)}).catch(function(e){t.$message(e)})},handleCurrentChange:function(t){this.getControlLog(t)}},created:function(){this.tableHei=R.a.hei(455),this.getControlLog()},mounted:function(){}},vs={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"controlLog"},[t._m(0),t._v(" "),a("div",{staticClass:"body"},[a("el-table",{staticStyle:{width:"100%"},attrs:{height:t.tableHei,data:t.tableData,stripe:"",border:""}},t._l(t.tableThLists,function(t,e){return a("el-table-column",{key:e,attrs:{resizable:!1,prop:t.prop,label:t.label,width:void 0!=t.wid?t.wid:""}})})),t._v(" "),a("div",{staticClass:"pagingBox"},[a("el-pagination",{attrs:{"current-page":t.pagenumber,"pager-count":5,"page-size":20,layout:"prev, pager, next, jumper",total:t.paging},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.pagenumber=e}}}),t._v(" "),a("span",{staticClass:"totalPage"},[t._v("共"+t._s(parseInt(t.paging/20)+(t.paging%20!=0?1:0))+"页")])],1)],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"head"},[e("span",{staticClass:"title"},[this._v("控制日志")])])}]};var _s={components:{ControlLog:a("VU/8")(fs,vs,!1,function(t){a("LhaG")},null,null).exports,ModeControl:ps},name:"timeMode",data:function(){return{showFirst:!1,showSecond:!1,activeName:""}},methods:{handleClick:function(t,e){console.log(t.index)},toHome:function(){this.$router.replace({path:"/home",params:{isLogin:!0}})}},created:function(){0!=this.$store.state.sysList[1].role_string[8]?this.showFirst=!0:this.showFirst=!1,0!=this.$store.state.sysList[1].role_string[9]?this.showSecond=!0:this.showSecond=!1,0!=this.$store.state.sysList[1].role_string[8]?this.activeName="first":0==this.$store.state.sysList[1].role_string[8]&&0!=this.$store.state.sysList[1].role_string[9]&&(this.activeName="second")},mounted:function(){}},gs={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"tabsDomBox0 h-paddingTop"},[a("div",{staticClass:"navCrumbs"},[a("p",{on:{click:t.toHome}},[t._v("首页")]),t._v(" > 空调系统 > "),a("span",[t._v("定时模式")])])]),t._v(" "),a("div",{staticClass:"timeMode"},[a("el-tabs",{staticClass:"tabBoxs",on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[t.showFirst?a("el-tab-pane",{attrs:{name:"first",lazy:""}},[a("span",{staticClass:"tabItems",attrs:{slot:"label"},slot:"label"},[t._v("模式控制")]),t._v(" "),a("mode-control",{attrs:{lazy:""}})],1):t._e(),t._v(" "),t.showSecond?a("el-tab-pane",{attrs:{name:"second",lazy:""}},[a("span",{staticClass:"tabItems",attrs:{slot:"label"},slot:"label"},[t._v("自动控制日志")]),t._v(" "),a("control-log",{attrs:{lazy:""}})],1):t._e()],1)],1)])},staticRenderFns:[]};var bs=a("VU/8")(_s,gs,!1,function(t){a("rb0O")},null,null).exports;s.default.use(r.a);var ys=new r.a({routes:[{path:"/",name:"login",component:ca},{path:"/home",name:"Home",component:We},{path:"/permission",component:Te,children:[{path:"/permission/user",component:je},{path:"/permission/role",component:Ne},{path:"/permission/loginLog",component:$e}],redirect:function(t){var e=JSON.parse(sessionStorage.getItem("routerInfo"));return console.log(e),"0"==e.userInfoTotal.permissions_manage.role_string[0]?"/permission/role":"0"==e.userInfoTotal.permissions_manage.role_string[0]&&"0"==e.userInfoTotal.permissions_manage.role_string[1]?"/permission/loginLog":"/permission/user"}},{path:"/energy",component:u,children:[{path:"/energy/allViews",component:f},{path:"/energy/analysis",component:b},{path:"/energy/metersRead",component:T},{path:"/energy/preset",component:F},{path:"/energy/report",component:et}],redirect:function(t){var e=JSON.parse(sessionStorage.getItem("routerInfo"));return 0!=e.sysList[2].role_string[0]?"/energy/allViews":0==e.sysList[2].role_string[0]&&0!=e.sysList[2].role_string[1]?"/energy/analysis":0!=e.sysList[2].role_string[0]||0!=e.sysList[2].role_string[1]||0==e.sysList[2].role_string[2]&&0==e.sysList[2].role_string[5]&&0==e.sysList[2].role_string[6]&&0==e.sysList[2].role_string[10]?0==e.sysList[2].role_string[0]&&0==e.sysList[2].role_string[1]&&0==e.sysList[2].role_string[2]&&0==e.sysList[2].role_string[5]&&0==e.sysList[2].role_string[6]&&0==e.sysList[2].role_string[10]&&0!=e.sysList[2].role_string[4]?"/energy/preset":"/energy/report":"/energy/metersRead"}},{path:"/AgentManage",component:ft,children:[{path:"/AgentManage",name:"generationMBase",component:It},{path:"/AgentManage/schedule",component:Pt,children:[{path:"/AgentManage/schedule/first"},{path:"/AgentManage/schedule/second"},{path:"/AgentManage/schedule/thrid"}]},{path:"/AgentManage/workList",component:Ft},{path:"/AgentManage/routing",component:Vt,children:[{path:"/AgentManage/routing/first"},{path:"/AgentManage/routing/second"}]},{path:"/AgentManage/report",component:Ht}]},{path:"/AgentManage/normalUser",component:Yt},{path:"/AgentManage/normalUser/schedule",component:Jt,children:[{path:"/AgentManage/normalUser/schedule/first"},{path:"/AgentManage/normalUser/schedule/second"},{path:"/AgentManage/normalUser/schedule/thrid"}]},{path:"/AgentManage/normalUser/workList",component:ae},{path:"/AgentManage/normalUser/routing",component:oe},{path:"/AgentManage/normalUser/report",component:ue},{path:"/alarm",component:pe},{path:"/fireAlarm",component:_e,children:[{path:"/fireAlarm/fireMonitor",component:ye},{path:"/fireAlarm/fireHistory",component:Se}],redirect:function(t){return 0!=JSON.parse(sessionStorage.getItem("routerInfo")).sysList[16].role_string[0]?"/fireAlarm/fireMonitor":"/fireAlarm/fireHistory"}},{path:"/DoorControl",component:aa,children:[{path:"/DoorControl/components/tabs",component:Ke},{path:"/DoorControl/components/tabsSys",component:Ze}],redirect:function(t){return 0!=JSON.parse(sessionStorage.getItem("routerInfo")).sysList[14].role_string[0]?"/DoorControl/components/tabsSys":"/DoorControl/components/tabs"}},{path:"/VideoSurveillance",component:oa},{path:"/HotelStatus",component:ha,children:[{path:"/HotelStatus/components/HotelRoomStatus",component:fa},{path:"/HotelStatus/components/roomLists",component:Ia},{path:"/HotelStatus/components/roomCharts",component:Pa}],redirect:function(t){var e=JSON.parse(sessionStorage.getItem("routerInfo"));return 0!=e.sysList[17].role_string[0]?"/HotelStatus/components/HotelRoomStatus":0!=e.sysList[17].role_string[0]||0==e.sysList[17].role_string[1]&&0==e.sysList[17].role_string[2]&&0==e.sysList[17].role_string[3]&&0==e.sysList[17].role_string[4]?"/HotelStatus/components/roomCharts":"/HotelStatus/components/roomLists"}},{path:"/airConditioner",component:Na,children:[{path:"/airConditioner/components/telecontrol",component:Wa},{path:"/airConditioner/components/sysMonitor",component:us},{path:"/airConditioner/components/timerMode",component:bs}],redirect:function(t){var e=JSON.parse(sessionStorage.getItem("routerInfo"));return 0!=e.sysList[1].role_string[0]||0!=e.sysList[1].role_string[3]||0!=e.sysList[1].role_string[4]?"/airConditioner/components/telecontrol":0!=e.sysList[1].role_string[0]||0!=e.sysList[1].role_string[3]||0!=e.sysList[1].role_string[4]||0==e.sysList[1].role_string[5]&&0==e.sysList[1].role_string[6]&&0==e.sysList[1].role_string[7]?"/airConditioner/components/timerMode":"/airConditioner/components/sysMonitor"}},{path:"/operationLog",component:it,children:[{path:"/operationLog/components/autoOperation",component:lt},{path:"/operationLog/components/manualOperation",component:ht}],redirect:function(t){return"/operationLog/components/manualoperation"}}]}),ws=a("zL8q"),Cs=a.n(ws),xs=(a("tvR6"),a("//Fk")),ks=a.n(xs),Ds=a("mw3O"),Ss=a.n(Ds),As="https://tesing.china-tillage.com";function Es(t){return!t||200!==t.status&&304!==t.status&&t.status,t}function Is(t){return-404===t.status&&alert(t.msg),t.data&&t.data.success,t}Ee.a.interceptors.response.use(function(t){return t},function(t){return ks.a.resolve(t.response)});var Ls={post:function(t,e){return Ee()({method:"post",baseURL:As,url:t,data:Ss.a.stringify(e),timeout:3e4,headers:{"x-requested-with":"XMLHttpRequest","Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}}).then(function(t){return Es(t)}).then(function(t){return Is(t)})},get:function(t,e){return Ee()({method:"get",baseURL:As,url:t,params:e,timeout:3e4,headers:{"x-requested-with":"XMLHttpRequest","Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}}).then(function(t){return Es(t)}).then(function(t){return Is(t)})}},Ts=(a("7t+N"),a("VU/8")({name:"base",mounted:function(){}},null,!1,null,null,null).exports),Bs=a("jjfY"),Ps=a.n(Bs),Rs=(a("9qgI"),a("iqGf")),Ms=a.n(Rs),Ns={props:["data","isIfD","msgD"],data:function(){return{isIfff:!1,msggg:""}},methods:{},created:function(){void 0!=this.isIfD&&1==this.isIfD&&(this.isIfff=!0)},mounted:function(){this.msggg=this.msgD},watch:{msgD:function(t,e){this.msggg=this.msgD}}},Fs={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",{staticClass:"crumbsBox"},[a("li",{staticClass:"baiLi"},[a("router-link",{staticClass:"baiLia",attrs:{to:"/home"}},[t._v("\n      首页\n    ")])],1),t._v(" "),t._l(t.data,function(e,s){return a("li",{staticClass:"baiLi",class:{isNow:s==t.data.length-1},domProps:{textContent:t._s(">"+e+" ")}})}),t._v(" "),t.isIfff?a("div",{staticClass:"modeBox"},[a("div",{staticClass:"mode"},[a("p",{staticClass:"text",domProps:{textContent:t._s(t.msggg)}})])]):t._e()],2)},staticRenderFns:[]};var Os=a("VU/8")(Ns,Fs,!1,function(t){a("MwRh")},"data-v-528f2072",null).exports,js={install:function(t){t.component("Crumbs",Os)}},Us={props:{hei:{type:Number,default:50},top:{type:Number,default:0},type:{type:String,default:"z"},wid:{type:Number,default:50},left:{type:Number,default:0}},data:function(){return{}},methods:{},created:function(){},mounted:function(){}},Vs={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"lineBoxs0",class:{lineBoxs0h:"h"==t.type,lineBoxs0z:"z"==t.type}},["z"==t.type?a("div",{staticClass:"lineBoxs",style:{height:t.hei/100+"rem","margin-top":t.top/100+"rem"}},[a("div",{staticClass:"lineBoxs1"}),t._v(" "),a("div",{staticClass:"lineBoxs2"})]):t._e(),t._v(" "),"h"==t.type?a("div",{staticClass:"lineBoxs222",style:{width:t.wid/100+"rem","margin-left":t.left/100+"rem"}},[a("div",{staticClass:"lineBoxs1 lineBoxsss"}),t._v(" "),a("div",{staticClass:"lineBoxs2 lineBoxsss"})]):t._e()])},staticRenderFns:[]};var $s=a("VU/8")(Us,Vs,!1,function(t){a("ofbo")},"data-v-71837011",null).exports,zs={install:function(t){t.component("Lines",$s)}},qs={props:["wid","hei","tit","color","align"],data:function(){return{isShow:!1,tits:"",heis:"",wids:""}},methods:{show:function(){this.isShow=!0},hide:function(){this.isShow=!1}},watch:{wid:{handler:function(t){console.log(t),this.wid.split("rem").length<=1?this.wids=R.a.wid(this.wid)+"px":this.wids=this.wid},deep:!0},hei:{handler:function(t){console.log(t),this.hei.split("rem").length<=1?this.heis=R.a.hei(this.hei)+"px":this.heis=this.hei},deep:!0}},created:function(){void 0!==this.tit&&(this.tits=this.tit),this.hei.split("rem").length<=1?this.heis=R.a.hei(this.hei)+"px":this.heis=this.hei,this.wid.split("rem").length<=1?this.wids=R.a.wid(this.wid)+"px":this.wids=this.wid},mounted:function(){}},Hs={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition",{attrs:{name:"fade"}},[t.isShow?a("div",{staticClass:"modalBox"},[a("div",{staticClass:"modalBg"}),t._v(" "),a("transition",{attrs:{name:"moveTop"}},[t.isShow?a("div",{staticClass:"modalBoxIn",style:{width:t.wids,height:t.heis}},[a("i",{staticClass:"colseBoxs",on:{click:t.hide}}),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:""!=t.tits,expression:"tits!=''"}],staticClass:"titBox",domProps:{textContent:t._s(t.tits)}}),t._v(" "),t._t("default")],2):t._e()])],1):t._e()])},staticRenderFns:[]};var Ws=a("VU/8")(qs,Hs,!1,function(t){a("BPT/")},"data-v-1e77b9ee",null).exports,Gs={install:function(t){t.component("Dialog",Ws)}},Ys=a("NYxO");s.default.use(Ys.a);var Ks=new Ys.a.Store({state:{bubbleShow:!1,userInfoTotal:"",projectId:"",userId:"",permission:{options:[]},sysList:{}}});a("991W"),a("erWL"),a("7xIN"),a("TrCY");s.default.use(Cs.a),s.default.prototype.$http=Ls,s.default.prototype.$echarts=yt.a,s.default.config.productionTip=!1,s.default.prototype.BASE=Ts,s.default.use(Ps.a),a("g3Gj"),a("5LIk"),s.default.use(Ms.a),s.default.use(js),s.default.use(zs),s.default.use(Gs),new s.default({el:"#app",router:ys,store:Ks,components:{App:o},template:"<App/>"})},NJWw:function(t,e,a){"use strict";(function(t){e.a={data:function(){return{loading:!0,label:{type:"电（KW/h）",text:"总用电量"},columnw:0,energyType:"气",todaySpan:"",releasetime1:"",tableData1:[{dateLab:"区域合计",data:2,index:13,elecMount:"",totalcaost:""}],tableData2:[{dateLab:"部门合计",data:2,index:14}],tableData4:[{dateLab:"月均",data:2,index:15,elecMount:"",totalcaost:""}],tableData3:[{index:1,month:"01",elecMount:"",totalcaost:""},{index:2,month:"02",totalcaost:"",elecMount:""},{index:3,month:"03",elecMount:"",totalcaost:""},{index:4,month:"04",elecMount:"",totalcaost:""},{index:5,month:"05",elecMount:"",totalcaost:""},{index:6,month:"06",elecMount:"",totalcaost:""},{index:7,month:"07",elecMount:"",totalcaost:""},{index:8,month:"08",elecMount:"",totalcaost:""},{index:9,month:"09",elecMount:"",totalcaost:""},{index:10,month:"10",elecMount:"",totalcaost:""},{index:11,month:"11",elecMount:"",totalcaost:""},{index:12,month:"12",elecMount:"",totalcaost:""}],areaList:[],formData:{project_id:1,choice_page:0,sys_menu_id:"",query_date:"",energy_type:"0"}}},mounted:function(){var t=new Date;this.formData.query_date=String(t.getFullYear()),this.formData.project_id=this.$store.state.projectId,this.formData.sys_menu_id=this.$store.state.sysList[2].sys_menu_id,this.setWidth(),this.getData(),this.getDateSet()},methods:{export1:function(){var t="";this.formData.query_date?t=this.formData.query_date:t=(new Date).getFullYear();var e={project_id:this.formData.project_id,choice_page:0,query_date:t,export:!0,sys_menu_id:this.formData.sys_menu_id,energy_type:this.formData.energy_type};this.$http.post("/hotel_energy/statement",e).then(function(t){window.location.href="http://"+t.data})},query:function(){this.loading=!0,0==this.formData.energy_type&&(this.label.type="电（KW/h）",this.label.text="总用电量"),1==this.formData.energy_type&&(this.label.type="水（m³）",this.label.text="总用水量"),2==this.formData.energy_type&&(this.label.type="气（m³）",this.label.text="总用气量"),this.getData()},setWidth:function(){},getData:function(){var e=this;this.$http.post("/hotel_energy/statement",this.formData).then(function(a){if(0==a.data.code){t(".firstTab").height("50vh"),t(".el-table__footer tbody tr").remove();var s=a.data.data.result_data;e.tableData3.map(function(t,e){0==s[1].data[e].value[0]?t.elecMount="":t.elecMount=s[1].data[e].value[0],0==s[1].data[e].value[1]?t.totalcaost="":t.totalcaost=s[1].data[e].value[1]}),e.areaList=s[5].area_monthly_data,e.areaList.map(function(t,a){for(var s=function(a){e.tableData3.map(function(s,i){e.$set(s,t.child_data[a].id+"useage",t.child_data[a].detail_use_num[i])}),e.tableData3.map(function(s,i){e.$set(s,t.child_data[a].id+"cost",t.child_data[a].detail_cost[i])})},i=0;i<t.child_data.length;i++)s(i)}),console.log(e.tableData3),setTimeout(function(){t(".el-table__footer td").remove(),t(".el-table__body").width()>t(".con").width()?t(".con").width(t(".el-table__body").width()):(t(".el-table__header").width(t(".con").width()),t(".el-table__body").width(t(".con").width()),t(".el-table__body").css("padding-right","7px")),t(".el-table__footer").width(t(".con").width()),console.log(t(".el-table__footer tbody tr")),t(".el-table__footer tbody").append("<tr><td style='border-top:none!important;'>13</td><td style='color:#439AFF!important;border-top:none!important;font-size:0.12rem!important;'>区域合计</td><td style='color:#439AFF!important;border-top:none!important;font-size:0.12rem!important;'>"+s[1].data[12].value[0]+"</td><td style='color:#FFA414!important;border-top:none!important;font-size:0.12rem!important;'>"+s[1].data[12].value[1]+"</td></tr>"),t(".el-table__footer tbody").append("<tr><td style='border-top:none!important;font-size:0.12rem!important;'>14</td><td style='color:#439AFF!important;border-top:none!important;font-size:0.12rem!important;'>部门合计</td><td style='border-top:none!important;' colspan='2'></td></tr>"),t(".el-table__footer tbody").append("<tr><td style='border-top:none!important;font-size:0.12rem!important;'>15</td><td style='color:#439AFF!important;border-top:none!important;font-size:0.12rem!important;'>月均</td><td style='color:#439AFF!important;border-top:none!important;font-size:0.12rem!important;'>"+s[1].data[13].value[0]+"</td><td style='color:#FFA414!important;border-top:none!important;font-size:0.12rem!important;'>"+s[1].data[13].value[1]+"</td></tr>");for(var a=0;a<s[2].data.length;a++)t(t(".el-table__footer tbody tr")[0]).append("<td style='color:#439AFF!important;border-top:none!important;font-size:0.12rem!important;'>"+s[2].data[a].value[0]+"</td><td style='color:#FFA414!important;border-top:none!important;font-size:0.12rem!important;'>"+s[2].data[a].value[1]+"</td>");var i=[];e.areaList.map(function(t,e){i.push(t.child_data.length)}),console.log(t(".el-table__footer tbody tr"));for(var n=0;n<i.length;n++)1==i[n]?(t(t(".el-table__footer tbody tr")[1]).append('<td colspan="'+i[n]+'" style="color:#439AFF!important;font-size:0.14rem!important;border-top:none!important;">'+s[4].data[n].parent_area_total[0]+"</td>"),t(t(".el-table__footer tbody tr")[1]).append('<td colspan="'+i[n]+'"style="color:#FFA414!important;font-size:0.14rem!important;border-top:none!important;">'+s[4].data[n].parent_area_total[1]+"</td>")):(t(t(".el-table__footer tbody tr")[1]).append('<td colspan="'+i[n]+'" style="color:white;font-size:0.14rem!important;border-top:none!important;">用量：'+s[4].data[n].parent_area_total[0]+"</td>"),t(t(".el-table__footer tbody tr")[1]).append('<td colspan="'+i[n]+'"style="color:#FFA414!important;font-size:0.14rem!important;border-top:none!important;">费用：'+s[4].data[n].parent_area_total[1]+"</td>"));for(var o=0;o<s[3].data.length;o++)t(t(".el-table__footer tbody tr")[2]).append("<td style='color:#439AFF!important;border-top:none!important;font-size:0.12rem!important;'>"+s[3].data[o].value[0]+"</td><td style='color:#FFA414!important;border-top:none!important;font-size:0.12rem!important;'>"+s[3].data[o].value[1]+"</td>");t(".firstTab").height(t(".con").height()),e.loading=!1},500)}})},getDateSet:function(){var t=new Date,e=t.getFullYear(),a=t.getMonth()+1,s=t.getDate();a=a<10?"0"+a:a,s=s<10?"0"+s:s,this.todaySpan=e+"-"+a+"-"+s},cell:function(t){t.row,t.column,t.rowIndex;var e=t.columnIndex;return 1==e?"cellMonth":2==e||4==e||6==e||8==e||10==e||12==e||14==e||16==e||18==e||20==e||22==e?"darkBl":3==e||5==e||7==e||9==e||11==e||13==e||15==e||17==e||19==e||21==e||23==e?"darkOr":void 0},objectSpanMethod:function(t){t.row,t.column,t.rowIndex,t.columnIndex}}}}).call(e,a("7t+N"))},NKm9:function(t,e,a){"use strict";(function(t){e.a={data:function(){return{loading:!0,dateTypeChoose:"",todaySpan:"",releasetime1:"",tableData3:[{title:"间天耗水（T）",city:4},{title:"间天耗电（度）",city:4},{title:"间天耗气（方）",city:4},{title:"百元耗水（T）",city:4},{title:"百元耗电（度）",city:4},{title:"百元耗气（方）",city:4},{title:"间天耗费用（元）",city:4},{title:"能耗总额（元）",city:4},{title:"百元费用率（%）",city:4}],tabData:[],formData:{project_id:1,choice_page:2,sys_menu_id:"",date_type:""}}},mounted:function(){this.formData.project_id=this.$store.state.projectId,this.formData.sys_menu_id=this.$store.state.sysList[2].sys_menu_id,this.getData(),this.getDateSet(),this.$nextTick(function(){t(".leaderTab").width(t(".el-table__header").width()),t(".leaderTab").height("90%")})},methods:{export1:function(){var t={project_id:this.formData.project_id,choice_page:2,export:!0,sys_menu_id:this.formData.sys_menu_id,date_type:this.formData.date_type};this.$http.post("/hotel_energy/statement",t).then(function(t){window.location.href="http://"+t.data})},queryCli:function(){this.loading=!0,t(".el-table__footer td").remove(),console.log(this.formData.date_type),"month"==this.formData.date_type?this.tableData3[7].title="能耗总额（万元）":this.tableData3[7].title="能耗总额（元）",this.getData()},getData:function(){var e=this;this.$http.post("/hotel_energy/statement",this.formData).then(function(a){if(0==a.data.code){var s=a.data.data.result_data.splice(0,a.data.data.result_data.length-1);e.tabData=s,e.tableData3.map(function(t,e){for(var a=0;a<s.length;a++)for(var i=0;i<s[a].data.length;i++){var n=s[a].title+s[a].data[i].title;0==e?t[n]=s[a].data[i].detail_data.jt_water:1==e?t[n]=s[a].data[i].detail_data.jt_electric:2==e?t[n]=s[a].data[i].detail_data.jt_gas:3==e?t[n]=s[a].data[i].detail_data.by_water:4==e?t[n]=s[a].data[i].detail_data.by_electric:5==e?t[n]=s[a].data[i].detail_data.by_gas:6==e?t[n]=s[a].data[i].detail_data.jt_cost:7==e?t[n]=s[a].data[i].detail_data.total_cost:8==e&&("-"!=s[a].data[i].detail_data.by_rate?t[n]=s[a].data[i].detail_data.by_rate+"%":t[n]=s[a].data[i].detail_data.by_rate)}}),setTimeout(function(){t(".el-table__footer td").remove(),t(".el-table__footer tr").append("<td>10</td><td>营业收入总额(万元)</td>");for(var a=0;a<s.length;a++)t(".el-table__footer tr").append("<td style='font-size:0.14rem!important;' colspan='3'>"+s[a].data[2].detail_data.total_income+"</td>");e.loading=!1},500)}})},currentSel:function(t){console.log(t)},cell:function(t){t.row,t.column,t.rowIndex;var e=t.columnIndex;if(this.tabData&&this.tabData.length>0)for(var a=1,s=0;s<this.tabData.length;s++)for(var i=0;i<this.tabData[s].data.length;i++)if(e==++a)return"darkOr"},getDateSet:function(){var t=new Date,e=t.getFullYear(),a=t.getMonth()+1,s=t.getDate();a=a<10?"0"+a:a,s=s<10?"0"+s:s,this.todaySpan=e+"."+a+"."+s},getSummaries:function(t){var e=t.columns,a=t.data,s=[];return e.forEach(function(t,e){if(0!==e)if(1!==e){2!=e&&3!=e&&4!=e||(t.colSpan=3);var i=a.map(function(e){return Number(e[t.property])});i.every(function(t){return isNaN(t)})?s[e]="N/A":(s[e]=i.reduce(function(t,e){var a=Number(e);return isNaN(a)?t:t+e},0),s[e]+=" ")}else s[e]="营业收入总额 (万元)";else s[e]="10"}),s}}}}).call(e,a("7t+N"))},NQt3:function(t,e,a){"use strict";(function(t){e.a={props:{isResize:{type:Number}},data:function(){return{loading:!0,equipmentChartOne:{},equipmentChartTwo:{},data:{}}},components:{},mounted:function(){this.initData()},watch:{isResize:function(){}},methods:{deletCli:function(){this.$emit("deletClick",{self_id:-1,componentsName:"Equipment"})},initData:function(){var t=this;this.$http.get("/index_pc/pc/model",{self_id:-1}).then(function(e){0==e.data.code&&(t.data=e.data.data,t.loading=!1,t.initWidth(),t.drawEchartTwo(),t.drawEchartThree())}).catch(function(t){console.log(t)})},initWidth:function(){var e=t(".chartInfo").width()*this.data.fault/this.data.count;t(".persent").width(e)},drawEchartThree:function(){var e=1.3*this.$refs.equipmentThree.clientHeight,a={width:e,height:e,outCircleObj:{lineWidth:4,bgColor1:"#FF0000",bgColor2:"#FAD961",bgColor3:"#59FF16"},inCircleObj:{lineWidth:16,bgColor1:"#FAD961",bgColor2:"#F7A51C",bgColor3:"#FAD961",text:[0,1,2,3,4],textColor:"#fff",opacity:"0.3"},space:4,title:{text:"维保评分",color:"#ffffff",opacity:1,size:"0.14rem"},dataValue:{text:this.data.maintenance+"%",color:"#F7A51C",size:"20"}};t("#equipmentThree").circleChart(a)},drawEchartTwo:function(){var e=1.3*this.$refs.equipmentTwo.clientHeight,a={width:e,height:e,outCircleObj:{lineWidth:4,bgColor1:"#FF0000",bgColor2:"#FAD961",bgColor3:"#59FF16"},inCircleObj:{lineWidth:16,bgColor1:"#FAD961",bgColor2:"#F7A51C",bgColor3:"#FAD961",text:[0,1,2,3,4],textColor:"#ffffff",opacity:"0.3"},space:4,title:{text:"健康度",color:"#ffffff",opacity:1,size:"0.14rem"},dataValue:{text:this.data.health+"%",color:"#4AE283",size:"20"}};t("#equipmentTwo").circleChart(a)},drawEchartOne:function(){var t=this.$echarts.init(document.getElementById("equipmentOne"));this.equipmentChartOne=t;t.setOption({legend:{itemWidth:15,itemHeight:15,data:["故障总数","设备总数"],textStyle:{color:"#f2f0f1"},right:0},yAxis:{show:!1,data:["设备"],splitLine:{show:!1}},xAxis:{type:"value",show:!1,data:[150],name:150,nameLocation:"center",nameTextStyle:{color:"#f2f0f1"},nameGap:-5,splitNumber:10,splitLine:{show:!1}},series:[{name:"设备总数",type:"bar",barGap:"-100%",barWidth:30,data:[150],itemStyle:{color:"#3b89f8",barBorderRadius:[4,4,4,4]},z:1},{name:"故障总数",type:"bar",barGap:"-100%",barWidth:30,data:[40],itemStyle:{color:"#f96074",barBorderRadius:[4,0,0,4]},z:2}]})}}}}).call(e,a("7t+N"))},NRg3:function(t,e,a){"use strict";var s=a("a/4d"),i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"sendWork"},[t._m(0),t._v(" "),a("div",{staticClass:"selectX selectX1"},[a("span",[t._v("类       型")]),t._v(" "),a("SelectBox",{staticClass:"selectdown",attrs:{options:t.query.types,value:t.formvals.sys_id,placeholder:"类型",icon:"el-icon-d-caret"},on:{change:t.change1}})],1),t._v(" "),a("div",{staticClass:"selectX"},[a("span",[t._v("设备名称")]),t._v(" "),a("SelectBox",{staticClass:"selectdown",attrs:{options:t.query.devices,value:t.formvals.device_name,placeholder:"设备名称",icon:"el-icon-d-caret"},on:{change:t.change2}})],1),t._v(" "),a("div",{staticClass:"selectX"},[a("span",[t._v("处理人员")]),t._v(" "),a("SelectBox",{staticClass:"selectdown",attrs:{options:t.query.names,value:t.formvals.user_id,placeholder:"处理人员",icon:"el-icon-caret-top"},on:{change:t.change3}})],1),t._v(" "),a("div",{staticClass:"selectX"},[a("span",[t._v("工单来源")]),t._v(" "),a("SelectBox",{staticClass:"selectdown",attrs:{options:t.query.type_id,value:t.formvals.type_id,placeholder:"工单来源",icon:"el-icon-caret-top"},on:{change:t.change4}})],1),t._v(" "),a("div",{staticClass:"selectX"},[a("span",[t._v("任务优先")]),t._v(" "),a("SelectBox",{staticClass:"selectdown",attrs:{options:t.query.priority,value:t.formvals.priority,placeholder:"任务优先级",icon:"el-icon-caret-top"},on:{change:t.change5}})],1),t._v(" "),a("div",{staticClass:"selectX"},[a("div",{staticClass:"inputbox inputbox2"},[a("span",{domProps:{textContent:t._s("设备地址")}}),t._v(" "),a("el-input",{staticClass:"deviceaddr",attrs:{type:"text",placeholder:"请输入地址",clearable:""},model:{value:t.formvals.floor,callback:function(e){t.$set(t.formvals,"floor",e)},expression:"formvals.floor"}})],1)]),t._v(" "),a("div",{staticClass:"selectX selectX3"},[a("div",{staticClass:"inputbox"},[a("span",{domProps:{textContent:t._s("任务描述")}}),t._v(" "),a("el-input",{staticClass:"taskdesc",attrs:{type:"text",placeholder:"请输入描述",clearable:""},model:{value:t.formvals.description,callback:function(e){t.$set(t.formvals,"description",e)},expression:"formvals.description"}})],1)]),t._v(" "),a("div",{staticClass:"selectX"},[a("InputBox",{attrs:{inputType:"text",cssStyle:t.cssStyle,readonly:"readonly",label:t.labelInput2,modelValue:t.formvals.operator}})],1),t._v(" "),a("div",{staticClass:"sendWork2Boxs",on:{click:t.sendWork}},[a("span",[t._v("派发")])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"infoTit"},[e("span",[this._v("派发工单")])])}]};var n=function(t){a("WIfi")},o=a("VU/8")(s.a,i,!1,n,"data-v-1560f07d",null);e.a=o.exports},Og6n:function(t,e,a){"use strict";var s={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"workBox"},[e("div",{staticClass:"colorBox",style:{background:this.colors(this.btnss.fills),width:this.btnss.fills/100*1+"rem"}}),e("span",{domProps:{textContent:this._s(this.btnss.fills+"%")}})])},staticRenderFns:[]};var i=a("VU/8")({props:["btnss"],data:function(){return{}},methods:{colors:function(t){var e="";return t<=100&&t>80?e="#4ae283":t<=80&&t>60?e="#ffa414":t<=60&&t>40?e="#f56c6c":t<=40&&(e="#ed4a4a"),e}},created:function(){},mounted:function(){}},s,!1,function(t){a("W7pl")},"data-v-96671bd8",null);e.a=i.exports},P5Gt:function(t,e){},PFbu:function(t,e){},POPR:function(t,e){},Q3f4:function(t,e){},Q8wZ:function(t,e){},R6do:function(t,e){},RHWA:function(t,e,a){"use strict";(function(t){var s=a("mvHQ"),i=a.n(s),n=a("LTwX"),o=a("KvKp"),r=a("jNQZ"),l=a("88z/");e.a={props:["data","isShowBtns"],components:{TimePickerT:n.a,SelectBox:r.a,Tk:l.a},data:function(){return{loading:!1,placeholder:"选择",value7:o.a.time(new Date/1e3,9),backOrCurr:!0,cant:!1,active:"change",xiuworkid:"",originNum:0,addparam:{},isShow:!1,ischange:[-1,-1],tableT:[],originPaiBanData:[],wOptions:[],addParams:[],pOption:[],dataLlists:[{id:1,pid:1,name:"王尼玛",description:"项目总管",worklist:[{time:"2018-8-5",title:"A",type:1},{time:"2018-8-23",title:"B",type:2}]}],pos:{top:0,left:0},over:[-5,-5],month:o.a.time(new Date/1e3,9).split("-")[1]}},methods:{leaveOver:function(){this.over=[],this.over.push(-5),this.over.push(-5)},backCurr:function(){this.value7=o.a.time(new Date/1e3,9),this.backOrCurr=o.a.time(new Date/1e3,9).split("-")[1],this.$emit("getPaibanData",this.value7)},changes:function(t){this.value7=t,this.value7.split("-")[1]!=o.a.time(new Date/1e3,9)&&(this.backOrCurr=!1),this.$emit("getPaibanData",t)},editSchedule:function(){this.$emit("editSchedule")},deletes:function(){var t=this.value7.split("-");1==t[1]?(t[1]=12,t[0]=Number(t[0])-1):t[1]=Number(t[1])-1,this.value7=t.join("-"),o.a.time(new Date/1e3,9)!=this.value7&&(this.backOrCurr=!1),this.$emit("getPaibanData",this.value7)},adds:function(){if(!this.cant){var t=this.value7.split("-");12==t[1]?(t[1]=1,t[0]=Number(t[0])+1):t[1]=Number(t[1])+1,this.value7=t.join("-"),o.a.time(new Date/1e3,9)!=this.value7&&(this.backOrCurr=!1),this.$emit("getPaibanData",this.value7)}},changeOver:function(t,e){this.over=[],this.over.push(t),this.over.push(e)},deletess:function(t){this.dataLlists.splice(t,1)},tkChoose:function(e){var a=this,s=this,i=this.dataLlists[this.ischange[0]];t.each(this.wOptions,function(t,a){e==s.wOptions[t].value&&(i.worklist[s.ischange[1]].title=s.wOptions[t].label)}),i.worklist[this.ischange[1]].type=e,e!=this.addparam.worklist_id&&(this.addparam.worklist_id=e,this.addparam.title=i.worklist[this.ischange[1]].title,t.each(this.addParams,function(t,e){e.user_id==a.addparam.user_id&&e.workdate==a.addparam.workdate&&(a.addParams[t]=a.addparam)}),this.addParams.push(this.addparam)),this.ischange=[-1,-1],this.isShow=!1},changeIschange:function(t,e,a,s,i){s.worklist[e].id?this.addparam={id:s.worklist[e].id,user_id:s.user_id,worklist_id:s.worklist[e].type,workdate:a.time}:this.addparam={id:0,user_id:s.user_id,worklist_id:s.worklist[e].type,workdate:a.time},this.isShow=!0,this.ischange=[],this.ischange.push(t),this.ischange.push(e);var n=i||window.event;this.pos={top:n.clientY+"px",left:n.clientX-15+"px"},this.$refs.tk.show()},change2:function(t,e,a){},change:function(t,e){this.dataLlists[e].pid=t,this.dataLlists[e].user_id=t,this.dataLlists[e].name=this.getItem(t).label,this.dataLlists[e].description=this.getItem(t).duty,this.placeholder=this.getItem(t).label},getItem:function(t){for(var e=this.pOption.length,a={},s=0;s<e;s++)t==this.pOption[s].value&&(a=this.pOption[s]);return a},botClick:function(e){var a=this;switch(e){case"change":t.each(a.showLists,function(t,e){a.showLists[t].allow=!0}),this.active="saveing";break;case"save":t.each(a.showLists,function(t,e){a.showLists[t].allow=!1}),this.saveAddPaiBan(),this.active="change"}},saveAddPaiBan:function(){t.each(this.addParams,function(t,e){"休"==e.title&&(e.worklist_id="0")}),this.$emit("saveAddPaiBan",{content:i()({data:this.addParams})}),this.addParams=[]},addPerson:function(){if(this.originPaiBanData=this.dataLlists,0==this.pOptions.length)return this.$message("没有新员工了！");if(this.dataLlists.length>0&&0==this.dataLlists[this.dataLlists.length-1].pid)return this.$message("请选择员工！");var e={id:0,pid:0,user_id:"",isNew:!0,name:"",duty:"",worklist:[],allow:!0};this.dataLlists.length>0?(this.dataLlists[this.dataLlists.length-1].isNew=!1,this.dataLlists[this.dataLlists.length-1].allow=!0,this.dataLlists.push(e)):this.dataLlists.push(e),this.placeholder="选择",this.active="saveing";var a=this;t.each(a.showLists,function(t,e){a.showLists[t].allow=!0})},ckMonNum:function(t,e){return t%4==0&&2==e?29:t%4!=0&&2==e?28:4==e||6==e||9==e||11==e?30:31},ckWeek:function(t){var e="";switch(t){case 0:e="日";break;case 1:e="一";break;case 2:e="二";break;case 3:e="三";break;case 4:e="四";break;case 5:e="五";break;case 6:e="六"}return e},getWOptions:function(){var e=this;this.$http.post("/pc_ims/work_type").then(function(a){var s=[];if(0==a.data.code){var i=a.data.data;t.each(i,function(t,e){i[t].value=i[t].id,i[t].label=i[t].title,"休"!=i[t].label&&s.push({label:i[t].label+"班",timearea:i[t].starttime+"~"+i[t].endtime})}),e.tableT=s,console.log(i),e.wOptions=i}else e.$message({type:"error",message:a.data.msg})})},getPaiBanPerson:function(){var e=this;this.$http.post("/pc_ims/get_user").then(function(a){if(console.log(a),0==a.data.code){var s=a.data.data;t.each(s,function(t,e){s[t].value=s[t].user_id,s[t].label=s[t].truename,s[t].duty=s[t].title}),e.pOption=a.data.data}else e.$message({type:"error",message:a.data.msg})})},deletePaiBan:function(t){var e=this,a=this.value7.split("-")[0],s=this.value7.split("-")[1];this.$http.post("/pc_ims/admin/del_work",{user_id:t,year:a,month:s}).then(function(t){0==t.data.code?e.$message({type:"success",message:t.data.msg}):e.$message({type:"error",message:t.data.msg+"请查看是否有换班记录。"})})}},computed:{year:function(){var t=Number(this.value7.split("-")[0]);return t},mon:function(){var t=Number(this.value7.split("-")[1]);return t},days:function(){for(var t=[],e=0;e<31;e++){var a="";e<this.ckMonNum(this.year,this.mon)&&(a=e+1),t.push(a)}return t},week:function(){for(var t=[],e=0;e<31;e++){var a="";if(""==this.days[e]);else{var s=new Date(this.year,parseInt(this.mon-1),e+1);a=this.ckWeek(s.getDay())}t.push(a)}return t},showLists:function(){for(var t=this,e=[],a=this.dataLlists,s=a.length,i=0;i<s;i++){var n=a[i];this.dataLlists.splice(i,1,n);for(var o=Array.apply(null,Array(this.ckMonNum(this.year,this.mon))).map(function(e,a){return{time:t.year+"-"+t.mon+"-"+(1+a),type:0,title:"休"}}),r=a[i].worklist.length,l=0;l<r;l++){var c=a[i].worklist[l].time.split("-")[2];o[Number(c)-1]=a[i].worklist[l]}n.worklist=o,e.push(n)}return e},total:function(){for(var t=[],e=this.ckMonNum(this.year,this.mon),a=0;a<31;a++){var s=0;if(a<e){for(var i=this.showLists.length,n=0;n<i;n++)0!=this.showLists[n].worklist[a].type&&(s+=1);t.push(s)}else t.push("")}return t},pOptions:function(){for(var t=[],e=this.pOption.length,a=0;a<e;a++){for(var s=this.dataLlists.length,i=!0,n=0;n<s;n++)this.pOption[a].value==this.dataLlists[n].pid&&(i=!1);i&&t.push(this.pOption[a])}return t}},watch:{data:{handler:function(t,e){this.dataLlists=t},deep:!0}},mounted:function(){this.dataLlists=this.data,this.getWOptions(),this.getPaiBanPerson();o.a.time(new Date/1e3,9);this.addParams=[]}}}).call(e,a("7t+N"))},Rg6g:function(t,e,a){"use strict";var s={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"dealBox",style:{color:this.txt.color},domProps:{textContent:this._s(this.txt.txt)}},[this._v("    \n    状态\n")])},staticRenderFns:[]};var i=a("VU/8")({props:["state"],data:function(){return{txt:{txt:"",color:"#fff"}}},methods:{txts:function(t){var e={txt:"",color:"#fff"};switch(t){case 5:e.txt="申请退单",e.color="#f56c6c";break;case 0:e.txt="未接单",e.colot="#fff";break;case 1:e.txt="已接单",e.color="#4ae283";break;case 2:e.txt="延期申请",e.color="#f56c6c";break;case 3:e.txt="延期申请通过",e.color="#4ae283";break;case 4:e.txt="已完成",e.color="#4ae283";break;case 6:e.txt="完成退单",e.color="#4ae283"}this.txt=e}},watch:{state:{handler:function(t){this.txts(t.fills)},deep:!0}},created:function(){},mounted:function(){this.txts(this.state.fills)}},s,!1,function(t){a("POPR")},"data-v-02424f76",null);e.a=i.exports},SU70:function(t,e){},SZJb:function(t,e){},Skej:function(t,e,a){"use strict";var s={props:["info","infoSta","controlDoorFun","itemIndex","doorControlMsg","infoStaTit","infoControlTit"],data:function(){return{inStatu:"",pointId:"",nowValue:""}},mounted:function(){},watch:{infoSta:function(t,e){this.infoSta=t}},methods:{doorInfoHide:function(){this.$emit("doorInfoHide",!1)},openDoorByInt:function(){console.log(this.doorControlMsg),this.pointId=this.doorControlMsg[0].pointId,this.nowValue=this.doorControlMsg[0].pointNow,this.inStatu="开启";var t=this;this.$http.get("/realtime_pc/pc/control",{point_id:t.pointId,now_value:t.nowValue}).then(function(e){console.log(e.message),t.$message("控制已发送")},function(t){})}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pop",on:{click:function(e){return e.stopPropagation(),t.doorInfoHide(e)}}},[a("div",{staticClass:"popBgBox"},[a("div",{staticClass:"popHeadBox"},[t._v(t._s(t.info)+" ")]),t._v(" "),a("div",{staticClass:"popDoorStatus"},[a("span",[t._v(t._s(t.infoStaTit))]),t._v(" "),a("span",[t._v(t._s(t.infoSta))])]),t._v(" "),a("div",{staticClass:"popDoorControl"},[a("span",[t._v(t._s(t.infoControlTit))]),t._v(" "),a("span",{on:{click:function(e){return e.stopPropagation(),t.openDoorByInt(e)}}},[t._v(t._s(t.controlDoorFun))])])]),t._v(" "),a("b",{staticClass:"arrowLeft"})])},staticRenderFns:[]};var n=a("VU/8")(s,i,!1,function(t){a("if9O")},null,null);e.a=n.exports},"T+GN":function(t,e){},"T+oP":function(t,e,a){"use strict";(function(t){a("KvKp");var s=a("kArt"),i=a("N6wk"),n=a("Og6n"),o=a("XM2w"),r=a("yivU"),l=a("KJ2l");e.a={name:"gReport",components:{Table:r.a,SelectBox:s.a,TimePickerT:i.a,Page:l.a},data:function(){var t=this;return{currentPage:1,currentPage2:1,dateUnit:"year",visible:!1,hoverIndex:0,hoverData:[],page:{totalDataNumber:0,currentPage:0,totalPageNum:0},page2:{totalDataNumber:0,currentPage:0,totalPageNum:0},dateOptions:[{id:"year",title:"年"},{id:"month",title:"月"},{id:"day",title:"日"}],dateRangeValue:"",year:"",month:"",day:"",crumbs:["代维系统","统计报表"],activeName:"first",jobs:[{label:"给排水",value:1},{label:"电梯",value:2},{label:"变配电",value:3},{label:"照明",value:4},{label:"暖通",value:5}],vJob:-1,table:{showPagination:!0,page:1,hei:328,len:0,data:[],th:[{prop:"serial",label:"编号"},{prop:"name",label:"名称"},{prop:"phone",label:"联系电话",wid:150},{prop:"department",label:"专业岗位"},{prop:"count_job",label:"本月派单量"},{prop:"wan_job",label:"完成数"},{prop:"percent_job",label:"工单完成率"},{prop:"count_xun",label:"本月所派巡检数",width:200},{prop:"wan_xun",label:"完成数量"},{prop:"percent_xun",label:"巡检完成率",wid:180,operate:!0,render:function(t,e){var a={fills:e.row.percent_xun};return t(n.a,{props:{btnss:a},on:{}})}}]},table2:{showPagination:!0,page:1,hei:328,len:0,data:[],th:[{prop:"serial",label:"编号",minWid:"10%"},{prop:"floor",label:"位置",minWid:"20%"},{prop:"type",label:"类别",minWid:"10%"},{prop:"device_name",label:"设备名称",minWid:"10%"},{prop:"count",label:"本周报修次数",minWid:"50%",operate:!0,render:function(e,a){var s={fills:a.row};return e(o.a,{props:{btnss:s},on:{mousehover:t.mouseOverLi,mouseOut:t.mouseOutLi}})}}]}}},methods:{changePage1:function(){this.getReportData()},changePage2:function(){this.getRepeatRate()},dateTypeChange:function(){this.dateRangeValue="",t(".el-date-editor.el-range-editor").css({border:"none!important"})},handleClick:function(){},exportList:function(){"first"==this.activeName?window.open("https://tesing.china-tillage.com/pc_ims/down/count?year=&month=&day=&Authorization="+this.$store.state.userInfoTotal.userinfo.password+"_"+this.$store.state.projectId+"_"+this.$store.state.userId):window.open("https://tesing.china-tillage.com/pc_ims/down/count_device?Authorization="+this.$store.state.userInfoTotal.userinfo.password+"_"+this.$store.state.projectId+"_"+this.$store.state.userId)},mouseOverLi:function(t,e){var a=this;console.log(e),this.hoverIndex=e,this.$http.post("/pc_ims/admin/count_deviceinfo",{name:t}).then(function(t){0==t.data.code?(a.hoverData=t.data.data,a.visible=!0):a.$message({type:"error",message:t.data.msg})})},changeCurrentPage:function(t){this.currentPage=t,this.getReportData()},changeCurrentPage2:function(t){this.currentPage2=t,this.getRepeatRate()},mouseOutLi:function(t){this.visible=!1},getReportData:function(){var t=this,e="",a="",s="";this.dateRangeValue&&(4==this.dateRangeValue.length&&(e=this.dateRangeValue),6==this.dateRangeValue.length&&(e=this.dateRangeValue[0]+this.dateRangeValue[1]+this.dateRangeValue[2]+this.dateRangeValue[3],a=this.dateRangeValue[4]+this.dateRangeValue[5]),8==this.dateRangeValue.length&&(e=this.dateRangeValue[0]+this.dateRangeValue[1]+this.dateRangeValue[2]+this.dateRangeValue[3],a=this.dateRangeValue[4]+this.dateRangeValue[5],s=this.dateRangeValue[6]+this.dateRangeValue[7])),this.$http.post("/pc_ims/admin/inspectionlist_count",{year:e,month:a,day:s,pagenumber:this.currentPage,pagesize:20}).then(function(e){0==e.data.code?(t.table.len=e.data.count,t.page={currentPage:t.currentPage,totalDataNumber:20*e.data.pages,totalPageNum:e.data.pages},t.table.data=e.data.data,t.table.data.map(function(e,a){t.table.data[a].percent_job=t.table.data[a].percent_job+"%",t.table.data[a].serial=20*(t.currentPage-1)+1+a})):t.$message({type:"error",message:e.data.msg})})},getRepeatRate:function(){var t=this;this.$http.post("/pc_ims/admin/count_device",{pagenumber:this.currentPage2,pagesize:20}).then(function(e){console.log(e),0==e.data.code?(t.table2.len=e.data.count,t.table2.data=e.data.data,t.page2={currentPage:t.currentPage2,totalDataNumber:20*e.data.pages,totalPageNum:e.data.pages},t.table2.data.map(function(e,a){t.table2.data[a].serial=20*(t.currentPage2-1)+1+a})):t.$message({type:"error",message:e.data.msg})})},format:function(t,e){var a=new Date(t),s=function(t){return(t<10?"0":"")+t};return e.replace(/yyyy|MM|dd|HH|mm|ss/g,function(t){switch(t){case"yyyy":return s(a.getFullYear());case"MM":return s(a.getMonth()+1);case"mm":return s(a.getMinutes());case"dd":return s(a.getDate());case"HH":return s(a.getHours());case"ss":return s(a.getSeconds())}})}},created:function(){},mounted:function(){this.getReportData(),this.getRepeatRate()}}}).call(e,a("7t+N"))},TIa2:function(t,e,a){"use strict";var s={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"dealBox"},[e("span",{style:{color:this.txt.color},domProps:{textContent:this._s(this.txt.txt)}})])},staticRenderFns:[]};var i=a("VU/8")({props:["state"],data:function(){return{txt:{}}},methods:{txts:function(t){switch(t){case 0:this.txt={txt:"未接单",color:"#fff"};break;case 1:this.txt={txt:"处理中",color:"#FFA414"};break;case 2:this.txt={txt:"已完成",color:"#4AE283"};break;case 3:this.txt={txt:"申请退单",color:"#3B89F9"};break;case 4:this.txt={txt:"退单完成",color:"#4AE283"}}return this.txt}},watch:{state:{handler:function(t){t&&this.txts(t.fills)},deep:!0}},mounted:function(){this.txts(this.state.fills)}},s,!1,function(t){a("94qP")},"data-v-20cf2306",null);e.a=i.exports},TZBf:function(t,e){},TZdD:function(t,e){},Tf5g:function(t,e,a){"use strict";(function(t){e.a={components:{},data:function(){return{toPageNum:1,totalPageNum:1,total:1,datetimerange:["",""],roomListAllSta:"",roomListAllNumber:"",roomListAllNumbers:[{num:101},{num:102},{num:103},{num:104},{num:105},{num:106}],tableData:[],pagesize:20,currentPage:1,currPage:1}},methods:{getData:function(){var e,a,s=this,i="";4==s.roomListAllSta?i="VC":3==s.roomListAllSta?i="VD":2==s.roomListAllSta?i="OC":1==s.roomListAllSta?i="OD":6==s.roomListAllSta?i="OO":5==s.roomListAllSta&&(i="OS"),""==s.datetimerange[0]||""==s.datetimerange[1]?(e="",a=""):(e=s.format(this.datetimerange[0],"yyyy-MM-dd"),a=s.format(this.datetimerange[1],"yyyy-MM-dd")),console.log(111),this.$http.post("/hotel/singe_room",{page:s.currentPage,type:0,num:s.pagesize,room_id:s.roomListAllNumber,state:i,start_time:e,end_time:a}).then(function(e){console.log(e),s.total=e.data.zongshu,s.totalPageNum=Number(e.data.pages),s.tableData=e.data.data;var a=[];t.each(s.tableData,function(t,e){a.push({num:e.room_id}),s.tableData[t].indexs=(s.currentPage-1)*s.pagesize+1+t}),s.unique(a),s.roomListAllNumbers=a},function(t){})},unique:function(t){var e,a,s=t.length;for(e=0;e<s;e++)for(a=e+1;a<s;a++)t[e].num==t[a].num&&(t.splice(a,1),s--,a--);return t},toInputPage:function(){this.currentPage=Number(this.currPage),this.getData()},stateFormat:function(t,e){return"VC"===t.room_state?"空净":"VD"===t.room_state?"空脏":"OC"===t.room_state?"住净":"OD"===t.room_state?"住脏":"OO"===t.room_state?"维修":"OS"===t.room_state?"锁房":void 0},change:function(t){this.roomListAllNumber=t},doSearch:function(){},addPolicy:function(){},handleEdit:function(t,e){},handleSizeChange:function(t){this.pagesize=t},handleCurrentChange:function(t){this.currentPage=Number(t),this.currPage=this.currentPage,this.getData()},format:function(t,e){var a=new Date(t),s=function(t){return(t<10?"0":"")+t};return e.replace(/yyyy|MM|dd|HH|mm|ss/g,function(t){switch(t){case"yyyy":return s(a.getFullYear());case"MM":return s(a.getMonth()+1);case"mm":return s(a.getMinutes());case"dd":return s(a.getDate());case"HH":return s(a.getHours());case"ss":return s(a.getSeconds())}})}},mounted:function(){this.getData()}}}).call(e,a("7t+N"))},TmA6:function(t,e,a){"use strict";(function(t){e.a={components:{},data:function(){return{toPageNum:1,totalPageNum:1,total:1,datetimerange:["",""],roomListAllSta:"",roomListAllNumber:"",roomListAllNumbers:[{num:101},{num:102},{num:103},{num:104},{num:105},{num:106}],tableData:[],pagesize:20,currentPage:1,currPage:1}},methods:{getData:function(){var e,a,s=this,i="";4==s.roomListAllSta?i="VC":3==s.roomListAllSta?i="VD":2==s.roomListAllSta?i="OC":1==s.roomListAllSta?i="OD":6==s.roomListAllSta?i="OO":5==s.roomListAllSta&&(i="OS"),""==s.datetimerange[0]||""==s.datetimerange[1]?(e="",a=""):(e=s.format(this.datetimerange[0],"yyyy-MM-dd"),a=s.format(this.datetimerange[1],"yyyy-MM-dd")),this.$http.post("/hotel/singe_room",{page:s.currentPage,type:1,num:s.pagesize,room_id:s.roomListAllNumber,state:i,start_time:e,end_time:a}).then(function(e){console.log(e),s.total=e.data.zongshu,s.totalPageNum=Number(e.data.pages),s.tableData=e.data.data;var a=[];t.each(s.tableData,function(t,e){a.push({num:e.room_id}),s.tableData[t].indexs=(s.currentPage-1)*s.pagesize+1+t}),s.unique(a),s.roomListAllNumbers=a},function(t){})},unique:function(t){var e,a,s=t.length;for(e=0;e<s;e++)for(a=e+1;a<s;a++)t[e].num==t[a].num&&(t.splice(a,1),s--,a--);return t},toInputPage:function(){this.currentPage=Number(this.currPage),this.getData()},stateFormat:function(t,e){return"VC"===t.room_state?"空净":"VD"===t.room_state?"空脏":"OC"===t.room_state?"住净":"OD"===t.room_state?"住脏":"OO"===t.room_state?"维修":"OS"===t.room_state?"锁房":void 0},change:function(t){this.roomListAllNumber=t},doSearch:function(){},addPolicy:function(){},handleEdit:function(t,e){},handleSizeChange:function(t){this.pagesize=t},handleCurrentChange:function(t){this.currentPage=Number(t),this.currPage=this.currentPage,this.getData()},format:function(t,e){var a=new Date(t),s=function(t){return(t<10?"0":"")+t};return e.replace(/yyyy|MM|dd|HH|mm|ss/g,function(t){switch(t){case"yyyy":return s(a.getFullYear());case"MM":return s(a.getMonth()+1);case"mm":return s(a.getMinutes());case"dd":return s(a.getDate());case"HH":return s(a.getHours());case"ss":return s(a.getSeconds())}})}},mounted:function(){this.getData()}}}).call(e,a("7t+N"))},TrCY:function(t,e,a){(function(t){!function(t){"use strict";t.fn.circleChart=function(e){var a=e.width,s=e.height,i=a/2,n=s/2,o=e.outCircleObj,r=e.inCircleObj,l=e.space,c=e.title,d=e.dataValue,u=function(t,e,a,s){return{left:Math.round(t+Math.cos(s*Math.PI/180)*a),top:Math.round(e+Math.sin(s*Math.PI/180)*a)}},h=document.createElement("canvas");h.setAttribute("width",a),h.setAttribute("height",s);var m=h.getContext("2d"),p=m.createLinearGradient(0,0,a,0);p.addColorStop("0",o.bgColor1),p.addColorStop("0.5",o.bgColor2),p.addColorStop("1.0",o.bgColor3),m.strokeStyle=p,m.lineWidth=o.lineWidth,m.radius=i-m.lineWidth/2,m.beginPath(),m.arc(i,n,m.radius,.75*Math.PI,2.25*Math.PI),m.stroke();var f=m.createLinearGradient(0,0,a,0);f.addColorStop("0",r.bgColor1),f.addColorStop("0.5",r.bgColor2),f.addColorStop("1.0",r.bgColor3),m.globalAlpha=r.opacity,m.strokeStyle=f;var v=r.lineWidth,_=i-m.lineWidth-l-v/2;m.lineWidth=v,m.beginPath(),m.arc(i,n,_,.75*Math.PI,2.25*Math.PI),m.stroke();var g=m.createLinearGradient(0,0,a,0);g.addColorStop("0",r.textColor),g.addColorStop("1",r.textColor),m.fillStyle=g,m.radius=_;var b=u(i,n,m.radius,145);m.textAlign="right",m.fillText(r.text[0],b.left,b.top);var y=u(i,n,m.radius,215);m.textAlign="left",m.fillText(r.text[1],y.left,y.top);var w=u(i,n,m.radius-.25*r.lineWidth,270);m.textAlign="center",m.fillText(r.text[2],i,w.top);var C=u(i,n,m.radius,325);m.textAlign="right",m.fillText(r.text[3],C.left,C.top);var x=u(i,n,m.radius,35);m.textAlign="left",m.fillText(r.text[4],x.left,x.top);var k=m.createLinearGradient(0,0,a,0);k.addColorStop("0",c.color),k.addColorStop("1",c.color),m.fillStyle=k,m.font=c.size+"px Arial",m.textAlign="center",m.fillText(c.text,i,.85*s);var D=m.createLinearGradient(0,0,a,0);D.addColorStop("0",d.color),D.addColorStop("1",d.color),m.fillStyle=D,m.font=d.size+"px Arial",m.textAlign="center",m.fillText(d.text,i,.5*s),t(this).append(h)}}(t)}).call(e,a("7t+N"))},Tzno:function(t,e){},"V/a2":function(t,e){},V3mI:function(t,e){},V8GT:function(t,e){},VB4Q:function(t,e,a){"use strict";(function(t){var s=a("jNQZ"),i=a("GDlk");e.a={name:"energy-analysis",components:{SelectBox:s.a,EchartsAnalysis:i.a},data:function(){return{loading1:!1,loading2:!1,sys_menu_id:"",project_id:"",deviceDateTypes:[{value:"year",label:"年"},{value:"month",label:"月"},{value:"day",label:"日"}],deviceDateType:"month",deviceDate:new Date,areaDateTypes:[{value:"year",label:"年"},{value:"month",label:"月"},{value:"day",label:"日"}],areaDateType:"month",areaDate:"",energy_type:"0",crumbs:["能源管理系统","用能分析"],iscur:0,tabs:[{name:"电",id:0},{name:"水",id:1},{name:"气",id:2}],data:{topPie:[],axisLabel:[],legendData:[],arrData1:[],arrData2:[],arrData3:[],arr1Label:[],arr1:[],arr1x:[],leftTopChart:{rzl:[],floorVal:{rooms0:[],rooms1:[],rooms2:[],rooms3:[],rooms4:[]}},config:{sys_menu_id:"",project_id:"",area_query_date_type:"month",area_date:"",energy_type:"0"},trendLegendLabel:[]},vanalysis:"",analysis:[]}},methods:{deviceDateTypeChange:function(t){this.deviceDate="",this.data.config.device_date=""},areaDateTypeChange:function(t){this.areaDate="",this.data.config.area_date=""},getBottomEcharts:function(t,e,a,s){this.data;for(var i=this.$echarts.init(document.getElementById("deviceLeft")),n=this.$echarts.init(document.getElementById("deviceRight")),o=["rgba(48, 241, 225, .4)","rgba(48, 241, 225, .4)","rgba(253, 153, 27, .4)"],r=[],l=0;l<s.length;l++)r.push({name:s[l],data:e[l],type:"line",symbol:"circle",symbolSize:0,smooth:!0,lineStyle:{normal:{width:2,shadowColor:o[l],shadowBlur:5,shadowOffsetY:5}}});var c={tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},grid:{left:20,top:35,right:20,bottom:4,containLabel:!0},legend:{textStyle:{color:"#B5D7FF"},top:5,itemWidth:20,itemHeight:10,data:s},calculable:!0,xAxis:{type:"category",data:a,boundaryGap:!0,axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!1},axisLabel:{interval:1,width:20,showMinLabel:!0,showMaxLabel:!0,textStyle:{color:"#708FBE",fontSize:10}}},yAxis:{axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!1},axisLabel:{show:!1},splitArea:{show:!0,areaStyle:{color:["rgba(142,187,255,.1)","rgba(142,187,255,.05)"]}},type:"value"},series:r,color:["#F35E5E","#EEB66E","#008AFF"]},d={tooltip:{trigger:"item",formatter:"{a}{b} : {c} ({d}%)"},series:[{name:"",type:"pie",radius:"65%",center:["50%","50%"],color:["#008AFF","#F35E5E","#EEB66E","#FD97AA","#EBF191","#C382EF","#95EDC5","#b5d7ff"],data:t,itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};i.setOption(c),n.setOption(d)},loadBarData:function(t){var e=this;e.loading1=!0,e.data.config.energy_type=e.iscur=t;var a={sys_menu_id:e.data.config.sys_menu_id,project_id:e.data.config.project_id,area_query_date_type:e.areaDateType,area_date:e.areaDate,energy_type:e.data.config.energy_type};e.$http.post("/hotel_energy/analysis",a).then(function(t){e.calcAreaData(t),setTimeout(function(){e.loading1=!1},500)})},areaQueryData:function(){var t=this;t.loading1=!0;var e={sys_menu_id:t.data.config.sys_menu_id,project_id:t.data.config.project_id,area_query_date_type:t.areaDateType,area_date:t.areaDate,energy_type:t.data.config.energy_type};t.$http.post("/hotel_energy/analysis",e).then(function(e){0==e.data.code&&(t.calcAreaData(e),setTimeout(function(){t.loading1=!1},500))})},deviceQueryData:function(){var t=this,e={sys_menu_id:t.data.config.sys_menu_id,project_id:t.data.config.project_id,device_query_date_type:t.deviceDateType,device_date:t.deviceDate};t.$http.post("/hotel_energy/analysis",e).then(function(e){t.calcDeviceData(e)})},calcAreaData:function(e){var a=e.data.data.area_energy_use.column_data,s=a.last_this_time,i=a.this_time,n=a.last_time,o=e.data.data.area_energy_use.floor_map,r=e.data.data.area_energy_use.pie_data,l=e.data.data.area_energy_use.trend_data,c=[],d=[],u=[],h=[],m=[],p=[],f=[],v=[];t.each(o,function(e,a){t.each(r,function(t,e){a.area_id==e.area_id&&h.push({value:e.data,name:a.title})}),t.each(i,function(t,e){a.area_id==e.area_id&&(c.push(a.title),v.push(a.title),d.push(e.data[0].date),u.push(e.data[0].value))}),t.each(n,function(t,e){a.area_id==e.area_id&&(d.push(e.data[0].date),m.push(e.data[0].value))}),t.each(s,function(t,e){a.area_id==e.area_id&&(d.push(e.data[0].date),p.push(e.data[0].value))})}),this.data.topPie=h,this.data.axisLabel=c,"year"!=this.areaDateType&&v.push("入住率"),this.data.trendLegendLabel=v,this.data.config.area_query_date_type=this.areaDateType,this.data.config.area_date=this.areaDate,this.data.arrData1=u,this.data.legendData=d,this.data.arrData2=m,this.data.arrData3=p,t.each(l.check_in_hotel_rate,function(t,e){f.push([e.date,e.value])}),this.data.leftTopChart.rzl=f},calcDeviceData:function(e){var a=e.data.data.device_energy_use.pie_data,s=e.data.data.device_energy_use.device_map,i=e.data.data.device_energy_use.trend_data,n=[],o=[],r=[],l=[];t.each(s,function(e,s){t.each(a,function(t,e){s.device_id==e.device_id&&n.push({value:e.data,name:s.title})}),t.each(i,function(e,a){l.push(s.title),a.device_id==s.device_id&&(o.push(a.data),t.each(a.data,function(t,e){r.push(e.date)}))})}),l=l.filter(function(t,e,a){return a.indexOf(t)===e}),r=r.filter(function(t,e,a){return a.indexOf(t)===e}),this.getBottomEcharts(n,o,r,l)},getDatas:function(){var t=this;t.loading1=t.loading2=!0;var e={sys_menu_id:t.data.config.sys_menu_id,project_id:t.data.config.project_id};t.$http.post("/hotel_energy/analysis",e).then(function(e){console.log(e),t.calcDeviceData(e),t.calcAreaData(e),setTimeout(function(){t.loading1=t.loading2=!1},200)})},resizeCharts:function(){this.$echarts.init(document.getElementById("deviceLeft")).resize(),this.$echarts.init(document.getElementById("deviceRight")).resize(),this.$echarts.init(document.getElementById("lines")).resize(),this.$echarts.init(document.getElementById("pies")).resize(),this.$echarts.init(document.getElementById("bars")).resize()}},created:function(){this.data.config.sys_menu_id=this.sys_menu_id=this.$store.state.sysList[2].sys_menu_id,this.data.config.project_id=this.project_id=this.$store.state.projectId;var t=(new Date).getFullYear().toString()+((new Date).getMonth()+1);this.areaDate=t},mounted:function(){var e=this;e.getDatas(),t(window).resize(function(){e.resizeCharts()})},beforeDestroy:function(){t(window).unbind("resize")}}}).call(e,a("7t+N"))},VBS9:function(t,e){},"VIz/":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAWCAYAAADXYyzPAAAAAXNSR0IArs4c6QAAA/lJREFUSA3dVE2IHFUQrnrdM8muDojxENDgTyQXD168iksERfAseJCcFCUgePImBDx48mAC2ckh/uAlIh7MZvHgURFBE8UfRJNZZmYTBjWuk4mZn+6u8vted89usiTmshcL+n31Xr16X1W9ei3yfxZ3D+1O76l2r7e/zlNrZafwo35/4a+ZnXaRJ1XVJeizLz+wbzXsFCHPbV+6tHh5ZiskFdVr5l64+au07RgxSW2cnQbHQZT1b3H/HVgA79kxYpL6OFshqagMkPE69BE+IyklLeHW48lu96HM5HGV5PuXHrzvu1vtjqST/AzIllS0J+IX0VyiQZEsMq7kP0u9vNZ7fprLz2byXmHFueVO79iq+676gK04J3VfUg2/gvQXcWQawpWIepvE7bXuIUT5Ie5mgu8LfOuI/nC30/36xIX1A1tJPxgM7rBJjph8Ces/utsPyHrED6leLXGz1DfN+Hin/6K7vos72sATWEWxzsP5c1H/SkQfydXOnuisv0Bykv5zbXYGBE/gwG+x9A0yvArkveLTGuelRhLbBY/9MEiOIuo/xPVTOE627lK1PXgeT6MadyOwFRDuw55HoX8Jv7NqeLABYQOjH9NjW6k/h7H/yv77H9vWXMcv9F7De3sbzXAR3qdMfYq7iv71gKYZmfnJoOEg1p7BiRkoPnOVc2SCD4qkEaMP3WHAEp5TXLm+q5fXuq/jgb8FU1fM3wdObnYXPBgBfYwr+CQ2LFu3OjT6GMhLjvmIHduf0/Ja/w03O4K4fsNBbROb1qXCiUiG/zu4kg46HweRS4ayYgcaubTPmeZKAg3X64FDXI2lZpPgqRzRID9ZUbxThDDVAleUgAtS68Q4j7kYqlflhLcWdWApFZEQKTwGe9XrDWWpzYtDuNMNL+RNxJ2hzPFClEhBYlGP5eVC7JQKYZYUqRawptGh1oncjR9PtEObd3XMGLvvAtmf4rbB4AwbA5yIdIyB06VKgE45vs3ORNFj9uX2Wq8rYkWuIUnQPjdkjDMYVqENvRL1HO8gRZmBnCfoRcSuRM5z6rhwYrRDj3Yg59LAl1UIUBg9oErFDRnDxjTxChI+esSOVkHliJxnIdPUG07knFKGVOqpNuE+E2KUYoZDoBMple6eshmibFYLGdss5x9GZDcO5i8DSEllEeOkQq7UxvK/gl+lpLsDfHgB4Nu14MkU/QnkPFH2KtYku/6OaURnFAutRiQeYWy18K8rw4CV+1m/2o+EnJfELWweYTORMhqZLLYaETkPYaaFNVyavOMy5XnGKKoNx+NYanbNcAyPyrp39rAPmueVyINK/d64xvnCcOjDZlOJcc5hiHUiZJA2dW8+9MtyZx25/AvmSxqXXW/gswAAAABJRU5ErkJggg=="},"VQq/":function(t,e,a){"use strict";(function(t){var e,s=a("pFYg"),i=a.n(s);
/*!
 * jQuery Form Plugin
 * version: 3.51.0-2014.06.20
 * Requires jQuery v1.5 or later
 * Copyright (c) 2014 M. Alsup
 * Examples and documentation at: http://malsup.com/jquery/form/
 * Project repository: https://github.com/malsup/form
 * Dual licensed under the MIT and GPL licenses.
 * https://github.com/malsup/form#copyright-and-license
 */
e=function(t){var e={};e.fileapi=void 0!==t("<input type='file'/>").get(0).files,e.formdata=void 0!==window.FormData;var a=!!t.fn.prop;function s(e){var a=e.data;e.isDefaultPrevented()||(e.preventDefault(),t(e.target).ajaxSubmit(a))}function n(e){var a=e.target,s=t(a);if(!s.is("[type=submit],[type=image]")){var i=s.closest("[type=submit]");if(0===i.length)return;a=i[0]}var n=this;if(n.clk=a,"image"==a.type)if(void 0!==e.offsetX)n.clk_x=e.offsetX,n.clk_y=e.offsetY;else if("function"==typeof t.fn.offset){var o=s.offset();n.clk_x=e.pageX-o.left,n.clk_y=e.pageY-o.top}else n.clk_x=e.pageX-a.offsetLeft,n.clk_y=e.pageY-a.offsetTop;setTimeout(function(){n.clk=n.clk_x=n.clk_y=null},100)}function o(){if(t.fn.ajaxSubmit.debug){var e="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(e):window.opera&&window.opera.postError&&window.opera.postError(e)}}t.fn.attr2=function(){if(!a)return this.attr.apply(this,arguments);var t=this.prop.apply(this,arguments);return t&&t.jquery||"string"==typeof t?t:this.attr.apply(this,arguments)},t.fn.ajaxSubmit=function(s){if(!this.length)return o("ajaxSubmit: skipping submit process - no element selected"),this;var i,n,r,l=this;"function"==typeof s?s={success:s}:void 0===s&&(s={}),i=s.type||this.attr2("method"),(r=(r="string"==typeof(n=s.url||this.attr2("action"))?t.trim(n):"")||window.location.href||"")&&(r=(r.match(/^([^#]+)/)||[])[1]),s=t.extend(!0,{url:r,success:t.ajaxSettings.success,type:i||t.ajaxSettings.type,iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},s);var c={};if(this.trigger("form-pre-serialize",[this,s,c]),c.veto)return o("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(s.beforeSerialize&&!1===s.beforeSerialize(this,s))return o("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var d=s.traditional;void 0===d&&(d=t.ajaxSettings.traditional);var u,h=[],m=this.formToArray(s.semantic,h);if(s.data&&(s.extraData=s.data,u=t.param(s.data,d)),s.beforeSubmit&&!1===s.beforeSubmit(m,this,s))return o("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[m,this,s,c]),c.veto)return o("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var p=t.param(m,d);u&&(p=p?p+"&"+u:u),"GET"==s.type.toUpperCase()?(s.url+=(s.url.indexOf("?")>=0?"&":"?")+p,s.data=null):s.data=p;var f=[];if(s.resetForm&&f.push(function(){l.resetForm()}),s.clearForm&&f.push(function(){l.clearForm(s.includeHidden)}),!s.dataType&&s.target){var v=s.success||function(){};f.push(function(e){var a=s.replaceTarget?"replaceWith":"html";t(s.target)[a](e).each(v,arguments)})}else s.success&&f.push(s.success);if(s.success=function(t,e,a){for(var i=s.context||this,n=0,o=f.length;n<o;n++)f[n].apply(i,[t,e,a||l,l])},s.error){var _=s.error;s.error=function(t,e,a){var i=s.context||this;_.apply(i,[t,e,a,l])}}if(s.complete){var g=s.complete;s.complete=function(t,e){var a=s.context||this;g.apply(a,[t,e,l])}}var b=t("input[type=file]:enabled",this).filter(function(){return""!==t(this).val()}).length>0,y="multipart/form-data",w=l.attr("enctype")==y||l.attr("encoding")==y,C=e.fileapi&&e.formdata;o("fileAPI :"+C);var x,k=(b||w)&&!C;!1!==s.iframe&&(s.iframe||k)?s.closeKeepAlive?t.get(s.closeKeepAlive,function(){x=S(m)}):x=S(m):x=(b||w)&&C?function(e){for(var a=new FormData,n=0;n<e.length;n++)a.append(e[n].name,e[n].value);if(s.extraData){var o=function(e){var a,i,n=t.param(e,s.traditional).split("&"),o=n.length,r=[];for(a=0;a<o;a++)n[a]=n[a].replace(/\+/g," "),i=n[a].split("="),r.push([decodeURIComponent(i[0]),decodeURIComponent(i[1])]);return r}(s.extraData);for(n=0;n<o.length;n++)o[n]&&a.append(o[n][0],o[n][1])}s.data=null;var r=t.extend(!0,{},t.ajaxSettings,s,{contentType:!1,processData:!1,cache:!1,type:i||"POST"});s.uploadProgress&&(r.xhr=function(){var e=t.ajaxSettings.xhr();return e.upload&&e.upload.addEventListener("progress",function(t){var e=0,a=t.loaded||t.position,i=t.total;t.lengthComputable&&(e=Math.ceil(a/i*100)),s.uploadProgress(t,a,i,e)},!1),e});r.data=null;var l=r.beforeSend;return r.beforeSend=function(t,e){s.formData?e.data=s.formData:e.data=a,l&&l.call(this,t,e)},t.ajax(r)}(m):t.ajax(s),l.removeData("jqxhr").data("jqxhr",x);for(var D=0;D<h.length;D++)h[D]=null;return this.trigger("form-submit-notify",[this,s]),this;function S(e){var n,r,c,d,u,m,p,f,v,_,g,b,y=l[0],w=t.Deferred();if(w.abort=function(t){f.abort(t)},e)for(r=0;r<h.length;r++)n=t(h[r]),a?n.prop("disabled",!1):n.removeAttr("disabled");if((c=t.extend(!0,{},t.ajaxSettings,s)).context=c.context||c,u="jqFormIO"+(new Date).getTime(),c.iframeTarget?(_=(m=t(c.iframeTarget)).attr2("name"))?u=_:m.attr2("name",u):(m=t('<iframe name="'+u+'" src="'+c.iframeSrc+'" />')).css({position:"absolute",top:"-1000px",left:"-1000px"}),p=m[0],f={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(e){var a="timeout"===e?"timeout":"aborted";o("aborting upload... "+a),this.aborted=1;try{p.contentWindow.document.execCommand&&p.contentWindow.document.execCommand("Stop")}catch(t){}m.attr("src",c.iframeSrc),f.error=a,c.error&&c.error.call(c.context,f,a,e),d&&t.event.trigger("ajaxError",[f,c,a]),c.complete&&c.complete.call(c.context,f,a)}},(d=c.global)&&0==t.active++&&t.event.trigger("ajaxStart"),d&&t.event.trigger("ajaxSend",[f,c]),c.beforeSend&&!1===c.beforeSend.call(c.context,f,c))return c.global&&t.active--,w.reject(),w;if(f.aborted)return w.reject(),w;(v=y.clk)&&(_=v.name)&&!v.disabled&&(c.extraData=c.extraData||{},c.extraData[_]=v.value,"image"==v.type&&(c.extraData[_+".x"]=y.clk_x,c.extraData[_+".y"]=y.clk_y));var C=1,x=2;function k(t){var e=null;try{t.contentWindow&&(e=t.contentWindow.document)}catch(t){o("cannot get iframe.contentWindow document: "+t)}if(e)return e;try{e=t.contentDocument?t.contentDocument:t.document}catch(a){o("cannot get iframe.contentDocument: "+a),e=t.document}return e}var D=t("meta[name=csrf-token]").attr("content"),S=t("meta[name=csrf-param]").attr("content");function A(){var e=l.attr2("target"),a=l.attr2("action"),s=l.attr("enctype")||l.attr("encoding")||"multipart/form-data";y.setAttribute("target",u),i&&!/post/i.test(i)||y.setAttribute("method","POST"),a!=c.url&&y.setAttribute("action",c.url),c.skipEncodingOverride||i&&!/post/i.test(i)||l.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),c.timeout&&(b=setTimeout(function(){g=!0,B(C)},c.timeout));var n=[];try{if(c.extraData)for(var r in c.extraData)c.extraData.hasOwnProperty(r)&&(t.isPlainObject(c.extraData[r])&&c.extraData[r].hasOwnProperty("name")&&c.extraData[r].hasOwnProperty("value")?n.push(t('<input type="hidden" name="'+c.extraData[r].name+'">').val(c.extraData[r].value).appendTo(y)[0]):n.push(t('<input type="hidden" name="'+r+'">').val(c.extraData[r]).appendTo(y)[0]));c.iframeTarget||m.appendTo("body"),p.attachEvent?p.attachEvent("onload",B):p.addEventListener("load",B,!1),setTimeout(function t(){try{var e=k(p).readyState;o("state = "+e),e&&"uninitialized"==e.toLowerCase()&&setTimeout(t,50)}catch(t){o("Server abort: ",t," (",t.name,")"),B(x),b&&clearTimeout(b),b=void 0}},15);try{y.submit()}catch(t){document.createElement("form").submit.apply(y)}}finally{y.setAttribute("action",a),y.setAttribute("enctype",s),e?y.setAttribute("target",e):l.removeAttr("target"),t(n).remove()}}S&&D&&(c.extraData=c.extraData||{},c.extraData[S]=D),c.forceSync?A():setTimeout(A,10);var E,I,L,T=50;function B(e){if(!f.aborted&&!L){if((I=k(p))||(o("cannot access response document"),e=x),e===C&&f)return f.abort("timeout"),void w.reject(f,"timeout");if(e==x&&f)return f.abort("server abort"),void w.reject(f,"error","server abort");if(I&&I.location.href!=c.iframeSrc||g){p.detachEvent?p.detachEvent("onload",B):p.removeEventListener("load",B,!1);var a,s="success";try{if(g)throw"timeout";var i="xml"==c.dataType||I.XMLDocument||t.isXMLDoc(I);if(o("isXml="+i),!i&&window.opera&&(null===I.body||!I.body.innerHTML)&&--T)return o("requeing onLoad callback, DOM not available"),void setTimeout(B,250);var n=I.body?I.body:I.documentElement;f.responseText=n?n.innerHTML:null,f.responseXML=I.XMLDocument?I.XMLDocument:I,i&&(c.dataType="xml"),f.getResponseHeader=function(t){return{"content-type":c.dataType}[t.toLowerCase()]},n&&(f.status=Number(n.getAttribute("status"))||f.status,f.statusText=n.getAttribute("statusText")||f.statusText);var r=(c.dataType||"").toLowerCase(),l=/(json|script|text)/.test(r);if(l||c.textarea){var u=I.getElementsByTagName("textarea")[0];if(u)f.responseText=u.value,f.status=Number(u.getAttribute("status"))||f.status,f.statusText=u.getAttribute("statusText")||f.statusText;else if(l){var h=I.getElementsByTagName("pre")[0],v=I.getElementsByTagName("body")[0];h?f.responseText=h.textContent?h.textContent:h.innerText:v&&(f.responseText=v.textContent?v.textContent:v.innerText)}}else"xml"==r&&!f.responseXML&&f.responseText&&(f.responseXML=P(f.responseText));try{E=M(f,r,c)}catch(t){s="parsererror",f.error=a=t||s}}catch(t){o("error caught: ",t),s="error",f.error=a=t||s}f.aborted&&(o("upload aborted"),s=null),f.status&&(s=f.status>=200&&f.status<300||304===f.status?"success":"error"),"success"===s?(c.success&&c.success.call(c.context,E,"success",f),w.resolve(f.responseText,"success",f),d&&t.event.trigger("ajaxSuccess",[f,c])):s&&(void 0===a&&(a=f.statusText),c.error&&c.error.call(c.context,f,s,a),w.reject(f,"error",a),d&&t.event.trigger("ajaxError",[f,c,a])),d&&t.event.trigger("ajaxComplete",[f,c]),d&&!--t.active&&t.event.trigger("ajaxStop"),c.complete&&c.complete.call(c.context,f,s),L=!0,c.timeout&&clearTimeout(b),setTimeout(function(){c.iframeTarget?m.attr("src",c.iframeSrc):m.remove(),f.responseXML=null},100)}}}var P=t.parseXML||function(t,e){return window.ActiveXObject?((e=new ActiveXObject("Microsoft.XMLDOM")).async="false",e.loadXML(t)):e=(new DOMParser).parseFromString(t,"text/xml"),e&&e.documentElement&&"parsererror"!=e.documentElement.nodeName?e:null},R=t.parseJSON||function(t){return window.eval("("+t+")")},M=function(e,a,s){var i=e.getResponseHeader("content-type")||"",n="xml"===a||!a&&i.indexOf("xml")>=0,o=n?e.responseXML:e.responseText;return n&&"parsererror"===o.documentElement.nodeName&&t.error&&t.error("parsererror"),s&&s.dataFilter&&(o=s.dataFilter(o,a)),"string"==typeof o&&("json"===a||!a&&i.indexOf("json")>=0?o=R(o):("script"===a||!a&&i.indexOf("javascript")>=0)&&t.globalEval(o)),o};return w}},t.fn.ajaxForm=function(e){if((e=e||{}).delegation=e.delegation&&t.isFunction(t.fn.on),!e.delegation&&0===this.length){var a={s:this.selector,c:this.context};return!t.isReady&&a.s?(o("DOM not ready, queuing ajaxForm"),t(function(){t(a.s,a.c).ajaxForm(e)}),this):(o("terminating; zero elements found by selector"+(t.isReady?"":" (DOM not ready)")),this)}return e.delegation?(t(document).off("submit.form-plugin",this.selector,s).off("click.form-plugin",this.selector,n).on("submit.form-plugin",this.selector,e,s).on("click.form-plugin",this.selector,e,n),this):this.ajaxFormUnbind().bind("submit.form-plugin",e,s).bind("click.form-plugin",e,n)},t.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")},t.fn.formToArray=function(a,s){var i=[];if(0===this.length)return i;var n,o,r,l,c,d,u,h,m=this[0],p=this.attr("id"),f=a?m.getElementsByTagName("*"):m.elements;if(f&&!/MSIE [678]/.test(navigator.userAgent)&&(f=t(f).get()),p&&(n=t(':input[form="'+p+'"]').get()).length&&(f=(f||[]).concat(n)),!f||!f.length)return i;for(o=0,u=f.length;o<u;o++)if((l=(d=f[o]).name)&&!d.disabled)if(a&&m.clk&&"image"==d.type)m.clk==d&&(i.push({name:l,value:t(d).val(),type:d.type}),i.push({name:l+".x",value:m.clk_x},{name:l+".y",value:m.clk_y}));else if((c=t.fieldValue(d,!0))&&c.constructor==Array)for(s&&s.push(d),r=0,h=c.length;r<h;r++)i.push({name:l,value:c[r]});else if(e.fileapi&&"file"==d.type){s&&s.push(d);var v=d.files;if(v.length)for(r=0;r<v.length;r++)i.push({name:l,value:v[r],type:d.type});else i.push({name:l,value:"",type:d.type})}else null!==c&&void 0!==c&&(s&&s.push(d),i.push({name:l,value:c,type:d.type,required:d.required}));if(!a&&m.clk){var _=t(m.clk),g=_[0];(l=g.name)&&!g.disabled&&"image"==g.type&&(i.push({name:l,value:_.val()}),i.push({name:l+".x",value:m.clk_x},{name:l+".y",value:m.clk_y}))}return i},t.fn.formSerialize=function(e){return t.param(this.formToArray(e))},t.fn.fieldSerialize=function(e){var a=[];return this.each(function(){var s=this.name;if(s){var i=t.fieldValue(this,e);if(i&&i.constructor==Array)for(var n=0,o=i.length;n<o;n++)a.push({name:s,value:i[n]});else null!==i&&void 0!==i&&a.push({name:this.name,value:i})}}),t.param(a)},t.fn.fieldValue=function(e){for(var a=[],s=0,i=this.length;s<i;s++){var n=this[s],o=t.fieldValue(n,e);null===o||void 0===o||o.constructor==Array&&!o.length||(o.constructor==Array?t.merge(a,o):a.push(o))}return a},t.fieldValue=function(e,a){var s=e.name,i=e.type,n=e.tagName.toLowerCase();if(void 0===a&&(a=!0),a&&(!s||e.disabled||"reset"==i||"button"==i||("checkbox"==i||"radio"==i)&&!e.checked||("submit"==i||"image"==i)&&e.form&&e.form.clk!=e||"select"==n&&-1==e.selectedIndex))return null;if("select"==n){var o=e.selectedIndex;if(o<0)return null;for(var r=[],l=e.options,c="select-one"==i,d=c?o+1:l.length,u=c?o:0;u<d;u++){var h=l[u];if(h.selected){var m=h.value;if(m||(m=h.attributes&&h.attributes.value&&!h.attributes.value.specified?h.text:h.value),c)return m;r.push(m)}}return r}return t(e).val()},t.fn.clearForm=function(e){return this.each(function(){t("input,select,textarea",this).clearFields(e)})},t.fn.clearFields=t.fn.clearInputs=function(e){var a=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var s=this.type,i=this.tagName.toLowerCase();a.test(s)||"textarea"==i?this.value="":"checkbox"==s||"radio"==s?this.checked=!1:"select"==i?this.selectedIndex=-1:"file"==s?/MSIE/.test(navigator.userAgent)?t(this).replaceWith(t(this).clone(!0)):t(this).val(""):e&&(!0===e&&/hidden/.test(s)||"string"==typeof e&&t(this).is(e))&&(this.value="")})},t.fn.resetForm=function(){return this.each(function(){("function"==typeof this.reset||"object"==i()(this.reset)&&!this.reset.nodeType)&&this.reset()})},t.fn.enable=function(t){return void 0===t&&(t=!0),this.each(function(){this.disabled=!t})},t.fn.selected=function(e){return void 0===e&&(e=!0),this.each(function(){var a=this.type;if("checkbox"==a||"radio"==a)this.checked=e;else if("option"==this.tagName.toLowerCase()){var s=t(this).parent("select");e&&s[0]&&"select-one"==s[0].type&&s.find("option").selected(!1),this.selected=e}})},t.fn.ajaxSubmit.debug=!1},"function"==typeof define&&a("nErl")?define(["jquery"],e):e(void 0!==t?t:window.Zepto)}).call(e,a("7t+N"))},VUyr:function(t,e,a){"use strict";var s={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"dealBox",style:{color:this.txt.color},domProps:{textContent:this._s(this.txt.txt)}},[this._v("    \n    状态\n")])},staticRenderFns:[]};var i=a("VU/8")({props:["state"],data:function(){return{txt:{txt:"",color:"#fff"},states:{}}},methods:{txts:function(){var t={txt:"",color:"#fff"};switch(this.states.fills){case 0:t.txt="未接单",t.color="#fff";break;case 1:t.txt="已接单",t.color="#4ae283";break;case 2:t.txt="延期申请",t.color="#fa6074";break;case 3:t.txt="延期申请通过",t.color="#ffa414";break;case 4:t.txt="已完成",t.color="#4ae283";break;case 5:t.txt="申请退单",t.color="#fa6074";break;case 6:t.txt="完成退单",t.color="#ffa414"}this.txt=t}},watch:{state:{handler:function(t){t&&(this.states=t,this.txts())},deep:!0}},created:function(){},mounted:function(){this.states=this.state,this.txts()}},s,!1,function(t){a("hy09")},"data-v-c2c1e45a",null);e.a=i.exports},VybY:function(t,e){},W7pl:function(t,e){},W95t:function(t,e){},WIfi:function(t,e){},Wwj4:function(t,e){},XM2w:function(t,e,a){"use strict";var s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"dealBox"},[a("div",{staticClass:"dealBtn"},[a("span",{on:{mouseenter:function(e){t.mousehover(t.btnss.fills.device_name,t.btnss.fills.serial)},mouseleave:function(e){t.mouseOut()}}},[t._v(t._s(t.btnss.fills.count))])])])},staticRenderFns:[]};var i=a("VU/8")({props:["btnss"],data:function(){return{radio:{radio3:"启动",color:"#4AE283",state:""}}},methods:{mousehover:function(t,e){this.$emit("mousehover",t,e)},mouseOut:function(){this.$emit("mouseOut")}},watch:{btnss:{handler:function(t){},deep:!0}},mounted:function(){}},s,!1,function(t){a("vAPk")},"data-v-37805af6",null);e.a=i.exports},XqFf:function(t,e){},XsGa:function(t,e,a){t.exports=a.p+"static/img/floors.f3ddf85.png"},Ym3h:function(t,e){},Yy2O:function(t,e){},ZKCf:function(module,__webpack_exports__,__webpack_require__){"use strict";(function($){var __WEBPACK_IMPORTED_MODULE_0__common_selfSwitch__=__webpack_require__("rjoR"),__WEBPACK_IMPORTED_MODULE_1__showOperate__=__webpack_require__("vFCm"),__WEBPACK_IMPORTED_MODULE_2__selfPopover3__=__webpack_require__("rVS7"),__WEBPACK_IMPORTED_MODULE_3__components_loopRender__=__webpack_require__("ybYj"),__WEBPACK_IMPORTED_MODULE_4__assets_js_utils__=__webpack_require__("KvKp"),__WEBPACK_IMPORTED_MODULE_5__common_table2__=__webpack_require__("yqZi"),__WEBPACK_IMPORTED_MODULE_6__common_lineEcharts4__=__webpack_require__("9u0Y");__webpack_exports__.a={components:{LineEcharts4:__WEBPACK_IMPORTED_MODULE_6__common_lineEcharts4__.a,Table:__WEBPACK_IMPORTED_MODULE_5__common_table2__.a,LoopRender:__WEBPACK_IMPORTED_MODULE_3__components_loopRender__.a,SelfPopover3:__WEBPACK_IMPORTED_MODULE_2__selfPopover3__.a,SelfSwitch:__WEBPACK_IMPORTED_MODULE_0__common_selfSwitch__.a},name:"airConditionerEnd",data:function(){var t=this;return{tuliBtnList:[],tuliTempBtnList:[],loading:!1,device_pic:[],tuliTit:"",tuliDeviceId:"",showDevice:{one:{show:!1,id:"",tit:"",unit:"",self_id:""},two:{show:!1,id:"",tit:"",unit:"",self_id:""},three:{show:!1,id:"",tit:"",unit:"",self_id:""}},deviceChecked:[],defaultProps:{children:"children",label:"label"},newNum:0,table:{showPagination:!0,hei:540,len:0,pageSize:20,page:1,data:[],th:[{prop:"num",label:"编号",wid:128},{prop:"device",label:"设备",wid:170},{prop:"position",label:"位置",wid:266},{prop:"time",label:"失败时间",wid:598},{prop:"operate",label:"操作",operate:!0,render:function(e,a){var s={item:a.row,mouseState:a.row.mouseState};return e(__WEBPACK_IMPORTED_MODULE_1__showOperate__.a,{props:{btnss:s},on:{look:t.look,ignore:t.ignore}})}}]},options:[],selectedOptions2:[],parentToggle:!1,tempVal:1,pumpSwitchText:"关闭",makeTempActive:"1",tempVal2:1,switchConVal:1,modeConVal:1,tabActive:0,tabData:[],loopRenderData:[],showLoopRender:!1,iframeWin2:{},deviceStates:[],showSingleDevice:!1,modelUrl2:"",object_device:[],yijianNowVal:void 0,yijianPointId:void 0,tempObjName:""}},methods:{updateModelState:function(){var t=this;console.log("我在这2",this.object_device),this.object_device.map(function(e,a){t.changeDeviceState(e.object_id,e.state)})},addMessageEvent:function(){window.addEventListener("message",this.handleMessage)},removeMessageEvent:function(){window.removeEventListener("message",this.handleMessage)},tuliBtnClick:function(t,e,a,s){this.requestOneKeyControl(t,e),this.tuliBtnList[a].now_value=e},hide:function(){this.showSingleDevice&&(Velocity($("#threeDBox2"),{height:"79.25vh"},{duration:300}),Velocity($("#deviceDetailBox2"),{height:0,marginTop:0},{duration:300})),this.showSingleDevice=!1},postInitJson:function(){this.iframeWin2.postMessage({cmd:"initJsonObj",params:{jsonObj:{"product-16f7b54a-1d6d-4450-a883-c034787d3203-body":{errname:null,objs:"deviceWaterhost1",runname:null},"product-16f7b54a-1d6d-4450-a883-c034787d32ea-body":{errname:null,objs:"deviceWaterhost2",runname:null},"product-5af82546-e39b-4e8a-95cb-31997ebf1bc7-body":{errname:null},"product-16f7b54a-1d6d-4450-a883-c034787d46aa-body":{errname:null}},messageobj:null}},"*")},postDeviceData:function(t){this.iframeWin2.postMessage({cmd:"sendDeviceInfoJson",params:{deviceInfoJson:t}},"*")},changeDeviceState:function(t,e){this.iframeWin2.postMessage({cmd:"changeDeviceState",params:{name:t,state:e}},"*")},handleMessage:function(t){var e=this,a=t.data;switch(a.cmd){case"reFoundObjName":var s=a.params.objName;this.tempObjName!=s&&(this.tempObjName=s,this.requestOneDeviceInfo(s)),this.postDeviceData(this.deviceStates);break;case"reDeviceClick":setTimeout(function(){e.getEchartsData(a.params.clickObjName),e.object_device.some(function(t,s){t.object_id===a.params.clickObjName&&(e.tuliDeviceId=t.device_id)}),e.showSingleDevice||(Velocity($("#deviceDetailBox2"),{height:"28.15vh",marginTop:"0.27vh"},{duration:300}),Velocity($("#threeDBox2"),{height:"48.62vh",marginTop:"2.74vh"},{duration:300})),e.showSingleDevice=!0},200);break;case"cancelDevice":console.log(a.params.cancelObject_id);break;case"initModel":a.params.finish?this.updateModelState():alert("模型加载错误")}},requestOneKeyControl:function(t,e){var a=this,s={point_id:t,now_value:e};this.$http.get("/realtime_pc/pc/control",s,{}).then(function(t){var e=t.data;console.log("点位设备控制2",s,t),e.code,a.$message(e.message)}).catch(function(t){a.$message(t)})},get3DFloor:function(){var t=this,e={sys_menu_id:arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.$store.state.sysList[1].sys_menu_id};this.$http.get("/hvac_pc/pc/floor",e,{}).then(function(a){var s=a.data;if(console.log("获取机房3d模型2",e,a),0==s.code)if(0===t.options.length){var i=s.data[0].floor_id;t.$store.state.airFloorId2=i;var n=[];s.data.map(function(t,e){var a={};a.value=t.floor_id,a.label=t.title,0!==t.son.length&&(a.children=[],t.son.map(function(t,e){var s={};s.value=t.floor_id,s.label=t.title,0!==t.son.length&&(s.children=[],t.son.map(function(t,e){var a={};a.value=t.floor_id,a.label=t.title,s.children.push(a)})),a.children.push(s)})),n.push(a)}),t.options=n,t.selectedOptions2=[i],t.modelUrl2=s.data[0].object_3d;var o=s.data[0].object_device;t.object_device=o}else t.options.some(function(e,a){if(t.$store.state.airFloorId2===e.value){t.modelUrl2=s.data[a].object_3d;var i=s.data[a].object_device;t.object_device=i}});else t.$message(s.message)}).catch(function(e){t.$message(e)})},requestOneDeviceInfo:function requestOneDeviceInfo(object_id){var _this6=this,that=this,config={object_id:object_id},headers={};"product-50a37d21-4ee5-4d74-a2cb-3c99354bb804-body_1_0"!=object_id&&this.$http.get("/hvac_pc/pc/index/device/point",config,headers).then(function(res){var data=res.data;if(console.log("模型中单设备信息2",config,res),0==data.code){var dataArr=data.data,tempArr=[];dataArr.map(function(item,i){var obj={};if(obj.tit=item.title,""!==item.params){var paramsObj=eval("("+item.params+")"),showvalueIndex=void 0;paramsObj.value.some(function(t,e){if(item.nowvalue==t)return showvalueIndex=e,!0}),obj.val=paramsObj.showvalue[showvalueIndex]}else obj.val=item.nowvalue+item.unit;tempArr.push(obj)}),_this6.deviceStates=tempArr}else _this6.$message(data.message),_this6.deviceStates=[]})},getEchartsData:function getEchartsData(object_id){var _this7=this;this.loading=!0;var that=this,config={object_id:object_id},headers={};this.$http.get("/hvac_pc/pc/index/device",config,headers).then(function(res){var data=res.data;if(console.log("获取echarts数据2",config,res),0==data.code){var commtable=data.data.commtable,tempArr1=[];commtable.map(function(t,e){var a={};a.id=t.point_id,a.title=t.title,a.unit=[],a.unit.push(t.unit),a.datas={},a.datas.id="selfEchart"+t.point_id,a.datas.style={width:"6.43rem",height:14600/728+"vh"},a.datas.showMarkL=!0,a.datas.markLineVal=t.standard,a.datas.list=[];var s={};s.name=t.title,s.data=t.data,a.datas.list.push(s),tempArr1.push(a)});var energytable=data.data.energytable;energytable.map(function(t,e){var a={};a.id=t.point_id,a.title=t.title,a.unit=[],a.unit.push(t.unit),a.datas={},a.datas.id="selfEchart"+t.point_id,a.datas.style={width:"6.43rem",height:14600/728+"vh"},a.datas.showMarkL=!0,a.datas.markLineVal=t.standard,a.datas.list=[];var s={};s.name=t.title,s.data=t.data,a.datas.list.push(s),tempArr1.push(a)}),_this7.tabData=tempArr1;var control=data.data.control,tempArr3=[],tempArr333=[];control.map(function(item3,i3){var params=item3.params;if(""!==params){var obj33={};obj33.now_value=item3.now_value,obj33.title=item3.title,obj33.unit=item3.unit,obj33.point_id=item3.point_id;var paramsObj=eval("("+params+")");obj33.btnList=[],paramsObj.showvalue.map(function(t,e){var a={};a.id=paramsObj.value[e],a.tit=t,obj33.btnList.push(a)}),tempArr3.push(obj33)}else{var obj333={};obj333.now_value=item3.now_value,obj333.title=item3.title,obj333.unit=item3.unit,obj333.point_id=item3.point_id,obj333.params=item3.params,tempArr333.push(obj333)}}),_this7.tuliBtnList=tempArr3,_this7.tuliTempBtnList=tempArr333;var device_info=data.data.device_info;_this7.tuliTit=device_info.name;var device_pic=data.data.device_pic,tempArr2=[];device_pic.map(function(t,e){var a={};a.category_func_id=t.category_func_id,a.codes=t.codes,a.device_pic_2d_id=t.device_pic_2d_id,a.id=t.id,a.title=t.title,a.type=t.type,a.update_date=t.update_date,t.type==device_info.now_state?a.show=!0:a.show=!1,tempArr2.push(a)}),_this7.device_pic=tempArr2,_this7.loading=!1}else _this7.loading=!1,_this7.$message(data.message)}).catch(function(t){_this7.loading=!1,_this7.$message(t)})},getCheckedArr:function(t,e,a,s){var i=this.$refs.hTree.getCheckedKeys();console.log(i),i.map(function(t,e){void 0==t&&i.splice(e,1)}),0!==i.length?this.deviceChecked=i:this.deviceChecked=[]},getControlFail:function(){var t=this,e={sys_menu_id:arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.$store.state.sysList[1].sys_menu_id,pagenumber:arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,pagesize:arguments.length>2&&void 0!==arguments[2]?arguments[2]:20};this.$http.get("/hvac_pc/pc/control/flase_record",e,{}).then(function(a){var s=a.data;if(console.log("获取控制失败列表",e,a),0==s.code){var i=[];t.table.len=s.paging;var n=s.data;t.newNum=n.length,n.map(function(e,a){var s={},n=a+1+20*(t.table.page-1);s.num=n<10?"0"+n:n,s.device=e.devicename,s.position=e.floor,s.time=e.time,s.index=a,s.mouseState=!1,i.push(s)}),t.table.data=i}else t.$message(s.message)}).catch(function(e){t.$message(e)})},requestMostControl:function requestMostControl(){var _this9=this,self_id=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1101,sysID=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.$store.state.sysList[1].sys_menu_id,that=this,config={self_id:self_id,sys_menu_id:sysID},headers={};this.$http.get("/hvac_pc/pc/air/control/title",config,headers).then(function(res){var data=res.data;if(console.log("获取批量控制信息",config,res),0==data.code){var headTit=data.data.title;headTit.map(function(part,index){switch(part.self_id){case 11025:if(_this9.showDevice.one.show=!0,_this9.showDevice.one.id=part.id,_this9.showDevice.one.tit=part.title,_this9.showDevice.one.self_id=part.self_id,""!=part.params){var obj=eval("("+part.params+")");_this9.switchConVal=obj.type}break;case 11021:_this9.showDevice.three.show=!0,_this9.showDevice.three.id=part.id,_this9.showDevice.three.tit=part.title,_this9.showDevice.three.unit=part.unit,_this9.showDevice.one.self_id=part.self_id}});var floor=data.data.floor,tempArr=[];floor.map(function(t,e){var a={};a.id=t.hasOwnProperty("id")?t.id:void 0,a.label=t.title,a.children=[],_this9.deviceChecked=[],0!==t.device.length&&t.device.map(function(t,e){var s={};s.id=t.id,s.label=t.title,a.children.push(s),1==t.state&&_this9.deviceChecked.push(t.id)}),tempArr.push(a)}),_this9.loopRenderData=tempArr}else _this9.$message(data.message)}).catch(function(t){_this9.$message(t)})},requestMostControlOperate:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.$store.state.sysList[1].sys_menu_id,e=arguments[1],a=arguments[2],s=this,i=arguments[3],n=arguments[4],o={sys_menu_id:t,category_id:e,nowvalue:a,floors:i};this.$http.get("/hvac_pc/pc/air/control/floor",o,{}).then(function(t){var e=t.data;console.log("批量控制操作",o,t),0==e.code?(11025===n?s.switchConVal=a:11021===n?console.log("温度修改成功",a):console.log("暂定为未知错误"),s.$message("修改成功")):s.$message(e.message)}).catch(function(t){s.$message(t)})},look:function(t){this.$message("查看")},ignore:function(t){console.log("忽略",t),this.table.data.splice(t.index,1),this.table.data.map(function(t,e){t.index=e})},rowEnter:function(t){t.mouseState=!0},rowLeave:function(t){t.mouseState=!1},changePage:function(t){this.getControlFail(this.$store.state.sysList[1].sys_menu_id,t)},handleChange:function(t){var e=this;console.log(t),this.hide(),this.$store.state.airFloorId2=t[0],setTimeout(function(){e.get3DFloor()},200)},tempHandleChange:function(t,e){this.requestOneKeyControl(t,e)},sureControl:function(){console.log(this.parentToggle),this.parentToggle=!this.parentToggle,this.$refs.dialog.hide()},openClosePump:function(t){},dealMakeTemp:function(t){0==t?this.makeTempActive=0:1==t&&(this.makeTempActive=1)},showControlFail:function(){this.$refs.dialog2.show()},showControlMost:function(){this.$refs.dialog3.show()},tempHandleChange2:function(t){this.requestMostControlOperate(this.$store.state.sysList[1].sys_menu_id,this.showDevice.three.id,t,0!==this.deviceChecked.length?this.deviceChecked.join(","):"",this.showDevice.three.self_id),console.log(t)},switchControl:function(t,e){this.requestMostControlOperate(this.$store.state.sysList[1].sys_menu_id,t.id,e,0!==this.deviceChecked.length?this.deviceChecked.join(","):"",t.self_id)},modeControl:function(t){this.modeConVal=t},tabToggle:function(t){this.tabActive=t}},created:function(){this.get3DFloor(),this.getControlFail(),this.requestMostControl()},mounted:function(){window.addEventListener("message",this.handleMessage),this.iframeWin2=this.$refs.iframe2.contentWindow},destroyed:function(){window.removeEventListener("message",this.handleMessage,!1)}}}).call(__webpack_exports__,__webpack_require__("7t+N"))},ZQ1G:function(t,e){},ZoHM:function(t,e){},"a/4d":function(t,e,a){"use strict";(function(t){var s=a("kArt"),i=a("8AwT");e.a={props:["data","query"],components:{SelectBox:s.a,InputBox:i.a},data:function(){return{options:[],formvals:{operator:this.$store.state.userInfoTotal.userinfo.name,description:"",floor:""},cssStyle:{width:"0.9rem",height:"0.3rem",color:"#4F648B",float:"left",lineHeight:"0.3rem",textAlign:"center",display:"inline-block"},labelInput:{text:"设备地址"},textAreaLabel:{text:"任务描述"},labelInput2:{text:"派发人"}}},methods:{sendWork:function(){console.log(this.formvals),this.$emit("sendInfosShow",this.formvals)},change1:function(t){this.formvals.sys_id=t,this.$emit("getDevVal",t)},change2:function(e){var a=this;t.each(this.query.devices,function(t,s){e==s.value&&(a.formvals.device_name=s.label,a.formvals.device_id=s.value)})},change3:function(t){this.formvals.user_id=t},change4:function(t){this.formvals.type_id=t},change5:function(t){this.formvals.priority=t}},mounted:function(){}}}).call(e,a("7t+N"))},avrW:function(t,e){},bC64:function(t,e,a){"use strict";var s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"dealBox"},[a("div",{staticClass:"dealBtn"},[a("span",{directives:[{name:"show",rawName:"v-show",value:t.isStop,expression:"isStop"}],on:{click:function(e){return e.stopPropagation(),t.update(e)}}},[t._v("修改")]),t._v(" "),a("span",{on:{click:function(e){return e.stopPropagation(),t.deletes(e)}}},[t._v("删除")]),t._v(" "),a("el-radio-group",{staticClass:"routeRadio",attrs:{fill:t.radio.color},on:{change:t.changeStatus},model:{value:t.radio.radio3,callback:function(e){t.$set(t.radio,"radio3",e)},expression:"radio.radio3"}},[a("el-radio-button",{attrs:{label:"启动"}}),t._v(" "),a("el-radio-button",{attrs:{label:"停用"}})],1)],1)])},staticRenderFns:[]};var i=a("VU/8")({props:["btnss"],data:function(){return{radio:{radio3:"启动",color:"#4AE283",state:""},isStop:!1}},methods:{changeStatus:function(t){this.getStatus(t),this.$emit("changeStatus",this.radio.radio3,this.btnss.item)},getStatus:function(t){switch(t){case"启动":this.radio.radio3="启动",this.radio.color="#4AE283";break;case"停用":this.radio.radio3="停用",this.radio.color="#f56c6c"}},update:function(){this.$emit("update",this.btnss.item)},deletes:function(){this.$emit("deletes",this.btnss.item)}},watch:{btnss:{handler:function(t){t&&(this.state=t.item.now_state,"1"==t.item.now_state?(this.radio.radio3="启动",this.isStop=!1,this.getStatus(this.radio.radio3)):2==t.item.now_state&&(this.radio.radio3="停用",this.isStop=!0,this.getStatus(this.radio.radio3)))},deep:!0}},mounted:function(){this.state=this.btnss.item.now_state,"1"==this.btnss.item.now_state?(this.radio.radio3="启动",this.getStatus(this.radio.radio3),this.isStop=!1):2==this.btnss.item.now_state&&(this.radio.radio3="停用",this.isStop=!0,this.getStatus(this.radio.radio3))}},s,!1,function(t){a("Asp7")},"data-v-45306986",null);e.a=i.exports},bn05:function(t,e){},cDKO:function(t,e){},"cY+i":function(t,e,a){t.exports=a.p+"static/img/approval.13db3ee.png"},cmci:function(t,e){},d7F3:function(t,e,a){"use strict";var s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"dealBox"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.canDealing,expression:"canDealing"}],staticClass:"dealBtn"},[a("span",{on:{click:function(e){return e.stopPropagation(),t.agree(e)}}},[t._v("同意")]),t._v(" "),a("span",{on:{click:function(e){return e.stopPropagation(),t.refult(e)}}},[t._v("拒绝")])]),t._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:!t.canDealing,expression:"!canDealing"}]},[t._v("-")])])},staticRenderFns:[]};var i=a("VU/8")({props:["btnss"],computed:{canDealing:function(){var t=!1;return 3==this.btnss.item.now_state&&(t=!0),t}},data:function(){return{}},methods:{agree:function(){this.$emit("agree",this.btnss.item,4)},refult:function(){this.$emit("refult",this.btnss.item,5)}},created:function(){},mounted:function(){}},s,!1,function(t){a("VBS9")},"data-v-472cd081",null);e.a=i.exports},dK46:function(t,e,a){"use strict";(function(t){a("GraD");var s=a("866P"),i=a("l2dl"),n=a("erZq");e.a={components:{"sys-head":s.a,first:i.a,second:n.a},data:function(){return{isSelectShow:!1,videoHtml:"",floorBgImg:"../../../assets/img/doorControl/bg_lc.png",selectedValue:"",selectedValue1:"",selectedValue2:"",isDeviceInfoPopShow:!1,isVideoShowBoxShow:!1,coefficientX:1.74,coefficientY:1.74,onVideoId:"",videoPanelBox:"",todaySpan:"",first:"first",second:"second",currentView:"first",isActive1:!0,isActive2:!1,onFloorId:"166",iframeSrc:"",totalVdeoNum:0,floorObjs:{},buildDatas:[],buildDatas1:[],buildDatas2:[],iList:[],sData:{lists:[{id:0,name:"查看视频",route:""}]}}},mounted:function(){this.getData("166"),this.getbuildData(),this.getDateSet(),window.addEventListener("message",this.handleMessage),this.iframeWin=this.$refs.iframe.contentWindow},methods:{emptyVideo:function(){this.isVideoShowBoxShow=!1,window.addEventListener("message",this.handleMessage),document.getElementById("videoPanelBox").innerHTML=""},removeMessageEvent:function(){window.removeEventListener("message",this.handleMessage)},handleMessage:function(t){var e=t.data;switch(console.log(e),console.log(e.params.clickObjName),e.cmd){case"reFoundObjName":break;case"reDeviceClick":console.log(e.params.clickObjName),this.viewLiveVideoFn(e.params.clickObjName);break;case"cancelDevice":console.log(e.params.cancelObject_id)}},chooseBuild:function(e){var a=[];t.each(this.buildDatas,function(t,s){s.floor_id==e&&(a=s.son)});var s="";t.each(this.floorObjs,function(t,a){a.floor_id==e&&(s=a.object_3d)}),this.iframeSrc=s,console.log(this.iframeSrc),this.selectedValue1="",this.buildDatas1=a,this.onFloorId=e,this.getData(e)},chooseBuild1:function(e){t.each(this.buildDatas1,function(t,a){a.floor_id==e&&a.child}),this.selectedValue2="",this.getData(e)},getData:function(e){console.log(this.$store.state),this.coefficientX=document.getElementById("floorImgBox").offsetWidth/518,this.coefficientY=document.getElementById("floorImgBox").offsetHeight/247;var a=this;this.$http.get("/hvac_pc/pc/floor",{sys_menu_id:this.$store.state.sysList[5].sys_menu_id,floor_id:e}).then(function(s){a.iList=s.data.data.object_device,t.each(s.data.data,function(t,s){s.floor_id==e&&(a.totalVdeoNum=s.object_device.length)}),console.log(s)},function(t){})},viewLiveVideoFn:function(t){this.isVideoShowBoxShow=!0,console.log(t);var e=this;this.$http.get("/hvac_pc/pc/index/device",{object_id:t}).then(function(t){console.log(t),e.onVideoId=t.data.data.device_info.name,e.videoHtml=t.data.data.device_pic[0].codes},function(t){})},getbuildData:function(){console.log(this.$store.state);var e=this;this.$http.get("/hvac_pc/pc/floor",{sys_menu_id:this.$store.state.sysList[5].sys_menu_id}).then(function(a){console.log(a),e.floorObjs=a.data.data,t.each(a.data.data,function(t,a){0==t&&(e.selectedValue=a.title,e.iframeSrc=a.object_3d),e.buildDatas.push({value:t,title:a.title,floor_id:a.floor_id})})},function(t){})},deviceInfoGet:function(t){this.isDeviceInfoPopShow=!0},clearIframeStale:function(){this.isDeviceInfoPopShow=!1,this.removeMessageEvent()},getDateSet:function(){var t=new Date,e=t.getFullYear(),a=t.getMonth()+1,s=t.getDate();a=a<10?"0"+a:a,s=s<10?"0"+s:s,this.todaySpan=e+"-"+a+"-"+s},toggleTabs:function(t){"first"==t?(this.isActive2=!1,this.isActive1=!0):"second"==t&&(this.isActive2=!0,this.isActive1=!1),this.currentView=t}}}}).call(e,a("7t+N"))},dXBL:function(t,e){},dgmn:function(t,e,a){"use strict";(function(t){e.a={props:["data"],data:function(){return{newData:{},isZero:!1,intervals:[]}},methods:{},created:function(){},watch:{data:{handler:function(e){var a=this;this.intervals=[],e&&(this.newData=e,0==this.newData.job_list.length&&(this.newData.job_list=[]),t.each(this.newData.job_list,function(t,e){0!=t&&a.intervals.push(e)}),0==this.newData.now_state?this.isZero=!0:this.isZero=!1)},deep:!0}},mounted:function(){this.newData=this.data,0==this.newData.now_state?this.isZero=!0:this.isZero=!1}}}).call(e,a("7t+N"))},eoWE:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAWCAYAAADXYyzPAAAAAXNSR0IArs4c6QAABCNJREFUSA3FVE2IW1UUPvfnvRcTphmqnWkRERTsoqAL18U6M1UKupqOolC60k1RcOVOKrhwJYguXGkRN1XBRdtRKO78QbCtSquLWnDUSps0k5m8JJPkvXuP37nJi23nRxeOXmbeuTnnfOe75+deov9pqf+C9/hx1he/rM0ZS1dOfjp9RTi3nXhhge/gRu0UE82Cjo2hJz48O7WotzPj55/kMkhPC2nW73SZvXOeXhTObSMW0uVOyHTGZ+mKyldrxM4ppruE2Mrn315C2ujWTyPuozrvXDMuvcGaGZlPF1z/iPjZuZX7+jzYrzV9/9HZqe8K8EYyZNqtnyHmA9a1f425dZXM0LOnlAN5WH9b6vmD9Wf63P8RgU54xxcOz9befuEQJyP8LaIgRW4HStS5PKHSn0papYlRrZLVqVLkC8CWxPOztaPK8weGfK+qVr5IKPsdQY/90a998/Rs/YEiiMgjj3FluVNfFNIydS5OqtYPIGzHloS4HWtKcYVcgdmUeH6u/hwxvWcpb+6xzcVJu/bztG18XlWdrwHe59ifXzh4/UhBupbXzzDxIxOme26XaX2bgDA21BaZWMZ/IB5nvGGPkekx8vxWpF3tbrN8Kra+Rx7TQV5Nm/a5is9+uZ7veNw5/T5K/1Q3r92DAzxUNWtfTdv0vFwW+OKRUMCwUhgO/GRCj/ENax0xMn2JvH8DpFfvL6+ejLzrDz11iEFAJnbQmrTL7/6WTcy08+SQVpTttN3P9kStC8Ow8kVhYcBZsQeb1ayyTYgPz9ReZu9fT5Rf2ltunoi175OcdryGezwESqGMe6PVj5HCJ4S6GxPui0J6xeAOUTfhpWRFqHHGC7P1Vzz7VxPtLj9Ybb5j2WdaKhUWxkt5hASlVE5Z6GVORvcEAljoFewEWfjdhld8a6llSLwDqfGXHt6x+mZJu4zwqJJD8JHkkIl0DZcCJkbP8QrhJ8ME3eiGwhxUZFCd2/DrMsY5jsKvuX9X87UYmcpwyNHC0YUJKaBi0qygFxnOAx/JufDVcoCwNsOjx6M1KrWa1ORvVIxvej8sT2JhynMMBcrsndLecE45BgsXDHohScQ3+MFVi47UVniWB2TUvHGPcRBXUqbl4lwZZ9lpSINeiiMmSVJDlrBlHJsonHvoK2lnFNPNuo3xwhGA+IyJpf54XdpeG7znmQqEYYhR+RhBB5AckY+YMQJKdN6NfMUua4Ah2wK/rseCQUddQr2UohJRNArUQyBkHUooMpI+4w/2OGMeROip+MKPAAubLfDCIV6y/soYyp2VUpoO9USymZAfGOKso8qlChc2UadGUQkXzkW4QHI70YqJSinABLURfkNipOwb2rYFc++dA17SsRJJl4iWdlfV1LUBN3ZDByk+Yd/Efh/sI9+lRhymejO8cAhW1p8VuFI1Vyg8ZQAAAABJRU5ErkJggg=="},erWL:function(t,e){},erZq:function(t,e,a){"use strict";var s={props:["onVideoId"],data:function(){return{deviceInfos:[]}},mounted:function(){this.getData()},methods:{getData:function(){var t=this;this.$http.post("/video_monitoring/video_maintenance",{device_id:t.onVideoId}).then(function(e){console.log(e.data.data),t.deviceInfos=e.data.data},function(t){})}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"maintenanceRecord"},[a("el-scrollbar",[a("ul",{staticClass:"devHistryList"},t._l(t.deviceInfos,function(e){return a("li",[a("span",{staticClass:"dateHistryBox"},[t._v(t._s(e.c_datetime)),a("a",[a("i"),t._v(t._s(e.show_name))])]),t._v(" "),a("span",{staticClass:"maintenanceContent"},[t._v(t._s(e.show_content))])])}))])],1)},staticRenderFns:[]};var n=a("VU/8")(s,i,!1,function(t){a("feUg")},null,null);e.a=n.exports},f6zP:function(t,e,a){"use strict";(function(t){var s=a("866P"),i=a("KvKp"),n=a("kArt"),o=a("ldEJ"),r=a("Rg6g"),l=a("xV7d"),c=a("yivU"),d=a("KJ2l");e.a={components:{Table:c.a,SelectBox:n.a,Header:s.a,Page:d.a},data:function(){var t=this;return{value1:"",currentPage:1,value2:"",navsData:{active:"item2",lists:[{id:0,name:"首页",route:"/AgentManage/normalUser"},{id:1,name:"排班表",route:"/AgentManage/normalUser/schedule"},{id:2,name:"工单",route:"/AgentManage/normalUser/workList"},{id:3,name:"巡检",route:"/AgentManage/normalUser/routing"},{id:4,name:"完成情况",route:"/AgentManage/normalUser/report"}]},page:{totalDataNumber:0,currentPage:0,totalPageNum:0},page2:{totalDataNumber:0,currentPage:0,totalPageNum:0},tabPosition:"正常处理",crumbs:["代维系统","工单"],workH:[],vSystems:[],vTypes:[{label:"手工派发",value:"1"},{label:"系统派发",value:"0"},{label:"投诉",value:"2"},{label:"维保工单",value:3}],vtype:"",vsystem:"",names:[],dialogBoxs:{item:{name:""},state0:0,txt:"是否确定退单"},dialogBoxs2:{item:{name:""},state0:0,txt:"是否确定退单"},dtlObj:{title:"工单详情",sendSrc:"",jinji:"",pic1:[],pic2:[],devices:[]},vName:-1,value7:"8-24",cant:!1,table:{hei:328,data:[],th:[{prop:"serial",label:"编号"},{prop:"title",label:"类别"},{prop:"floor",label:"地点",wid:180},{prop:"addtime",label:"派发时间"},{prop:"devicename",label:"设备名称"},{prop:"description",label:"内容描述"},{prop:"type_id",label:"派发类别",operate:!0,render:function(t,e){var a={fills:e.row.type_id};return t(o.a,{props:{state:a},on:{}})}},{prop:"now_state",label:"状态",operate:!0,render:function(t,e){var a={fills:e.row.now_state};return t(r.a,{props:{state:a},on:{}})}},{prop:"dealed",label:"操作",wid:170,operate:!0,render:function(e,a){var s={item:a.row};return e(l.a,{props:{btnss:s},on:{agree:t.agree,refult:t.refult}})}}]},infoItem:{},dealWorkParam:{item:{id:"",user_id:""}}}},methods:{changeCurrentPage:function(t){this.currentPage=t,this.getTableList()},change1:function(t){this.vsystem=t},change2:function(t){this.vtype=t},changeStatus:function(t){console.log(t)},changes:function(t){this.value7=t},deletes:function(){var t=this.value7.split("-");1==t[2]?(2==t[1]||4==t[1]||6==t[1]||8==t[1]||9==t[1]||11==t[1]||1==t[1]?t[2]=31:5==t[1]||7==t[1]||10==t[1]?t[2]=30:3==t[1]&&Number(t[0])%4==0?t[2]=29:3==t[1]&&Number(t[0])%4!=0&&(t[2]=28),1==t[1]?(t[1]=12,t[0]=Number(t[0])-1):t[1]=Number(t[1])-1):t[2]=Number(t[2])-1,this.value7=t.join("-")},adds:function(){if(!this.cant){var t=this.value7.split("-");(1==t[1]||3==t[1]||5==t[1]||7==t[1]||8==t[1]||10==t[1]||12==t[1])&&31==t[2]||(2==t[1]||6==t[1]||9==t[1]||11==t[1])&&30==t[2]||2==t[1]&&Number(t[0])%4==0&&29==t[2]||2==t[1]&&Number(t[0])%4!=0&&28==t[2]?(t[2]=1,12==t[1]?(t[1]=1,t[0]=Number(t[0])+1):t[1]=Number(t[1])+1):t[2]=Number(t[2])+1,this.value7=t.join("-")}},rowClick:function(t){var e=this;this.infoItem=t,this.$refs.tableInfos2.show(),this.$http.post("/pc_ims/staff/jobinfo_user",{job_id:t.id}).then(function(a){0==a.data.code?(e.dtlObj=a.data.data.info,e.dtlObj.dtlIsShow=t.dtlIsShow,e.value1=e.dtlObj.end_time.split(" ")[0],e.value2=e.dtlObj.end_time.split(" ")[1],e.dtlObj.pic1=a.data.data.pic1,e.dtlObj.pic2=a.data.data.pic2,1==e.dtlObj.priority?e.dtlObj.jinji="一般":2==e.dtlObj.priority?e.dtlObj.jinji="普通":e.dtlObj.jinji="严重",1==e.dtlObj.type_id?e.dtlObj.sendSrc="手工派发":2==e.dtlObj.type_id?e.dtlObj.sendSrc="投诉工单":3==e.dtlObj.type_id&&(e.dtlObj.sendSrc="维保工单"),e.dtlObj.devices=[{label:"类型",value:a.data.data.sys_name},{label:"设备名称",value:e.dtlObj.device_name},{label:"设备地点",value:e.dtlObj.floor},{label:"工单处理人员",value:e.dtlObj.user_name}]):e.$message({type:"error",message:a.data.msg})})},agree:function(t,e){this.dealWorkParam=t,this.dealWorkParam.type=e,this.dealWork()},refult:function(t,e){5==e&&(this.dialogBoxs2={item:t,state0:0,txt:"是否确定退单"}),this.$refs.isRefult.show(),this.dealWorkParam=t,this.dealWorkParam.type=e},dealWork:function(){var t=this;this.dealWorkParam.info||(this.dealWorkParam.info=""),this.dealWorkParam.pic1&&0!=this.dealWorkParam.pic1.length||(this.dealWorkParam.pic1=[]),this.dealWorkParam.pic2&&0!=this.dealWorkParam.pic2.length||(this.dealWorkParam.pic2=[]),this.dealWorkParam.end_time||(this.dealWorkParam.end_time=""),this.dealWorkParam.item||(this.dealWorkParam.item={},this.dealWorkParam.item.id=this.dealWorkParam.id,this.dealWorkParam.item.user_id=this.dealWorkParam.user_id),console.log(this.dealWorkParam),this.$http.post("/pc_ims/write_job",{id:this.dealWorkParam.item.id,type:this.dealWorkParam.type,pic1:this.dealWorkParam.pic1,pic2:this.dealWorkParam.pic2,end_time:this.dealWorkParam.end_time,user_id:this.dealWorkParam.item.user_id,new_user_id:"",info:this.dealWorkParam.info,dispatch_user_id:this.$store.state.userInfoTotal.userinfo.id}).then(function(e){0==e.data.code?(t.$message({type:"success",message:e.data.msg,duration:2e3}),t.getTableList(),t.$refs.tableInfos2.hide(),4!=t.dealWorkParam.type&&2!=t.dealWorkParam.type||(t.value1="",t.value2="")):t.$message({type:"error",message:e.data.msg,duration:2e3})})},backWork:function(t,e){if(2==e){if(!this.value1||!this.value2)return void this.$message({type:"error",message:"请选择延期时间",duration:2e3});var a="",s="";this.value1&&(a=i.a.time(new Date(this.value1)/1e3,1)),this.value2&&(s=this.value2),t.endtime=a+" "+s}else t.endtime||(t.endtime="");this.dealWorkParam={item:{id:t.id,user_id:t.user_id},type:e,info:t.complete_info,end_time:t.endtime,pic1:t.pic1,pic2:t.pic2},this.dealWorkParam.type=e,0==e?this.$refs.tableInfos2.hide():this.dealWork()},submitOk:function(){this.$refs.isRefult.hide(),this.$refs.isRefult2.show(),this.dealWorkParam.info=""},submitBack:function(){this.dealWorkParam.info&&""!=this.dealWorkParam.info?(this.dealWork(),this.$refs.isRefult2.hide()):this.$message({type:"error",message:"请输入退单原因",duration:2e3})},submitNo:function(){this.$refs.isRefult.hide()},sendWork2:function(){this.$refs.sendWork2.hide()},sendWork:function(){this.$refs.send.show()},sendInfosShow:function(){},infoTit:function(t){var e="";switch(t){case 0:e="未接单";break;case 1:e="延期审核中";break;case 2:e="延期处理";break;case 3:e="处理中";break;case 4:e="已完成"}return e},getTopData:function(){var t=this;this.$http.post("/pc_ims/staff/jobdata").then(function(e){if(0==e.data.code){var a=e.data.data;t.workH=[{id:1,tit:"今日工单总数",val:a.count,color:"#f38a00"},{id:2,tit:"未完成",val:a.wei,color:"#f56c6c"},{id:3,tit:"已完成数量",val:a.wan,color:"#4AE283"}]}else t.$message({type:"error",message:e.data.msg})})},getTableList:function(){var e=this;this.$http.post("/pc_ims/staff/jobdata_user",{sys_name:this.vsystem,type:this.vtype,pagenumber:this.currentPage,pagesize:"20"}).then(function(a){console.log(a),0==a.data.code?(t.each(a.data.data,function(t,s){a.data.data[t].serial=20*(e.currentPage-1)+1+t,0==s.now_state?a.data.data[t].dtlIsShow=!1:a.data.data[t].dtlIsShow=!0}),e.page={currentPage:e.currentPage,totalDataNumber:20*a.data.pages,totalPageNum:a.data.pages},e.table.len=a.data.count,e.table.data=a.data.data):e.$message({type:"error",message:a.data.msg})})},getSystemsOptions:function(){var e=this;this.$http.post("/pc_ims/get_sysmenu").then(function(a){if(0==a.data.code){var s=a.data.data;t.each(s,function(t,e){s[t].label=s[t].title,s[t].value=s[t].title}),e.vSystems=s}else e.$message({type:"error",message:a.data.msg})})}},mounted:function(){this.getTopData(),this.getTableList(),this.getSystemsOptions()}}}).call(e,a("7t+N"))},fFTH:function(t,e){},fTIN:function(t,e){},fYqQ:function(t,e,a){"use strict";(function(t){var s=a("mtWM");a.n(s);e.a={props:{isResize:{type:Number}},data:function(){return{revenueCharts1:{},animate1:!1,animate2:!1,loading:!1,isSystemHover:!1,isEquipmentHover:!1,broadOneList:[],broadTwoList:[],conditionInterval:null,conditionData:[{name:""},{name:""}],types:0,patternData:[]}},components:{},mounted:function(){this.initData()},watch:{isResize:function(){t("#conditionEcharts1 canvas").remove(),t("#conditionEcharts2 canvas").remove(),clearInterval(this.conditionInterval),this.initData()}},beforeDestroy:function(){clearInterval(this.conditionInterval)},methods:{changeType:function(e){t("#conditionEcharts1 canvas").remove(),t("#conditionEcharts2 canvas").remove(),this.types=e,clearInterval(this.conditionInterval),0==e&&(this.broadOneList=this.conditionData[0].data3,this.broadTwoList=this.conditionData[0].data4,this.patternData=this.conditionData[0].data2,console.log(this.conditionData[0].data2),1==this.conditionData[0].data1.length&&this.drawEchart1(this.conditionData[0].data1),2==this.conditionData[0].data1.length&&(this.drawEchart1(this.conditionData[0].data1),this.drawEchart2(this.conditionData[0].data1))),1==e&&(this.broadOneList=this.conditionData[1].data3,this.broadTwoList=this.conditionData[1].data4,this.patternData=this.conditionData[1].data2,console.log(this.conditionData[1].data2),1==this.conditionData[1].data1.length&&this.drawEchart1(this.conditionData[1].data1),2==this.conditionData[1].data1.length&&(this.drawEchart1(this.conditionData[0].data1),this.drawEchart2(this.conditionData[1].data1))),this.conditionInterval=setInterval(this.scroll,5e3)},deletCli:function(){this.$emit("deletClick",{self_id:1,componentsName:"Conditioning"})},initData:function(){var t=this;this.$http.get("/index_pc/pc/model",{self_id:1}).then(function(e){e.data.data[0].data4.map(function(t,e){t.param=JSON.parse(t.param)}),t.broadOneList=e.data.data[0].data3,t.broadTwoList=e.data.data[0].data4,t.patternData=e.data.data[0].data2,t.patternData[0].param=JSON.parse(t.patternData[0].param),t.patternData[1]&&(t.patternData[1].param=JSON.parse(t.patternData[1].param)),t.conditionData=e.data.data,t.conditionInterval=setInterval(t.scroll,5e3),1==t.conditionData[0].data1.length&&t.drawEchart1(t.conditionData[0].data1),2==t.conditionData[0].data1.length&&(t.drawEchart1(t.conditionData[0].data1),t.drawEchart2(t.conditionData[0].data1))}).catch()},scroll:function(){var t=this;this.isSystemHover||(this.animate1=!0,setTimeout(function(){t.broadOneList.push(t.broadOneList[0]),t.broadOneList.shift(),t.animate1=!1},500)),this.isEquipmentHover||(this.animate2=!0,setTimeout(function(){t.broadTwoList.push(t.broadTwoList[0]),t.broadTwoList.shift(),t.animate2=!1},500))},enter:function(t){1==t?this.isSystemHover=!0:this.isEquipmentHover=!0},mouseleave:function(t){1==t?this.isSystemHover=!1:this.isEquipmentHover=!1},drawEchart1:function(e){var a=this.$refs.conditionEcharts1.clientWidth,s={width:a,height:a,outCircleObj:{lineWidth:4,bgColor1:"#FF0000",bgColor2:"#FAD961",bgColor3:"#59FF16"},inCircleObj:{lineWidth:14,bgColor1:"#FAD961",bgColor2:"#F7A51C",bgColor3:"#FAD961",text:[0,1,2,3,4],textColor:"#ffffff",opacity:"0.3"},space:4,title:{text:e[0].name,color:"#ffffff",size:"14"},dataValue:{text:e[0].value,color:"#F7A51C",size:"20"}};t("#conditionEcharts1").circleChart(s)},drawEchart2:function(e){var a=this.$refs.conditionEcharts1.clientWidth,s={width:a,height:a,outCircleObj:{lineWidth:4,bgColor1:"#FF0000",bgColor2:"#FAD961",bgColor3:"#59FF16"},inCircleObj:{lineWidth:14,bgColor1:"#FAD961",bgColor2:"#F7A51C",bgColor3:"#FAD961",text:[0,1,2,3,4],textColor:"#ffffff",opacity:"0.3"},space:4,title:{text:e[1].name,color:"#ffffff",size:"14"},dataValue:{text:e[1].value,color:"#F7A51C",size:"20"}};t("#conditionEcharts2").circleChart(s)}}}}).call(e,a("7t+N"))},fbJJ:function(t,e){},feUg:function(t,e){},ftYy:function(t,e,a){"use strict";var s=a("NQt3"),i={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"agentComponent",attrs:{"element-loading-background":"rgba(0, 0, 0, 0.5)","element-loading-spinner":"el-icon-loading","element-loading-text":"拼命加载中"}},[s("div",{staticClass:"title"},[s("span",{staticClass:"titleIcon"}),t._v(" "),s("span",{staticClass:"txt"},[t._v("设备情况")]),t._v(" "),s("img",{attrs:{src:a("Ilry"),alt:""},on:{click:t.deletCli}})]),t._v(" "),s("div",{staticClass:"con",class:{hidden:1==t.loading}},[s("div",{staticClass:"chart",attrs:{id:"equipmentOne"}},[t._m(0),t._v(" "),s("div",{staticClass:"chartInfo",attrs:{title:"故障总数"+t.data.fault+"台"}},[s("div",{staticClass:"persent"})]),t._v(" "),s("div",{staticClass:"counts"},[s("span",{staticClass:"countsBg countsL"}),t._v(" "),s("div",{staticClass:"info"},[t._v("\n          共 "),s("span",{domProps:{textContent:t._s(t.data.count)}},[t._v("1000")]),t._v(" 台\n        ")]),t._v(" "),s("span",{staticClass:"countsBg countsR"})])]),t._v(" "),s("div",{staticClass:"sparet"}),t._v(" "),s("div",{ref:"equipmentTwo",staticClass:"chart",attrs:{id:"equipmentTwo"}}),t._v(" "),s("div",{ref:"equipmentThree",staticClass:"chart",attrs:{id:"equipmentThree"}})])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tips"},[e("div",{staticClass:"icon cor-r"}),this._v(" "),e("div",{staticClass:"txt first"},[this._v("故障总数")]),this._v(" "),e("div",{staticClass:"icon cor-b"}),this._v(" "),e("div",{staticClass:"txt"},[this._v("设备总数")])])}]};var n=function(t){a("6MXE")},o=a("VU/8")(s.a,i,!1,n,"data-v-61c63a7c",null);e.a=o.exports},g3Gj:function(t,e){},g6SQ:function(t,e){},g9YM:function(t,e){},gDxe:function(t,e){},gSaj:function(t,e){},gaO9:function(t,e){},gdAg:function(t,e,a){"use strict";var s={props:["doorInfoId","doorInfomation","doorDeviceId","floorIds"],data:function(){return{toPageNum:1,totalPageNum:3,total:0,tableData:[],pagesize:20,currentPage:1,currPage:""}},watch:{doorInfomation:function(t,e){this.tableData=t}},mounted:function(){},methods:{getData:function(){var t=this;this.$http.post("/entrance/record",{sys_menu_id:this.$store.state.sysList[14].sys_menu_id,project_id:this.$store.state.projectId,floor_id:t.floorIds,device_id:t.doorDeviceId}).then(function(e){console.log(e.data.data),t.tableData=e.data.data.entrance_guard_record},function(t){})},exportTable:function(){this.$http.post("/entrance/record",{sys_menu_id:this.$store.state.sysList[14].sys_menu_id,project_id:this.$store.state.projectId,floor_id:this.floorIds,export:1}).then(function(t){var e="http://"+t.data;console.log(e),window.open(e)},function(t){})},toInputPage:function(){this.currentPage=Number(this.currPage),this.getData()},doSearch:function(){},addPolicy:function(){},handleEdit:function(t,e){},handleSizeChange:function(t){this.pagesize=t},handleCurrentChange:function(t){this.currentPage=Number(t),this.currPage=this.currentPage,this.getData()},doorInfoHide:function(){this.$emit("doorInfoHide",!1)}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"doorInfo"},[a("div",{staticClass:"doorExportPanel"},[a("span",[t._v(t._s(t.doorInfoId)+" 信息")]),t._v(" "),a("button",{staticClass:"btn floatRt",on:{click:t.exportTable}},[a("i",{staticClass:"exportIcon"}),t._v("导出")]),t._v(" "),a("a",{staticClass:"closeDoorInfo",on:{click:t.doorInfoHide}},[t._v("×")])]),t._v(" "),a("div",{staticClass:"doorInfoBgBox"},[a("div",{staticClass:"tableBox"},[a("el-table",{staticStyle:{width:"100%",height:"100%"},attrs:{data:t.tableData}},[a("el-table-column",{attrs:{prop:"show_id",label:"编号",align:"cneter"}}),t._v(" "),a("el-table-column",{attrs:{prop:"id_card",label:"ID卡号",align:"cneter"}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"姓名",align:"cneter"}}),t._v(" "),a("el-table-column",{attrs:{prop:"department",label:"部门",align:"cneter"}}),t._v(" "),a("el-table-column",{attrs:{prop:"card_type",label:"卡类型",align:"cneter"}}),t._v(" "),a("el-table-column",{attrs:{prop:"device_name",label:"设备名称",align:"cneter"}}),t._v(" "),a("el-table-column",{attrs:{prop:"door_name",label:"门名称",align:"cneter"}}),t._v(" "),a("el-table-column",{attrs:{prop:"open_datetime",label:"开门时间",align:"cneter"}}),t._v(" "),a("el-table-column",{attrs:{prop:"tag",label:"开门事件"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("a",{staticClass:"cursor",on:{click:function(a){t.handleEdit(e.$index,e.row)}}},[t._v(t._s(e.row.open_event))])]}}])})],1),t._v(" "),a("div",{staticClass:"paginationBox"},[a("div",{staticClass:"totalPageNumBox"},[t._v("共"+t._s(t.totalPageNum)+"页")]),t._v(" "),a("div",{staticClass:"el-input el-pagination__editor is-in-pagination curPageBox"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.toPageNum,expression:"toPageNum"}],staticClass:"el-input__inner",attrs:{type:"number",autocomplete:"off"},domProps:{value:t.toPageNum},on:{input:function(e){e.target.composing||(t.toPageNum=e.target.value)}}}),t._v(" "),a("span",{on:{click:t.toInputPage}},[t._v("GO")])]),t._v(" "),a("el-pagination",{attrs:{"current-page":t.currentPage,"page-size":t.pagesize,"page-count":t.totalPageNum,layout:"prev, pager, next"},on:{"current-change":t.handleCurrentChange}})],1)],1)])])},staticRenderFns:[]};var n=a("VU/8")(s,i,!1,function(t){a("zJUL")},null,null);e.a=n.exports},"gv/2":function(t,e){},gxOK:function(t,e){},h5yF:function(t,e){},haZd:function(t,e,a){"use strict";var s={props:{wid:{type:Number,default:300},hei:{type:Number,default:32},placeholder:{type:String,default:"请输入搜索内容"}},data:function(){return{inputs:""}},computed:{},methods:{search:function(){this.$emit("search",this.inputs)}},created:function(){},mounted:function(){}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"searchBox",style:{width:t.wid/100+"rem",height:100*t.hei/728+"vh"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.inputs,expression:"inputs"}],attrs:{type:"text",placeholder:t.placeholder},domProps:{value:t.inputs},on:{input:function(e){e.target.composing||(t.inputs=e.target.value)}}}),t._v(" "),a("div",{staticClass:"searchBtn",on:{click:function(e){t.search()}}},[a("i",{staticClass:"el-icon-search"})])])},staticRenderFns:[]};var n=a("VU/8")(s,i,!1,function(t){a("hyKV")},"data-v-1719b5fb",null);e.a=n.exports},hqqq:function(t,e){},hy09:function(t,e){},hyKV:function(t,e){},iUy2:function(t,e){},iVjX:function(t,e,a){"use strict";var s=a("bOdI"),i=a.n(s),n={props:["datas"],computed:{titShow:function(){var t=!0;return void 0!==this.datas.titShow&&(this.datas.titShow||(t=!1)),t}},data:function(){return{num:0,legends:[{img:a("eoWE")},{img:a("VIz/")},{img:a("pLEv")}],color:[{color1:"rgba(69,50,138,1)",color2:"rgba(69,50,138,0.69)"},{color1:"rgba(46,204,223,1)",color2:"rgba(46,204,223,0.69)"},{color1:"rgba(55, 42, 191,1)",color2:"rgba(55, 42, 191,0.69)"}]}},methods:{drawLine:function(){for(var t,e=this.$echarts.init(document.getElementById(this.datas.id)),a=[],s=this.datas,n=s.list.length,o=0;o<n;o++){var r={name:s.list[o].name,data:s.list[o].data,type:"line",smooth:!0,symbol:"circle",symbolSize:9,showSymbol:!1,itemStyle:{color:this.color[o].color1,borderColor:"#fff",borderWidth:2,shadowColor:this.color[o].color2,shadowBlur:1},areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:this.color[o].color1},{offset:1,color:"transparent"}],globalCoord:!1}}};a.push(r)}var l={dataZoom:[{show:!1},{type:"inside",realtime:!0,start:0,end:100}],grid:{top:void 0===this.titShow||this.titShow?"29%":"5%",left:"0%",right:"0%",bottom:"0%",containLabel:!0},tooltip:(t={trigger:"axis",axisPointer:{snap:!0,lineStyle:{opacity:1,color:"#fff"}},backgroundColor:"#fff",formatter:function(t){for(var e="",a=t.length,s=0;s<a;s++){e+='<span style = "padding:0 4px;color:'+t[s].color+'">'+t[s].value+"</span>"}return"<span>"+e+"</span>"}},i()(t,"backgroundColor","#fff"),i()(t,"confine",!0),i()(t,"padding",[12,28]),i()(t,"textStyle",{fontFamily:"PingFangSC-Regular",fontSize:"0.14rem",color:"#000"}),i()(t,"extraCssText","box-shadow: 0px 1px 10px 0px rgba(0, 0, 0, 0.5);border-radius:4px"),t),xAxis:{position:"top",type:"category",axisLabel:{show:!0,textStyle:{color:"#708FBE"},fontSize:10},axisTick:{show:!1},splitLine:{show:!0,lineStyle:{opacity:.1},interval:1},data:this.datas.xDate},yAxis:{type:"value",axisLine:{show:!1},axisTick:{show:!1},axisLabel:{show:!1},splitLine:{show:!1},splitArea:{show:!1}},series:a};e.setOption(l)}},created:function(){},mounted:function(){this.drawLine()}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"myChartBox"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.titShow,expression:"titShow"}],staticClass:"head"},[a("div",{staticClass:"title",domProps:{textContent:t._s(this.datas.title)}}),t._v(" "),a("div",{staticClass:"legend"},t._l(this.datas.list,function(e,s){return a("div",{staticClass:"item"},[a("img",{attrs:{src:t.legends[s].img,alt:""}}),t._v(" "),a("span",{staticClass:"text",domProps:{textContent:t._s(e.name)}})])}))]),t._v(" "),a("div",{staticClass:"body",staticStyle:{width:"100%",overflow:"auto!important"}},[a("span",{staticClass:"unit",domProps:{textContent:t._s("单位:"+this.datas.unit)}}),t._v(" "),a("div",{staticClass:"myChart",staticStyle:{width:"2000px"},attrs:{id:this.datas.id}})])])},staticRenderFns:[]};var r=a("VU/8")(n,o,!1,function(t){a("Ji/2")},"data-v-11ff5682",null);e.a=r.exports},if9O:function(t,e){},im2C:function(t,e){},jCW5:function(t,e,a){t.exports=a.p+"static/img/smallAlarm.e3f2734.png"},jNQZ:function(t,e,a){"use strict";var s={props:["options","value","placeholder","type","vmultiple"],data:function(){return{value0:""}},computed:{},methods:{beFirst:function(){this.value0=""},searchVal:function(t,e){for(var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"选择",s=t.length,i=a,n=0;n<s;n++)t[n].value==e&&(i=t[n].label);return i},change:function(){this.$emit("change",this.value0)}},watch:{vmultiple:function(t){this.vmultiple=!!t},value:{handler:function(t){t&&(this.value0=t)},deep:!0}},created:function(){this.value0=this.value},mounted:function(){}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"chooseBox2",class:{cooseBoxs:void 0!=t.type}},[a("div",{staticClass:"chooseBoxIn"},[a("span",{domProps:{textContent:t._s(t.searchVal(t.options,t.value0,t.placeholder))}}),t._v(" "),a("i",{staticClass:"el-icon-caret-bottom"})]),t._v(" "),a("el-select",{staticClass:"chooseBox areaBox",attrs:{placeholder:t.placeholder},on:{change:function(e){t.change()}},model:{value:t.value0,callback:function(e){t.value0=e},expression:"value0"}},t._l(t.options,function(e,s){return a("el-option",{key:s,attrs:{multiple:t.vmultiple,label:e.label,value:e.value}})}))],1)},staticRenderFns:[]};var n=a("VU/8")(s,i,!1,function(t){a("/UVY")},"data-v-15b67169",null);e.a=n.exports},jgfL:function(t,e,a){"use strict";(function(t){var s=a("XLwt");a.n(s);e.a={name:"echarts-analysis",props:["data"],data:function(){return{viewsLoading:!1,isReset:!1,rtChartLabel:[],rtArr1:[],rtArr2:[],rtArr3:[],areaEnergyRzl:[],areaEnergyKf:[],trendData:[],trendValueData:[],seviceAllDatas:{},areaDateType:"",trendYlabelArray1:[{name:"能耗",nameTextStyle:{color:"#fff",fontSize:10},axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!1},axisLabel:{show:!0,color:"#fff"},splitArea:{show:!0,areaStyle:{color:["rgba(142,187,255,.1)","rgba(142,187,255,.05)"]}},type:"value"},{name:"入住率",nameTextStyle:{color:"#fff",fontSize:10},axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!1},axisLabel:{show:!0,color:"#fff"},splitArea:{show:!0,areaStyle:{color:["rgba(142,187,255,.1)","rgba(142,187,255,.05)"]}},type:"value"}],trednYlabelArray2:[{name:"能耗",nameTextStyle:{color:"#fff",fontSize:10},axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!1},axisLabel:{show:!0,color:"#fff"},splitArea:{show:!0,areaStyle:{color:["rgba(142,187,255,.1)","rgba(142,187,255,.05)"]}},type:"value"}],trednYlabelArray3:[{name:"",nameTextStyle:{color:"#fff",fontSize:10},axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!1},axisLabel:{show:!0,color:"#fff"},splitArea:{show:!0,areaStyle:{color:["rgba(142,187,255,.1)","rgba(142,187,255,.05)"]}},type:"value"}]}},watch:{data:{handler:function(t){this.getChartLineData()},deep:!0}},methods:{getChartLineData:function(){var e=this;e.viewsLoading=!0;var a=e.data,s={project_id:a.config.project_id,sys_menu_id:a.config.sys_menu_id,area_query_date_type:a.config.area_query_date_type,area_date:a.config.area_date,energy_type:a.config.energy_type};return e.$http.post("/hotel_energy/analysis",s).then(function(s){e.trendData=s.data.data.area_energy_use.trend_data;var i=s.data.data.area_energy_use.trend_data,n=[],o=[];t.each(i.check_in_hotel_rate,function(t,e){n.push([e.date,e.value])}),e.areaEnergyRzl=n;var r=[];i.floor_value.length>0?(i.floor_value.map(function(t,e){var a=[];t.data.map(function(t,e){a.push([t.date,t.value])}),r[e]=a}),"year"!=a.config.area_query_date_type&&r.push(e.areaEnergyRzl),e.trendValueData=r,t.each(i.floor_value[0].data,function(t,e){o.push([e.date,e.value])}),e.areaEnergyKf=o):e.trendValueData=[];e.drawLine(e.data)}),!1},drawLine:function(t){for(var e=this.$echarts.init(document.getElementById("lines")),a=this.$echarts.init(document.getElementById("pies")),s=this.$echarts.init(document.getElementById("bars")),i=this.trendValueData,n=t.legendData,o=(n=n.filter(function(t,e,a){return a.indexOf(t)===e})).length,r=t.axisLabel,l=[t.arrData1,t.arrData2,t.arrData3],c=[],d=[],u=[],h=0;h<o;h++){var m;m={barWidth:8,name:n[h],type:"bar",barGap:0,data:l[h]},c.push(m)}var p=t.trendLegendLabel,f=this.data.config.area_query_date_type;if(i.length>0){for(var v=0;v<i[0].length;v++){var _=i[0][v][0];u.push(_)}for(var g=0;g<i.length;g++){var b;b={name:p[g],data:i[g],type:"line",symbol:"circle",symbolSize:0,smooth:!0,lineStyle:{normal:{width:2,shadowColor:"rgba(48, 241, 225, .4)",shadowBlur:5,shadowOffsetY:5}}},g==i.length-1&&"year"!=f&&(b.yAxisIndex=1),d.push(b)}}var y={color:["#FD97AA","#008AFF","#F35E5E","#EEB66E","#EBF191","#C382EF","#95EDC5","#b5d7ff","#F56C6C","#999"],tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},grid:{left:10,top:60,right:10,bottom:4,containLabel:!0},legend:{textStyle:{color:"#B5D7FF"},top:5,itemWidth:15,itemHeight:10,itemGap:5,data:p},calculable:!0,xAxis:{type:"category",axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!1},axisLabel:{interval:1,showMinLabel:!0,showMaxLabel:!0,textStyle:{color:"#708FBE",fontSize:10}},nameTextStyle:{fontSize:4},nameGap:5,data:u},yAxis:i.length>0?"year"==f?this.trednYlabelArray2:this.trendYlabelArray1:this.trednYlabelArray3,series:d},w={tooltip:{trigger:"item",formatter:"{a}{b} : {c} ({d}%)"},series:[{name:"",type:"pie",radius:"55%",center:["50%","50%"],color:["#FD97AA","#008AFF","#F35E5E","#EEB66E","#EBF191","#C382EF","#95EDC5","#B5D7FF","#F56C6C","#999"],data:t.topPie,itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}},label:{fontSize:8}}]},C={color:["#FA6074","#FFA414","#3B89F9"],tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},toolbox:{show:!1,feature:{saveAsImage:{show:!0}}},legend:{data:n,y:"top",textStyle:{color:"#fff"}},grid:{left:"1%",right:"2%",bottom:"10%",top:"10%",containLabel:!1},xAxis:[{min:0,type:"category",data:r,axisLabel:{color:"#708FBE"}}],yAxis:{min:0,type:"value",axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!1},splitArea:{show:!0}},label:{normal:{show:!0,position:"top"}},series:c};e.setOption(y,!0),a.setOption(w,!0),s.setOption(C,!0),this.viewsLoading=!1}},mounted:function(){this.getChartLineData()}}}).call(e,a("7t+N"))},jjfY:function(t,e){e.install=function(t,e){t.prototype.setStorage=function(t,e){window.localStorage.setItem(t,e)}}},jrx9:function(t,e){},k0gE:function(t,e,a){"use strict";var s=a("37oY"),i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"personInfoComponent",class:{showPersonInfo:t.options.isPersonInfo||t.options.isEditInfo||t.options.isChangePassword,closePersonInfo:!t.options.isPersonInfo&&!t.options.isEditInfo&&!t.options.isChangePassword}},[a("div",{staticClass:"title"},[a("span"),t._v(" "),t.options.isPersonInfo||t.options.isEditInfo?a("span",[t._v("个人信息")]):t._e(),t._v(" "),t.options.isChangePassword?a("span",[t._v("修改密码")]):t._e()]),t._v(" "),a("div",{staticClass:"componentCon"},[t.options.isPersonInfo||t.options.isEditInfo?a("div",{staticClass:"personInfoCon",class:{editInfo:t.options.isEditInfo}},[a("div",{staticClass:"formInput canEdit"},[a("span",[t._v("姓名")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.personInfo.userinfo.name,expression:"personInfo.userinfo.name"}],staticClass:"Myname",attrs:{type:"text",placeholder:"请输入姓名",readonly:t.options.isPersonInfo},domProps:{value:t.personInfo.userinfo.name},on:{input:function(e){e.target.composing||t.$set(t.personInfo.userinfo,"name",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"formInput"},[a("span",[t._v("部门")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.personInfo.userinfo.department.dept_title,expression:"personInfo.userinfo.department.dept_title"}],attrs:{type:"text",readonly:""},domProps:{value:t.personInfo.userinfo.department.dept_title},on:{input:function(e){e.target.composing||t.$set(t.personInfo.userinfo.department,"dept_title",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"formInput"},[a("span",[t._v("职位")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.personInfo.userinfo.department_position.pos_title,expression:"personInfo.userinfo.department_position.pos_title"}],attrs:{type:"text",readonly:""},domProps:{value:t.personInfo.userinfo.department_position.pos_title},on:{input:function(e){e.target.composing||t.$set(t.personInfo.userinfo.department_position,"pos_title",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"formInput"},[a("span",[t._v("角色")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.personInfo.role_info.role_title,expression:"personInfo.role_info.role_title"}],attrs:{type:"text",readonly:""},domProps:{value:t.personInfo.role_info.role_title},on:{input:function(e){e.target.composing||t.$set(t.personInfo.role_info,"role_title",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"formInput"},[a("span",[t._v("电话")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.personInfo.userinfo.phone,expression:"personInfo.userinfo.phone"}],attrs:{type:"text",readonly:""},domProps:{value:t.personInfo.userinfo.phone},on:{input:function(e){e.target.composing||t.$set(t.personInfo.userinfo,"phone",e.target.value)}}})]),t._v(" "),t.options.isPersonInfo?a("a",{attrs:{href:"javascript:void(0)"},on:{click:t.edit}},[t._v("编辑信息")]):t._e(),t._v(" "),t.options.isEditInfo?a("a",{attrs:{href:"javascript:void(0)"},on:{click:t.save}},[t._v("保存信息")]):t._e()]):t._e(),t._v(" "),t.options.isChangePassword?a("div",{staticClass:"personInfoCon changePassword"},[a("div",{staticClass:"formInput"},[a("span",[t._v("原密码")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.oldPassword,expression:"oldPassword"}],attrs:{type:"password"},domProps:{value:t.oldPassword},on:{input:function(e){e.target.composing||(t.oldPassword=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"formInput"},[a("span",[t._v("新密码")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.newPassword1,expression:"newPassword1"}],attrs:{type:"password"},domProps:{value:t.newPassword1},on:{input:function(e){e.target.composing||(t.newPassword1=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"formInput"},[a("span",[t._v("确认密码")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.newPassword2,expression:"newPassword2"}],attrs:{type:"password"},domProps:{value:t.newPassword2},on:{input:function(e){e.target.composing||(t.newPassword2=e.target.value)}}})]),t._v(" "),a("a",{attrs:{href:"javascript:void(0)"},on:{click:t.changePassword}},[t._v("确认修改")])]):t._e()])])},staticRenderFns:[]};var n=function(t){a("cmci")},o=a("VU/8")(s.a,i,!1,n,null,null);e.a=o.exports},kArt:function(t,e,a){"use strict";var s={props:["options","value","placeholder","icon","multiple"],data:function(){return{value0:""}},computed:{},methods:{beFirst:function(){this.value0=""},searchVal:function(t,e){for(var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"请选择",s=t.length,i=a,n=0;n<s;n++)t[n].value==e&&(i=t[n].label);return i},change:function(){this.$emit("change",this.value0)}},created:function(){this.value0=this.value},watch:{value:function(t){t&&(this.value0=t)}},mounted:function(){}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"chooseBox2"},[a("div",{staticClass:"chooseBoxIn"},[a("span",{domProps:{textContent:t._s(t.searchVal(t.options,t.value0,t.placeholder))}}),t._v(" "),a("i",{class:t.icon?t.icon:"el-icon-caret-bottom",staticStyle:{"padding-left":"0.02rem"}})]),t._v(" "),a("el-select",{staticClass:"chooseBox areaBox",attrs:{placeholder:t.placeholder,multiple:t.multiple},on:{change:function(e){t.change()}},model:{value:t.value0,callback:function(e){t.value0=e},expression:"value0"}},t._l(t.options,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)},staticRenderFns:[]};var n=a("VU/8")(s,i,!1,function(t){a("Jal1")},"data-v-159ec3cc",null);e.a=n.exports},kOUd:function(t,e,a){"use strict";(function(t){var s=a("KvKp"),i=a("kArt"),n=a("N6wk"),o=a("Og6n"),r=a("pRIo"),l=a("NRg3"),c=a("VUyr"),d=a("9gv4"),u=a("yivU"),h=a("KyDa"),m=a("ClXn");e.a={components:{Table:u.a,WorkInfo:r.a,SelectBox:i.a,TimePickerT:n.a,SendWork:l.a,RoutingTask:h.a,RoutingInfo:m.a},data:function(){var t=this;return{crumbs:["代维系统","工单"],workH:[],query:{department:"",name:""},getStatus:"",query3:{types:[],type:"",time:"10-29",devices:[],names:[],priority:[{label:"一般",value:1},{label:"普通",value:2},{label:"严重",value:3}],type_id:[{label:"手工派发",value:1},{label:"投诉工单",value:2},{label:"维保工单",value:3}]},query2:{types:[],type:"",time:"10-29",devices:[],names:[],priority:[{label:"一般",value:1},{label:"普通",value:2},{label:"严重",value:3}],type_id:[{label:"系统自动派发",value:0},{label:"手工派发",value:1},{label:"投诉工单",value:2},{label:"维保工单",value:3}]},departments:[],names:[{value:"",label:"请选择"}],dialogBoxs:{item:{name:""},state0:0,txt:"是否允许退单"},table2:{title:"工单详情",tabs:[],hei:400,len:0,data:[],th:[{prop:"user_name",label:"名称"},{prop:"title",label:"类别"},{prop:"floor",label:"地点"},{prop:"devicename",label:"设备名称"},{prop:"addtime",label:"派发时间"},{prop:"description",label:"内容描述"},{prop:"sendtype",label:"派发类别"},{prop:"now_state",label:"状态",operate:!0,render:function(t,e){var a={fills:e.row.now_state};return t(c.a,{props:{state:a},on:{}})}},{prop:"fill",label:"操作",operate:!0,render:function(e,a){var s={item:a.row};return e(d.a,{props:{btnss:s},on:{agree:t.agree,refult:t.refult}})}}]},vName:"",value7:s.a.time(new Date/1e3,5),value8:s.a.time(new Date/1e3,5),cant:!1,table:{hei:328,data:[],th:[{prop:"serial",label:"序号"},{prop:"name",label:"名称"},{prop:"phone",label:"电话",wid:180},{prop:"department",label:"专业岗位"},{prop:"count",label:"派单量"},{prop:"dai",label:"待处理"},{prop:"wei",label:"未接单"},{prop:"wan",label:"已处理"},{prop:"tui",label:"退单申请",wid:146},{prop:"percent",label:"完成率",wid:170,operate:!0,render:function(t,e){var a={fills:e.row.percent};return t(o.a,{props:{btnss:a},on:{}})}}]},detalrowdata:{infos:{info:{new_user_id:""}}},infoItem:{info:{},desc:[],pic1:[],pic2:[],localDesc:[],sendInfos:[]}}},methods:{getDetailTime:function(t){this.value8=t},change1:function(t){this.query.department=t},change2:function(t){this.query.name=t},changes:function(t){this.value7=t,this.getTableList()},changeNew:function(t){this.vName=t,this.detalrowdata.infos.info={},this.detalrowdata.infos.info.new_user_id=t},deletes:function(){var t=this.value7.split("-");1==Number(t[1])?Number(t[0])>1&&(Number(t[0]-1)>9?t[0]=t[0]-1:t[0]="0"+Number(t[0]-1),1==t[0]||3==t[0]||5==t[0]||7==t[0]||8==t[0]||10==t[0]||12==t[0]?t[1]=31:4==t[0]||6==t[0]||9==t[0]||11==t[0]?t[1]=30:s.a.time(new Date/1e3,10)%4==0?t[1]=29:t[1]=28):Number(t[1])-1<10?t[1]="0"+(Number(t[1])-1):t[1]=Number(t[1])-1,this.value7=t.join("-"),this.getTableList()},adds:function(){if(!this.cant){var t=this.value7.split("-");(1==t[0]||3==t[0]||5==t[0]||7==t[0]||8==t[0]||10==t[0]||12==t[0])&&31==t[1]||(4==t[0]||6==t[0]||9==t[0]||11==t[0])&&30==t[1]||2==t[0]&&Number(t[0])%4==0&&29==t[1]||2==t[0]&&Number(t[0])%4!=0&&28==t[1]?(t[1]=1,12==t[0]?(t[0]="01",t[1]="01"):Number(t[0])+1>10?(t[0]=Number(t[0])+1,t[1]="01"):(t[0]="0"+(Number(t[0])+1),t[1]="01")):Number(t[1])+1>9?t[1]=Number(t[1])+1:t[1]="0"+(Number(t[1])+1),this.value7=t.join("-"),this.getTableList()}},rowClick:function(e){var a=this;e.user_id&&(this.infoItem.user_id=e.user_id),this.$refs.dialog.show(),e.type||(e.type=""),(!e.time||e.time.split("-")[0].length>2)&&(e.time=this.value7),this.$http.post("/pc_ims/admin/user_jobs",{sys_name:e.type,date:e.time,user_id:this.infoItem.user_id}).then(function(e){if(0==e.data.code){a.table2.len=e.data.count;var s=e.data.data.info;t.each(s,function(t,e){"0"===s[t].type_id?s[t].sendtype="系统自动派发":"1"==s[t].type_id?s[t].sendtype="手工派发":"2"==s[t].type_id?s[t].sendtype="投诉":"3"==s[t].type_id&&(s[t].sendtype="维保工单")}),a.table2.data=s,a.table2.tabs=[{name:"今日工单总数",num:e.data.data.zong},{name:"已完成",num:e.data.data.wan},{name:"未完成",num:e.data.data.wei}]}else a.$message({type:"error",message:e.data.msg})})},agree:function(t){console.log(t),t.user_id||(t.user_id=t.infos.user_id,t.id=t.infos.id),this.detalrowdata={infos:{id:t.id,pic1:[],pic2:[],user_id:t.user_id,localDesc:{info:t.description}},type:6,end_time:"",user_name:this.$store.state.userInfoTotal.userinfo.name,dispatch_user_id:this.$store.state.userInfoTotal.userinfo.id},t.type||(t.type=Number(t.now_state)+1),t.type-1==5?(this.dialogBoxs={item:t,state0:1,txt:"是否允许退单"},this.getStatus=5,this.$refs.isRefult.show()):t.type-1==2&&(this.detalrowdata.type=3,this.dialogBoxs={item:t,state0:1,txt:"是否允许延期处理"},this.getStatus=2,this.$refs.isRefult.show())},refult:function(t){2==t.now_state?this.detalrowdata={infos:{id:t.id,pic1:[],pic2:[],user_id:t.user_id,localDesc:{info:t.description}},end_time:"",type:7,user_name:this.$store.state.userInfoTotal.userinfo.name,dispatch_user_id:this.$store.state.userInfoTotal.userinfo.id}:this.detalrowdata={infos:{id:t.id,pic1:[],pic2:[],user_id:t.user_id,localDesc:{info:t.description}},end_time:"",type:8,user_name:this.$store.state.userInfoTotal.userinfo.name,dispatch_user_id:this.$store.state.userInfoTotal.userinfo.id},this.infoItem=t;t.now_state;this.getDealResult(this.detalrowdata)},submitOk:function(){this.$refs.isRefult.hide(),5==this.getStatus?(this.vName="",this.$refs.sendWork2.show()):this.getDealResult(this.detalrowdata)},submitNo:function(){this.$refs.isRefult.hide()},sendWork2:function(){console.log(this.detalrowdata),this.vName&&""!=this.vName?(this.$refs.sendWork2.hide(),this.getDealResult(this.detalrowdata)):this.$message({type:"error",message:"请选择新工单处理人员",duration:2e3})},sendWork:function(){this.$refs.send.show()},sendInfosShow:function(t){var e=this;this.$http.post("/pc_ims/admin/send_job",t).then(function(t){0==t.data.code?(e.$message({type:"success",message:t.data.msg}),e.$refs.send.hide(),e.getTableList()):e.$message({type:"error",message:"派发失败！"})})},tableInfos2Show:function(t){this.$refs.tableInfos2.show(),this.getDetailData(t.id,t.now_state)},getDetailData:function(t,e){var a=this;this.$http.post("/pc_ims/admin/job_info",{job_id:t}).then(function(t){0==t.data.code?(a.infoItem=t.data.data.info,a.infoItem.vuename="worklist",a.infoItem.desc=[{label:"类型",value:t.data.data.sys_name},{label:"设备类型",value:a.infoItem.device_name},{label:"设备地点",value:a.infoItem.floor},{label:"工单处理人员",value:a.infoItem.user_name}],2==a.infoItem.now_state?(a.infoItem.localDesc={label:"详情描述",value:a.infoItem.description},a.infoItem.localDesc2={}):3==a.infoItem.now_state?(a.infoItem.localDesc={label:"详情描述",value:a.infoItem.description},a.infoItem.localDesc2={label:"现场处理情况",value:a.infoItem.complete_info}):(a.infoItem.localDesc={label:"详情描述",value:a.infoItem.description},a.infoItem.localDesc2={label:"退回原因",value:a.infoItem.complete_info}),3==a.infoItem.now_state?a.infoItem.sendInfos=[{label:"派发人员",value:a.infoItem.dispatch_user_name},{label:"派发人员联系电话",value:a.infoItem.dispatch_user_phone}]:a.infoItem.sendInfos=[],a.infoItem.job_list=t.data.data.job_list,a.infoItem.pic1=t.data.data.pic1,a.infoItem.pic2=t.data.data.pic2):a.$message({type:"error",message:t.data.msg})})},infoTit:function(t){var e="";switch(t){case 0:e="系统自动派发";break;case 1:e="手工派发";break;case 2:e="投诉工单";break;case 3:e="维保工单"}return e},infoTit2:function(t){var e="";switch(t){case 0:e="未接单";break;case 1:e="已接单";break;case 2:e="延期申请";break;case 3:e="延期审请通过";break;case 4:e="已完成";break;case 5:e="申请退单";break;case 6:e="完成退单"}return e},priority:function(t){var e="";switch(t){case 1:e="一般";break;case 2:e="普通";break;case 3:e="严重"}return e},dealWork:function(t){6==t.type||3==t.type?this.agree(t):this.getDealResult(t)},getDealResult:function(t){var e=this,a="";t.infos.localDesc2&&t.infos.localDesc2.info&&(a=t.infos.localDesc2.info),this.vName&&""!=this.vName||(this.vName=""),this.$http.post("/pc_ims/write_job",{id:t.infos.id,type:t.type,pic1:t.infos.pic1,pic2:t.infos.pic2,end_time:"",user_id:t.infos.user_id,new_user_id:this.vName,info:a,dispatch_user_id:this.$store.state.userInfoTotal.userinfo.id}).then(function(t){0==t.data.code?(e.$message({type:"success",message:t.data.msg}),e.rowClick({sys_name:"",date:e.value7,user_id:e.infoItem.user_id}),e.$refs.tableInfos2.hide()):e.$message({type:"error",message:t.data.msg})})},getNameList:function(){var e=this;this.names=[{value:"",label:"全部"}],this.$http.post("/pc_ims/get_user").then(function(a){if(0==a.data.code){var s=a.data.data;t.each(s,function(t,a){s[t].value=s[t].user_id,s[t].label=s[t].truename,e.names.push({value:s[t].user_id,label:s[t].truename})}),e.query2.names=s,e.query3.names=s}else e.$message({type:"error",message:a.data.msg})})},getDepartList:function(){var e=this;this.departments=[{value:"",label:"全部"}],this.$http.post("/pc_ims/get_description").then(function(a){if(0==a.data.code){var s=a.data.data;t.each(s,function(t,a){s[t].value=s[t].id,s[t].label=s[t].title,e.departments.push({value:s[t].id,label:s[t].title})})}else e.$message({type:"error",message:a.data.msg})})},getSystemId:function(){var e=this;this.$http.post("/pc_ims/get_sysmenu").then(function(a){if(0==a.data.code){var s=a.data.data;t.each(s,function(t,e){s[t].value=s[t].id,s[t].label=s[t].title}),e.query3.types=s}else e.$message({type:"error",message:a.data.msg})})},getSystemList:function(){var e=this;this.$http.post("/pc_ims/get_sysmenu").then(function(a){if(0==a.data.code){var s=a.data.data;t.each(s,function(t,e){s[t].value=s[t].title,s[t].label=s[t].title}),e.query2.types=s}else e.$message({type:"error",message:a.data.msg})})},getDevice:function(e){var a=this;this.$http.post("/pc_ims/get_device",{sys_id:e}).then(function(e){if(console.log(e),0==e.data.code){var s=e.data.data;t.each(s,function(t,e){s[t].value=s[t].id,s[t].label=s[t].title}),a.query3.devices=s}else a.$message({type:"error",message:e.data.msg})})},getDeviceList:function(){var e=this;this.$http.post("/pc_ims/get_device",{floor_name:this.queryModel.area}).then(function(a){if(console.log(a),0==a.data.code){var s=a.data.data;t.each(s,function(t,e){s[t].value=s[t].id,s[t].label=s[t].floor_name}),e.query2.devices=s}else e.$message({type:"error",message:a.data.msg})})},getTopData:function(){var t=this;this.$http.post("/pc_ims/admin/job_data").then(function(e){if(0==e.data.code){var a=e.data.data;t.workH=[{id:1,tit:"今日在岗人数",val:a.zaiban,color:"#b5d7ff"},{id:2,tit:"今日工单总数",val:a.count,color:"#f38a00"},{id:3,tit:"已完成数量",val:a.complete,color:"#4ae283"},{id:4,tit:"今日工单完成率",val:a.percent+"%",color:"#4ae283"}]}else t.$message({type:"error",message:e.data.msg})})},getTableList:function(){var e=this;this.$http.post("/pc_ims/admin/job_userdata",{user_id:this.query.name,department:this.query.department,date:this.value7}).then(function(a){0==a.data.code?(t.each(a.data.data,function(t,e){a.data.data[t].serial=t+1}),e.table.data=a.data.data):e.$message({type:"error",message:a.data.msg})})}},created:function(){},mounted:function(){this.getTopData(),this.getNameList(),this.getTableList(),this.getSystemList(),this.getDepartList(),this.getSystemId()}}}).call(e,a("7t+N"))},l2dl:function(t,e,a){"use strict";var s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"deviceInfoDom"},[a("ul",t._l(t.deviceInfos,function(e,s){return a("li",[a("span",{staticClass:"devNameSpan"},[t._v(t._s(e.label))]),t._v(" "),a("span",[t._v(t._s(e.val))])])}))])},staticRenderFns:[]};var i=a("VU/8")({props:["onVideoId"],data:function(){return{dInfo:[],deviceInfos:[]}},mounted:function(){this.getData()},methods:{getData:function(){}}},s,!1,function(t){a("xoxN")},null,null);e.a=i.exports},lExR:function(t,e,a){"use strict";(function(t){var s=a("bOdI"),i=a.n(s),n=a("iVjX");e.a={name:"ReadNumber",data:function(){var t;return t={realtimeType:1,realtimeData:[],clearable:!0,loading:!0,currentType:1,shuiComponent:"",dianComponent:"",qiComponent:"",shui:{id:1,echarts:{id:"lineEchartShui",type:"shui",unit:"m³",title:"水",style:{width:"100%",height:"100%"},xDate:["16:00","17:00","18:00","16:00","17:00","18:00","17:00","18:00","17:00","18:00","17:00","18:00"],list:[{name:"碳排放",data:[10,20,30,50,40,60,30,50,30,50,40,60]},{name:"能耗值",data:[50,40,60,10,20,30,10,20,10,20,40,60]}]}},qi:{id:2,echarts:{id:"lineEchartQi",type:"qi",unit:"m³",title:"气",style:{width:"100%",height:"100%"},xDate:["16:00","17:00","18:00","16:00","17:00","18:00","17:00","18:00","17:00","18:00","17:00","18:00"],list:[{name:"碳排放",data:[10,20,30,50,40,60,30,50,30,50,40,60]},{name:"能耗值",data:[50,40,60,10,20,30,10,20,10,20,40,60]}]}},dian:{id:3,echarts:{id:"lineEchartDian",type:"dian",unit:"m³",title:"电",style:{width:"100%",height:"100%"},xDate:["16:00","17:00","18:00","16:00","17:00","18:00","17:00","18:00","17:00","18:00","17:00","18:00"],list:[{name:"碳排放",data:[10,20,30,50,40,60,30,50,30,50,40,60]},{name:"能耗值",data:[50,40,60,10,20,30,10,20,10,20,40,60]}]}},aa:"",aa1:"",aa2:"",options:[{placeHolder:"选择楼层",data:[{value:0,label:"预警"},{value:1,label:"提醒"},{value:2,label:"告警"}]}],areaData1:[],areaData2:[],areaData3:[],sysData1:[],sysData2:[],areaForm:{project_id:1,floor_id:0,sys_menu_id:0},sysForm:{project_id:1,system_id:1,id1:"",id2:""},shishi:{shui:"",dian:"",qi:""}},i()(t,"dian",{}),i()(t,"qi",{}),i()(t,"realTimeTypeMap",{}),i()(t,"allDatas",{}),t},created:function(){this.areaForm.sys_menu_id=this.$store.state.sysList[2].sys_menu_id,this.areaForm.project_id=this.$store.state.projectId,this.sysForm.project_id=this.$store.state.projectId,this.initAreaQueryData()},components:{LineEcharts:n.a},watch:{},mounted:function(){var e=this;t(window).resize(function(){e.resizeWindow()})},beforeDestroy:function(){t(window).unbind("resize")},destroyed:function(){},methods:{calcRealTimeData:function(t){var e=[],a=t.length;this.realTimeTypeMap=t[a-1],t.splice(a-1,1),console.log(t),t.map(function(t,a){var s={1:[],2:[],3:[],4:[],device:""};s.device=t.device,t.data.map(function(t,e){var a=t.type;if(1==a){for(var i="",n=t.data.toString().length,o=0;o<10-n;o++)i+="0";t.data=i+t.data}s[a].push(t)}),e.push(s)});for(var s=[],i=0;i<e.length;i+=3)s.push(e.slice(i,i+3));this.realtimeData=s,console.log(s)},showRealTime:function(t){this.realtimeData=[];var e=this;e.realtimeType=t,e.$http.post("/hotel_energy/floor_device_real_time",{project_id:e.areaForm.project_id,floor_id:e.areaForm.floor_id,type:t,sys_menu_id:e.areaForm.sys_menu_id}).then(function(t){if(console.log(t),0==t.data.code){var a=t.data.data;e.calcRealTimeData(a)}}),this.$refs.dialog.show()},query:function(){var t=this;1==this.currentType?(this.areaForm.id1?this.areaForm.floor_id=this.areaForm.id1:this.areaForm.floor_id=0,this.areaForm.id2&&(this.areaForm.floor_id=this.areaForm.id2),this.areaForm.id3&&(this.areaForm.floor_id=this.areaForm.id3),this.$http.post("/hotel_energy/floor_real_time",this.areaForm).then(function(e){0==e.data.code&&t.dealData(e)})):(this.sysForm.id1?this.sysForm.system_id=this.sysForm.id1:this.sysForm.system_id=0,this.sysForm.id2&&(this.sysForm.system_id=this.sysForm.id2),this.$http.post("/hotel_energy/system_real_time",this.sysForm).then(function(e){0==e.data.code&&t.dealData(e)}))},choseQuery1:function(){var t=this;this.areaForm.id1?this.areaData1.map(function(e,a){e.id==t.areaForm.id1&&(t.areaData2=e.child,t.areaForm.id2="",t.areaForm.id3="")}):(this.areaForm.id2="",this.areaForm.id3="",this.areaData2=[])},choseQuery2:function(){var t=this;this.areaData2.map(function(e,a){t.areaForm.id2?e.id==t.areaForm.id2&&(t.areaData3=e.child,t.areaForm.id3=""):(t.areaForm.id3="",t.areaData3=[])})},choseQuery4:function(){var t=this;this.sysData1.map(function(e){t.sysForm.id1?e.id==t.sysForm.id1&&(t.sysData2=e.child,t.sysForm.id2=""):(t.sysForm.id2="",t.sysData2=[])})},initAreaQueryData:function(){var t=this;t.$http.post("/hotel_energy/floor_real_time",this.areaForm).then(function(e){0==e.data.code&&(t.areaData1=e.data.data.area_level,t.allDatas=e,t.dealData(e))})},refreshCanvas:function(t){t.shui.time&&t.shui.time.map(function(e,a){var s=e.split(" "),i=s.length;t.shui.time[a]=s[i-1].split(":")[0]+":"+s[i-1].split(":")[1]}),t.dian.time&&t.dian.time.map(function(e,a){var s=e.split(" "),i=s.length;t.dian.time[a]=s[i-1].split(":")[0]+":"+s[i-1].split(":")[1]}),t.qi.time&&t.qi.time.map(function(e,a){var s=e.split(" "),i=s.length;t.qi.time[a]=s[i-1].split(":")[0]+":"+s[i-1].split(":")[1]});var e=Math.ceil(1e3*Math.random()+1);this.shui={id:"shui"+e,echarts:{id:"lineEchartShui"+e,type:"shui",unit:"Kg/m³",title:"水",titShow:!0,style:{width:"100%",height:"100%"},xDate:t.shui.time,list:[{name:"碳排放",data:t.shui.data_t},{name:"能耗值",data:t.shui.data}]}},this.qi={id:"qi"+e,echarts:{id:"lineEchartQi"+e,type:"qi",unit:"Kg/m³",title:"气",titShow:!0,style:{width:"100%",height:"100%"},xDate:t.qi.time,list:[{name:"碳排放",data:t.qi.data_t},{name:"能耗值",data:t.qi.data}]}},this.dian={id:"dian"+e,echarts:{id:"lineEchartDian"+e,type:"dian",unit:"Kg/Kw/h",title:"电",titShow:!0,style:{width:"100%",height:"100%"},xDate:t.dian.time,list:[{name:"碳排放",data:t.dian.data_t},{name:"能耗值",data:t.dian.data}]}},this.shuiComponent="LineEcharts",this.dianComponent="LineEcharts",this.qiComponent="LineEcharts",this.loading=!1},changeType:function(t){var e=this;this.loading=!0,this.shuiComponent="",this.dianComponent="",this.qiComponent="",this.currentType=t,1==t?this.$http.post("/hotel_energy/floor_real_time",this.areaForm).then(function(t){0==t.data.code&&e.dealData(t)}):2==t&&this.$http.post("/hotel_energy/system_real_time",this.sysForm).then(function(t){0==t.data.code&&(e.sysData1=t.data.data.sys_level,e.dealData(t))})},dealData:function(t){this.shishi=t.data.data.read,this.shishi.dian=String(this.shishi.dian),this.shishi.shui=String(this.shishi.shui),this.shishi.qi=String(this.shishi.qi);for(var e=this.shishi.dian,a="",s=this.shishi.qi,i="",n=this.shishi.shui,o="",r=0;r<10-this.shishi.dian.length;r++)a+="0";this.shishi.dian=a+e;for(var l=0;l<10-this.shishi.qi.length;l++)i+="0";this.shishi.qi=i+s;for(var c=0;c<10-this.shishi.shui.length;c++)o+="0";this.shishi.shui=o+n,this.refreshCanvas(t.data.data.table)},resizeWindow:function(){var t=this.allDatas;this.dealData(t)}}}}).call(e,a("7t+N"))},ldEJ:function(t,e,a){"use strict";var s={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"dealBox"},[e("span",{style:{color:this.txt.color},domProps:{textContent:this._s(this.txt.txt)}})])},staticRenderFns:[]};var i=a("VU/8")({props:["state"],data:function(){return{txt:{txt:"",color:"#fff"},states:{}}},methods:{txts:function(){switch(this.states.fills){case 3:this.txt.txt="维保工单";break;case 1:this.txt.txt="手工派发";break;case 2:this.txt.txt="投诉"}return this.txt}},watch:{state:{handler:function(t){t&&(this.states=t,this.txts())},deep:!0}},created:function(){},mounted:function(){this.states=this.state,this.txts()}},s,!1,function(t){a("gaO9")},"data-v-8c4d2e20",null);e.a=i.exports},llnD:function(t,e){},mEvV:function(t,e,a){"use strict";var s={props:{isResize:{type:Number}},data:function(){return{loading:!1,energyChart:{},energyChart2:{},option:{},option2:{},current:1,data:{0:{},1:{},2:{}},columnarData:{plan:[],current:[]},lineData:{},interval:null}},components:{},mounted:function(){this.initData()},watch:{isResize:function(){this.energyChart.resize(),this.energyChart2.resize()},columnarData:{handler:function(t,e){this.option={title:{show:!1,text:"能源管理",textStyle:{color:"#fff",fontSize:"18",fontWeight:"normal"}},grid:{bottom:20,top:40},legend:{data:["当前","计划"],right:"7%",itemWidth:10,itemHeight:10,textStyle:{color:"#858994"},align:"left"},calculable:!0,xAxis:[{type:"category",data:["当前","本月","本年"],axisLine:{lineStyle:{color:"#c9c9c9"}},axisTick:{show:!1}}],yAxis:[{show:!1,type:"value",axisLabel:{formatter:"{value} ms"}}],series:[{name:"当前",type:"bar",itemStyle:{normal:{barBorderRadius:[2,2,0,0],color:new this.$echarts.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"#49BFFF"},{offset:1,color:"#2088DB"}]),opacity:1,label:{show:!0,position:"top",color:"#c9c9c9"}}},data:this.columnarData.current,barGap:0,barMinHeight:2,barMaxWidth:24},{name:"计划",type:"bar",itemStyle:{normal:{barBorderRadius:[2,2,0,0],color:new this.$echarts.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"#32E2F0"},{offset:1,color:"#20DBB5"}]),label:{show:!0,position:"top",color:"#c9c9c9"}}},data:this.columnarData.plan,barGap:0,barMinHeight:2,barMaxWidth:24}],color:["#c4752a","#264e8c"]},this.option2={title:{text:this.lineData.scoer+"%",left:10,top:2,textStyle:{fontSize:10,color:"#4be283"}},grid:{top:40},tooltip:{trigger:"axis"},legend:{data:["今年计划","2017","2018"],right:0,padding:0,width:"200",textStyle:{color:"#eeeff1",fontSize:10},top:8,itemGap:2,itemWidth:22},calculable:!0,xAxis:[{type:"category",boundaryGap:!1,nameTextStyle:{color:"#f8f8f6"},axisLine:{lineStyle:{color:"#bfc7ca"}},axisTick:{show:!1},data:this.lineData.time}],yAxis:[{show:!1,type:"value"}],series:[{name:"今年计划",type:"line",smooth:!0,showSymbol:!1,lineStyle:{color:"#3af2e6",shadowBlur:6,shadowOffsetY:2,shadowColor:"#3af2e6"},data:this.lineData.data.plan},{name:"2017",type:"line",smooth:!0,showSymbol:!1,lineStyle:{color:"#fd9a1b",shadowBlur:6,shadowOffsetY:2,shadowColor:"#fd9a1b"},data:this.lineData.data[2017]},{name:"2018",type:"line",smooth:!0,showSymbol:!1,lineStyle:{color:"#f96072",shadowBlur:6,shadowOffsetY:2,shadowColor:"#f96072"},data:this.lineData.data[2018]}],color:["#3af2e6","#fd9a1b","#f96072"]},this.energyChart.clear(),this.energyChart2.clear(),this.energyChart.setOption(this.option,!0),this.energyChart2.setOption(this.option2,!0)},deep:!0}},destroyed:function(){clearInterval(this.interval)},methods:{deletCli:function(){this.$emit("deletClick",{self_id:2,componentsName:"EnergyManage"})},change:function(t){this.current=t,1===t?(this.columnarData.current=this.data[1].data.Columnar.value,this.columnarData.plan=this.data[1].data.Columnar.plan,this.lineData=this.data[1].data.line):0===t?(this.columnarData.current=this.data[0].data.Columnar.value,this.columnarData.plan=this.data[0].data.Columnar.plan,this.lineData=this.data[0].data.line):2===t&&(this.columnarData.current=this.data[2].data.Columnar.value,this.columnarData.plan=this.data[2].data.Columnar.plan,this.lineData=this.data[2].data.line)},initData:function(){var t=this;this.$http.get("/index_pc/pc/model",{self_id:2}).then(function(e){0==e.data.code&&(e.data.data.map(function(e,a){0===e.type?t.data[0].data=e:1===e.type?t.data[1].data=e:2===e.type&&(t.data[2].data=e)}),t.columnarData.current=t.data[1].data.Columnar.value,t.columnarData.plan=t.data[1].data.Columnar.plan,t.option={title:{show:!1,text:"能源管理",textStyle:{color:"#fff",fontSize:"18",fontWeight:"normal"}},grid:{bottom:20},legend:{data:["当前","计划"],right:0,textStyle:{color:"#858994"},align:"left",left:"right"},calculable:!0,xAxis:[{type:"category",data:["当前","本月","本年"],axisLine:{lineStyle:{color:"#c9c9c9"}},axisTick:{show:!1}}],yAxis:[{show:!1,type:"value",axisLabel:{formatter:"{value} ms"}}],series:[{name:"当前",type:"bar",itemStyle:{normal:{color:"#2a84c0",opacity:1,label:{show:!0,position:"top",color:"#c9c9c9"}}},data:t.columnarData.current,barGap:0,barMinHeight:2,barMaxWidth:24},{name:"计划",type:"bar",itemStyle:{normal:{color:"#1fb3a3",opacity:1,label:{show:!0,position:"top",color:"#c9c9c9"}}},data:t.columnarData.plan,barGap:0,barMinHeight:2,barMaxWidth:24}],color:["#c4752a","#264e8c"]},t.lineData=t.data[1].data.line,console.log(t.lineData),t.option2={title:{text:t.lineData.scoer+"%",left:20,textStyle:{fontSize:18,color:"#4be283"}},grid:{top:26},tooltip:{trigger:"axis"},legend:{data:["今年计划","2017","2018"],right:0,padding:0,textStyle:{color:"#eeeff1",fontSize:12},top:8},calculable:!0,xAxis:[{type:"category",boundaryGap:!1,nameTextStyle:{color:"#f8f8f6"},axisLine:{lineStyle:{color:"#bfc7ca"}},axisTick:{show:!1},data:t.lineData.time}],yAxis:[{show:!1,type:"value"}],series:[{name:"今年计划",type:"line",smooth:!0,showSymbol:!1,lineStyle:{color:"#3af2e6",shadowBlur:6,shadowOffsetY:2,shadowColor:"#3af2e6"},data:t.lineData.data.plan},{name:"2017",type:"line",smooth:!0,showSymbol:!1,lineStyle:{color:"#fd9a1b",shadowBlur:6,shadowOffsetY:2,shadowColor:"#fd9a1b"},data:t.lineData.data[2017]},{name:"2018",type:"line",smooth:!0,showSymbol:!1,lineStyle:{color:"#f96072",shadowBlur:6,shadowOffsetY:2,shadowColor:"#f96072"},data:t.lineData.data[2018]}],color:["#3af2e6","#fd9a1b","#f96072"]},t.drawEchart(),t.drawEchart2(),t.interval=setInterval(function(){switch(t.current){case 1:t.current=0;break;case 0:t.current=2;break;case 2:t.current=1}t.change(t.current)},5e3))}).catch(function(t){console.log(t)})},drawEchart:function(){this.energyChart=this.$echarts.init(document.getElementById("nergyEcharts")),this.energyChart.setOption(this.option)},drawEchart2:function(){this.energyChart2=this.$echarts.init(document.getElementById("nergyEcharts2")),this.energyChart2.setOption(this.option2)}}},i={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"energyComponent",attrs:{"element-loading-background":"rgba(0, 0, 0, 0.5)","element-loading-spinner":"el-icon-loading","element-loading-text":"拼命加载中"}},[s("div",{staticClass:"title"},[s("span",{staticClass:"titleIcon"}),t._v(" "),s("span",{staticClass:"txt"},[t._v("能源管理系统")]),t._v(" "),s("img",{attrs:{src:a("Ilry"),alt:""},on:{click:t.deletCli}})]),t._v(" "),s("div",{staticClass:"con"},[s("div",{staticClass:"nergyEcharts",attrs:{id:"nergyEcharts"}}),t._v(" "),t._m(0),t._v(" "),s("div",{staticClass:"button"},[s("span",{class:{active:1==t.current},on:{click:function(e){t.change(1)}}},[t._v("水")]),t._v(" "),s("span",{class:{active:0==t.current},on:{click:function(e){t.change(0)}}},[t._v("电")]),t._v(" "),s("span",{class:{active:2==t.current},on:{click:function(e){t.change(2)}}},[t._v("气")])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"nergyEcharts2",attrs:{id:"nergyEcharts2"}},[e("div",{staticClass:"logo"})])}]};var n=a("VU/8")(s,i,!1,function(t){a("B3F4")},"data-v-c7876f24",null);e.a=n.exports},mTsu:function(t,e){},mX5o:function(t,e){},"n+yb":function(t,e,a){"use strict";var s={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"dealBox"},[e("span",[this._v(this._s(this.txt))])])},staticRenderFns:[]};var i=a("VU/8")({props:["btnss"],computed:{},data:function(){return{txt:""}},methods:{txts:function(t){switch(t){case 0:this.txt="每天";break;case 1:this.txt="每周";break;case 2:this.txt="每月";break;case 3:this.txt="每年"}return this.txt}},created:function(){},mounted:function(){this.txts(this.btnss.item.period)}},s,!1,function(t){a("GZ2c")},"data-v-13f57362",null);e.a=i.exports},nmQ6:function(t,e,a){"use strict";(function(t){e.a={props:{isShowBannerParam:{type:Boolean}},data:function(){return{isUserRouter:!0,userRouterInfo:{},agentPath:"",isPermissionPath:!1}},components:{},created:function(){var e=this;this.userRouterInfo=this.$store.state.sysList,this.userRouterInfo[12]&&(1==this.userRouterInfo[12].role_string[0]?this.agentPath="/AgentManage":this.agentPath="/AgentManage/normalUser"),0==this.$store.state.userInfoTotal.permissions_manage.per_id?this.isPermissionPath=!1:this.isPermissionPath=!0,t(document).on("click",function(){e.$emit("changeBannerParam",!1)})},methods:{stopPropa:function(){event.stopPropagation()},showBanerClick:function(){this.$emit("changeBannerParam",!this.isShowBannerParam)}}}}).call(e,a("7t+N"))},oK6o:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAAAAXNSR0IArs4c6QAABwdJREFUWAm1mE+LHFUUxW9VdVf1zPQ4zMBolARjkIgJgmbjNrgRIroLZOsncCG4MSEEswq48BO4FQIiigEXils3ERQjCSFREmPM4AyTmenpqq4/nt+rfkXN0GNPEvKgul5VvXvuqfveffdUB/YIraqq4BGGN0ODIKiaiymdqQ52k7hwwWqb8zXyb5fH12NHx09b7fxCfeP8+fH1+Pk0cnsSahNpk/AEVpZrIhs3dhKaP1oTWF6pz47gBHJ7EZtIyJPxRH47VjuFxFERWFu0YPO+7r1stv3PTkIzz4nITbP+AasW16y6IYINuWs1SR+1SaTCcSSb0w4ymhbIQETgoYDDG7FFGhwVqXW2b1vXBtYZldbloM89njGGsdhgC4Z7MWH6F/W+Gufq7IiQH+AMIKP1cUtgRxSRlS0L5zMLN3ILZwoLt3XkiQVzsQX5sMbp9KzayqzqpFbNRFZu65jvWLkRW7k8Z6WwKmGVfhonRaqJ0CQyvNmzqTEm4u1zvXkeWHc7sTjuWdypLBkUlgx15qDPPZ4xhrHYYAsGWGC6dbhHpJoIQagdGQzvCKCTWLTasaj70KJoScQy64ShRenQIjkPcx1lVEcoLBSdwEoRKZOeFWVphcWWF6tWjJ6xYim3QgSLQ4mVWoc7IuXXE8zNR4e+nybexpMJ9JbFgo6hdYJcbxtZL9m6dcqK9O2wGL0RRuEStmVRrgZR9+coSr5LoyNXRGdYlYrwguWBpnU1MWOgXtQerKlzWaTkHls4QMpFyEfHL2AW4t27FoUiAZmgZ51uanFp1u0Obr9j6ca5zQd/zN379Yf+2p3fLd1aBdOSuSVbPPSqvfDaW5v9Zw9vWTL/yWj2pW8156NRYlk1tLxKLC/XLT940Aot9JIMPK7sYz1ByEXIoY1/SGtlR5hoqkzTRGQgk+cW97avn003/z1z7ZvPZtfuXmubuf4gu2eDtXv21y/f9xcPHusfe/eDS0mRnRjOvHKxqxGjnllnXRFJrFKSVEe1yDV1LkIeLGymS4uM1GSPIZvIJLdmRtYhMpDZvH/zzE+ffziRjAf0ZwgzFhtswTBhgQk2PvCFT5Nvmpu29nSxkN0+Q0YpQ5KuxaPM4mR4+71s/e9LOMiHm7X1Pn87vb69+f6ng3jh+Y/S3ktfd2PL0pFlSoiRzVp+NLPCLfDxtDVpDz6MtV8EvEEyZ2GoTGIBs2aYpkclAyY22IIBFphg4wNf+GScbw0hQkc5WP+z3vSigVJb6Z08vHWKBTxpzXiQaWdswQALTLDZWPGFTzdtY5Ca0HgOqU3ZrHZe7cCZ0pV9htQmm6Y5nfbcYQgLTLCdD/nCp2tjDk2EqNq+UFIOio6IybjSPkNqP2kDAywwwcYHmPhsKwZHyEsKBig1XW0qMwvYgdn0/D7D88dtYIAFJtjUP3x5PM+hiZB/8NTO1f6QHaFG5cmmO1Q9UtUOYx2qTZQDduAnbUl/yZUWMMHGB748rufQRAil58SVRiAhorwulNQmysGTNjDAoviCjQ8w8elVJtc1oQt01aT04oGISM/EYV21lfjfUZvqAY//6zCEhRIA2/mQL3y6NubQRIgih+xceNFKxFUxa0Ui+ZA+c+QKhVK16bHZYAsGWGCCjQ984RPfHrwhxA2VDlf0UHrplpWlNA0SgqqtQjmgDDxqwwZbMMACE2x8UGDx2cYMfHFVxIIff6x183CtVofZgnWzocVRKRW4cf0chfLq5Yv7LiGQOXH67KB/4OUvsvlXPilCS6Ums3jdRtJaeW/Rcu3S5cmTVp4f66LQKzUTI0IHYzQwb4DSU43OFcYREgJgCuV+po8xjMUGWzDAAhNsfODLTdd4/UzUQ+PPlvLumhUSaAFKDx2DnuEt4+j21ddPf7xvgZZJoEl0NQINKSuBVhxUZG4cdoTaM1bvlM206asU1ciXxm4Ji2pEzzQSVoWSOkc52C1hyUwWMGtGEjAnMl4tel39QLrafYGMZQesmgjR8aTcBiWtq3A67cuWiBZG6UlclRL5pUR+kc4d+VKF8qs9RX5XkYhEaQ+R32+JfE/GnfmheUKTvjyUmuHKSq30NiTxO1JJEtiualMoqU1gsAOz6bHPZOxjytF5fWmwZpaXrZDUKCd9cWDr13KT9v6G+3jTIiNSKDlCq/EF6o7MQOnNpJYp+zJtculsZGlPZw763OMZYxiLDbZggOXUIX9IyMf/fii2WbZJMc+kJlKTNAVcERvFuZzJYSrHw5n6oM89njGGsdhgC8a0r1bHgZ/dbcf06aH7JtcZZfe0/2xwc7+bENeeFH3/54Bp9/K6BXI8a4srrn2h9OXAJYmmh+aniL5fIvTbbU9CflCbGPfa5Lj2BOnTvIxgjdDaJLjeiwjPaFMJ1cPq393k2s/+rz+NRNv2P1CERcPKDYs+AAAAAElFTkSuQmCC"},ofbo:function(t,e){},oiaV:function(t,e){},otYp:function(t,e,a){t.exports=a.p+"static/img/isno.4bf99e6.png"},pFsi:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAAAXNSR0IArs4c6QAACDhJREFUeAHtXVtsVEUY/ufstkjBCyJFrnKRshgVAX2QkBCUQlseeCDAgzeikqgvXpCIfTFEHgRDQiIJLxpDJN7QiBHaUqhVEwMhJiAXu1uEChKkElQEhF52x2+atiztdvecPf+cnV1mQrNnz/zzzf//3/nnzDn/7CCogErNcTlXxultkjQLZpVka5oQ1Ia2R0jQe5Vl9JEQQmaL5bWd8NrAVHmQsYDiVCcl3MhZBH2wKCKe54RMh+Wkq8ynOkTGBnYylAMkPVfbJBcG5YuCIOSYlMVw2AO6nCYFzdOF3Re3IAg500pFuJK12YIbyOC+jtP1XZsRuhQudFxLiGEMW0IsIYZ5wDB1bIRYQgzzgGHq2AixhBjmAcPUsRFiCTHMA4apYyPEEmKYBwxTx0aIJYTfA84VGs6PmhvEgoiQzk69+QqkdC8ERU/eE7I7KicmErRem8MEXXUc+lIbfh/gvCZEpVbjRPth08g+drF8RXJ+P/7KK6aIYyyALkB4FwS46FCJ1B6XjyIH/hQOx7hs0lcsjBNjkUN/MLkCxnQib7hFJGiXDNPF5Dovx6FO6oiH6XTVFHHeSzsO2cAJqY3JKpmgHUiLFnEY0IOBcV5KhxYuKhN7es7l42egQ5aEyzDeb+Imo9vxG/OdDGVHoITUxWgK+lR/7GVQMW1mB80BYKCEyBDdo8VGzIQenyROacEOGFTdHLsKhhPxbQuNb4vTqJ5z2XwWOXS2fLI4naqtEyf84y9Y6JlIh1r3mxwVb6f7Q4nsl5cCvy3sUPP8MnEyXV9+67oIwfRxRU2U1gJsvF/AdgDsisqoCNELmKV87xfPb/uaJlmduNplW9jvxRAHAGz7GrYth21q/S97cWqi8kVcXh8C2TcZvdpJimACurP+hNRyv+jtJ8PB7piMYKXvOkwiekeCDE0yV0taDNtWZRbMTsLBXP7V7JqmbwUnDI130PL0Unpr41gFr2W9r6A5ujRXN3VtVzEib4Iuxd3g4t4yxI2cVxmQrAVX6RHoLMur4TejvCXEMNYtIZYQwzxgmDo2QiwhhnnAMHVshFhCDPOAYerYCLGEGOYBw9QJNEKQD8k6z53Ob/jZ8j/p6vOpLlBCkE/4Bbnva9wOEkT7uDFzhRcoIUhcXcSLuU2sxiJbGAp35TtYYXMFxpcnSGEB3rb2w6+KUHVtDEOMpGXIVdydopnbUwlgHMJr/rUL7xVH3TZikruTCacfTD+H9ZPwc0LQ5L7Nu3fWUSsN9a02vN6pSmDyF0H31Ufl6AURcZYb3MH4e5AbtAcPV+9srMN6pOd70J8Yj5u19IltPDokbW2UWI7HXBQhbwJTz5UExbEO64u9zXISs96u4BZEcLMXdMCVsHeh+Vej9FVji7zFe9OBW4APIuw1NQN7TVXjhqtSk37G9YF6asXsqnrwIKqZN1GcG0hIx/m9Z+Tw9sv0LqJ1Loy91UcfxfDP7SnaH6UQvVZyB+2bVyoup6j3dKqLEE8tMgjvaZbT2uO0Elfmy6w79AiKQ9mDmCisrpwmvsughpZqFemw7S2Q+zRrB+o5StCOYSX0EjshPYrWRuXShKTPe75zfULhjqIQTS8vE01cmF5xsFKnAdHymNd2meQximzQ9hxSGRHb0UFDJiW81uPqLOpI0Ote27HKcz9LXVdumTZCuvuov94X45GkhxjRPEM5YTrpuZGLBrjYxrFP25L7xfByAZ3oKENTgarlsHVRegbvthaj3wmpZNyeg+4nMCx9smia6PfrKfz+xO8iyNRqSMJLhwIpat/F2ijtBBHlmEz4LoBQUbhkV5N8B6SoR4PegnsjQw+9cDcc6B6ybuhM55dTMVrfRQZzJ7gPvlEXk9OZYQeEKwhC1FAFC58Y0EofFRi2BCJidjIEnqZVf1pKQRBS30olcNwILR5SoJKGJWPbISvZGwV+XBARUkgcWUIMY9MSYgkxzAOGqWMjxBJimAcMU8dGiCXEMA8Ypo6NkJuKEIFfdGsoeHOl5/W3S12RD/nbpag3MbVZmrcW3qTxfulXby1cSks9CSKXvRMW5v2Jt8A/upX3IHdEKyGlU+kAFD/hQSF3og7tcCeoT6q4mJbAtu1478sSrcA6E8YmDloTVA8L0VEXlSuxgcA3yFVw/dj+h5FltDXZ1fFLWIgTcJk/SbSiy2U/SVl0sYVGY9OerH3pFNF/FRPEH8qErEHc2l8REY1YgTILCYSlICXbLf0Iy3/iCYcOlRTTNkV0cv/IT5SyXKbJoEnH2KluwAxhty6nksR9HWonRGmHFSgxfKzzpWmaxthT5ck01b6rMK5HfYO4BNB6D3Gpgy8xtTAPAKt9gaRvfA4R0pBehK82rwlpjMm7sEbrM7gj6//3Nq0rMQ0VDj2LvbH+TSvHWKktN5xJx4aYHNMpaCzWh3rWAQ0EFnHPxMi+Cn8Tk/tC3WUgtuD8leTzXo7xnJMAzmH8bcFwe9hLW7+y6DPYUndczkx00vu4S87g7BnTRnUVr7mNaNuciLjEiR0kVqCEYJX9IMzaT+OBsZTbSGwHvqJyqtjKjRs0XqD3EOwYrXZ4YydDPZyNKKOPg3aejv4CJQRjM0YU/oJnlGt9n034ewkGMVBCgjEpv3uxhBjGnyXEEmKYBwxTx0aIJcQwDximjo0QS4hhHjBMHRshlhDDPGCYOjZCLCGGecAwdWyEWEIM84Bh6gQdIVr+3ybkQ7QsWc0FV8ESMoR+hvOwbo63IOn1Oy9i7tACJaRinPgLpm7kNhf59E+5MXOFFyghysiqqbQGUfIK/pr8RguIOI9FAZuxhnhDrhzI3e//Hx/q//sU+acAAAAASUVORK5CYII="},pG9R:function(t,e,a){"use strict";var s={functional:!0,props:{row:Object,render:Function},render:function(t,e){var a={row:e.props.row,index:e.props.index};return e.props.render(t,a)}},i=a("VU/8")(s,null,!1,null,null,null);e.a=i.exports},pLEv:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAWCAYAAADXYyzPAAAAAXNSR0IArs4c6QAABChJREFUSA3FVE1oXFUUPuf+vJn3ZkwmNhqtrYKITBB14cqFGKsLC24ruJCuXBUEm4CuJMWNECiigjsr4qIQEMS2LlyKglDjX/1BrVYyo7XVJszrOJk38+71O/flNdYkQxdGbzLvvnvuOec733fuu0T/0+D/And+3qvj3V8fMaTPnlmYOiuYOw58/1EfX2q33yXvHwacV9o/9s3C3lNqJxnfN/9LAtATAqqU+pPZ597R04K5Y8ACejl1wnSfMWolsuoCM+dgPSnARh7/9hDQbsedIPIPWaPPR5G6SB5/RFMl1jUB3/3cb7cPBoMHtKLPv1rY81kZvNUcQFN3EjgzlUj/XK2YtveCKQeK8wL/GqRuzrafyLLsawS/Mcz9p83Z5Vf3v+wrI0G9nwHgd3HVfKuVSvHrGK1T6XEZN7LHzdnWQVT4ltK8Vq9VPrBGtVD8oR/PtT5uHm7dWSaR+Z6587VuJz+FAmeS2H55XWK/sACDSqnR6rLMcHNlzLbAzbnlpwByTCle2dWonqzH+oddjeT9WhJ9xEx3IcHS9GzrSUkkoJkbQF56MKma02OxPa01p1qDbZgpzB5Sl8Bb9nj6cPuQc/4VVHph8vrKO5q57z2+QZTZqNtPahX90++d/qMud29Clcf7brAXCe+tJ/bD8Xq0hNMbmurAD58RDjaC8Y9L4wrjTcBg8Yzz7ihA21M3JMcN01pxz0guuW88Ya+z26jX/+j09/X6+X5iHowl9r2JseqS7MuAWqwsIsJpEmFhD59TsX8V8PTc8rNg+qIx+tyeG2vHlDBlh/qLgmUWcJTOODD+5kmz6Dy97RU5DQCxFz4BOzy82ogH+GapcXqfd84dMYa/v+Wm2muWVYZEANLhlvGsgQ5MMCns8kkIExfYwU1mj/7/w28jPjiv1xQYyyGBvEesMWdu2117yRqbeZdfdY8zWiUxuPKCXdbeAUcBp7Rp8CYhpeG3RbwPmwE6AKPjByHryh23jr8ADgNCPBoEXYZIIS5DJAIXsJLBCscFazZybDBw84svamDKkWG7eCl7fQRgUGhAyYu42i6hx4EZcrEeAsnIEvMQooKcipjFRxsUAlsoZiiFKpx67InQGFvFo0jIEbb/dldDa+VdqtggCKUpySWKDUEI6BGAxYaWOg8bMrtqsQ578JMmj4onYEhRMgLj8IZqtNWpyi1AMw6qimqooqxS3pSPPFtIisptHnmns9Dzwg/7I+LD51QIsgGMbuU55Wkk2WPQ60k5Pcqi2EcZcRYR5h5TXcx52A6+V85LDFuPRsULhmSVscEYSlY5TkMH1lYpqjd81o3ZDojGJ4hWV8GR+0RrMdFETFWsxxtix5qwoD5VqVF0cJt4OG2WGgrk3RqlB7C7iARdzFSTB1EX4MU7kGSsr0v7AfgvFjs0Kl4w1t3oLz6QGD/OrAevAAAAAElFTkSuQmCC"},"pP/5":function(t,e){},pRIo:function(t,e,a){"use strict";var s,i=a("bOdI"),n=a.n(i),o=a("N6wk"),r=a("kArt"),l=a("yivU"),c=a("KvKp"),d=(s={props:["query","table","dtltime"],components:{TimePickerT:o.a,SelectBox:r.a,Table:l.a},data:function(){return{cant:!1,jobs:[{label:"给排水",value:1},{label:"电梯",value:2},{label:"变配电",value:3},{label:"照明",value:4},{label:"暖通",value:5}],vJob:-1,names:[{label:"白狗汪1",value:1},{label:"白狗汪2",value:2},{label:"白狗汪3",value:3},{label:"白狗汪4",value:4},{label:"白狗汪5",value:5}],vName:-1,tableData:{},value7:""}},methods:{change1:function(t){this.query.type=t},changes:function(t){this.value7=t,this.getUserList()},getUserList:function(){this.tableData.data&&this.$emit("getUserList",{type:this.query.type,time:this.value7})},deletes:function(){var t=this.value7.split("-");1==Number(t[1])?Number(t[0])>1&&(Number(t[0]-1)>9?t[0]=t[0]-1:t[0]="0"+Number(t[0]-1),1==t[0]||3==t[0]||5==t[0]||7==t[0]||8==t[0]||10==t[0]||12==t[0]?t[1]=31:4==t[0]||6==t[0]||9==t[0]||11==t[0]?t[1]=30:c.a.time(new Date/1e3,10)%4==0?t[1]=29:t[1]=28):Number(t[1])-1<10?t[1]="0"+(Number(t[1])-1):t[1]=Number(t[1])-1,this.value7=t.join("-"),this.getUserList()},adds:function(){if(!this.cant){var t=this.value7.split("-");(1==t[0]||3==t[0]||5==t[0]||7==t[0]||8==t[0]||10==t[0]||12==t[0])&&31==t[1]||(4==t[0]||6==t[0]||9==t[0]||11==t[0])&&30==t[1]||2==t[0]&&Number(t[0])%4==0&&29==t[1]||2==t[0]&&Number(t[0])%4!=0&&28==t[1]?(t[1]=1,12==t[0]?(t[0]="01",t[1]="01"):Number(t[0])+1>10?(t[0]=Number(t[0])+1,t[1]="01"):(t[0]="0"+(Number(t[0])+1),t[1]="01")):Number(t[1])+1>9?t[1]=Number(t[1])+1:t[1]="0"+(Number(t[1])+1),this.value7=t.join("-"),this.getUserList()}},showInfos:function(t){this.$emit("tableInfos2Show",t)}},created:function(){var t=c.a.time(new Date/1e3,1);t=t.substring(5,t.length),this.value7=t},watch:{table:{handler:function(t,e){t&&(this.tableData=t)},deep:!0}}},n()(s,"created",function(){}),n()(s,"mounted",function(){this.tableData=this.table,this.value7=this.dtltime}),s),u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"workInfo"},[a("div",{staticClass:"infoTit"},[t.table.title?a("span",[t._v(t._s(t.table.title))]):t._e(),t._v(" "),a("div",{staticClass:"dateBox"},[a("TimePickerT",{attrs:{value7:t.value7,cant:t.cant},on:{changes:t.changes,deletes:t.deletes,adds:t.adds}})],1)]),t._v(" "),a("div",[a("div",{staticClass:"tbalHe"},[a("div",{staticClass:"btnBox"},[a("div",{staticClass:"jobBoxs"},[a("SelectBox",{attrs:{options:t.query.types,value:t.query.type,icon:"el-icon-d-caret",placeholder:"类别"},on:{change:t.change1}})],1),t._v(" "),a("div",{staticClass:"searchBoxs",on:{click:t.getUserList}},[a("i",{staticClass:"el-icon-search"}),t._v(" "),a("span",[t._v("筛选")])])]),t._v(" "),a("ul",{staticClass:"nums"},t._l(t.table.tabs,function(e){return a("li",[a("span",[t._v(t._s(e.name))]),t._v(" "),a("div",{staticClass:"numss colorY"},[t._v(t._s(e.num))])])}))]),t._v(" "),a("div",{staticClass:"tabBoxss"},[t.tableData.len?a("Table",{staticStyle:{width:"100%"},attrs:{table:t.tableData},on:{rowClick:t.showInfos}}):t._e()],1)])])},staticRenderFns:[]};var h=a("VU/8")(d,u,!1,function(t){a("r7xG")},"data-v-0081850f",null);e.a=h.exports},pj9S:function(t,e){},qmbW:function(t,e){},qnEF:function(t,e){},r7xG:function(t,e){},rHyk:function(t,e,a){t.exports=a.p+"static/img/floor3D.44ec0ab.png"},rVS7:function(t,e,a){"use strict";var s=a("vkG9"),i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-popover",{staticClass:"self-popover2",attrs:{"popper-class":"self-popper",placement:"right-start",disabled:!1,width:"281",trigger:"click"},on:{show:t.getInfo}},[a("div",{staticClass:"popover-btn isPointer no-select",attrs:{slot:"reference"},slot:"reference"},[a("button",{attrs:{type:"button"}},[t._v("设备信息")])]),t._v(" "),a("el-scrollbar",{staticStyle:{height:"100%"}},t._l(t.info,function(e,s){return a("div",{key:s,staticClass:"popover-item",style:{marginTop:0==s?0:"0.15rem"}},[a("div",{staticClass:"title",domProps:{textContent:t._s(e.tit)}}),t._v(" "),a("div",{staticClass:"content",domProps:{textContent:t._s(e.content)}})])}))],1)},staticRenderFns:[]};var n=function(t){a("pP/5")},o=a("VU/8")(s.a,i,!1,n,null,null);e.a=o.exports},rb0O:function(t,e){},rjoR:function(t,e,a){"use strict";var s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"selfSwitchBox"},[a("div",{staticClass:"selfSwitch no-select",on:{click:t.clickEvent}},[a("div",{class:["slide",{moved:t.toggle},{moved2:!t.toggle}],domProps:{textContent:t._s(t.toggle?"开":"关")}})]),t._v(" "),a("span",{staticClass:"state",domProps:{textContent:t._s(t.toggle?"已开启":"已关闭")}})])},staticRenderFns:[]};var i=a("VU/8")({name:"selfSwitch",props:["togglee"],data:function(){return{toggle:this.togglee}},methods:{clickEvent:function(){this.$parent.tempHandleChange()}},watch:{togglee:function(t,e){this.toggle=this.togglee}}},s,!1,function(t){a("rqXv")},"data-v-11eb0c0b",null);e.a=i.exports},rqXv:function(t,e){},rvVE:function(t,e){},rwiD:function(t,e){},sXzr:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEwAAABMCAYAAADHl1ErAAAAAXNSR0IArs4c6QAAET9JREFUeAHlm0uoZUcVhu/Z59zb3dGYNiaYdHfUQCQamiCijkQlYFA0iAMHkYiIigo6CRIkIx2IIYI6cCDqSCSJOhGN+EQURYNPNKBJxPjKmzaamOe95+H//bX/3XU359jdcM++ouumzqpatWrVWv9eVbv23p3Rxv7T6AxdWJyh/p6qn6mzezV5f95+e9U8fbD67VXj9kx+uo7u2YQyVM+ZOjz1VXMBTgAKR7eurxq7Z/JTOblnE7WGMl/NqdcF1fQHDHi/oFf30147xbG1T6QJMld408poN8eOHRt96Ku/uPysZ5172YHx5mEcmm3v/OPxxx793Uff/JLb77nnHsCZqwQ46tCgoI3LnGv/DUjhgEVh/vHbPvjxs9/9qZuuOvDMc45PNsZnCYFmRv94/IzNQ2e94Ipr3n/s7IPn3Pvbn3x3Kv3YUNVgpR2OfG00yCTynnkyV8AyP++888Y3/vjeN21ubV04J2ckncw3FlQFmhGFb0+377/+lUe/duLECZp010XNLvOor41wekgKcMxLdk2uu+m2yyfjrWPT2cZYKI3ms41mKk4RJK7DDzZbR6+VLmPasdiIPVWHoSEAS2YRUQLsADt85HmXaZ2NZgJottholGWj+UhLUmU6kuwkHx0+cvTFsvGfAKvnWguCTD4EBSg4YAWwzaYZnwtYLDB1jmaNluNUwEmpXpKk46jZOldsUyU3AOxQD1C5AUi0HhoKMLwPaAHLS3I6ag6MFgJJoUqh8JFAEGJgKPGiBVKtZkt28Lm/j2F77WBpDk8OH4qSXXACn4DTaKaigFmaQEF2AeKI5amMg7PjIRcFMECLvbbL/Wv9GSrDyICU3Rm2EBRCjTuk9q65gGIvW8ixRSNN3QRGcG4CDBThM8cLMhTQYhe+9iwbCjDFsiuwDjTuiguWpABrJkossk29QgLgQGmhO2iLFWYMFGAhq8Gib+00BGAEVVOCNGgCikPqYqQ8m+5oiQogBP01hjJpJeqDVaTld+1ZNgRghBKQ+pzsskx3xoUyiv3Mh1YA026/YInCnU5Ft59Ztc3/qSVZA9cFLZDG2p9AZOF1qEzTMjUly1BG1JBbJ8HvbFg60M9QGbYsHGfGNnsYyaT1RoZpOYKXz2UgEtDYsVogk1HLbK5dNiRgBFqTA9f6G+tM4U1fnYupTvtekzTGwkt3xx1GCUUhG7CW2UJr7TQkYAkmQbvNKZ+Nh+LHInGtPGOmbBtzoAUmsm2nAKaaaZedCNfN9wOwXTEJkDFLMps8xwsyDiVlm4k16/7S3NfffQfMWcM+JpAAjrTREtTJrGRVB1TJJ373lfYdMKUWbyZYlj46aImW9BIsyj4/YrY3zV2n1/1Cbd8B011yzGme50XdKL1LcTcks/RINPYTgDYw9rAAt19gMe/pALZqGayS9+Mpi6mcn4i7brNbNTx16zlywUYGUAZQnEcjtFmrgKX+3WOX22SO0yGsL6NVcuuuAgzHaqrbq+q1fl0ngGXFwXtJgomeIeWpFqeWoZYpL8Ry0teSXeitxUZTZva4JTY51tIH5qciQCnWNE2lXMsR131WWwZYDKGQOnxV3Yban+j0ZQBGQClpN9r0OeOXKAWMliZ3TTZ+ELTDyrACoGSibqzqsReQmJ/+PvUDTxte1zMuMuyl7r4+YAm45tRTcCZ1DNR12suIMQmS+QgynHf2tP3CULwsyTgp6yxHXpaBSOt5bYvn8cSAHLWAp+pSwkxASD3m085A2sQYfTfSSQcUjgPUKc2RI0eat3zujismh57xqqZpLtRy2dIyKlBoOllccH7i8UZBcjzwJPzQ50jKq5u5NiQlkoTKLXeorlmo+mFbNjw2CMAh2ecP2/pt65LEUVSsZ9WibwFCNfUsavv4qbI9n88fmD32yI++8t7j37/vvvvsovRalzvg7UsrLxNgTAUKx4euvP66L5572euufp++R1yKEnsK0ekuRgL45R+cwQQtoYMAOLxoPUBuhzkuIIcwoL3Jj0boQemTPY9XCtov5CUdJcC7Apo77awc9L4nEDWAMXq6KmNVL2PgbRUbjJvO53fd+e2bP/PNG695WE2mqYuaDsHcjqhWc88tGXys74bN2790//WjZnIpZySkijaxBazSVj8VnKaCutvthBiUDcIsctVxetaeF1T3O32pmUCLfqMmCXVIe5v9HQuNVgeAbHTclOy1nlSRe5gqaoxI7fatBxdrJH37MptN77zlrRd+TN89cRuP4CklPql6HnXAU7DPhYRP3vXl+688+7wLrsExlpv+/BoZC7JaDAFPa5LsY8npj+QBgJE3b9oS4AGqmowsHXlZtvrcCe0qnUXPyw87dk620NddgVmYo4CBLmBIygM6wAOGAULGdEVufWzJJoxVAsIG9olHH/rC59/y3O9JzN6IqwGudcevzstAdUL2S9xgiU8OHT7/1cqAsQMtwIyNhFwgYAaJEPHD0YCqBWrzZ5B9GFXNMhREHgTqRa9kH/q0W0rFHEvq06SeF05EjlYKPBYYOL2EdDbqkYuPKLJvFUwqDgOLAQkbvf7m2wEXdXTgmc95jcQ/UIECGqpxY5Q7jMerAw5YFLJMX3XGR+WIplVLRHBU7VxxsNzh2jrOJYt0taNrkBkujwHVxBB0a5ladOMHFGdLu9jDljMOL3GUYKPsLJW/Xnr0aT4+CKPA2Y6KZIIIgcf6dRJ2tECP6hdM8AHXENf+8HGmI0y0ZqxYANNtXyNLwI1wkjOcyv1H8Kqz7AgC00ZIMmbxSV0cVFq9Mj0yFUagiGcQMkCmjowKDoXjPc+dDk71LF/5Y5l1cZY++aaPwgVJ2iL7KSX3q8sfE+iQDLv6wzSYMD3JS5t63OjOMJKZ6KCg6MHT6c4DG5PNi+U0p3Gjzy2OIAiOTBMR96gGDgVAUgdLgCEls07q4wnQ25aNYKhtWo0LgUabQRw3BA5+uVuOkj0cEWxbunQQ+IKnAl2oRn3luyZRiRjjfimyJ6PHhWUvW+zsPCgVYmQ5Mg+j2pGqieoMK5KTSgxoHv7bH356+PmXXQIiKvr1lfJSooEMzmVwu7Cu4cskx+knM1ki0is4A0j01c8NY6wbgLNRbRxAEQ55IjWEvoMAqIJQMSJjDTcFOeN+5hyr5nFINNbzI6Op8YCl//wB+Z9/u+O2orUcLPXZMKZacwYQEPkkf0Dl4NbW1qGrb3nkA83mwRdxtZigI3mULDICLFkFjB5qTisFwIZPux3qMxzBcFV9pCgeeHlSZTC6rrecOgLLSwcbdTkiyJhFAKL/qEMcOwCXo4NlDJbMX9pbmRg2R4udJ+645a3P/vT29vaTEj2l8rTKtgrZlhsA5zrbwh6F8RTkADeZzWabf//rXX+66BVvONqMNs+nn1QXQA2aAkgrU1SyhSvOfublKWlZphqjmBo5SgYgIw8sI2bN3M2tsfEBHXrMHVRZYsyBDploX9CRXTZ6VliZq4yznnTx0Xbpx6qXNr5q3PaTj931w0++45Z//OX2J6QbgFgcFK4txWHiaAoGAYp/HUNxhokfVDk0mUwOvvYj33/Z4Ute/orJ1oEjmmuL7CLFWUpY8w+GJWMGWZ4LHJ/DuhnbicsAB13usozHDiC1Oi1g3R4GdIq87GuYL0CXAMooS5R5zjI+DruuPrr1Yy2Pmy22N3aeuu/EH3/xsx98+IpfTqdTsirZlQzjHQAlwMnFYgsewMgsAGNZAlZdAJFCP3oAnKton9ReRunLfBnTXHXz4j0KAPz8aIrBgIsyFwLOAMC89erRZ1WNSrivPioqq4g+CmMAgEwCDJYeBZDqwnKkH70OMIKuqTaK4aQnAxMk+uk7E8BqsLBF4VUOyxt77teHD9/11OYuZy04HpOBYnUAaFDiN3wVRQd9zFGIC2BqcLDftytRoRqw2mCMMhijBAOhw0TIAasGTM1Oj3pNfbAylvm9DzlSMk3LuQWG2bSo9QuHrLTrquPLyuA8pvyUkcVCYgtgy0BbaTeA9Q3GKI6SCRA6kQewZEoAtaJ+lrWjW4M118M4bYz7LslIO2OB96Kyr0kuA3TV2UBg/eAwF7KpNMRpB2DGJSEALQVZ3ybjbAvAqCTAdGCUgSHkfbDq7GJ8bGRMePoALGCxB2IPMAwY+xjHEANm11QXsbmZxL3jngQsAdagoZ0R7cCOpQ+eWAIasQa81O2f5LW9XY9G6YhBZsIghCyOYXAZWKcCLGBxkbCFQxjmX/AEGL/bF2gFJ5Yi+5Y4xtulClA5I1HHn/iGn5RllL7wPmixEd9qwDqbWZL1BA6kEqCMLBOcCqw+cMkwxjEfJXOMtGfxzzbJtIUAMS5qs3dB2b/o0+ZmWTbpgJaMIFA0ipZV/VO30x+emGpOvS4nLakWwDBgZ1vOAAg5dZZTOA7SDhDwmpa1sxwZy3EFskxG9XygicgkPSXk8QmFIm79kieAJsIGmRXg4MkOfMTnmpa1kVGiD0+p+7CT8eYBLB24RAccA/DIaNdAqdn1U19FjAlgmY+2M0NHirGskEmemMm9RFtr9lJ1nCg/ZZxajO/fABI02qvIU7SdqTMu9XBUqEPhXYYVcekIQH0Z8hpE+h1HFJe0owNAjIUClvcKgaPzuB87WXIjbfxl50IzbmoWquXxwXYYC2DhZJztiWeUqh31ZWnDV9UzOP1u54qnE45CgKiVU08funWd9jICoIylnsAK55myPBuihB77mvXdYLBbQrrscQBf26CeQl8ujKorqbXo/lV1Ous+Ky8DrK8IKPXA1PtyG1zygz4F/QQEtxywAgjc0SZkwctRg7cNUPumJPbQqktApP90aJXeKrltrgKsnnCVgVXyeiz1ZBj6BAjvipekBEgAjPMDHAXnDUxQgLYsIe6Xvk3aa6PTAWxtk9tweVVUqkapzTJJOEYgMoilbdysvE8/+w6YkocHcN6hQb5bUvHJX5wXXFq29Ph1Mn37SfsOGEuyBYulaNhouwgZ9q2klTv3Ey3N/d8AmD9zgQOHV95W6K9gWA4YfvgGtP9XwIi7i90HV9qSCKWybfGKpyj5jSld7Y1S0o5ala49SGXIDCPAmkrAi42nBBT/Y3x5YZg9S22yiv2Lj47c+oQi79zLOFUqQjYILblwg8zLJAWj6fTPZJnOW/5gDBeALsilVPron03vzrjBvOxNNDRgyY7u7PTkQ3d/XdBxwuIA66872stYkiRYx9nZnnrw7m9UgHU2ejGttTkUYAGqz+d33nD8W9PZzs91vDBYyipuAs4w3SH5P0FcpjvTn//hxuPfEho1UH17awUL47yjGoLIFi5OSl4marnNJ0+f+MtvnnX8jZfInYuEQJdtybz5dPqze2965w2P3/Prf8lG/YaCB3AArEFUc31EIOumGixuMvmEl++ehyQ7yHfPi6/91ZVbF7z4qqaZvBCntGfdtf3g72/90yde+p32uyGfwfLtMC8Q89a1Bo7ha6GhAAtoABbQ8o2z/u7Jy0X6k/k8UOe9V/3NELAoASuZliWqrvUQzg1JyQI4QQIMQcMBlYABKXtr9LIM+wDFnoYMQ0MClqtPkAEF0AAnYNEHeDVg6AJUQGMMMgr6savq+mkowAgKgicrAkTAog9ZbgyqdrqABGBwwAtYNWCZQ93royEAIxBAgahTCJSgQwERf5Jx9EUXoOoSwGIPXYj2WmkIwOoAEiAAQQkQjgxQlgEWgAEKnQAcexINQ0MCRnBkWsBKhAEAMALWsowMSH2OnQAfm2vjcWxtE1SGM1d4DQ71ul0NMxjJQMBKVgX4gBVej93zepzfc8MrDGa+mlOvC0PTHxACUs3Rq/tpr53i2Nonqiao50wdnnqluqsasBAGqH5914B1NE7l5DrmxGZ/3n571bw1UOj026vG7Zn8dB3dswmXGDpTHwYHqfb53y7xTU7MEhuWAAAAAElFTkSuQmCC"},sZhX:function(t,e,a){"use strict";var s={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("transition",{attrs:{name:"el-fade-in-linear"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:this.$store.state.bubbleShow,expression:"$store.state.bubbleShow"}],staticClass:"bubbleBox",domProps:{innerHTML:this._s(this.tipText)}})])],1)},staticRenderFns:[]};var i=a("VU/8")({props:["tipText"],name:"bubble-tip",data:function(){return{}}},s,!1,function(t){a("SZJb")},"data-v-c4cb260c",null);e.a=i.exports},szMG:function(t,e,a){"use strict";(function(t){var s=a("sZhX"),n=a("2U6G"),o=a("k0gE"),r=a("I2ML"),l=a("mEvV"),c=a("ftYy"),d=a("Lehq"),u=a("zccD"),h=a("JIKC");e.a={name:"home",components:{bubbleTip:s.a,AgentManage:r.a,EnergyManage:l.a,Equipment:c.a,Banner:n.a,PersonInfo:o.a,Door:d.a,RevenueData:u.a,Conditioning:h.a},data:function(){return{list:[{id:1,name:"中央空调系统",src:"../../../static/img/conditioning.png",componentsName:"Conditioning"},{id:17,name:"营收数据分析",src:"../../../static/img/revenueData.png",componentsName:"RevenueData"},{id:2,name:"能源管理系统",src:"../../../static/img/energy.png",componentsName:"EnergyManage"},{id:14,name:"门禁系统",src:"../../../static/img/doorManage.png",componentsName:"Door"}],allComponents:{12:{id:12,name:"代维管理系统",src:"../../../static/img/agent.png",componentsName:"AgentManage"},"-1":{id:"-1",name:"设备情况",src:"../../../static/img/equipment.png",componentsName:"Equipment"},1:{id:1,name:"中央空调系统",src:"../../../static/img/conditioning.png",componentsName:"Conditioning"},2:{id:2,name:"能源管理系统",src:"../../../static/img/energy.png",componentsName:"EnergyManage"},14:{id:14,name:"门禁系统",src:"../../../static/img/doorManage.png",componentsName:"Door"},17:{id:17,name:"营收数据分析",src:"../../../static/img/revenueData.png",componentsName:"RevenueData"}},partsData:[{id:1,componentsName:""},{id:2,componentsName:""},{id:3,componentsName:""},{id:4,componentsName:""}],currentMudel:0,isOperateModules:!1,isOpenMonitor:!1,isResize:1,showBannerParam:!1,personalCenter:{isShowBounced:!1,isShowDialog:!1},personInfoOptions:{isPersonInfo:!1,isEditInfo:!1,isChangePassword:!1},monitoringData:[{time:"",name:"",word:""}],bubbleTip:"",routerInfo:{},dateInfo:{},url3d:"",coordinate:[],wetherInfo:{weather:"",temperature:"",code:""},jiuli:""}},created:function(){console.log(this.$store.state),this.routerInfo=this.$store.state.sysList,this.coordinate=this.$store.state.userInfoTotal.projectInfo[0].coordinate.split(","),this.dateInfoInit(),this.getWeather()},mounted:function(){var e=this;t(".companyName").click(function(){event.stopPropagation()});var a=this;window.onresize=function(){a.isResize++},this.initModelId(),this.initAlarm(),this.initRouterInfo(),this.$nextTick(function(){e.url3d=e.$store.state.userInfoTotal.projectInfo[0].bim_page});var s=new Date,i=s.getFullYear(),n=s.getDate(),o=s.getMonth();this.jiuli=this.CalConvert(new Date(i,o,n),!0)},methods:{CalConvert:function(t,e){function a(t,e,a,s,i,n,o,r,l,c,d,u,h,m,p,f,v){this.BaseDays=t,this.Intercalation=e,this.BaseWeekday=a,this.BaseKanChih=s,this.MonthDays=[i,n,o,r,l,c,d,u,h,m,p,f,v]}function s(t){return t%4!=0||t%100==0&&t%400!=0?0:1}var n=[new a(23,3,2,17,1,0,0,1,0,0,1,1,0,1,1,1,0),new a(41,0,4,23,1,0,0,1,0,0,1,0,1,1,1,0,1),new a(30,7,5,28,1,1,0,0,1,0,0,1,0,1,1,0,1),new a(49,0,6,33,1,1,0,0,1,0,0,1,0,1,0,1,1),new a(38,0,0,38,1,1,0,1,0,1,0,0,1,0,1,0,1),new a(26,6,2,44,1,1,0,1,1,0,1,0,0,1,0,1,0),new a(45,0,3,49,1,0,1,1,0,1,0,1,0,1,0,1,0),new a(35,0,4,54,0,1,0,1,0,1,1,0,1,0,1,0,1),new a(24,4,5,59,1,0,1,0,1,0,1,0,1,1,0,1,1),new a(43,0,0,5,0,0,1,0,0,1,0,1,1,1,0,1,1),new a(32,0,1,10,1,0,0,1,0,0,1,0,1,1,0,1,1),new a(21,2,2,15,1,1,0,0,1,0,0,1,0,1,0,1,1),new a(40,0,3,20,1,0,1,0,1,0,0,1,0,1,0,1,1),new a(28,7,5,26,1,0,1,1,0,1,0,0,1,0,1,0,1),new a(47,0,6,31,0,1,1,0,1,1,0,0,1,0,1,0,1),new a(36,0,0,36,1,0,1,1,0,1,0,1,0,1,0,1,0),new a(26,5,1,41,0,1,0,1,0,1,0,1,1,0,1,0,1),new a(44,0,3,47,0,1,0,0,1,1,0,1,1,0,1,0,1),new a(33,0,4,52,1,0,1,0,0,1,0,1,1,0,1,1,0),new a(23,3,5,57,0,1,0,1,0,0,1,0,1,0,1,1,1),new a(42,0,6,2,0,1,0,1,0,0,1,0,1,0,1,1,1),new a(30,8,1,8,1,0,1,0,1,0,0,1,0,1,0,1,0),new a(48,0,2,13,1,1,1,0,1,0,0,1,0,1,0,1,0),new a(38,0,3,18,0,1,1,0,1,0,1,0,1,0,1,0,1),new a(27,6,4,23,1,0,1,0,1,1,0,1,0,1,0,1,0),new a(45,0,6,29,1,0,1,0,1,0,1,1,0,1,0,1,0),new a(35,0,0,34,0,1,0,0,1,0,1,1,0,1,1,0,1),new a(24,4,1,39,1,0,1,0,0,1,0,1,0,1,1,1,0),new a(43,0,2,44,1,0,1,0,0,1,0,1,0,1,1,1,0),new a(32,0,4,50,0,1,0,1,0,0,1,0,0,1,1,0,1),new a(20,3,5,55,1,1,1,0,1,0,0,1,0,0,1,1,0),new a(39,0,6,0,1,1,0,1,1,0,0,1,0,1,0,1,0),new a(29,7,0,5,0,1,0,1,1,0,1,0,1,0,1,0,1),new a(47,0,2,11,0,1,0,1,0,1,1,0,1,0,1,0,1),new a(36,0,3,16,1,0,0,1,0,1,1,0,1,1,0,1,0),new a(26,5,4,21,0,1,0,0,1,0,1,0,1,1,1,0,1),new a(45,0,5,26,0,1,0,0,1,0,1,0,1,1,0,1,1),new a(33,0,0,32,1,0,1,0,0,1,0,0,1,1,0,1,1),new a(22,4,1,37,1,1,0,1,0,0,1,0,0,1,1,0,1),new a(41,0,2,42,1,1,0,1,0,0,1,0,0,1,0,1,1),new a(30,8,3,47,1,1,0,1,0,1,0,1,0,0,1,0,1),new a(48,0,5,53,1,0,1,1,0,1,0,1,0,1,0,0,1),new a(37,0,6,58,1,0,1,1,0,1,1,0,1,0,1,0,1),new a(27,6,0,3,1,0,0,1,0,1,1,0,1,1,0,1,0),new a(46,0,1,8,1,0,0,1,0,1,0,1,1,0,1,1,0),new a(35,0,3,14,0,1,0,0,1,0,0,1,1,0,1,1,1),new a(24,4,4,19,1,0,1,0,0,1,0,0,1,0,1,1,1),new a(43,0,5,24,1,0,1,0,0,1,0,0,1,0,1,1,1),new a(32,10,6,29,1,0,1,1,0,0,1,0,0,1,0,1,1),new a(50,0,1,35,0,1,1,0,1,0,1,0,0,1,0,1,0),new a(39,0,2,40,0,1,1,0,1,1,0,1,0,1,0,0,1),new a(28,6,3,45,1,0,1,0,1,1,0,1,1,0,1,0,0),new a(47,0,4,50,1,0,1,0,1,0,1,1,0,1,1,0,1),new a(36,0,6,56,1,0,0,1,0,0,1,1,0,1,1,1,0),new a(26,5,0,1,0,1,0,0,1,0,0,1,0,1,1,1,1),new a(45,0,1,6,0,1,0,0,1,0,0,1,0,1,1,1,0),new a(34,0,2,11,0,1,1,0,0,1,0,0,1,0,1,1,0),new a(22,3,4,17,0,1,1,0,1,0,1,0,0,1,0,1,0),new a(40,0,5,22,1,1,1,0,1,0,1,0,0,1,0,1,0),new a(30,8,6,27,0,1,1,0,1,0,1,1,0,0,1,0,1),new a(49,0,0,32,0,1,0,1,1,0,1,0,1,1,0,0,1),new a(37,0,2,38,1,0,1,0,1,0,1,1,0,1,1,0,1),new a(27,5,3,43,1,0,0,1,0,0,1,1,0,1,1,0,1),new a(46,0,4,48,1,0,0,1,0,0,1,0,1,1,1,0,1),new a(35,0,5,53,1,1,0,0,1,0,0,1,0,1,1,0,1),new a(23,4,0,59,1,1,0,1,0,1,0,0,1,0,1,0,1),new a(42,0,1,4,1,1,0,1,0,1,0,0,1,0,1,0,1),new a(31,0,2,9,1,1,0,1,1,0,1,0,0,1,0,1,0),new a(21,2,3,14,0,1,0,1,1,0,1,0,1,0,1,0,1),new a(39,0,5,20,0,1,0,1,0,1,1,0,1,0,1,0,1),new a(28,7,6,25,1,0,1,0,1,0,1,0,1,1,0,1,1),new a(48,0,0,30,0,0,1,0,0,1,0,1,1,1,0,1,1),new a(37,0,1,35,1,0,0,1,0,0,1,0,1,1,0,1,1),new a(25,5,3,41,1,1,0,0,1,0,0,1,0,1,0,1,1),new a(44,0,4,46,1,0,1,0,1,0,0,1,0,1,0,1,1),new a(33,0,5,51,1,0,1,1,0,1,0,0,1,0,1,0,1),new a(22,4,6,56,1,0,1,1,0,1,0,1,0,1,0,1,0),new a(40,0,1,2,1,0,1,1,0,1,0,1,0,1,0,1,0),new a(30,9,2,7,0,1,0,1,0,1,0,1,1,0,1,0,1),new a(49,0,3,12,0,1,0,0,1,0,1,1,1,0,1,0,1),new a(38,0,4,17,1,0,1,0,0,1,0,1,1,0,1,1,0),new a(27,6,6,23,0,1,0,1,0,0,1,0,1,0,1,1,1),new a(46,0,0,28,0,1,0,1,0,0,1,0,1,0,1,1,0),new a(35,0,1,33,0,1,1,0,1,0,0,1,0,0,1,1,0),new a(24,4,2,38,0,1,1,1,0,1,0,0,1,0,1,0,1),new a(42,0,4,44,0,1,1,0,1,0,1,0,1,0,1,0,1),new a(31,0,5,49,1,0,1,0,1,1,0,1,0,1,0,1,0),new a(21,2,6,54,0,1,0,1,0,1,0,1,1,0,1,0,1),new a(40,0,0,59,0,1,0,0,1,0,1,1,0,1,1,0,1),new a(28,6,2,5,1,0,1,0,0,1,0,1,0,1,1,1,0),new a(47,0,3,10,1,0,1,0,0,1,0,0,1,1,1,0,1),new a(36,0,4,15,1,1,0,1,0,0,1,0,0,1,1,0,1),new a(25,5,5,20,1,1,1,0,1,0,0,1,0,0,1,1,0),new a(43,0,0,26,1,1,0,1,0,1,0,1,0,0,1,0,1),new a(32,0,1,31,1,1,0,1,1,0,1,0,1,0,1,0,0),new a(22,3,2,36,0,1,1,0,1,0,1,1,0,1,0,1,0)],o=[0,31,59,90,120,151,181,212,243,273,304,334,365,396,0,31,60,91,121,152,182,213,244,274,305,335,366,397];return(e?function(t){function e(t,e){return t>>e&1}var a,s,i,n,o=[268949,3402,3493,133973,1386,464219,605,2349,334123,2709,2890,267946,2773,592565,1210,2651,395863,1323,2707,265877],r=!1;for((c=t.getYear())<1900&&(c+=1900),a=365*(c-2001)+Math.floor((c-2001)/4)+[0,31,59,90,120,151,181,212,243,273,304,334][t.getMonth()]+t.getDate()-23,t.getYear()%4==0&&t.getMonth()>1&&a++,s=0;s<1e3;s++){for(i=n=o[s]<4095?11:12;i>=0;i--){if(a<=29+e(o[s],i)){r=!0;break}a=a-29-e(o[s],i)}if(r)break}var l=n-i+1;12==n&&(l==Math.floor(o[s]/65536)+1&&(l=1-l),l>Math.floor(o[s]/65536)+1&&l--);var c="";return l<1?(c+="闰",c+="正二三四五六七八九十冬腊".charAt(-l-1)):c+="正二三四五六七八九十冬腊".charAt(l-1),c+="月",c+=a<11?"初":a<20?"十":a<30?"廿":"卅",a%10==0&&10!=a||(c+="一二三四五六七八九十".charAt((a-1)%10)),c}:function(t){var e,a,r,l,c,d=t.getFullYear(),u=t.getMonth()+1,h=t.getDate(),m=0;if(d<1936||d>=2031)return alert("只处理1936 - 2031有效年份"),!1;if(l=n[r=d-1936].Intercalation,(c=u)<0){if(c!=-l)return alert("月份无效"),!1}else if(c<1||c>12)return alert("月份无效"),!1;if(0!=l&&(c>l?c++:c==-l&&(c=l+1)),c--,h>n[r].MonthDays[c]+29)return alert("农历日期不正确"),!1;for(i=0;i<c;i++)m+=n[r].MonthDays[i]+29;for(m+=n[r].BaseDays+h,e=s(d),i=13;i>=0&&!(m>o[14*e+i]);i--);return a=m-o[14*e+i],i<=11?(SolarYear=d,SolarMonth=i+1):(SolarYear=d+1,SolarMonth=i-11),e=s(SolarYear),r=SolarYear-1936,m=o[14*e+SolarMonth-1]+a,weekday=(m+n[r].BaseWeekDay)%7,kc=m+n[r].BaseKanChih,kan=kc%10,chih=kc%12,SolarYear+"-"+SolarMonth+"-"+a})(t)},getWeather:function(){var e=this;t.ajax({url:"https://free-api.heweather.com/s6/weather/now",data:{location:e.$store.state.userInfoTotal.projectInfo[0].coordinate,key:"a3af62d7db2d4698851b6432b0572ea3"},success:function(t){e.wetherInfo.temperature=t.HeWeather6[0].now.tmp+"℃",e.wetherInfo.weather=t.HeWeather6[0].now.cond_txt;var a=parseInt(t.HeWeather6[0].now.cond_code);100==a&&(e.wetherInfo.code="../../static/img/qing.png"),a>100&&a<213&&(e.wetherInfo.code="../../static/img/yin.png"),a>299&&a<319&&(e.wetherInfo.code="../../static/img/yu.png"),a>398&&a<500&&(e.wetherInfo.code="../../static/img/xue.png"),(a>499&&a<502||513==a||515==a)&&(e.wetherInfo.code="../../static/img/wu.png"),a>501&&a<514&&(e.wetherInfo.code="../../static/img/mai.png")},dataType:"json"})},dateInfoInit:function(){var t=new Date,e=t.getDate(),a=t.getMonth()+1;a>=1&&a<=9&&(a="0"+a),this.dateInfo.numbers=e+"/"+a;var s=new Array("○","一","二","三","四","五","六","七","八","九");function i(t){var e=""+t;return t<10?s[t]:10==t?"十":t<20?"十"+s[e.charAt(1)]:20==t?"二十":t<30?"二十"+s[e.charAt(1)]:30==t?"三十":t>30?"三十"+s[e.charAt(1)]:void 0}this.dateInfo.chinese=i(a)+"月"+i(e)+"号"},deletModels:function(t){var e=this;this.partsData.map(function(a,s){a.componentsName==t.componentsName&&e.$http.get("/index_pc/pc/set/model",{id:s+1,self_id:0}).then(function(t){"0"==t.data.code?(e.bubbleTipShow("删除成功"),a.componentsName=""):e.bubbleTipShow(t.data.message)}).catch(function(t){console.log(t)})})},initModelId:function(){var t=this;this.$http.get("/index_pc/pc/select/model").then(function(e){console.log(e),"0"==e.data.code?e.data.data.map(function(e){5!=e.id&&(t.partsData[e.id-1].componentsName=t.allComponents[e.self_id].componentsName)}):t.bubbleTipShow(e.data.message)}).catch(function(t){console.log(t)})},initRouterInfo:function(){},initAlarm:function(){var t=this;this.$http.get("/index_pc/pc/model",{self_id:-2}).then(function(e){0==e.data.code&&(t.monitoringData=e.data.data.record,console.log(t.monitoringData.length))}).catch(function(t){console.log(t)})},bubbleTipShow:function(t){this.bubbleTip=t,this.$store.state.bubbleShow=!0;var e=this;setTimeout(function(){e.$store.state.bubbleShow=!1},3e3)},personInfoShowTips:function(t){this.bubbleTipShow(t)},loginOut:function(){window.location.reload()},addModules:function(t){this.currentMudel=t,this.isOperateModules=!0},chooseSystem:function(t,e){var a=this,s=!0;this.partsData.map(function(t){if(t.componentsName==e)return s=!1,void a.bubbleTipShow("已显示该模块！")}),s&&this.$http.get("/index_pc/pc/set/model",{id:this.currentMudel+1,self_id:t}).then(function(t){"0"==t.data.code?(a.bubbleTipShow("设置成功"),a.partsData[a.currentMudel].componentsName=e,a.isOperateModules=!1,console.log(a.partsData)):a.bubbleTipShow(t.data.message)}).catch(function(t){console.log(t)})},openMonitor:function(){this.isOpenMonitor=!this.isOpenMonitor},showBanerClick:function(){this.personInfoOptions.isPersonInfo=!1,this.personInfoOptions.isEditInfo=!1,this.personInfoOptions.isChangePassword=!1,this.showBannerParam=!0},updateBannerParam:function(t){this.showBannerParam=t},showPersonInfo:function(){this.personalCenter.isShowBounced=!this.personalCenter.isShowBounced},handleCommand:function(t){this.showBannerParam=!1,"loginOut"==t?this.personalCenter.isShowDialog=!0:"personInfo"===t?this.personInfoOptions.isPersonInfo=!0:"changePassword"==t&&(this.personInfoOptions.isChangePassword=!0)}}}}).call(e,a("7t+N"))},tL9H:function(t,e){},tXnU:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJwAAAC0CAYAAABhR0UWAAAAAXNSR0IArs4c6QAAE65JREFUeAHtnXtwHMWdx7tndiVbfmHOYLCxi+D4UZCSZEsOFYoEC/KCC8cZY8XSOmCslWISfEDwHZXEl1JdKI7UHQWBnAx6cMB5JSPOduUcuEBxSCHJuQheJBFIWSa+4pAM54pjG8uWLe3O9H175bVX8kralWZ7enZ/84dmtqcfv/70V90z3T3dnNERI1B8/+6L7P4zS7llLxFMLOWM48yu4EzMYIzPEEJMl+chXKKPc36SMdEnGO/jjPUizAGE6RamccAomNLd+cTq44T2QgJglZtHSU3znEiU3QBBlTHOVkFQ1zhJAoJ8nwnWDkG2+X3sV+H6yiNOxu/VuHJKcNcGm+cOCLEO4gpACKWooRTlnyMhsQ8iDOVzvuOtxsrDXhXMZO1WBHyyZk48fEnNPr9l7V+L5vFb0NdX0PSZE49t8iHR7FqI5XXOxQumueylcH1pZPKxeieGrBVcSc2egoh9IshstgU12QI9i4T3GJw9ZpozG8L1t/braaOzVmWd4Aq3vDqNHzvyADDdh6ZzjrO4MhMbmtojeI58cnae//H2unK8jGTvkVWCKwpu/yZqtMfQfM73YpGhMA4xgz3Y1bj+RS/an4rNWSG4ourma5gtnkKNVpZKpnX3gxqvjRl8c1dD5fu625qufUa6AXTyD4Hx4qrtf8dsuyNbxCb5xvKCPMm8yTzqxHyytng2M4Wbdl3KB0+/gLfOr00Wgs7hOWevTeHGndnSleJJwS2varnJYnYIVcFcncXimG2cHzaZEehoqvgvx+J0KSLPNanFG0MbbGb/MmfEJoWBfyyZ56Jg890u6cSxZF3tBE03F0VVoa1oQn+KcJ77R0k3r0n8GxDebZetWGMd7tj1ZpL7nnDyRJNaWyuM3T2hOiHYtz1BNcNG4rnumdULAt+preV2hpNyPHpP1HDHFy35F4htk+O5926Epfv73pt7+J1dL3stC9oLrrBq+8MQ2/e8Bjbj9gpWOrdkTR5E90bG03IwAa0FV7SxGUITDzuY3+yKSrAvXlZy+0mIbq9XMqbtM1xRdctqYdk7IThtbdSjkDH1yTTWdDVU7NbDnrGt0LIwS2p2LIpaVhi97LPGNp/uSgIYCvvUZ5ol4fp1B3Unol33wqratikQ27+T2FKXjmQlmUl2qYdyx6d2gjva88mTAFjsDg7vpiqZSXa650CrJjU2ZCWs13WHprN9Jje/rPMQmDY13M2bX8m3hb1N58L0gm2SoWSpq63aCO7j/qM/wLDVYl1BecUuyVCy1NVeLZrUFVWtn42yyHsYK9T2P1PXAkxuFx80/Oxznc8EPkh+3z1XLWo4i0V+RGJzUgQiT0TZ3zsZo1NxuV7DxfrcolY3mgKtRz2cAq4qHvk5osn9y95pKv+jqjRTScf1Gi4atX5IYkulqNLzI5laIqLds5yrNVzxppYrRcT+AH1IvvRwku9UCGAEIsr9xuLOpys+TMW/Cj+u1nAQWxWJLXPFLNlKxplLIf2YXRMcYHBU+3embzKFSIeAZCxZpxMmk35dExxmg5RhdaGFmcwcxQ0CYLwiuONGXVi4JjguxAZdIGS7HTaztGHtiuAwq8EnPwjJ9oLWJn+C/VWMuQYGuSK4Tz/6ZCXW/5ipQf5zwgTJWjLXIbOuCM7m4iYdMp9LNujC3BXB4UmWBKdc7XowVy44OXUGb+nXKeed4wlK5jpMW1IuuEP9JzAFSeTlePm7kH2RN8TehaQTklQuOJOLZQnp06VCAjqwVy44zEglwSkUWWJSOrBXLjisZUuCS1SBymsN2KsXnGBXqmRMaSUQ0IC9csGhE/Ls9kEJIOhSCQEd2CsXHKaI0AiDEnldmIgO7JULDtNlqIa7UAtKXHRgr1xw53fkU8KYEhlGIL4b4jBHpT9cEJzS/FFimhFQLjgsF3pCMwY5Y44O7JULDsNafTlTwtpl1H32ygUnd1DWrhxyxCAd2CsXHF7NqUl1SeA6sFcuOOyw8L8u8aZkNWCvXnCC7aeSd4mABuyVC87gBgnOJb3pwF654CzBSXAuCU4H9soFN79gJtYs44MuMc/hZPngEHt3ESgX3H8+dcsA5+K/3c127qUumUv2budcueCGMsw9v++n2wWXfvp6MHdFcIbQI/PpF5p3Q+jC3BXBzVp4+dtYzoc6gBXpV7KWzBUlN2YyrgiuvbYsiv16fj6mZXTTOQJgHWPuXIwTjskVwUlrBefPTdhqCpgWAYMZz6cVIIOeUdu6c8hF8oqCoQ9pjbgM8+fso67GwJVYfhWfNLh/uFbDSQBYafsF9xFktwWSsS5ik6RdE5xMHAseN8mFj+U1Hc4TkGwlY+djnniMrgoutrq2YP82cfMp5JgEwFanFcylra4KThqAzSsekZtYyGs6nCNwdmOQR5yL0ZmYXBdcbKcUzpqdyQ7Fco4AmOq2C420zXXBSSNM5v8H9Mu5Ps4nbcmOgw9yH/uxjnnRQnDyP5Ez8RMdAXnRJnQAPKrjToKSpRaCk4bMK7hYPstpt92itM1Lh2QoWepqszaCk1NnMCP1Hl1BecUuw2Tf0WEa0mi8tBGcNDC2Vzs3GkYzltzHIQB2HQ2B18fx5eptrQQnSVy84PK/QYdlp6tUPJi4ZCbZ6W66a2OpY4GJbdprWWGMt84ayx/dGyIAsX3qM82ScP26g7oz0a6Gk8Bi4Azjbgx+aTHgrHshMrDygtgkRy0FJw3raqjYjTeuLfKajtEJcINtkaxG96HXHVMvc4Zbc7hj5965K273w/VLw+/QrxgBgz/ybuP6h71EQ8tnuJEAi6tCdbYQ1GWSAIYb/GnMc/McE22b1AS27K8XVN6Ltc2eSXTL5WvJYvUVld/1IgNP1HBxsEVVoa14c9VyjDBuY6bPqNl+hJrNsww8JThZmMUbQxswVbgBwvNlunB1il9OpsQEh5quxsp/1cmudG3xnOBkBpdXtdxkMTuEXaXnppthT/rn/LDJjEBsJMaTGThvtCee4c6bO3QVA++fWohnmddG3su23zKPUzkvygaxybLxZA0XF5X88mt5MPS36B1+WAgmu0+y5oDQIiicrR2NgX9Cc5o1HeCeFlxcXUXVzdcwWzwFAZbF3bx8htjaMXpwb1dD5ftezkcy27NCcPGMFQW3f5PZ7DFUB/Pjbl46ozAOYeznwa7G9S96ye50bM0qwcmMF255dRo/duQBXN6HGm9OOjDc8osm8wgebp6cned/vL2u/KRbdqhIN+sEF4dWUrOnwLJOVNuCPYiFJRbE3fU68x6Ds8dMc2ZDuP7Wfr1sy4w1WSu4OK6Smn1+y9q/Fu8Xd8Lty9jgzNXxY/n5Hux4He8BL5jmspfC9aWRuK25cM56wSUW4rXB5rkDQqxDUxvAJhmlckmdxPuZu8ZbJmdhg/NQPmMtbzVWHs5cWnrHrAi4fhBKaprnRKLsBnwtVgYxrIIIr3HSSjyXvY+FetqhtDa/j/0qXF95xMn4vRpXzgpuZIEV37/7Irv/zFJm20sxgrEETd8SvO1eAUFif1c+A9czIKDpQ+FEHwSFh3vRJ7cTAsReNNUHMPR0AN0Z3UbBlO7OJ1YfH5kG/SYCRIAIEAEiQASIABEgAkSACBABIkAEdCKQFd0ia2tb8w722otsgS4NZsvuDJzZvMTuDGQUXRuyi4NN0akAYMsZdMGge4X1oT/wJOzEjtmxrcI/xnU3vuQ8gDVXuhddYRx8qbbc83uUeVJwxd8OLWYWK8McuDIU1Er041/p9pBVpkUsh8QwLvIh+gh/h1mzbQbPa9NxwcHxOHhCcNffE5p9coDdBuA3AviNEJknpx+NVxhp3+esF0Jswz/cG9Pz2c9/sy1wLO04FAfQVnCymTzQG/kGJlauR2/+X6KZyVPMxmPJYdVLzn6BkY7tS+abL+va/GonuOUbW0ptbgUhsnLUZrM9Vup6mMv5MQzJtZqcN7zTGAjrYdSQFdoIrjjYskoI+wcYRP+KToC8bov8CIdz8x87GyvadciLq4KDuLD9Ucs30Fx+H7XZF3QAkrU2cL6XG+KRrob1v3Azj64Jrri65Tph2z+D6Ja7CSAH034H37je2/Fs5V438q5ccIWbdl3KI6d/gi6Nu1CzKU/fDcj6pSn3OWPPGdP8D3U8Vf4nlfYpK/C1ra3mgVcj96Dp/DG6NS5SmUlKKzkBFP5xrC+3dfFX855+qbxcyW5ASgS38p7QVYMDYgeEtjJ51snVTQKYTPq7vDxW8fa2wP9k2o6ML/UgvxWF2DpIbJkuyonHj+foz8sywgfl5ROPJbWQGavhvvBA69RTJ6I/ZcKuTs0U8qUDAYxc1BfM8t+/9/Hy05mwJyOCk2OdIip24cXgc5kwmuLMLAH03b1nsrzVmRirdVxwxdU7VgrLehmD6ZdkFgvFnkkCqOn+ZDDjlo5nK/Y5mY6jz3DLq7ffLKxoG4nNySJyJy5Zhjaz2gurmr/upAWOCa64qvku2+b/gZeDaU4aSHG5R0CWJcZk9xQGQ3LVAkcORwRXHGy+H5Mfn8PbTk4tg+pICWgeSaxMbfE8VpK/zwlTJ/0MJ9fctRl7lkYNnCgOnePgAktV3N3ZVPn8ZKyclOCKg6HbhM12Zvts28kAzqaw6CCOYtrY7e82Ve6ZaL4mLLjl1c03WJb9SySs2zcCE2VB4VIjcAbz7L7W0RR4MzXvw31NSHArgs2Flm3/Gg+VM4dHR79ygQBqOuxeKL4Yrl//+3Tzm/ZLw7WbX5lpCRvNKIktXdjZ4h8vErOiUb5TaiHdPKUtuNOnjjZhBOGz6SZE/rOLAJ7bF5/pP9aYbq7SEhz6Y+SOw3ekmwj5z04CqOnWFm1s3pxO7lJ+hsM+V59HzfZrdH/Q11PpEM56v3zQMM3rOxvWvZ1KVlOq4eTMD4ithcSWCtJc8yPybNtqWVXbllJvRUqCO9UX2QqxXZVrKCm/KRIQYtHRnkPQyPjHuE0q1sJdFomKLqrdxoeZ2z74oN/Hi7CW8f6xOIxbw0UtexuJbSyEdG+IgMiLWqJuPBpjCk7OEsCz26rxIqH7REASwFtrGV4uvzUWjVEFJx8CuRCPjhWY7hGBJAQevXnzK/lJ3GNOowrueO+hKtRul48WkNyJQDICqOXmfXL6aDDZPemWVHBy5SJMpnxotEDkTgTGIiC1I7ecSuYnqeA++GjwLrTImm6Iliwb5KYXAbHAiu7fkMymCwSHZzcf1gH4fjLP5EYEUiUgNSS1NNL/BYI72vPxHXh2+8xIj/SbCKRDQGroWO+hNSPDXCA4LN+5YaQn+k0EJkTA5nePDDdspAGrT86zuNWDTcwuEOLIgPSbCIxHQC6EjW9bF+Lb1o/jfocJS3BrPYktjobOkyUgv3WJaSohouGCi63ZlnCXLonAJAngWQ49HuePc4KTizlj2vjV52/RFRGYPAGpqRXBUEk8pnOCs7m4Je5IZyLgJAHsaIJtD4aOc4JDe3tT3JHORMBJAhjuujEeX+wttaRmT0EkegK7mND08TgYOjtJQM6Vmzk7XH9rf6yGi0ZPXU9icxIwxTWcAObKxTQWH7znNjWnwwnRL6cJnNVYrIYTzP6S0/FTfEQgkUBcYzHBYTiLukMS6dC14wTiGuMlNTsvj0RPnxt6cDwlipAInCXg902dZ0SjZ5YRESKggoDUGppUsVRFYpQGEZBaMwTnVMORFpQQkFqTNRxNtlSCmxKRWjOwod8sQkEElBCA1mQNN0NJYpQIEYDWDMzKJMGRFJQQkFozMEuEBKcENyUitYYajpHgSAtKCEitoYajrYqU0KZE8LkMmxYbSyUWREAVARKcKtKUTowACY6EoJSAfGk4rjRFSixnCUityRqOpiblrAQUZ5yzXrylchKcYu45m5zghwxusDdzFgBlXCkBzsUbBjfZDqWpUmI5SoALf77ZYnQ+E/iAcb43RylQthURQO326tt1FT2xbhHOjO/K3X4VpU3J5BgBzlm/z/TdK7MdE1xXU0UHFtn/5xzjQNlVRoA/FK5fd1AmFxOcvFi9MPBD1HLPyWs6iIBzBHhtV1PgZ/H40Bd3/sCiI7y4urlO2GLTeVe6IgLpE5CrX3KDb+lsrHwiMfQwwcVvFG5sXsOZXYfR/UvjbnQmAqkSgKi6DGYGsdTqvpFhzjWpiTfefbZyZ/7UgqsZZ3VQ6unEe3RNBEYjAKEdwmPZ92YvnF+aTGwyXNIaLjHC5ZtbL7FPRTbDbRNmbF6SeI+uiUCMAOdhCO0Jn7HkxXB9aWQsKuMKLh54bWur2f1a9AZDiDtsIVbD/bL4PTrnGgGsFMLFW4Ywdpk+Y1f8DTQVCikLLjEy+XJRUv3iMtuOYl05fr3g4jo8711FK6AnUsqea4jkBBTWgT6N3+IZ7LfT/Wzvb7YFsIBl+seEBJcsGbmKJmOnlkVt+2q5Ug6a38+gb28hDF2ARObht5ksHLnpQQBldBxl1YMRgY8w8tSDZ/duYRt/mGL4//BW45pep6x0THBjGSSb4wNvsMsMYc9hUTHHNsRfcJvNgQgvRg05A2uHTceaE9PxewYyK89TkOF8CDYfEPIBAdcsD0sF+GCwCXe5H5jJBZfnoRcfeIS/s/lB3zZ+S5tQ++Iav2NH/P7QL33+4l9UHtigFuaevZafAGDReRzSFbkBFlwxZsEJ6zTzKLxH4W7BNYq8D8D9DDwOwH0ANAYQ4hTun4RbH4KfREx9TBifCkMcQXP4Z9tkR3yW+eeZ+ez/2uvKcT/zx/8DhVYK49t2JgwAAAAASUVORK5CYII="},tvR6:function(t,e){},u5kM:function(t,e,a){"use strict";var s=a("RHWA"),i={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"examineTable boxs",attrs:{"element-loading-background":"rgba(0, 0, 0, 0.5)","element-loading-spinner":"el-icon-loading","element-loading-text":"拼命加载中"}},[s("div",{staticClass:"tableHead"},[s("TimePickerT",{attrs:{value7:t.value7,cant:t.cant},on:{changes:t.changes,deletes:t.deletes,adds:t.adds}}),t._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:t.backOrCurr,expression:"backOrCurr"}],staticClass:"currMonth"},[t._v(t._s(t.month)+"月")]),t._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:!t.backOrCurr,expression:"!backOrCurr"}],staticClass:"backCurrMonth",on:{click:t.backCurr}},[s("img",{attrs:{src:a("x1TH"),width:"1.17vw"}})])],1),t._v(" "),s("div",{staticClass:"tableBox"},[s("div",{staticClass:"tableTit"},[t._l(t.tableT,function(e,a){return s("span",[t._v(t._s(e.label)),s("span",{domProps:{textContent:t._s(e.timearea)}})])}),t._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:"yes"==t.isShowBtns,expression:"isShowBtns=='yes'?true:false"}],staticClass:"editFont",on:{click:t.editSchedule}},[s("i",{staticClass:"edit"}),t._v("自定义班次")])],2),t._v(" "),s("div",{staticClass:"tableBody"},[s("div",{staticClass:"tableH"},[t._m(0),t._v(" "),s("div",{staticClass:"tableRight"},[s("ul",t._l(t.days,function(e,a){return s("li",{staticClass:"item days",class:{noRight:30==a},domProps:{textContent:t._s(e)}})})),t._v(" "),s("ul",{staticClass:"tableShadow"},t._l(t.week,function(e,a){return s("li",{staticClass:"item weeks",class:{noRight:30==a},domProps:{textContent:t._s(e)}})}))])]),t._v(" "),s("div",{staticClass:"tableB"},[s("el-scrollbar",{staticStyle:{height:"100%"},attrs:{noresize:!0}},[s("ul",{staticStyle:{height:"100%",width:"100%"}},[t._l(t.showLists,function(e,a){return s("li",[s("div",{staticClass:"tableBNum item",on:{click:function(e){t.deletess(a)}}},[s("span",{domProps:{textContent:t._s(a+1)}}),t._v(" "),s("i",{staticClass:"el-icon-circle-close",on:{click:function(a){t.deletePaiBan(e.user_id)}}})]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:void 0==e.isNew||!e.isNew,expression:"v.isNew==undefined ||!v.isNew "}],staticClass:"tableBName item",domProps:{textContent:t._s(e.name)}}),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:void 0!==e.isNew&&e.isNew,expression:"v.isNew!==undefined &&v.isNew "}],staticClass:"tableBName item"},[s("SelectBox",{ref:"SelectBox",refInFor:!0,attrs:{options:t.pOptions,placeholder:t.placeholder,value:e.name},on:{change:function(e){return t.change(e,a)}}})],1),t._v(" "),s("div",{staticClass:"tableBDuty item",domProps:{textContent:t._s(e.description)}}),t._v(" "),s("div",{staticClass:"spanBox"},t._l(e.worklist,function(i,n){return s("span",{staticClass:"item ",class:{hover:a==t.over[0]&&n==t.over[1],lefthover:a==t.over[0]&&n==t.over[1]-1,righthover:a==t.over[0]&&n==t.over[1]+1,tophover:a==t.over[0]-1&&n==t.over[1],bottomhover:a==t.over[0]+1&&n==t.over[1],lefttophover:a==t.over[0]-1&&n==t.over[1]-1,righttophover:a==t.over[0]-1&&n==t.over[1]+1,leftbottomhover:a==t.over[0]+1&&n==t.over[1]-1,rightbottomhover:a==t.over[0]+1&&n==t.over[1]+1,spanA:1==i.type,spanB:2==i.type,noRight:30==n,ischangeIng:t.ischange[0]==a&&t.ischange[1]==n},domProps:{textContent:t._s(i.title)},on:{click:function(s){e.allow&&t.changeIschange(a,n,i,e)},mouseover:function(e){t.changeOver(a,n)},mouseout:function(e){t.leaveOver()}}})}))])}),t._v(" "),s("li",[s("div",{directives:[{name:"show",rawName:"v-show",value:"yes"==t.isShowBtns,expression:"isShowBtns=='yes'?true:false"}],staticClass:"addBtns",on:{click:function(e){t.addPerson()}}},[s("i",{staticClass:"el-icon-circle-plus"}),t._v(" "),s("span",[t._v("新增人员")])])])],2)])],1),t._v(" "),s("div",{staticClass:"tableBot0"},[s("div",{staticClass:"tableLeft item tableBot0Left"},[t._v("\n                        每日上班人数\n                    ")]),t._v(" "),s("ul",{staticClass:"tableRight"},t._l(t.total,function(e,a){return s("li",{staticClass:"item",class:{noRight:30==a},domProps:{textContent:t._s(e)}})}))])])]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:"yes"==t.isShowBtns,expression:"isShowBtns=='yes'?true:false"}],staticClass:"tableBot"},[s("div",{directives:[{name:"show",rawName:"v-show",value:"change"==t.active,expression:"active=='change'"}],staticClass:"btnBai1",on:{click:function(e){t.botClick("change")}}},[t._v("\n                修改排班表\n            ")]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:"saveing"==t.active,expression:"active=='saveing'"}],staticClass:"btnBai1",on:{click:function(e){t.botClick("save")}}},[t._v("\n                保存\n            ")])]),t._v(" "),s("Tk",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"isShow"}],ref:"tk",attrs:{lists:t.wOptions,pos:t.pos},on:{change:t.tkChoose}})],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tableLeft"},[a("div",{staticClass:"item nums"},[t._v("序号")]),t._v(" "),a("div",{staticClass:"item names"},[t._v("姓名")]),t._v(" "),a("div",{staticClass:"item works"},[t._v("职务")]),t._v(" "),a("div",{staticClass:"tableHB"},[a("div",{staticClass:"item tableDT"},[t._v("日期")]),t._v(" "),a("div",{staticClass:"item tableDT"},[t._v("星期")])])])}]};var n=function(t){a("TZdD")},o=a("VU/8")(s.a,i,!1,n,"data-v-25c243e9",null);e.a=o.exports},uYjw:function(t,e){},"uc/X":function(t,e){},v7Jf:function(t,e,a){"use strict";var s={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"dealBox",style:{color:this.txt.color},domProps:{textContent:this._s(this.txt.txt)}},[this._v("    \n    状态\n")])},staticRenderFns:[]};var i=a("VU/8")({props:["state"],data:function(){return{txt:{txt:"",color:"#fff"}}},methods:{txts:function(){var t={txt:"",color:"#fff"};switch(this.state.fills){case 0:t.txt="未接单",t.colot="#fff";break;case 1:t.txt="处理中",t.color="#f56c6c";break;case 2:t.txt="已完成",t.color="#4ae283";break;case 3:t.txt="申请退单",t.color="#f56c6c";break;case 4:t.txt="退单完成",t.color="#4ae283"}this.txt=t}},watch:{state:{handler:function(t){this.txts(t.fills)}},deep:!0},created:function(){},mounted:function(){this.txts(this.state.fills)}},s,!1,function(t){a("g9YM")},"data-v-a78d95ca",null);e.a=i.exports},vAPk:function(t,e){},vFCm:function(t,e,a){"use strict";a("KvKp");var s={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"btnBoxss"},[e("button",{class:{active:this.btnss.mouseState},attrs:{type:"button"},on:{click:this.look}},[this._v("查看")]),this._v(" "),e("button",{directives:[{name:"show",rawName:"v-show",value:this.btnss.mouseState,expression:"btnss.mouseState"}],attrs:{type:"button"},on:{click:this.ignore}},[this._v("忽略")])])},staticRenderFns:[]};var i=a("VU/8")({props:["btnss"],data:function(){return{}},methods:{look:function(){this.$emit("look",this.btnss.item)},ignore:function(){this.$emit("ignore",this.btnss.item)}},created:function(){},mounted:function(){}},s,!1,function(t){a("uc/X")},"data-v-7c4979ce",null);e.a=i.exports},vhzq:function(t,e,a){"use strict";var s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"myProgress"},[a("div",{staticClass:"left"},[a("div",{staticClass:"part",style:{color:t.colorVal},domProps:{textContent:t._s(t.tit)}}),t._v(" "),a("div",{staticClass:"part",style:{color:t.colorVal},domProps:{textContent:t._s(t.val)}})]),t._v(" "),a("div",{staticClass:"right"},[a("div",{staticClass:"now",style:[{backgroundColor:t.colorVal},{width:t.per}]})])])},staticRenderFns:[]};var i=a("VU/8")({components:{},name:"selfProgress2",props:["tit","per","val"],data:function(){return{colorVal:""}},computed:{},methods:{myRender:function(){var t="#fff";switch(this.tit){case"总":t="#88b8ff";break;case"开":t="#2df0e0";break;case"故":t="#fa6074";break;case"未":t="#999"}this.colorVal=t}},created:function(){this.myRender()},mounted:function(){}},s,!1,function(t){a("fbJJ")},"data-v-6efdf0f0",null);e.a=i.exports},vkG9:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_exports__.a={components:{},name:"selfPopover3",props:["device_id"],data:function(){return{info:[]}},methods:{requestTuLiDeviceInfo:function requestTuLiDeviceInfo(device_id){var _this=this,that=this,config={device_id:device_id},headers={};this.$http.get("/currency/device/info",config,headers).then(function(res){var data=res.data;if(console.log("获取图例设备信息",config,res),0==data.code){var tempArr=[];if(0!==data.data.length){var content=data.data[0].content,dataArr=eval(content);dataArr.map(function(t,e){for(var a in t){var s={};s.tit=a,s.content=t[a],tempArr.push(s)}})}_this.info=tempArr}else _this.$message(data.message)}).catch(function(t){_this.$message(t)})},getInfo:function(){this.requestTuLiDeviceInfo(this.device_id)}},created:function(){},mounted:function(){}}},vwA9:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAvdJREFUWAm1l71rVEEUxXc3ipgQtfAjiqYxaiKIRUoLNZVRQdDC+A/4gaVaBAS1UKwUKzsLGyFICOKSSqKVFkZBg6gQEPGzEA3GBCVm/Z24Y67z3ry3+/L2wmFm7j3n3tk3783MFgoZrFKplEBrBmlEUox4YhwU24j7ANgPNoM1YBGYBh/BUzAEysVi8SttPkbhTjAIarUpiJfBigXNgARFcA7MgCz2BVFvLZOILAHCZoQ3waGYBGP47oF34BtYDbQ8e8A6YG2WwRmW5Ip1JvYprl9+G/g2gKMrJCYmXQ94CHw7FtJF/CjPe+oJxvsixAQH/FPALt0vxjsTJH9DkLo8oYpvSxXGENAdBL+Bs1d09NWEDcKQY1fbvWF2eoQc/V6+E0EVxA6PPBAk1xggXxN4YfKOB6WQThuiup1Bch0B8hz28sYvKaT7hvi8jhqJVHK2gGmTu98XlKqODhPQd56LsQf8INEjk2yT6c91dahoEm0moE0mT7P5/M2qoOLa+ZpMxQnTz6Nr8y3zE5Z4TJM4p0xAJ12eZvN99hO7d0BHqrPIOrlAxtbm++DncBMYNYHe6nthXNm65FmPcrtR2zrzbohHgDVdPBZsJDxrkmprXhWblMByMGnIz+i7pxOrSXOiXwl0njhL/rxhXXDMansprUgojl6f910v344Qf84PuRV88kTHE0UxQfQ6A657eQZjqFEXol1A57e1awy0V6QavDYwbMX0Z8HWVLEjQD7qJdDwPTgJ7DftJAX8W8BFYN8jhv9sjF6sNnInVFbIfTQ3wFKNjemep8PqLdAO5+6Euhf6NoPDXkJeMu5h47N7jq+ZHzOJbvAY1Gt65LdAO3jgiV8z1t5Qm0HWZbMPjII0+wnhDuh22enrOLZHPcPKOGh3nNglcEHbItrAWBdU/TNaC/TnQ3u7+2c0zOP9zvg/Q9eCowzsxfQN493w1TbeNAkwAqw9aXxlU4HKzWDEzEBLtthQGt+loCZRBnpRrza+YqACxZe40B9msevHoyNURgAAAABJRU5ErkJggg=="},wt55:function(t,e){},"x+wv":function(t,e,a){"use strict";(function(t){e.a={components:{},data:function(){return{floorNumber:"11",floorNumber1:"2018",room:[],ballroom:[],dining:[],others:[],roomY:[],ballroomY:[],diningY:[],othersY:[],chart:{},xData:"",SelesData:[],daysData:[],monthsData:[],legendDay:[],legendMonth:[]}},mounted:function(){this.selDateLinkage(),this.getChartData(),this.getSelesData()},watch:{},methods:{selDateLinkage:function(){2==this.floorNumber?this.floorNumber1%4==0&&this.floorNumber1%100!=0||this.floorNumber1%400==0?this.xData=29:this.xData=28:4==this.floorNumber||6==this.floorNumber||9==this.floorNumber||11==this.floorNumber?this.xData=30:this.xData=31},getSelesData:function(){var e=this;this.$http.post("/hotel/get_year",{}).then(function(a){console.log(a),t.each(a.data.data,function(t,a){e.SelesData.push({valueX:a})}),console.log(e.SelesData)},function(t){})},getDataChooseMonth:function(){this.selDateLinkage(),console.log(this.xData),console.log(this.floorNumber),this.getChartData()},getDataChooseYear:function(){this.selDateLinkage(),console.log(this.xData),console.log(this.floorNumber1),this.getChartData()},getChartData:function(){var e=this,a=this.floorNumber;Number(this.floorNumber)<=9&&(a="0"+Number(this.floorNumber)),this.$http.post("/hotel/statement",{month:a,year:e.floorNumber1}).then(function(a){console.log(a.data.data);var s=a.data.data.day_data,i=a.data.data.month_data;e.legendDay=[],e.legendMonth=[],e.daysData=new Array(s.length),e.monthsData=new Array(i.length),t.each(e.daysData,function(t,a){e.daysData[t]=[]}),t.each(e.monthsData,function(t,a){e.monthsData[t]=[]}),t.each(s,function(a,s){e.legendDay.push(s.label),t.each(s.data,function(t,s){e.daysData[a].push([parseInt(t),parseInt(s)])})}),t.each(i,function(a,s){e.legendMonth.push(s.label),t.each(s.data,function(t,s){e.monthsData[a].push([parseInt(t),parseInt(s)])})}),t.each(e.daysData,function(t,e){e.sort(function(t,e){return t[0]-e[0]})}),t.each(e.monthsData,function(t,e){e.sort(function(t,e){return t[0]-e[0]})}),e.getData("reportChartMonth",e.xData,e.legendDay,e.daysData),e.getData("reportChartYear",12,e.legendMonth,e.monthsData)},function(t){})},getData:function(e,a,s,i){for(var n=[],o=["#55F8F0","#FD991B","#1B7FFD","#F26666","#000","#e4393c"],r=["rgba(48, 241, 225, .4)","rgba(253, 153, 27, .4)","rgba(27, 127, 253, .4)","rgba(238, 76, 76, .4)"],l=0;l<i.length;l++)n.push({name:s[l],data:i[l],type:"line",symbol:"circle",symbolSize:0,smooth:!0,lineStyle:{normal:{width:2,shadowColor:r[l],shadowBlur:5,shadowOffsetY:5}}});this.chart=this.$echarts.init(document.getElementById(e));var c={title:{show:!0,text:"单位：元/￥",left:15,top:5,textStyle:{color:"#008AFF",fontSize:"12",fontWeight:"normal"}},tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}},formatter:function(e,s,i){var n="",r="";return t.each(e,function(t,e){0==t&&(n=e.axisValue),r+='<b style="width:10px;height:10px;display:inline-block;border-radius:6px;margin-right:2px;margin-bottom:-1px;background:'+o[t]+'"></b>'+e.seriesName+" : "+e.data[1]+"<br/>"}),n+=12==a?" 月":" 日",console.log(n),n+"<br/>"+r}},grid:{left:10,top:35,right:10,bottom:4,containLabel:!0},legend:{textStyle:{color:"#B5D7FF"},top:5,itemWidth:20,itemHeight:10,data:s},calculable:!0,xAxis:{type:"value",min:1,max:a,interval:1,axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!1},axisLabel:{interval:0,textStyle:{color:"#708FBE"}}},yAxis:{axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!1},axisLabel:{show:!1},splitArea:{show:!0,areaStyle:{color:["rgba(142,187,255,.1)","rgba(142,187,255,.05)"]}},type:"value"},series:n,color:["#55F8F0","#FD991B","#1B7FFD","#F26666"]};this.chart.setOption(c,!0),c={}}}}}).call(e,a("7t+N"))},x1TH:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAeCAYAAABNChwpAAAAAXNSR0IArs4c6QAAAihJREFUSA3FlrtKA0EUhhMvqKiNeMFGQVCDhaWIlYKghYpgIXYWWvgCFlYi6CMECwtt7Gy8ECE2FmqhGAtBG68ICoqIeE9C/I6ZhM1mN2azm+TAl5nZOXP+f2czm7hcFiMSiRTDvMVlzqQjXAl+OHemooUqiNZDACQCFpbaT0XQA9eirOLAftVohYL/CiHYRc4eNGpyvzR9W92UBhAfpvoOVOlUPnXjjIemBhCfouoalBlUd2wH3AbFXYjLMZsxmlPXrmh3QdbHCNG/hUuQ+TO32/1Em34gXATL4ESEKbIP09D0rwuSKmAbshEhinqhxtAIE3VwBNmOFwR6E0xwoRkusq2sqf9FfyhugsGGZjJX3TeE/t4rcgxHYTPuKDedcmS8IvV3DHFTSH8RJuRiDsNTJGKc1zDNJEbuaGch3fgh8RTk3N/DA5RANcg3vh1awCzGkiYwMQFybFKFfJt7oDSpgO4COa2wBEHQh1+XHh2SNQDv+mzNWHbKUrBWDD9pakj3xrQIkx3wKFkGYdmACFGnE7Q78WFqQC0we0dkZEDVnNPcUGoDaoHRW9KOgVoMfCsTzyl3IDZJsvxO+NQiaTI2oG5qXdU6Mf0/EBOXlmP6RjMIKzJ2II5Vjcu0DEgyJkIwTndBxjZD3h0Sh9HG4ifbN2JxSUI66/vVI+hOmMjVAPE+eIXitB+Bw+bkt8fHIw3my0ADBlblpvJlQP5pb4mBvATPvi0m/AuK9cSZWozoCAAAAABJRU5ErkJggg=="},xJhD:function(t,e,a){"use strict";(function(t){var s=a("+1Ri"),i=(a.n(s),a("KvKp")),n=a("5aSO"),o=a("u5kM"),r=a("mtWM");a.n(r);e.a={components:{Examine:n.a,ScheduleTable:o.a},computed:{crumbs:function(){return["代维系统","排班表"]}},data:function(){return{activeName:"first",examData1:[],examData2:[],indexNow:-1,dia:{},editDatas:[{}],options:[],paibanList:[],exportTable:"",topDate:""}},methods:{addSchedule:function(){this.editDatas.push({})},editSchedule:function(){this.$refs.edit.show()},handleClick:function(t,e){var a=this.activeName;this.$router.replace({path:"/AgentManage/schedule/"+a})},search:function(t,e){1==e?this.getNoData(t):2==e&&this.getYesData(t),console.log(t,e)},isNo:function(t,e){t.state=0,this.$refs.dialog.hide(),this.dealSchedule(11,t.id,e)},isOk:function(t,e){t.state=1,this.$refs.dialog.hide(),this.dealSchedule(2,t.id,e)},dealSchedule:function(t,e,a){var s=this;this.$http.post("/pc_ims/admin/dispose_work",{type:t,id:e}).then(function(t){s.examData1.splice(a,1),s.getNoData(),s.getYesData()})},showInfo:function(t,e){this.dia=t,this.dia.index=e,this.$refs.dialog.show()},showInfoed:function(t){this.dia=t,this.$refs.dialog.show()},exportTableList:function(){window.open("https://tesing.china-tillage.com/pc_ims/down/admin_work_list?year="+this.topDate.split("-")[0]+"&month="+this.topDate.split("-")[1]+"&Authorization="+this.$store.state.userInfoTotal.userinfo.password+"_"+this.$store.state.projectId+"_"+this.$store.state.userId)},getYesData:function(e){var a=this;this.$http.post("/pc_ims/admin/approve_work",{key_word:e}).then(function(e){if(0==e.data.code){var s=e.data.data;t.each(s,function(t,e){2==s[t].now_process?s[t].state=1:11==s[t].now_process&&(s[t].state=0)}),a.examData2=s}else a.$message({type:"error",message:e.data.msg})})},getNoData:function(e){var a=this;this.$http.post("/pc_ims/admin/get_worklist",{key_word:e}).then(function(e){if(0==e.data.code){var s=e.data.data;t.each(s,function(t,e){s[t].state=-1,s[t].olde_workdate=s[t].oldworkdate,s[t].new_workdate=s[t].newworkdate}),a.examData1=s}else a.$message({type:"error",message:e.data.msg})})},saveAddPaiBan:function(t){var e=this;this.$http.post("/pc_ims/set_work",t).then(function(t){0==t.data.code?(e.$message({type:"success",message:t.data.msg}),e.getPaibanData()):e.$message({type:"error",message:t.data.msg})})},getPaiBanData:function(e){var a=this;e||(e=i.a.time(new Date/1e3,9)),this.topDate=e,this.$http.post("/pc_ims/admin/work_list",{year:e.split("-")[0],month:e.split("-")[1]}).then(function(e){if(0==e.data.code){var s=e.data.data;t.each(s,function(t,e){s[t].allow=!1}),a.paibanList=e.data.data}else a.$message({type:"error",message:e.data.msg})})}},created:function(){var t=this.$router.history.current.fullPath.split("/AgentManage/schedule")[1];this.activeName=""==t?"first":t.split("/")[1]},mounted:function(){this.getNoData(),this.getYesData(),this.getPaiBanData()}}}).call(e,a("7t+N"))},xV7d:function(t,e,a){"use strict";var s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"dealBox"},[0==t.btnss.item.now_state?a("div",{staticClass:"dealBtn"},[a("span",{staticStyle:{color:"#3B89F9","text-decoration":"underline"},on:{click:function(e){return e.stopPropagation(),t.agree(e)}}},[t._v("接单")]),t._v(" "),a("span",{on:{click:function(e){return e.stopPropagation(),t.refult(e)}}},[t._v("退单")])]):1==t.btnss.item.now_state||2==t.btnss.item.now_state||3==t.btnss.item.now_state?a("div",{staticClass:"dealBtn"},[a("span",{staticStyle:{color:"#3B89F9","text-decoration":"underline"},on:{click:function(e){return e.stopPropagation(),t.refult(e)}}},[t._v("退单")])]):a("span",[t._v("-")])])},staticRenderFns:[]};var i=a("VU/8")({props:["btnss"],computed:{},data:function(){return{}},methods:{agree:function(){this.$emit("agree",this.btnss,1)},refult:function(){this.$emit("refult",this.btnss,5)}},created:function(){},mounted:function(){}},s,!1,function(t){a("Mo2Z")},"data-v-604053a8",null);e.a=i.exports},xfIW:function(t,e,a){"use strict";var s=a("Hzvb"),i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"addTemp"},[a("div",{staticClass:"addtitle"},[t._v(t._s(t.title))]),t._v(" "),a("div",{staticClass:"addCont"},[a("el-row",[a("el-col",{attrs:{span:8}},[a("el-row",[a("el-col",{staticClass:"addContLabel",attrs:{span:6}},[t._v("\n            专业"),a("i",[t._v("*")])]),t._v(" "),t.formvals1.departments?a("el-col",{staticClass:"addContInput",attrs:{span:18}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:t.change2},model:{value:t.formval.department,callback:function(e){t.$set(t.formval,"department",e)},expression:"formval.department"}},t._l(t.formvals1.departments,function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.value}})}))],1):t._e()],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-row",[a("el-col",{staticClass:"addContLabel",attrs:{span:6}},[t._v("\n            巡检人员"),a("i",[t._v("*")])]),t._v(" "),t.formvals1.examine?a("el-col",{staticClass:"addContInput",attrs:{span:18}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.formval.exam,callback:function(e){t.$set(t.formval,"exam",e)},expression:"formval.exam"}},t._l(t.formvals1.examine,function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.value}})}))],1):t._e()],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-row",[a("el-col",{staticClass:"addContLabel",attrs:{span:6}},[t._v("\n            完成时限\n          ")]),t._v(" "),a("el-col",{staticClass:"addContInput",style:{color:"#fff"},attrs:{span:18}},[a("el-input",{style:{width:"90%"},attrs:{placeholder:"请输入完成时限"},model:{value:t.formval.time_limit,callback:function(e){t.$set(t.formval,"time_limit",e)},expression:"formval.time_limit"}}),t._v("日\n          ")],1)],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-row",[a("el-col",{staticClass:"addContLabel",attrs:{span:6}},[t._v("\n            巡检系统"),a("i",[t._v("*")])]),t._v(" "),t.formvals1.systems?a("el-col",{staticClass:"addContInput",attrs:{span:18}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:t.change4},model:{value:t.formval.system,callback:function(e){t.$set(t.formval,"system",e)},expression:"formval.system"}},t._l(t.formvals1.systems,function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.value}})}))],1):t._e()],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-row",[a("el-col",{staticClass:"addContLabel",attrs:{span:6}},[t._v("\n            巡检区域"),a("i",[t._v("*")])]),t._v(" "),t.formvals1.areas?a("el-col",{staticClass:"addContInput",attrs:{span:18}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:t.change5},model:{value:t.formval.area,callback:function(e){t.$set(t.formval,"area",e)},expression:"formval.area"}},t._l(t.formvals1.areas,function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.value}})}))],1):t._e()],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-row",[a("el-col",{staticClass:"addContLabel",attrs:{span:6}},[t._v("\n            巡检设备\n          ")]),t._v(" "),t.formvals1.devices?a("el-col",{staticClass:"addContInput",attrs:{span:18}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:t.change6},model:{value:t.formval.device,callback:function(e){t.$set(t.formval,"device",e)},expression:"formval.device"}},t._l(t.formvals1.devices,function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.value}})}))],1):t._e()],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-row",[a("el-col",{staticClass:"addContLabel",attrs:{span:6}},[t._v("\n            开始时间"),a("i",[t._v("*")])]),t._v(" "),a("el-col",{staticClass:"addContInput",attrs:{span:18}},[a("el-date-picker",{attrs:{type:"date",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:t.formval.starttime,callback:function(e){t.$set(t.formval,"starttime",e)},expression:"formval.starttime"}})],1)],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-row",[a("el-col",{staticClass:"addContLabel",attrs:{span:6}},[t._v("\n            结束时间"),a("i",[t._v("*")])]),t._v(" "),a("el-col",{staticClass:"addContInput",attrs:{span:18}},[a("el-date-picker",{attrs:{type:"date",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:t.formval.endtime,callback:function(e){t.$set(t.formval,"endtime",e)},expression:"formval.endtime"}})],1)],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-row",[a("el-col",{staticClass:"addContLabel",attrs:{span:6}},[t._v("\n            巡检周期"),a("i",[t._v("*")])]),t._v(" "),t.formvals1.periods?a("el-col",{staticClass:"addContInput",attrs:{span:18}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.formval.period,callback:function(e){t.$set(t.formval,"period",e)},expression:"formval.period"}},t._l(t.formvals1.periods,function(t,e){return a("el-option",{key:e,attrs:{multiple:!0,label:t.label,value:t.value}})}))],1):t._e()],1)],1)],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-row",[a("el-col",{staticClass:"addContLabel",attrs:{span:6}},[t._v("\n            采集数据点\n          ")]),t._v(" "),t.formvals1.datas?a("el-col",{staticClass:"addContInput",attrs:{span:18}},[a("el-select",{attrs:{multiple:"",placeholder:"请选择"},model:{value:t.formval.data,callback:function(e){t.$set(t.formval,"data",e)},expression:"formval.data"}},t._l(t.formvals1.datas,function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.value}})}))],1):t._e()],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-row",[a("el-col",{staticClass:"addContLabel",attrs:{span:6}},[t._v("\n            巡检地点\n          ")]),t._v(" "),a("el-col",{staticClass:"addContInput",attrs:{span:18}},[a("el-input",{attrs:{placeholder:"请输入巡检地点"},model:{value:t.formval.addr,callback:function(e){t.$set(t.formval,"addr",e)},expression:"formval.addr"}})],1)],1)],1)],1),t._v(" "),a("div",{staticClass:"addContDesc"},[a("div",{staticClass:"addContLabel"},[t._v("备注")]),t._v(" "),a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入备注内容"},model:{value:t.formval.desc,callback:function(e){t.$set(t.formval,"desc",e)},expression:"formval.desc"}})],1),t._v(" "),a("el-row",{staticClass:"btngroups"},[a("el-button",{staticClass:"cancel btns",on:{click:t.cancelAdd}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary btns"},on:{click:t.saveAdd}},[t._v("保存")])],1)],1)])},staticRenderFns:[]};var n=function(t){a("qnEF")},o=a("VU/8")(s.a,i,!1,n,"data-v-3badd768",null);e.a=o.exports},xoxN:function(t,e){},yGdn:function(t,e){},ybYj:function(t,e,a){"use strict";var s={name:"treeMenus",props:{list:Array},data:function(){return{scopesDefault:[],scopes:[]}},methods:{changeStatus:function(t,e){console.log(t,e),1==this.scopesDefault[t]?this.$set(this.scopesDefault,t,!1):this.$set(this.scopesDefault,t,this.scopes[t])},scope:function(){var t=this;this.list.forEach(function(e,a){t.scopesDefault[a]=!1,"cList"in e?(t.scopes[a]=!0,console.log(e,a)):t.scopes[a]=!1})}},created:function(){this.scope()},watch:{list:function(t,e){alert(222222222),this.scope()}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ul",{staticClass:"tree-in"},t._l(t.list,function(e,s){return a("li",{key:s},[a("p",{on:{click:function(a){t.changeStatus(s,e.checked)}}},[a("el-checkbox",{model:{value:e.checked,callback:function(a){t.$set(e,"checked",a)},expression:"item.checked"}},[t._v(t._s(e.name))]),t._v(" "),e.hasOwnProperty("cList")&&0!==e.cList.length?a("span",{class:["icon-point",{active:t.scopesDefault[s]}]}):t._e()],1),t._v(" "),t.scopesDefault[s]?a("tree-menus",{attrs:{list:e.cList}}):t._e()],1)}))},staticRenderFns:[]};var n={components:{myTrees:a("VU/8")(s,i,!1,function(t){a("gxOK")},null,null).exports},props:["loopRenderData"],data:function(){return{list:[]}},methods:{},mounted:function(){}},o={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"treeBox"},[e("my-trees",{attrs:{list:this.loopRenderData}})],1)},staticRenderFns:[]};var r=a("VU/8")(n,o,!1,function(t){a("ESRJ")},null,null);e.a=r.exports},yivU:function(t,e,a){"use strict";a("KvKp");var s={props:["table"],components:{MyRender:a("pG9R").a},data:function(){return{tableData:{}}},watch:{table:{handler:function(t,e){t&&this.$set(this.tableData,t)},deep:!0}},methods:{handleCurrentChange:function(t){this.$emit("changePage",t)},rowClick:function(t,e,a){this.$emit("rowClick",t)},rowEnter:function(t,e,a,s){this.$emit("rowEnter",t)},rowLeave:function(t,e,a,s){this.$emit("rowLeave",t)}},created:function(){},mounted:function(){this.tableData=this.table}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tableBox",class:{padding0:t.tableData}},[a("el-table",{staticStyle:{width:"100%"},attrs:{size:t.table.small,height:t.table.hei,data:t.tableData.data},on:{"row-click":t.rowClick,"cell-mouse-enter":t.rowEnter,"cell-mouse-leave":t.rowLeave}},t._l(t.tableData.th,function(e,s){return a("el-table-column",{key:s,attrs:{prop:e.prop,"show-overflow-tooltip":!1,label:e.label,width:e.wid,"min-width":e.minWid},scopedSlots:t._u([{key:"default",fn:function(s){return[e.operate?a("my-render",{attrs:{row:s.row,render:e.render}}):a("span",[t._v("\n                "+t._s(s.row[e.prop])+"\n              ")])]}}])})}))],1)},staticRenderFns:[]};var n=a("VU/8")(s,i,!1,function(t){a("tL9H")},"data-v-63a62b87",null);e.a=n.exports},yqZi:function(t,e,a){"use strict";var s=a("KvKp"),i={props:["table"],components:{MyRender:a("pG9R").a},data:function(){return{}},methods:{handleCurrentChange:function(t){this.$emit("changePage",t)},rowClick:function(t,e,a){this.$emit("rowClick",t)},rowEnter:function(t,e,a,s){this.$emit("rowEnter",t)},rowLeave:function(t,e,a,s){this.$emit("rowLeave",t)}},created:function(){for(var t=this.table.th,e=t.length,a=[],i=0;i<e;i++){var n=t[i];void 0==t[i].wid?n.wid="auto":n.wid=s.a.wid(Number(n.wid)),a.push(n)}this.table.th=a,void 0==this.table.hei?this.table.hei="auto":this.table.hei=s.a.hei(Number(this.table.hei)),void 0==this.table.pageSize&&(this.table.pageSize=20),void 0==this.table.operate&&(this.table.operate=!0),void 0==this.table.page&&(this.table.page=1),void 0==this.table.small&&(this.table.small="")}},n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tableBox",class:{padding0:void 0!=t.table.len}},[a("el-table",{staticStyle:{width:"100%"},attrs:{size:t.table.small,height:t.table.hei,data:t.table.data},on:{"row-click":t.rowClick,"cell-mouse-enter":t.rowEnter,"cell-mouse-leave":t.rowLeave}},t._l(t.table.th,function(e,s){return a("el-table-column",{key:s,attrs:{prop:e.prop,"show-overflow-tooltip":!0,label:e.label,width:e.wid},scopedSlots:t._u([{key:"default",fn:function(s){return[e.operate?a("my-render",{attrs:{row:s.row,render:e.render}}):a("span",[t._v("\n                "+t._s(s.row[e.prop])+"\n              ")])]}}])})})),t._v(" "),void 0!=t.table.showPagination?a("div",{staticClass:"pageBoxs"},[a("el-pagination",{attrs:{"current-page":t.table.page,"pager-count":5,"page-size":t.table.pageSize,layout:"prev, pager, next, jumper",total:t.table.len},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.$set(t.table,"page",e)}}}),t._v(" "),a("span",{staticClass:"totalPage"},[t._v("共"+t._s(parseInt(t.table.len/20)+(t.table.len%20!=0?1:0))+"页")])],1):t._e()],1)},staticRenderFns:[]};var o=a("VU/8")(i,n,!1,function(t){a("SU70")},"data-v-eafd50f0",null);e.a=o.exports},z3di:function(t,e,a){"use strict";var s=a("bOdI"),i=a.n(s),n={props:["datas"],computed:{titShow:function(){var t=!0;return void 0!==this.datas.titShow&&(this.datas.titShow||(t=!1)),t}},data:function(){return{num:0,legends:[{img:a("pLEv")},{img:a("VIz/")},{img:a("eoWE")}],color:[{color1:"rgba(0,138,255,1)",color2:"rgba(0,138,255,.65)"},{color1:"rgba(46,204,223,1)",color2:"rgba(46,204,223,0.69)"},{color1:"rgba(55, 42, 191,1)",color2:"rgba(55, 42, 191,0.69)"}]}},methods:{drawLine:function(){for(var t,e=this.$echarts.init(document.getElementById(this.datas.id)),a=[],s=this.datas,n=s.list.length,o=0;o<n;o++){var r={name:s.list[o].name,data:s.list[o].data,type:"line",smooth:!0,symbol:"circle",symbolSize:9,showSymbol:!1,itemStyle:{color:this.color[o].color1,borderColor:"#fff",borderWidth:2,shadowColor:this.color[o].color2,shadowBlur:1},areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:this.color[o].color1},{offset:1,color:"transparent"}],globalCoord:!1}}};a.push(r)}var l={dataZoom:[{show:!1},{type:"inside",realtime:!0,start:0,end:100}],grid:{top:void 0===this.titShow||this.titShow?"29%":"5%",left:"0%",right:"0%",bottom:"0%",containLabel:!0},tooltip:(t={trigger:"axis",axisPointer:{snap:!0,lineStyle:{opacity:1,color:"#fff"}},backgroundColor:"#fff",formatter:function(t){for(var e="",a=t.length,s=0;s<a;s++){e+='<span style = "padding:0 4px;color:'+t[s].color+'">'+t[s].value+"</span>"}return"<span>"+e+"</span>"}},i()(t,"backgroundColor","#fff"),i()(t,"confine",!0),i()(t,"padding",[12,28]),i()(t,"textStyle",{fontFamily:"PingFangSC-Regular",fontSize:"0.14rem",color:"#000"}),i()(t,"extraCssText","box-shadow: 0px 1px 10px 0px rgba(0, 0, 0, 0.5);border-radius:4px"),t),xAxis:{position:"top",type:"category",axisLabel:{show:!0,textStyle:{color:"#708FBE"},fontSize:10},data:this.datas.xDate},yAxis:{type:"value",axisLine:{show:!1},axisTick:{show:!1},axisLabel:{show:!1},splitLine:{show:!1},splitArea:{show:!1}},series:a};e.setOption(l)}},created:function(){},mounted:function(){this.drawLine()}},o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"myChartBox"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.titShow,expression:"titShow"}],staticClass:"head"},[a("div",{staticClass:"title",domProps:{textContent:t._s(this.datas.title)}}),t._v(" "),a("div",{staticClass:"legend"},t._l(this.datas.list,function(e,s){return a("div",{staticClass:"item"},[a("img",{attrs:{src:t.legends[s].img,alt:""}}),t._v(" "),a("span",{staticClass:"text",domProps:{textContent:t._s(e.name)}})])}))]),t._v(" "),a("div",{staticClass:"body"},[a("div",{staticClass:"myChart",style:this.datas.style,attrs:{id:this.datas.id}})])])},staticRenderFns:[]};var r=a("VU/8")(n,o,!1,function(t){a("31FA")},"data-v-97f8c930",null);e.a=r.exports},"zG/v":function(t,e,a){"use strict";(function(t){e.a={name:"manualOperation",data:function(){return{toPageNum:1,totalPageNum:1,total:0,tableData:[],pagesize:20,currentPage:1,currPage:1}},mounted:function(){this.getData()},methods:{getData:function(){var e=this;this.$http.get("hvac_pc/pc/manual/control/record",{pagenumber:this.currentPage,pagesize:this.pagesize}).then(function(a){console.log(a),e.tableData=a.data.data,t.each(e.tableData,function(t,a){a.indexs=(e.currentPage-1)*e.pagesize+1+t}),e.totalPageNum=Math.ceil(a.data.data.length/e.pagesize)},function(t){})},toInputPage:function(){this.currentPage=Number(this.currPage),this.getData()},handleSizeChange:function(t){this.pagesize=t},handleCurrentChange:function(t){this.currentPage=Number(t),this.currPage=this.currentPage,this.getData()}}}}).call(e,a("7t+N"))},zJUL:function(t,e){},zc6Y:function(t,e){},zccD:function(t,e,a){"use strict";var s=a("bOdI"),i=a.n(s),n=(a("mtWM"),{props:{isResize:{type:Number}},data:function(){return{revenueCharts1:{},loading:!0,occupancy:"",shui:{},dian:{},qi:{},revenInterval:null,currentTypeId:1,percentData:""}},components:{},mounted:function(){this.initData()},watch:{isResize:function(){this.revenueCharts2.resize()}},destroyed:function(){clearInterval(this.revenInterval)},methods:{deletCli:function(){this.$emit("deletClick",{self_id:17,componentsName:"RevenueData"})},initData:function(){var t=this;this.$http.get("/index_pc/pc/model",{self_id:17}).then(function(e){0==e.data.code&&(console.log(e),e.data.data.data.map(function(t){for(var e=0;e<t.time.length;e++)t.time[e]=t.time[e].split("/")[1]}),t.shui=e.data.data.data[1],t.dian=e.data.data.data[0],t.qi=e.data.data.data[2],t.percentData=e.data.data.data[1].energy,t.occupancy=e.data.data.occupancy+"%",t.drawEchart2(t.shui),t.loading=!1,t.revenInterval=setInterval(function(){t.revenueCharts2.clear();var e={};switch(t.currentTypeId){case 0:t.currentTypeId=1,e=t.shui,t.percentData=t.shui.energy;break;case 1:t.currentTypeId=2,e=t.qi,t.percentData=t.qi.energy;break;case 2:t.currentTypeId=0,e=t.dian,t.percentData=t.dian.energy}t.drawEchart2(e)},5e3))}).catch(function(t){console.log(t)})},drawEchart2:function(t){this.revenueCharts2=this.$echarts.init(document.getElementById("revenueEcharts2"));var e=t,a={title:{text:0==e.type?"电":1==e.type?"水":"气",textStyle:{fontSize:10,color:"white"},backgroundColor:"rgba(113,166,241,1)"},tooltip:{trigger:"axis",position:function(t,e,a,s,i){var n={top:60};return n[["left","right"][+(t[0]<i.viewSize[0]/2)]]=5,n}},grid:{top:24,bottom:20,left:10,right:10},legend:i()({data:["每餐位用能均值","每房用能均值"],orient:"horizontal",right:0,padding:0,textStyle:{color:"#eeeff1",fontSize:8},top:6,itemGap:0,itemWidth:14,width:200},"padding",1),calculable:!0,xAxis:[{type:"category",boundaryGap:!1,nameTextStyle:{color:"#f8f8f6"},axisLine:{lineStyle:{color:"#bfc7ca"}},axisTick:{show:!1},data:e.time}],yAxis:[{show:!1,type:"value"}],series:[{name:"每餐位用能均值",type:"line",smooth:!0,showSymbol:!1,lineStyle:{color:"#3af2e6",shadowBlur:6,shadowOffsetY:2,shadowColor:"#3af2e6"},data:e.restaurant},{name:"每房用能均值",type:"line",smooth:!0,showSymbol:!1,lineStyle:{color:"#f96074",shadowBlur:6,shadowOffsetY:2,shadowColor:"#f96074"},data:e.Room}],color:["#3af2e6","#f96074"]};this.revenueCharts2.setOption(a)},drawEchart3:function(){var t=this.$echarts.init(document.getElementById("revenueEcharts3"));this.revenueCharts3=t;t.setOption({series:[{type:"liquidFill",data:[.6,.5,.4,.3]}]})}}}),o={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"revenueComponent",attrs:{"element-loading-background":"rgba(0, 0, 0, 0.5)","element-loading-spinner":"el-icon-loading","element-loading-text":"拼命加载中"}},[s("div",{staticClass:"title"},[s("span",{staticClass:"titleIcon"}),t._v(" "),s("span",{staticClass:"txt"},[t._v("营收数据分析")]),t._v(" "),s("img",{attrs:{src:a("Ilry"),alt:""},on:{click:t.deletCli}})]),t._v(" "),s("div",{staticClass:"con"},[s("div",{staticClass:"con-top"},[s("div",{staticClass:"revenueEcharts1",attrs:{id:"revenueEcharts1"}},[s("div",{staticClass:"name"},[t._v("用能营收占比")]),t._v(" "),s("div",{staticClass:"percent"},[s("div",{staticClass:"mounts",style:"width:"+t.percentData+"%;"},[s("span",{domProps:{textContent:t._s(t.percentData+"%")}})])])]),t._v(" "),s("div",{staticClass:"revenueEcharts2",attrs:{id:"revenueEcharts2"}})]),t._v(" "),s("div",{staticClass:"revenueEcharts3",attrs:{id:"revenueEcharts3"}},[s("div",{staticClass:"name"},[t._v("当前入住率")]),t._v(" "),s("div",{staticClass:"pic"},[s("div",{staticClass:"containerBor"},[s("div",{staticClass:"container"},[s("div",{staticClass:"wave"}),t._v(" "),s("div",{staticClass:"info"},[s("span",[t._v("入住率")]),t._v(" "),s("span",{domProps:{textContent:t._s(t.occupancy)}})])])])])])])])},staticRenderFns:[]};var r=a("VU/8")(n,o,!1,function(t){a("AHEx")},"data-v-a1c62278",null);e.a=r.exports},"zhb+":function(t,e,a){"use strict";var s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"dealBox"},[0==t.btnss.item.now_state?a("div",{staticClass:"dealBtn"},[a("span",{staticStyle:{color:"#3B89F9","text-decoration":"underline"},on:{click:function(e){return e.stopPropagation(),t.agree(e)}}},[t._v("接单")]),t._v(" "),a("span",[a("span",{on:{click:function(e){return e.stopPropagation(),t.refult(e)}}},[t._v("退单")])])]):a("div",{staticClass:"dealBtn"},[a("span",[t._v("-")])])])},staticRenderFns:[]};var i=a("VU/8")({props:["btnss"],computed:{},data:function(){return{}},methods:{agree:function(){this.$emit("agree",this.btnss,1)},refult:function(){this.$emit("refult",this.btnss,5)}},watch:{btnss:{handler:function(t){},deep:!0}},created:function(){},mounted:function(){}},s,!1,function(t){a("oiaV")},"data-v-54527e48",null);e.a=i.exports},zlSF:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.f0ccc2779c8bbf9b2a5d.js.map